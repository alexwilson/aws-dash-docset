<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Monitoring Your CPU Credits - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="t2-instances.html" title="T2 Instances">
      <link rel="prev" href="t2-how-to.html" title="Working With T2 Instances">
      <link rel="next" href="general-purpose-instances.html" title="General Purpose Instances">
      <meta name="description" content="You can see the credit balance for each T2 instance in the Amazon EC2 per-instance metrics of the CloudWatch console.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/t2-instances-monitoring-cpu-credits.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/ec2">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="Instances.html">Amazon EC2 Instances</a> &#xBB; <a href="instance-types.html">Instance Types</a> &#xBB; <a href="t2-instances.html">T2 Instances</a> &#xBB; <span class="breadcrumb">Monitoring Your CPU Credits</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="t2-instances-monitoring-cpu-credits">Monitoring Your CPU Credits</h1>
                     <p>You can see the credit balance for each T2 instance in the Amazon EC2 per-instance
                        metrics of
                        the CloudWatch console.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#t2-cw-metrics">Additional CloudWatch Metrics for T2 Instances</a></li>
                           <li><a href="#t2-calculating-credit-use">Calculating CPU Credit Usage</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="t2-cw-metrics">Additional CloudWatch Metrics for T2 Instances</h2>
                     
                     <p>T2 instances have four additional CloudWatch metrics, which are updated every five
                        minutes:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><code class="code">CPUCreditUsage</code> &#x2013; The number of CPU credits spent during the
                                 measurement period.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">CPUCreditBalance</code> &#x2013; The number of  CPU credits that a T2
                                 instance has accrued. This balance is depleted when the CPU bursts and CPU credits
                                 are spent more quickly than they are earned.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">CPUSurplusCreditBalance</code> &#x2013; The number of surplus CPU credits
                                 spent to sustain CPU performance when the <code class="code">CPUCreditBalance</code> is
                                 zero.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">CPUSurplusCreditsCharged</code> &#x2013; The number of surplus CPU
                                 credits that exceed the <a href="t2-credits-baseline-concepts.html#t2-credit-table">maximum number of CPU
                                    credits</a> that can be earned in a 24-hour period, and thus attract an
                                 additional charge.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>The last two metrics apply only to T2 instances configured as <code class="code">unlimited</code>. 
                     </p>
                     
                     <p>The following table describes the CloudWatch metrics for T2 instances. For more information
                        about using these metrics in CloudWatch, see <a href="viewing_metrics_with_cloudwatch.html">List the Available CloudWatch Metrics for Your
                           Instances</a>.
                     </p>
                     
                     <div class="table"><a id="t2-CW-metrics-table"></a><div class="table-contents">
                           <table id="w185aac17c11c23c25b6c11">
                              
                              <tbody><tr>
                                 
                                 <th>Metric</th>
                                 
                                 <th>Description</th>
                                 
                              </tr>
                               
                              
                              <tr>
                                 
                                 <td><code class="code">CPUCreditUsage</code></td>
                                 
                                 <td>
                                    
                                    <p>[T2 instances] The number of CPU credits spent by the instance for CPU
                                       utilization. One CPU credit equals one vCPU running at 100% utilization
                                       for one minute or an equivalent combination of vCPUs, utilization, and time
                                       (for example, one vCPU running at 50% utilization for two minutes or two
                                       vCPUs running at 25% utilization for two minutes).
                                    </p>
                                    
                                    <p>CPU credit metrics are available at a five-minute frequency only. If you
                                       specify a period greater than five minutes, use the <code class="code">Sum</code>
                                       statistic instead of the <code class="code">Average</code> statistic.
                                    </p>
                                    
                                    <p>Units: Credits (vCPU-minutes)</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td><code class="code">CPUCreditBalance</code></td>
                                 
                                 <td>
                                    
                                    <p>[T2 instances] The number of earned CPU credits that an instance has
                                       accrued since it was launched or started. For T2 Standard, the
                                       <code class="code">CPUCreditBalance</code> also includes the number of launch
                                       credits that have been accrued.
                                    </p>
                                    
                                    <p>Credits are accrued in the credit balance after they are earned, and
                                       removed from the credit balance when they are spent. The credit balance has
                                       a maximum limit, determined by the instance size. Once the limit is reached,
                                       any new credits that are earned are discarded. For T2 Standard, launch
                                       credits do not count towards the limit.
                                    </p>
                                    
                                    <p>The credits in the <code class="code">CPUCreditBalance</code> are available for the
                                       instance to spend to burst beyond its baseline CPU utilization.
                                    </p>
                                    
                                    <p>When an instance is running, credits in the <code class="code">CPUCreditBalance</code>
                                       do not expire. When the instance stops, the <code class="code">CPUCreditBalance</code>
                                       does not persist, and all accrued credits are lost.
                                    </p>
                                    
                                    <p>CPU credit metrics are available at a five-minute frequency only.</p>
                                    
                                    <p>Units: Credits (vCPU-minutes)</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td><code class="code">CPUSurplusCreditBalance</code>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>[T2 Unlimited instances] The number of surplus credits that have been
                                       spent by a T2 Unlimited instance when its <code class="code">CPUCreditBalance</code> is
                                       zero.
                                    </p>
                                    
                                    <p>The <code class="code">CPUSurplusCreditBalance</code> is paid down by earned CPU
                                       credits. If the number of surplus credits exceeds the maximum number of
                                       credits the instance can earn in a 24-hour period, the spent surplus credits
                                       above the maximum incur an additional charge.
                                    </p>
                                    
                                    <p>Units: Credits (vCPU-minutes) </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td><code class="code">CPUSurplusCreditsCharged</code></td>
                                 
                                 <td>
                                    
                                    <p>[T2 Unlimited instances] The number of spent surplus credits that are not
                                       paid down by earned CPU credits, and thus incur an additional
                                       charge.
                                    </p>
                                    
                                    <p>Spent surplus credits are charged when any of the following occurs: </p>
                                    
                                    <div class="itemizedlist">
                                       
                                       
                                       
                                       
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             
                                             <p>The spent surplus credits exceed the maximum number of credits the
                                                instance can earn in a 24-hour period. Spent surplus credits above the
                                                maximum are charged at the end of the hour.
                                             </p>
                                             
                                          </li>
                                          <li class="listitem">
                                             
                                             <p>The instance is stopped or terminated.</p>
                                             
                                          </li>
                                          <li class="listitem">
                                             
                                             <p>The instance is switched from Unlimited to Standard.</p>
                                             
                                          </li>
                                       </ul>
                                    </div>
                                    
                                    <p>Units: Credits (vCPU-minutes) </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                     
                     
                     <h2 id="t2-calculating-credit-use">Calculating CPU Credit Usage</h2>
                     
                     <p>The CPU credit usage of T2 Standard and T2 Unlimited instances is calculated using
                        the T2
                        instance CloudWatch metrics described in the preceding table. 
                     </p>
                     
                     
                     <p>Amazon EC2 sends the metrics to CloudWatch every five minutes. A reference to a <em>prior</em> value of a metric at any point in time implies the
                        previous value of the metric, sent <em>five minutes
                           ago</em>.
                     </p>
                     
                     <h3 id="t2-std-calculation">Calculating CPU Credit Usage for T2 Standard</h3>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>The CPU credit balance increases if CPU utilization is below the baseline, when credits
                                 spent
                                 are less than credits earned in the prior five-minute interval. 
                              </p>
                           </li>
                           <li class="listitem">
                              <p>The CPU credit balance decreases if CPU utilization is above the baseline, when credits
                                 spent
                                 are more than credits earned in the prior five-minute interval. 
                              </p>
                           </li>
                        </ul>
                     </div>
                     
                     <p>Mathematically, this is captured by the following equation:</p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">CPUCreditBalance = prior CPUCreditBalance + [Credits earned per hour * (5/60) - CPUCreditUsage]</code></pre></div>
                     </div>
                     
                     <p>The size of the instance determines the number of credits that the instance can earn
                        per
                        hour and the number of earned credits it can accrue in the credit balance. For
                        information about the number of credits earned per hour, and the credit balance limit
                        for each T2 instance size, see <a href="t2-credits-baseline-concepts.html#t2-credit-table">the T2 credit
                           table</a>.
                     </p>
                     
                     <p class="title"><b>Example</b></p>
                     
                     <p>This example uses a <code class="code">t2.micro</code> instance. To calculate the
                        <code class="code">CPUCreditBalance</code> of the instance,  use the preceding equation as
                        follows:
                     </p>
                       
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p><code class="code">CPUCreditBalance</code> &#x2013; The current credit balance to calculate.
                              </p>
                           </li>
                           <li class="listitem">
                              <p><code class="code">prior CPUCreditBalance</code> &#x2013; The credit balance five minutes ago. In this
                                 example, the instance had accrued two credits.
                              </p>
                           </li>
                           <li class="listitem">
                              <p><code class="code">Credits earned per hour</code> &#x2013; A <code class="code">t2.micro</code> instance earns six
                                 credits per hour.
                              </p>
                           </li>
                           <li class="listitem">
                              <p><code class="code">5/60</code> &#x2013; Represents the five-minute interval between CloudWatch metric
                                 publication. Multiply the credits earned per hour by 5/60 (five minutes) to get
                                 the number of credits the instance earned in the past five minutes. A
                                 <code class="code">t2.micro</code> instance earns 0.5 credits every five minutes.
                              </p>
                           </li>
                           <li class="listitem">
                              <p><code class="code">CPUCreditUsage</code> &#x2013; How many credits the instance spent in the past five
                                 minutes. In this example, the instance spent one credit in the past five
                                 minutes.
                              </p>
                           </li>
                        </ul>
                     </div>
                     
                     <p>Using these values, you can calculate the <code class="code">CPUCreditBalance</code> value:
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">CPUCreditBalance = 2 + [0.5 - 1] = 1.5</code></pre></div>
                     </div>    
                     
                     
                     
                     <h3 id="t2-unlimited-calculation">Calculating CPU Credit Usage for T2 Unlimited</h3>
                     
                     <p>When a T2 instance needs to burst above the baseline, it always spends it accrued
                        credits
                        before spending surplus credits. When it depletes its accrued CPU credit balance,
                        it
                        can spend surplus credits to burst for as long as it needs. When CPU utilization
                        falls below the baseline, surplus credits are always paid down before the instance
                        accrues earned credits.
                     </p>
                     
                     <p>We use the term <code class="code">Adjusted balance</code> in the following equations to reflect the
                        activity that occurs in this five-minute interval. We use this value to arrive at
                        the
                        values for the <code class="code">CPUCreditBalance</code> and <code class="code">CPUSurplusCreditBalance</code>
                        CloudWatch metrics. 
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Adjusted balance = [prior CPUCreditBalance - prior CPUSurplusCreditBalance] + [Credits earned per hour * (5/60) - CPUCreditUsage]</code></pre></div>
                     </div>
                     
                     <p>A value of <code class="code">0</code> for <code class="code">Adjusted balance</code> indicates that the
                        instance spent all its earned credits for bursting, and no surplus credits were
                        spent. As a result, both <code class="code">CPUCreditBalance</code> and
                        <code class="code">CPUSurplusCreditBalance</code> are set to <code class="code">0</code>.
                     </p>
                     
                     <p>A positive <code class="code">Adjusted balance</code> value indicates that the instance accrued earned
                        credits, and previous surplus credits, if any, were paid down. As a result, the
                        <code class="code">Adjusted balance</code> value is assigned to <code class="code">CPUCreditBalance</code>,
                        and the <code class="code">CPUSurplusCreditBalance</code> is set to <code class="code">0</code>. The instance
                        size determines the <a href="t2-credits-baseline-concepts.html#t2-credit-table">maximum number of credits</a>
                        it can accrue.
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">CPUCreditBalance = min [max earned credit balance, Adjusted balance]
CPUSurplusCreditBalance = 0</code></pre></div>
                     </div>
                     
                     <p>A negative <code class="code">Adjusted balance</code> value indicates that the instance spent all its
                        earned credits that it accrued and, in addition, also spent surplus credits for
                        bursting. As a result, the <code class="code">Adjusted balance</code> value is assigned to
                        <code class="code">CPUSurplusCreditBalance</code> and the <code class="code">CPUCreditBalance</code> is set
                        to <code class="code">0</code>. Again, the instance size determines the <a href="t2-credits-baseline-concepts.html#t2-credit-table">maximum number of credits</a> it can accrue.
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">CPUSurplusCreditBalance = min [max earned credit balance, -Adjusted balance]
CPUCreditBalance = 0</code></pre></div>
                     </div>
                     
                     <p>If the surplus credits spent exceed the maximum credits the instance can accrue, the
                        surplus credit balance is set to the maximum as shown in the preceding equation. The
                        remaining surplus credits are charged as represented by the
                        <code class="code">CPUSurplusCreditsCharged</code> metric.
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">CPUSurplusCreditsCharged = max [-Adjusted balance - max earned credit balance, 0]</code></pre></div>
                     </div>
                     
                     <p>Finally, when the instance terminates, any surplus credits tracked by the
                        <code class="code">CPUSurplusCreditBalance</code> are charged. If the instance is switched from
                        Unlimited to Standard, any remaining <code class="code">CPUSurplusCreditBalance</code> is also
                        charged.
                     </p>
                     
                     
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="t2-how-to.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="general-purpose-instances.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Additional CloudWatch Metrics for T2 Instances"><a class="pagetoc" href="#t2-cw-metrics">Additional CloudWatch Metrics for T2 Instances</a></li>
                        <li class="pagetoc" name="Calculating CPU Credit Usage"><a class="pagetoc" href="#t2-calculating-credit-use">Calculating CPU Credit Usage</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>