<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Create Alarms That Stop, Terminate, Reboot, or Recover an
         Instance - Amazon Elastic Compute Cloud
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="using-cloudwatch.html" title="Monitoring Your Instances Using CloudWatch">
      <link rel="prev" href="using-cloudwatch-createalarm.html" title="Create a CloudWatch Alarm for an Instance">
      <link rel="next" href="automating_with_cloudwatch_events.html" title="Automating Amazon EC2 with CloudWatch Events">
      <meta name="description" content="Create CloudWatch alarms that automatically stop, terminate, reboot, or recover your Amazon EC2 instances.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/UsingAlarmActions.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/ec2">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="monitoring_ec2.html">Monitoring Amazon EC2</a> &#xBB; <a href="using-cloudwatch.html">Monitoring Your Instances Using CloudWatch</a> &#xBB; <span class="breadcrumb">Create Alarms That Stop, Terminate, Reboot, or Recover an
                                    Instance</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="UsingAlarmActions">Create Alarms That Stop, Terminate, Reboot, or Recover an
                        Instance
                     </h1>
                     <p>Using Amazon CloudWatch alarm actions, you can create alarms that automatically stop,
                        terminate,
                        reboot, or recover your instances. You can use the stop or terminate actions to help
                        you save
                        money when you no longer need an instance to be running. You can use the reboot and
                        recover
                        actions to automatically reboot those instances or recover them onto new hardware
                        if a system
                        impairment occurs.
                     </p>
                     <p>The <code class="code">AWSServiceRoleForCloudWatchEvents</code> service-linked role enables AWS to perform alarm 
                        actions on your behalf. The first time you create an alarm in the 
                        AWS Management Console, the IAM CLI, or the IAM API, CloudWatch
                        creates the service-linked role for you.
                     </p>
                     <p>There are a number of scenarios in which you might want to automatically stop or terminate
                        your instance. For example, you might have instances dedicated to batch payroll processing
                        jobs
                        or scientific computing tasks that run for a period of time and then complete their
                        work. Rather
                        than letting those instances sit idle (and accrue charges), you can stop or terminate
                        them,
                        which can help you to save money. The main difference between using the stop and the
                        terminate
                        alarm actions is that you can easily restart a stopped instance if you need to run
                        it again
                        later, and you can keep the same instance ID and root volume. However, you cannot
                        restart a
                        terminated instance. Instead, you must launch a new instance.
                     </p>
                     <p>You can add the stop, terminate, reboot, or recover actions to any alarm that is set
                        on an
                        Amazon EC2 per-instance metric, including basic and detailed monitoring metrics provided
                        by Amazon CloudWatch
                        (in the <code class="code">AWS/EC2</code> namespace), as well as any custom metrics that include the
                        <code class="code">InstanceId</code> dimension, as long as its value refers to a valid running Amazon EC2
                        instance.
                     </p>
                     
                     <p class="title"><b>Console Support</b></p>
                     
                     <p>You can create alarms using the Amazon EC2 console or the CloudWatch console.
                        The procedures in this documentation use the Amazon EC2 console. 
                        For procedures that use the CloudWatch console, see <a href="./AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" target="_blank">Create Alarms That Stop, Terminate, Reboot, or Recover an Instance</a>
                        in the <em>Amazon CloudWatch User Guide</em>.
                     </p>
                     
                     
                     <p class="title"><b>Permissions</b></p>
                     
                     <p>If you are an AWS Identity and Access Management (IAM) user, you must have the following
                        permissions to create or
                        modify an alarm:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><code class="code">ec2:DescribeInstanceStatus</code> and <code class="code">ec2:DescribeInstances</code> &#x2013;
                                 For all alarms on Amazon EC2 instance status metrics
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">ec2:StopInstances</code> &#x2013; For alarms with stop actions
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">ec2:TerminateInstances</code> &#x2013; For alarms with terminate actions
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>No specific permissions are needed for alarms with recover actions</p>
                              
                           </li>
                        </ul>
                     </div>
                     <p>If you have read/write permissions for Amazon CloudWatch but not for Amazon EC2, you
                        can still create an
                        alarm but the stop or terminate actions won&apos;t be performed on the Amazon EC2 instance.
                        However, if
                        you are later granted permission to use the associated Amazon EC2 APIs, the alarm
                        actions you created
                        earlier are performed. For more information about IAM permissions, see <a href="./IAM/latest/UserGuide/PermissionsAndPolicies.html" target="_blank">Permissions and Policies</a> in the
                        <em>IAM User Guide</em>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Contents</strong></p>
                        <ul>
                           <li><a href="#AddingStopActions">Adding Stop Actions to Amazon CloudWatch Alarms</a></li>
                           <li><a href="#AddingTerminateActions">Adding Terminate Actions to Amazon CloudWatch Alarms</a></li>
                           <li><a href="#AddingRebootActions">Adding Reboot Actions to Amazon CloudWatch Alarms</a></li>
                           <li><a href="#AddingRecoverActions">Adding Recover Actions to Amazon CloudWatch Alarms</a></li>
                           <li><a href="#ViewAlarmHistory">Using the Amazon CloudWatch Console to View Alarm and Action
                                 History</a></li>
                           <li><a href="#AlarmActionScenarios">Amazon CloudWatch Alarm Action Scenarios</a></li>
                        </ul>
                     </div>
                     <h2 id="AddingStopActions">Adding Stop Actions to Amazon CloudWatch Alarms</h2>
                     
                     
                     
                     <p>You can create an alarm that stops an Amazon EC2 instance when a certain threshold
                        has been
                        met. For example, you may run development or test instances and occasionally forget
                        to shut
                        them off. You can create an alarm that is triggered when the average CPU utilization
                        percentage has been lower than 10 percent for 24 hours, signaling that it is idle
                        and no
                        longer in use. You can adjust the threshold, duration, and period to suit your needs,
                        plus you
                        can add an Amazon Simple Notification Service (Amazon SNS) notification so that you
                        receive an email when the alarm is
                        triggered.
                     </p>
                     
                     <p>Instances that use an Amazon EBS volume as the root device can be stopped or
                        terminated, whereas instances that use the instance store as the root device can only
                        be
                        terminated.
                     </p>
                     
                     
                     <p class="title"><b>To create an alarm to stop an idle instance using the Amazon EC2 console</b></p>
                     <ol>
                        <li> 
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p> 
                        </li>
                        <li>
                           
                           <p>In the navigation pane, choose <b>Instances</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select the instance. On the <b>Monitoring</b> tab, choose 
                              <b>Create Alarm</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Create Alarm</b> dialog box, do the following:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>To receive an email when the alarm is triggered, for <b>Send a notification
                                       to</b>, choose an existing Amazon SNS topic, or choose <b>create
                                       topic</b> to create a new one.
                                 </p>
                                 
                                 
                                 <p>To create a new topic, for <b>Send a notification to</b>,
                                    type a name for the topic, and then for <b>With these recipients</b>,
                                    type the email addresses of the recipients (separated by commas). After you
                                    create the alarm, you will receive a subscription confirmation email that you must
                                    accept before you can get notifications for this topic.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Take the action</b>, <b>Stop this
                                       instance</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Whenever</b>, choose the statistic you want to use and
                                    then choose the metric. In this example, choose <b>Average</b> and
                                    <b>CPU Utilization</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Is</b>, specify the metric threshold. In this example, type
                                    <b>10</b> percent.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>For at least</b>, specify the evaluation period for the alarm.
                                    In this example, type <b>24</b> consecutive period(s) of <b>1
                                       Hour</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>To change the name of the alarm, for <b>Name of alarm</b>, type a new
                                    name. Alarm names must contain only ASCII characters.
                                 </p>
                                 
                                 
                                 <p>If you don&apos;t type a name for the alarm, Amazon CloudWatch automatically creates one
                                    for
                                    you.
                                 </p>
                                 
                                 
                                 <div class="aws-note">
                                    <p class="aws-note">Note</p>
                                    <p>You can adjust the alarm configuration based on your own requirements before
                                       creating the alarm, or you can edit them later. This includes the metric, threshold,
                                       duration, action, and notification settings. However, after you create an alarm, you
                                       cannot edit its name later.
                                    </p>
                                 </div>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Create Alarm</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="AddingTerminateActions">Adding Terminate Actions to Amazon CloudWatch Alarms</h2>
                     
                     
                     <p>You can create an alarm that terminates an EC2 instance automatically when a certain
                        threshold has been met (as long as termination protection is not enabled for the instance).
                        For example, you might want to terminate an instance when it has completed its work,
                        and you
                        don&#x2019;t need the instance again. If you might want to use the instance later, you should
                        stop
                        the instance instead of terminating it. For information on enabling and disabling
                        termination
                        protection for an instance, see <a href="./AWSEC2/latest/UserGuide/Using_ChangingDisableAPITermination.html" target="_blank">Enabling Termination Protection
                           for an Instance</a> in the <em>Amazon EC2 User Guide for Linux Instances</em>.
                     </p>
                     
                     
                     <p class="title"><b>To create an alarm to terminate an idle instance using the Amazon EC2 console</b></p>
                     <ol>
                        <li> 
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p> 
                        </li>
                        <li>
                           
                           <p>In the navigation pane, choose <b>Instances</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select the instance. On the <b>Monitoring</b> tab, choose 
                              <b>Create Alarm</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Create Alarm</b> dialog box, do the following:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>To receive an email when the alarm is triggered, for <b>Send a notification
                                       to</b>, choose an existing Amazon SNS topic, or choose <b>create
                                       topic</b> to create a new one.
                                 </p>
                                 
                                 
                                 <p>To create a new topic, for <b>Send a notification to</b>,
                                    type a name for the topic, and then for <b>With these recipients</b>,
                                    type the email addresses of the recipients (separated by commas). After you
                                    create the alarm, you will receive a subscription confirmation email that you must
                                    accept before you can get notifications for this topic.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Take the action</b>, <b>Terminate this
                                       instance</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Whenever</b>, choose a statistic and then choose the metric. 
                                    In this example, choose <b>Average</b> and <b>CPU Utilization</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Is</b>, specify the metric threshold. In this example, type
                                    <b>10</b> percent.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>For at least</b>, specify the evaluation period for the alarm.
                                    In this example, type <b>24</b> consecutive period(s) of <b>1
                                       Hour</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>To change the name of the alarm, for <b>Name of alarm</b>, type a new
                                    name. Alarm names must contain only ASCII characters.
                                 </p>
                                 
                                 <p>If you don&apos;t type a name for the alarm, Amazon CloudWatch automatically creates one
                                    for
                                    you.
                                 </p>
                                 
                                 <div class="aws-note">
                                    <p class="aws-note">Note</p>
                                    <p>You can adjust the alarm configuration based on your own requirements before
                                       creating the alarm, or you can edit them later. This includes the metric, threshold,
                                       duration, action, and notification settings. However, after you create an alarm, you
                                       cannot edit its name later.
                                    </p>
                                 </div>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Create Alarm</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="AddingRebootActions">Adding Reboot Actions to Amazon CloudWatch Alarms</h2>
                     
                     
                     <p>You can create an Amazon CloudWatch alarm that monitors an Amazon EC2 instance and
                        automatically reboots the
                        instance. The reboot alarm action is recommended for Instance Health Check failures
                        (as
                        opposed to the recover alarm action, which is suited for System Health Check failures).
                        An
                        instance reboot is equivalent to an operating system reboot. In most cases, it takes
                        only a
                        few minutes to reboot your instance. When you reboot an instance, it remains on the
                        same
                        physical host, so your instance keeps its public DNS name, private IP address, and
                        any data on
                        its instance store volumes.
                     </p>
                     
                     <p>Rebooting an instance doesn&apos;t start a new instance billing <span>period (with a minimum one-minute charge)</span>, unlike
                        stopping and restarting your instance. For more information, see <a href="./AWSEC2/latest/UserGuide/ec2-instance-reboot.html" target="_blank">Reboot Your Instance</a> in the
                        <em>Amazon EC2 User Guide for Linux Instances</em>.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>To avoid a race condition between the reboot and recover actions, avoid setting the
                           same
                           number of evaluation periods for a reboot alarm and a recover alarm. We recommend
                           that you
                           set reboot alarms to three evaluation periods of one minute each. For more information,
                           see
                           <a href="./AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html#alarm-evaluation" target="_blank">Evaluating an
                              Alarm</a> in the <em>Amazon CloudWatch User Guide</em>.
                        </p>
                     </div>
                     
                     
                     <p class="title"><b>To create an alarm to reboot an instance using the Amazon EC2 console</b></p>
                     <ol>
                        <li> 
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p> 
                        </li>
                        <li>
                           
                           <p>In the navigation pane, choose <b>Instances</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select the instance. On the <b>Monitoring</b> tab, choose 
                              <b>Create Alarm</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Create Alarm</b> dialog box, do the following:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>To receive an email when the alarm is triggered, for <b>Send a notification
                                       to</b>, choose an existing Amazon SNS topic, or choose <b>create
                                       topic</b> to create a new one.
                                 </p>
                                 
                                 
                                 <p>To create a new topic, for <b>Send a notification to</b>,
                                    type a name for the topic, and for <b>With these recipients</b>,
                                    type the email addresses of the recipients (separated by commas). After you
                                    create the alarm, you will receive a subscription confirmation email that you must
                                    accept before you can get notifications for this topic.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Select <b>Take the action</b>, <b>Reboot this
                                       instance</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Whenever</b>, choose <b>Status Check Failed
                                       (Instance)</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>For at least</b>, specify the evaluation period for the alarm.
                                    In this example, type <b>3</b> consecutive period(s) of <b>1
                                       Minute</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>To change the name of the alarm, for <b>Name of alarm</b>, type
                                    a new name. Alarm names must contain only ASCII characters.
                                 </p>
                                 
                                 
                                 <p>If you don&apos;t type a name for the alarm, Amazon CloudWatch automatically creates one
                                    for
                                    you.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Create Alarm</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="AddingRecoverActions">Adding Recover Actions to Amazon CloudWatch Alarms</h2>
                     
                     
                     <p>You can create an Amazon CloudWatch alarm that monitors an Amazon EC2 instance. If
                        the instance becomes
                        impaired due to an underlying hardware failure or a problem that requires AWS involvement
                        to
                        repair, you can automatically recover the instance. Terminated instances cannot be
                        recovered.
                        A recovered instance is identical to the original instance, including the instance
                        ID, private
                        IP addresses, Elastic IP addresses, and all instance metadata.
                     </p>
                     
                     
                     <p>When the <code class="code">StatusCheckFailed_System</code> alarm is triggered, and the recover action
                        is initiated, you are notified by the Amazon SNS topic that you chose when you created
                        the alarm
                        and associated the recover action. During instance recovery, the instance is migrated
                        during
                        an instance reboot, and any data that is in-memory is lost. When the process is complete,
                        information is published to the SNS topic you&apos;ve configured for the alarm. Anyone
                        who is
                        subscribed to this SNS topic receives an email notification that includes the status
                        of the
                        recovery attempt and any further instructions. You notice an instance reboot on the
                        recovered
                        instance.
                     </p>
                     
                     
                     <p>The recover action can be used only with <code class="code">StatusCheckFailed_System</code>, not with <code class="code">StatusCheckFailed_Instance</code>.
                     </p>
                     
                     
                     <p>The following problems can cause system status checks to fail:</p> 
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Loss of network connectivity</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Loss of system power</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Software issues on the physical host</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Hardware issues on the physical host that impact network reachability</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <p>The recover action is supported only on instances with the following characteristics:</p> 
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Use a C3, C4, C5, M3, M4, M5, R3, R4, T2, or X1 instance type</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Run in a VPC (not EC2-Classic)</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Use shared tenancy (the tenancy attribute is set to <code class="code">default</code>)
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Use EBS volumes only (do not configure instance store volumes). For more information,
                                 see 
                                 <a href="https://aws.amazon.com/premiumsupport/knowledge-center/recover-this-instance-cloudwatch-enable/" target="_blank">&apos;Recover this instance&apos; is disabled</a>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <p>If your instance has a public IP address, it retains the public IP address after recovery.</p>
                     
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>To avoid a race condition between the reboot and recover actions, avoid setting the
                           same
                           number of evaluation periods for a reboot alarm and a recover alarm. We recommend
                           that you
                           set recover alarms to two evaluation periods of one minute each. For more information,
                           see
                           <a href="./AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html#alarm-evaluation" target="_blank">Evaluating an
                              Alarm</a> in the <em>Amazon CloudWatch User Guide</em>.
                        </p>
                     </div>
                     
                     
                     <p class="title"><b>To create an alarm to recover an instance using the Amazon EC2 console</b></p>
                     <ol>
                        <li> 
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p> 
                        </li>
                        <li>
                           
                           <p>In the navigation pane, choose <b>Instances</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select the instance. On the <b>Monitoring</b> tab, choose 
                              <b>Create Alarm</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Create Alarm</b> dialog box, do the following:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>To receive an email when the alarm is triggered, for <b>Send a notification
                                       to</b>, choose an existing Amazon SNS topic, or choose <b>create
                                       topic</b> to create a new one.
                                 </p>
                                 
                                 
                                 <p>To create a new topic, for <b>Send a notification to</b>,
                                    type a name for the topic, and for <b>With these recipients</b>,
                                    type the email addresses of the recipients (separated by commas). After you
                                    create the alarm, you will receive a subscription confirmation email that you must
                                    accept before you can get email for this topic.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Select <b>Take the action</b>, <b>Recover this
                                       instance</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Whenever</b>, choose <b>Status Check Failed
                                       (System)</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>For at least</b>, specify the evaluation period for the alarm.
                                    In this example, type <b>2</b> consecutive period(s) of <b>1
                                       Minute</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>To change the name of the alarm, for <b>Name of alarm</b>, type
                                    a new name. Alarm names must contain only ASCII characters.
                                 </p>
                                 
                                 <p>If you don&apos;t type a name for the alarm, Amazon CloudWatch automatically creates one
                                    for
                                    you.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Create Alarm</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="ViewAlarmHistory">Using the Amazon CloudWatch Console to View Alarm and Action
                        History
                     </h2>
                     
                     
                     <p>You can view alarm and action history in the Amazon CloudWatch console. Amazon CloudWatch
                        keeps the last two
                        weeks&apos; worth of alarm and action history.
                     </p>
                     
                     
                     <p class="title"><b>To view the history of triggered alarms and actions</b></p>
                     <ol>
                        <li> 
                           <p>Open the CloudWatch console at
                              <a href="https://console.aws.amazon.com/cloudwatch/" target="_blank">https://console.aws.amazon.com/cloudwatch/</a>.
                           </p> 
                        </li>
                        <li>
                           
                           <p>In the navigation pane, choose <b>Alarms</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select an alarm.</p>
                           
                        </li>
                        <li>
                           
                           <p>The <b>Details</b> tab shows the most recent state
                              transition along with the time and metric values.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the <b>History</b> tab to view the most recent history
                              entries.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <h2 id="AlarmActionScenarios">Amazon CloudWatch Alarm Action Scenarios</h2>
                     
                     
                     <p>You can use the Amazon EC2 console to create alarm actions that stop or terminate
                        an Amazon EC2
                        instance when certain conditions are met. In the following screen capture of the console
                        page
                        where you set the alarm actions, we&apos;ve numbered the settings. We&apos;ve also numbered
                        the settings
                        in the scenarios that follow, to help you create the appropriate actions.
                     </p>
                     
                     
                     <div class="mediaobject">
                        
                        <img src="../../..//img/CreateAlarmFor.png" alt="
        Create Alarm for dialog box
      ">
                        
                        
                        
                     </div>
                     
                     
                     
                     <h3 id="StopIdleInstance">Scenario 1: Stop Idle Development and Test
                        Instances
                     </h3>
                     
                     
                     <p>Create an alarm that stops an instance used for software development or testing when
                        it
                        has been idle for at least an hour.
                     </p>
                     
                     
                     <div class="table">
                        <div class="table-contents">
                           <table id="w185aac19c19c25c31b6b5">
                              
                              <tbody><tr>
                                 
                                 <th>Setting</th>
                                 
                                 <th>Value</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Stop</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>2</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Maximum</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>3</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>CPUUtilization</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>4</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>&lt;=</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>5</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>10%</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>6</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>60 minutes</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>7</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                     
                     
                     
                     
                     
                     <h3 id="StopLowUtilizationInstance">Scenario 2: Stop Idle Instances</h3>
                     
                     
                     <p>Create an alarm that stops an instance and sends an email when the instance has been
                        idle for 24 hours.
                     </p>
                     
                     
                     <div class="table">
                        <div class="table-contents">
                           <table id="w185aac19c19c25c31b8b5">
                              
                              <tbody><tr>
                                 
                                 <th>Setting</th>
                                 
                                 <th>Value</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Stop and email</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>2</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Average</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>3</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>CPUUtilization</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>4</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>&lt;=</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>5</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>5%</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>6</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>60 minutes</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>7</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>24</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                     
                     
                     
                     
                     
                     <h3 id="StopHighWebTraffic">Scenario 3: Send Email About Web Servers with Unusually
                        High Traffic
                     </h3>
                     
                     
                     <p>Create an alarm that sends email when an instance exceeds 10 GB of outbound network
                        traffic per day.
                     </p>
                     
                     
                     <div class="table">
                        <div class="table-contents">
                           <table id="w185aac19c19c25c31c10b5">
                              
                              <tbody><tr>
                                 
                                 <th>Setting</th>
                                 
                                 <th>Value</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Email</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>2</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Sum</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>3</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>NetworkOut</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>4</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>&gt;</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>5</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>10 GB</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>6</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1 day</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>7</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                     
                     
                     
                     
                     
                     <h3 id="StopHighWebTraffic2">Scenario 4: Stop Web Servers with Unusually High Traffic</h3>
                     
                     
                     <p>Create an alarm that stops an instance and send a text message (SMS) if outbound traffic
                        exceeds 1 GB per hour.
                     </p>
                     
                     
                     <div class="table">
                        <div class="table-contents">
                           <table id="w185aac19c19c25c31c12b5">
                              
                              <tbody><tr>
                                 
                                 <th>Setting</th>
                                 
                                 <th>Value</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Stop and send SMS</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>2</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Sum</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>3</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>NetworkOut</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>4</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>&gt;</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>5</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1 GB</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>6</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1 hour</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>7</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                     
                     
                     
                     
                     
                     <h3 id="StopMemoryLeak">Scenario 5: Stop an Instance Experiencing a Memory Leak</h3>
                     
                     
                     <p>Create an alarm that stops an instance when memory utilization reaches or exceeds
                        90%,
                        so that application logs can be retrieved for troubleshooting.
                     </p>
                     
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>The MemoryUtilization metric is a custom metric. In order to use the MemoryUtilization
                           metric, you must install the Perl scripts for Linux instances. For more information,
                           see
                           <a href="./AWSEC2/latest/UserGuide/mon-scripts.html" target="_blank">Monitoring Memory and Disk Metrics for Amazon EC2
                              Linux Instances</a>.
                        </p>
                     </div>
                     
                     
                     <div class="table">
                        <div class="table-contents">
                           <table id="w185aac19c19c25c31c14b7">
                              
                              <tbody><tr>
                                 
                                 <th>Setting</th>
                                 
                                 <th>Value</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Stop</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>2</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Maximum</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>3</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>MemoryUtilization</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>4</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>&gt;=</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>5</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>90%</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>6</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1 minute</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>7</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                     
                     
                     
                     
                     
                     <h3 id="StopImpairedInstance">Scenario 6: Stop an Impaired Instance</h3>
                     
                     
                     <p>Create an alarm that stops an instance that fails three consecutive status checks
                        (performed at 5-minute intervals).
                     </p>
                     
                     
                     <div class="table">
                        <div class="table-contents">
                           <table id="w185aac19c19c25c31c16b5">
                              
                              <tbody><tr>
                                 
                                 <th>Setting</th>
                                 
                                 <th>Value</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Stop</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>2</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Average</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>3</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>StatusCheckFailed_System</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>4</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>&gt;=</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>5</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>6</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>15 minutes</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>7</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                     
                     
                     
                     
                     
                     <h3 id="TerminateBatchProcesses">Scenario 7: Terminate Instances When Batch
                        Processing Jobs Are Complete
                     </h3>
                     
                     
                     <p>Create an alarm that terminates an instance that runs batch jobs when it is no longer
                        sending results data.
                     </p>
                     
                     
                     <div class="table">
                        <div class="table-contents">
                           <table id="w185aac19c19c25c31c18b5">
                              
                              <tbody><tr>
                                 
                                 <th>Setting</th>
                                 
                                 <th>Value</th>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Terminate</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>2</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Maximum</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>3</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>NetworkOut</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>4</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>&lt;=</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>5</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>100,000 bytes</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>6</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>5 minutes</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>7</p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>1</p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                     
                     
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="using-cloudwatch-createalarm.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="automating_with_cloudwatch_events.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Adding Stop Actions to Amazon CloudWatch Alarms"><a class="pagetoc" href="#AddingStopActions">Adding Stop Actions to Amazon CloudWatch Alarms</a></li>
                        <li class="pagetoc" name="Adding Terminate Actions to Amazon CloudWatch Alarms"><a class="pagetoc" href="#AddingTerminateActions">Adding Terminate Actions to Amazon CloudWatch Alarms</a></li>
                        <li class="pagetoc" name="Adding Reboot Actions to Amazon CloudWatch Alarms"><a class="pagetoc" href="#AddingRebootActions">Adding Reboot Actions to Amazon CloudWatch Alarms</a></li>
                        <li class="pagetoc" name="Adding Recover Actions to Amazon CloudWatch Alarms"><a class="pagetoc" href="#AddingRecoverActions">Adding Recover Actions to Amazon CloudWatch Alarms</a></li>
                        <li class="pagetoc" name="Using the Amazon CloudWatch Console to View Alarm and Action
        History"><a class="pagetoc" href="#ViewAlarmHistory">Using the Amazon CloudWatch Console to View Alarm and Action
                              History</a></li>
                        <li class="pagetoc" name="Amazon CloudWatch Alarm Action Scenarios"><a class="pagetoc" href="#AlarmActionScenarios">Amazon CloudWatch Alarm Action Scenarios</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>