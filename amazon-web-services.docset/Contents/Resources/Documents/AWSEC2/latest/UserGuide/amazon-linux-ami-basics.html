<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Amazon Linux - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="AMIs.html" title="Amazon Machine Images (AMI)">
      <link rel="prev" href="deregister-ami.html" title="Deregistering Your Linux AMI">
      <link rel="next" href="amazon-linux-2-virtual-machine.html" title="Running Amazon Linux 2 as a Virtual Machine On-Premises">
      <meta name="description" content="Amazon Linux is a Linux image provided by AWS for use on Amazon EC2.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/amazon-linux-ami-basics.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/ec2">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="AMIs.html">Amazon Machine Images (AMI)</a> &#xBB; <span class="breadcrumb">Amazon Linux</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="amazon-linux-ami-basics">Amazon Linux</h1>
                     <p>Amazon Linux is provided by Amazon Web Services (AWS). It is designed to provide a
                        stable,
                        secure, and high-performance execution environment for applications running on Amazon
                        EC2. It
                        also includes packages that enable easy integration with AWS, including launch
                        configuration tools and many popular AWS libraries and tools. AWS provides ongoing
                        security and maintenance updates to all instances running Amazon Linux. Many applications
                        developed 
                        on CentOS (and similar distributions) run on Amazon Linux.
                     </p>
                     <p>AWS provides two versions of Amazon Linux: Amazon Linux 2 and the Amazon Linux AMI.
                        For more information, 
                        including the complete list of AMIs, see <a href="https://aws.amazon.com/amazon-linux-2/" target="_blank">Amazon Linux 2</a> 
                        and <a href="https://aws.amazon.com/amazon-linux-ami/" target="_blank">Amazon Linux AMI</a>. For Amazon Linux Docker 
                        container images, see <a href="https://hub.docker.com/_/amazonlinux/" target="_blank">amazonlinux</a>
                        on Docker Hub.
                     </p>
                     <p>If you are migrating from another Linux distribution to Amazon Linux, we recommend
                        that you migrate to Amazon Linux 2. 
                        If you are currently using the Amazon Linux AMI, we recommend that you migrate to
                        Amazon Linux 2. 
                        To migrate to Amazon Linux 2, launch an instance or create a virtual machine using
                        the current image.
                        Install your application on Amazon Linux 2, plus any packages required by your application.
                        Test your 
                        application, and make any changes required for it to run on Amazon Linux 2. For more
                        information 
                        about running Amazon Linux outside AWS, see <a href="amazon-linux-2-virtual-machine.html">Running Amazon Linux 2 as a Virtual Machine On-Premises</a>.
                     </p>
                     <div class="highlights">
                        <p><strong>Contents</strong></p>
                        <ul>
                           <li><a href="#connect-to-amazon-linux-limits">Connecting to an Amazon Linux Instance</a></li>
                           <li><a href="#amazon-linux-image-id">Identifying Amazon Linux Images</a></li>
                           <li><a href="#amazon-linux-aws-command-line-tools">Included AWS Command Line Tools</a></li>
                           <li><a href="#package-repository">Package Repository</a></li>
                           <li><a href="#extras-library">Extras Library (Amazon Linux 2)</a></li>
                           <li><a href="#amazon-linux-source-packages">Accessing Source Packages for Reference</a></li>
                           <li><a href="#amazon-linux-cloud-init">cloud-init</a></li>
                           <li><a href="#linux-ami-notifications">Subscribing to Amazon Linux Notifications</a></li>
                           <li><a href="amazon-linux-2-virtual-machine.html">Running Amazon Linux 2 as a Virtual Machine On-Premises</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="connect-to-amazon-linux-limits">Connecting to an Amazon Linux Instance</h2>
                     
                     
                     <p>Amazon Linux does not allow remote root SSH by default. Also, password authentication
                        is
                        disabled to prevent brute-force password attacks. To enable SSH logins to an Amazon
                        Linux
                        instance, you must provide your key pair to the instance at launch. You must also
                        set
                        the security group used to launch your instance to allow SSH access. By default, the
                        only account that can log in remotely using SSH is ec2-user; this account also has
                        <b>sudo</b> privileges. If you enable remote root log in, be aware that
                        it is less secure than relying on key pairs and a secondary user.
                     </p>
                     
                     
                     
                     <h2 id="amazon-linux-image-id">Identifying Amazon Linux Images</h2>
                     
                     
                     <p>Each image contains a unique <code>/etc/image-id</code> file that identifies 
                        it. This file contains the following information about the image:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><code class="code">image_name</code>, <code class="code">image_version</code>, <code class="code">image_arch</code>
                                 &#x2014; From the build recipe that Amazon used to construct the image
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">image_stamp</code> &#x2014; A unique, random hex value generated during image
                                 creation
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">image_date</code> &#x2014; The UTC time of image creation, in <em>YYYYMMDDhhmmss</em> format
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">recipe_name</code>, <code class="code">recipe_id</code> &#x2014; The name and ID of the build recipe Amazon used 
                                 to construct the image
                              </p>                
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <p>Amazon Linux contains an <code>/etc/system-release</code> file that specifies the
                        current release that is installed. This file is updated using <b>yum</b>
                        and is part of the <code>system-release</code> RPM.
                     </p>
                     
                     
                     <p>Amazon Linux also contains a machine-readable version of 
                        <code>/etc/system-release</code> that follows the
                        CPE specification; see <code>/etc/system-release-cpe</code>.
                     </p>
                     
                     
                     
                     <h3 id="image-id-amazon-linux-2">Amazon Linux 2</h3>
                     
                     <p>The following is an example of <code>/etc/image-id</code>
                        for the current version of Amazon Linux 2:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>cat /etc/image-id</code></strong><code class="computeroutput" copy="false">
image_name=&quot;amzn2-ami-hvm&quot;
image_version=&quot;2017.12&quot;
image_arch=&quot;x86_64&quot;
image_file=&quot;amzn2-ami-hvm-2017.12.0.20180328.1-x86_64.xfs.gpt&quot;
image_stamp=&quot;d58c-0f4e&quot;
image_date=&quot;20180328193624&quot;
recipe_name=&quot;amzn2 ami&quot;
recipe_id=&quot;abf7fcc8-f988-713a-d779-19ed-94b7-feab-3c3974af&quot;</code></code></pre>
                     <p>The following is an example of <code>/etc/system-release</code>
                        for the current version of Amazon Linux 2:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>cat /etc/system-release</code></strong>
<code class="computeroutput" copy="false">Amazon Linux release 2 (2017.12) LTS Release Candidate</code></code></pre>
                     
                     <p>The following is an example of <code>/etc/os-release</code> for Amazon Linux 2:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>cat /etc/os-release</code></strong><code class="computeroutput" copy="false">
NAME=&quot;Amazon Linux&quot;
VERSION=&quot;2 (2017.12)&quot;
ID=&quot;amzn&quot;
ID_LIKE=&quot;centos rhel fedora&quot;
VERSION_ID=&quot;2&quot;
PRETTY_NAME=&quot;Amazon Linux 2 (2017.12) LTS Release Candidate&quot;
ANSI_COLOR=&quot;0;33&quot;
CPE_NAME=&quot;cpe:2.3:o:amazon:amazon_linux:2&quot;
HOME_URL=&quot;https://amazonlinux.com/&quot;</code></code></pre>
                     
                     
                     
                     <h3 id="image-id-amazon-linux-ami">Amazon Linux AMI</h3>
                     
                     <p>The following is an example of <code>/etc/image-id</code> 
                        for the current Amazon Linux AMI:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>cat /etc/image-id</code></strong><code class="computeroutput" copy="false">
image_name=&quot;amzn-ami-hvm&quot;
image_version=&quot;2018.03&quot;
image_arch=&quot;x86_64&quot;
image_file=&quot;amzn-ami-hvm-2018.03.0.20180412-x86_64.ext4.gpt&quot;
image_stamp=&quot;1f3d-d981&quot;
image_date=&quot;20180413000859&quot;
recipe_name=&quot;amzn ami&quot;
recipe_id=&quot;5ff6aaf8-75c1-29c7-99c9-1c92-6506-3dc2-33211769&quot;</code></code></pre>
                     
                     <p>The following is an example of <code>/etc/system-release</code>
                        for the current Amazon Linux AMI:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>cat /etc/system-release</code></strong>
<code class="computeroutput" copy="false">Amazon Linux AMI release 2018.03</code></code></pre>
                     
                     
                     
                     <h2 id="amazon-linux-aws-command-line-tools">Included AWS Command Line Tools</h2>
                     
                     
                     <p>The following command line tools for AWS integration and usage are included in Amazon
                        Linux or in the 
                        default repositories. For the complete list of packages, see <a href="https://aws.amazon.com/amazon-linux-ami/2018.03-packages/" target="_blank">Amazon Linux AMI 2018.03 Packages</a>.
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>aws-amitools-ec2</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>aws-apitools-as</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>aws-apitools-cfn</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>aws-apitools-ec2</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>aws-apitools-elb</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>aws-apitools-mon</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>aws-cfn-bootstrap</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>aws-cli</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <p>The minimal versions of Amazon Linux (<code>amzn-ami-minimal-*</code> and <code>amzn2-ami-minimal-*</code>) 
                        do not contain these packages; however, you can install them from the default repositories
                        using the following command:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum install -y <em class="replaceable"><code>package_name</code></em></code></strong></code></pre>
                     
                     <p>For instances launched using IAM roles, a simple script has been included to prepare
                        <code class="code">AWS_CREDENTIAL_FILE</code>, <code class="code">JAVA_HOME</code>, <code class="code">AWS_PATH</code>,
                        <code class="code">PATH</code>, and product-specific environment variables after a credential
                        file has been installed to simplify the configuration of these tools.
                     </p>
                     
                     
                     <p>Also, to allow the installation of multiple versions of the API and AMI tools, we
                        have
                        placed symbolic links to the desired versions of these tools in
                        <code>/opt/aws</code>, as described here:
                     </p>
                     
                     <div class="variablelist">
                        
                        
                        
                        
                        <dl>
                           
                           <dt><span class="term"><code>/opt/aws/bin</code></span></dt>
                           
                           <dd>
                              
                              <p>Symbolic links to <code>/bin</code> directories in each of the
                                 installed tools directories.
                              </p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><code>/opt/aws/{apitools|amitools}</code></span></dt>
                           
                           <dd>
                              
                              <p>Products are installed in directories of the form
                                 <em class="replaceable"><code>name</code></em>-<em class="replaceable"><code>version</code></em> and a
                                 symbolic link <em class="replaceable"><code>name</code></em> that is attached to the most
                                 recently installed version.
                              </p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><code>/opt/aws/{apitools|amitools}/<em class="replaceable"><code>name</code></em>/environment.sh</code></span></dt>
                           
                           <dd>
                              
                              <p>Used by <code>/etc/profile.d/aws-apitools-common.sh</code> to set
                                 product-specific environment variables, such as <code class="code">EC2_HOME</code>.
                              </p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     
                     <h2 id="package-repository">Package Repository</h2>
                     
                     
                     <p>Amazon Linux is designed to be used with online package repositories hosted in each
                        Amazon EC2 region. These repositories provide ongoing updates to packages in Amazon
                        Linux,
                        as well as access to hundreds of additional common open source server applications.
                        The
                        repositories are available in all regions and are accessed using <b>yum</b>
                        update tools. Hosting repositories in each region enables us to deploy
                        updates quickly and without any data transfer charges.
                     </p> 
                     
                     
                     <p>Amazon Linux is updated regularly with security and feature enhancements. If you do
                        not need to preserve data or customizations for your instances, you can simply
                        launch new instances using the current AMI. If you need to preserve data or
                        customizations for your instances, you can maintain those instances through the
                        Amazon Linux package repositories. These repositories contain all the updated packages.
                        
                        You can choose to apply these updates to your running instances. Older versions 
                        of the AMI and update packages continue to be available for use, even as new 
                        versions are released.
                     </p>
                     
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>Your instance must have access to the internet in order to access the 
                           repository.
                        </p>
                     </div>
                     
                     
                     <p>To install packages, use the following command:</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum install </code></strong><em class="replaceable"><code>package</code></em></code></pre>
                     
                     <p>Access to the Extra Packages for Enterprise Linux (EPEL) repository is configured,
                        but
                        it is not enabled by default. EPEL provides third-party packages in addition to those
                        that are in the repositories. The third-party packages are not supported by AWS.
                     </p>
                     
                     
                     <p>If you find that Amazon Linux does not contain an application you need, you can simply
                        install
                        the application directly on your Amazon Linux instance. Amazon Linux uses RPMs and
                        <b>yum</b> for package management, and that is likely the simplest way
                        to install new applications. You should always check to see if an application is
                        available in our central Amazon Linux repository first, because many applications
                        are available
                        there. These applications can easily be added to your Amazon Linux instance.
                     </p>
                     
                     
                     <p>To upload your applications onto a running Amazon Linux instance, use <b>scp</b> or
                        <b>sftp</b> and then configure the application by logging on to your instance.
                        Your applications can also be uploaded during the instance launch by using the
                        <b>PACKAGE_SETUP</b> action from the built-in cloud-init package.
                        For more information, see <a href="amazon-linux-ami-basics.html#amazon-linux-cloud-init">cloud-init</a>. 
                     </p>
                     
                     
                     
                     <h3 id="security-updates">Security Updates</h3>
                     
                     
                     <p>Security updates are provided using the package repositories as well as updated AMIs
                        Security alerts are published in the <a href="https://alas.aws.amazon.com/" target="_blank">Amazon Linux Security Center</a>. 
                        For more information about AWS security policies or to report a security problem,
                        go to the 
                        <a href="https://aws.amazon.com/security/" target="_blank">AWS Security Center</a>.
                     </p>
                     
                     
                     <p>Amazon Linux is configured to download and install security updates at launch time.
                        This is controlled using the following cloud-init setting: <code class="code">repo_upgrade</code>. 
                        The following snippet of cloud-init
                        configuration shows how you can change the settings in the user data text you pass
                        to
                        your instance initialization:
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">#cloud-config
repo_upgrade: security</code></pre>
                     
                     <p>The possible values for <code class="code">repo_upgrade</code> are as follows:
                     </p>
                     
                     <div class="variablelist">
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><span class="term"><code class="code">security</code></span></dt>
                           
                           <dd>
                              
                              <p>Apply outstanding updates that Amazon marks as security updates.</p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><code class="code">bugfix</code></span></dt>
                           
                           <dd>
                              
                              <p>Apply updates that Amazon marks as bug fixes. Bug fixes are a larger set
                                 of updates, which include security updates and fixes for various other minor
                                 bugs.
                              </p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><code class="code">all</code></span></dt>
                           
                           <dd>
                              
                              <p>Apply all applicable available updates, regardless of their
                                 classification.
                              </p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><code class="code">none</code></span></dt>
                           
                           <dd>
                              
                              <p>Do not apply any updates to the instance on startup.</p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     <p>The default setting for <code class="code">repo_upgrade</code> is security. That is, if you don&apos;t
                        specify a different value in your user data, by default, Amazon Linux performs the
                        security upgrades at launch for any packages installed at that time. Amazon Linux
                        also
                        notifies you of any updates to the installed packages by listing the number of available
                        updates upon login using the <code>/etc/motd</code> file. To install these
                        updates, you need to run <b>sudo yum upgrade</b> on the instance. 
                     </p>
                     
                     
                     
                     
                     <h3 id="repository-config">Repository Configuration</h3>
                     
                     
                     <p>With Amazon Linux, AMIs are treated as snapshots in time, with a repository and update
                        structure 
                        that always gives you the latest packages when you run <b>yum update -y</b>.
                     </p>
                     
                     <p>The repository structure is configured to deliver a continuous flow of updates that
                        enable you to roll from one version of Amazon Linux to the next. For example, if you
                        launch an
                        instance from an older version of the Amazon Linux AMI (such as 2017.09 or
                        earlier) and run <b>yum update -y</b>, you end up with the latest packages.
                     </p>
                     
                     <p>You can disable rolling updates by enabling the <em>lock-on-launch</em>
                        feature. The lock-on-launch feature locks your instance to
                        receive updates only from the specified release of the AMI. For example, you can launch
                        a 2017.09 AMI and have it receive only the updates that were released
                        prior to the 2018.03 AMI, until you are ready to migrate to the
                        2018.03 AMI.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>If you lock to a version of the repositories that is not the latest,
                           you do not receive further updates. To receive a continuous flow of updates, you must
                           
                           use the latest AMI, or consistently update your AMI with the repositories pointed
                           to
                           latest.
                        </p>
                     </div>
                     
                     <p>To enable lock-on-launch in new instances, launch it with the following user data
                        
                        passed to cloud-init:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">#cloud-config
repo_releasever: 2017.09</code></pre>
                     
                     <p class="title"><b>To lock existing instances to their current AMI version</b></p>
                     <ol>
                        <li>
                           
                           <p>Edit <code>/etc/yum.conf</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Comment out <code class="code">releasever=latest</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Run <b>yum clean all</b> to clear the cache.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     
                     
                     <h2 id="extras-library">Extras Library (Amazon Linux 2)</h2>
                     
                     
                     <p>With Amazon Linux 2, you can use the Extras Library to install application and software
                        updates
                        on your instances. These software updates are known as <em>topics</em>.
                        You can install a specific version of a topic or omit the version information to use
                        
                        the most recent version.
                     </p>
                     
                     
                     <p>To list the available topics, use the following command:</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>amazon-linux-extras list</code></strong></code></pre>
                     
                     <p>To enable a topic and install the latest version of its package to ensure freshness,
                        use the following command:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo amazon-linux-extras install </code></strong><em class="replaceable"><code>topic</code></em></code></pre>
                     
                     <p>To enable topics and install the specific versions of their packages that are
                        required, use the following command:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo amazon-linux-extras install </code></strong><em class="replaceable"><code>topic</code></em>=<em class="replaceable"><code>version</code></em> <em class="replaceable"><code>topic</code></em>=<em class="replaceable"><code>version</code></em></code></pre>
                     
                     
                     <h2 id="amazon-linux-source-packages">Accessing Source Packages for Reference</h2>
                     
                     
                     <p>You can view the source of packages you have installed on your instance for reference
                        purposes by using tools provided in Amazon Linux. Source packages are available for
                        all of the
                        packages included in Amazon Linux and the online package repository. Simply determine
                        the
                        package name for the source package you want to install and use the
                        <b>yumdownloader --source</b> command to view source within your running
                        instance. For example:
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>yumdownloader --source bash</code></strong></code></pre>
                     
                     <p>The source RPM can be unpacked, and, for reference, you can view the
                        source tree using standard RPM tools. After you finish debugging, the package is
                        available for use.
                     </p>
                     
                     
                     
                     <h2 id="amazon-linux-cloud-init">cloud-init</h2>
                     
                     
                     <p>The cloud-init package is an open source application built by Canonical
                        that is used to bootstrap Linux images in a cloud computing environment, such as Amazon
                        EC2.
                        Amazon Linux contains a customized version of cloud-init. It enables you to specify
                        actions that should happen to your instance at boot time. You can pass desired actions
                        to cloud-init through the user data fields when launching an instance. This
                        means you can use common AMIs for many use cases and configure them dynamically at
                        startup. Amazon Linux also uses cloud-init to perform initial configuration of the
                        ec2-user account.
                     </p>
                     
                     
                     <p>For more information, see <a href="http://cloudinit.readthedocs.org/en/latest/" target="_blank">http://cloudinit.readthedocs.org/en/latest/</a>.
                     </p>
                     
                     
                     <p>Amazon Linux uses the cloud-init actions found in
                        <code>/etc/cloud/cloud.cfg.d</code> and
                        <code>/etc/cloud/cloud.cfg</code>. You can create your own
                        cloud-init action files in <code>/etc/cloud/cloud.cfg.d</code>.
                        All files in this directory are read by cloud-init. They are read in
                        lexical order, and later files overwrite values in earlier files.
                     </p>
                     
                     <p>The cloud-init package performs these (and other) common configuration
                        tasks for instances at boot:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Set the default locale</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Set the hostname</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Parse and handle user data</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Generate host private SSH keys</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Add a user&apos;s public SSH keys to <code>.ssh/authorized_keys</code> for
                                 easy login and administration
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Prepare the repositories for package management</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Handle package actions defined in user data</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Execute user scripts found in user data</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Mount instance store volumes if applicable</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>By default, the <code>ephemeral0</code> instance store volume is
                                          mounted at <code>/media/ephemeral0</code> if it is present and
                                          contains a valid file system; otherwise, it is not mounted.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>By default, any swap volumes associated with the instance are mounted
                                          (only for <code class="code">m1.small</code> and <code class="code">c1.medium</code> instance
                                          types).
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>You can override the default instance store volume mount with the
                                          following cloud-init directive:
                                       </p>
                                       <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">#cloud-config
mounts:
- [ ephemeral0 ]</code></pre>
                                       <p>For more control over mounts, see <a href="http://cloudinit.readthedocs.io/en/latest/topics/modules.html#mounts" target="_blank">Mounts</a> in the cloud-init documentation.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>Instance store volumes that support TRIM are not formatted when an instance launches,
                                          
                                          so you must partition and format them before you can mount them. For more information,
                                          
                                          see <a href="ssd-instance-store.html#InstanceStoreTrimSupport">Instance Store Volume TRIM Support</a>. 
                                          You can use the <code class="code">disk_setup</code> module to partition and format your instance
                                          store volumes at boot. For more information, see <a href="http://cloudinit.readthedocs.io/en/latest/topics/modules.html#disk-setup" target="_blank">Disk Setup</a> in the cloud-init documentation.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     
                     <h3 id="supported-user-data-formats">Supported User-Data Formats</h3>
                     
                     
                     <p>The cloud-init package supports user-data handling of a variety of formats:</p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Gzip</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>If user-data is gzip compressed, cloud-init
                                          decompresses the data and handles it appropriately.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>MIME multipart</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>Using a MIME multipart file, you can specify more than one type of
                                          data. For example, you could specify both a user-data script and a
                                          cloud-config type. Each part of the multipart file can be handled by
                                          cloud-init if it is one of the supported formats.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Base64 decoding</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p> If user-data is base64-encoded, cloud-init
                                          determines if it can understand the decoded data as one of the
                                          supported types. If it understands the decoded data, it decodes the
                                          data and handles it appropriately. If not, it returns the base64
                                          data intact.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>User-Data script</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>Begins with <code class="code">#!</code> or <code class="code">Content-Type:
                                             text/x-shellscript</code>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>The script is executed by
                                          <code>/etc/init.d/cloud-init-user-scripts</code> during
                                          the first boot cycle. This occurs late in the boot process (after
                                          the initial configuration actions are performed).
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Include file</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>Begins with <code class="code">#include</code> or <code class="code">Content-Type:
                                             text/x-include-url</code>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>This content is an include file. The file contains a list of URLs,
                                          one per line. Each of the URLs is read, and their content passed
                                          through this same set of rules. The content read from the URL can be
                                          gzipped, MIME-multi-part, or plaintext.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Cloud Config Data</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>Begins with <code class="code">#cloud-config</code> or <code class="code">Content-Type:
                                             text/cloud-config</code>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>This content is cloud-config data. See the examples for a
                                          commented example of supported configuration formats.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Upstart job</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>Begins with <code class="code">#upstart-job</code> or <code class="code">Content-Type:
                                             text/upstart-job</code>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>This content is stored in a file in <code class="code">/etc/init</code>, and
                                          upstart consumes the content as per other upstart jobs.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Cloud Boothook</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>Begins with <code class="code">#cloud-boothook</code> or <code class="code">Content-Type:
                                             text/cloud-boothook</code>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>This content is boothook data. It is stored in a file under
                                          <code>/var/lib/cloud</code> and then executed
                                          immediately.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p> This is the earliest &quot;hook&quot; available. There is no mechanism
                                          provided for running it only one time. The boothook must take care
                                          of this itself. It is provided with the instance ID in the
                                          environment variable <code class="code">INSTANCE_ID</code>. Use this variable to
                                          provide a once-per-instance set of boothook data.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     
                     <h2 id="linux-ami-notifications">Subscribing to Amazon Linux Notifications</h2>
                     
                     <p>If you want to be notified when new AMIs are released, you can subscribe to these
                        notifications using Amazon SNS.
                     </p>
                     
                     <p class="title"><b>To subscribe to Amazon Linux notifications</b></p>
                     <ol>
                        <li>
                           
                           <p>Open the Amazon SNS console at
                              <a href="https://console.aws.amazon.com/sns/v2/home" target="_blank">https://console.aws.amazon.com/sns/v2/home</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the navigation bar, change the region to <b>US East (N. Virginia)</b>, 
                              if necessary. You must select this region because the SNS notification that you 
                              are subscribing to was created in this region.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the navigation pane, choose <b>Subscriptions</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create subscription</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For the <b>Create subscription</b> dialog box, do the
                              following:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>[Amazon Linux 2] For <b>Topic ARN</b>, copy and paste the following Amazon
                                    Resource Name (ARN): <strong class="userinput"><code>arn:aws:sns:us-east-1:137112412989:amazon-linux-2-ami-updates</code></strong>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>[Amazon Linux] For <b>Topic ARN</b>, copy and paste the following Amazon
                                    Resource Name (ARN): <strong class="userinput"><code>arn:aws:sns:us-east-1:137112412989:amazon-linux-ami-updates</code></strong>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Protocol</b>, choose <b>Email</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Endpoint</b>, type an email address that you can
                                    use to receive the notifications.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Create subscription</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>You&apos;ll receive a confirmation email with the subject line &quot;AWS
                              Notification - Subscription Confirmation&quot;. Open the email and click
                              <b>Confirm subscription</b> to complete your
                              subscription.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <p>Whenever AMIs are released, we send notifications to the subscribers of the
                        corresponding topic. If you no longer want to receive these notifications, use the
                        
                        following procedure to unsubscribe.
                     </p>
                     
                     
                     <p class="title"><b>To unsubscribe from Amazon Linux notifications</b></p>
                     <ol>
                        <li>
                           
                           <p>Open the Amazon SNS console at
                              <a href="https://console.aws.amazon.com/sns/v2/home" target="_blank">https://console.aws.amazon.com/sns/v2/home</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the navigation bar, change the region to <b>US East (N. Virginia)</b>, 
                              if necessary. You must use this region because the SNS notification was created 
                              in this region.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the navigation pane, choose <b>Subscriptions</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select the subscription and then choose <b>Actions</b>,
                              <b>Delete subscriptions</b>. When prompted for confirmation,
                              choose <b>Delete</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="deregister-ami.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="amazon-linux-2-virtual-machine.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Connecting to an Amazon Linux Instance"><a class="pagetoc" href="#connect-to-amazon-linux-limits">Connecting to an Amazon Linux Instance</a></li>
                        <li class="pagetoc" name="Identifying Amazon Linux Images"><a class="pagetoc" href="#amazon-linux-image-id">Identifying Amazon Linux Images</a></li>
                        <li class="pagetoc" name="Included AWS Command Line Tools"><a class="pagetoc" href="#amazon-linux-aws-command-line-tools">Included AWS Command Line Tools</a></li>
                        <li class="pagetoc" name="Package Repository"><a class="pagetoc" href="#package-repository">Package Repository</a></li>
                        <li class="pagetoc" name="Extras Library (Amazon Linux 2)"><a class="pagetoc" href="#extras-library">Extras Library (Amazon Linux 2)</a></li>
                        <li class="pagetoc" name="Accessing Source Packages for Reference"><a class="pagetoc" href="#amazon-linux-source-packages">Accessing Source Packages for Reference</a></li>
                        <li class="pagetoc" name="cloud-init"><a class="pagetoc" href="#amazon-linux-cloud-init">cloud-init</a></li>
                        <li class="pagetoc" name="Subscribing to Amazon Linux Notifications"><a class="pagetoc" href="#linux-ami-notifications">Subscribing to Amazon Linux Notifications</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>