<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Finding Shared AMIs - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="sharing-amis.html" title="Shared AMIs">
      <link rel="prev" href="sharing-amis.html" title="Shared AMIs">
      <link rel="next" href="sharingamis-intro.html" title="Making an AMI Public">
      <meta name="description" content="Find a shared AMI.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/usingsharedamis-finding.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/ec2">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="AMIs.html">Amazon Machine Images (AMI)</a> &#xBB; <a href="sharing-amis.html">Shared AMIs</a> &#xBB; <span class="breadcrumb">Finding Shared AMIs</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="usingsharedamis-finding">Finding Shared AMIs</h1>
                     <p>You can use the Amazon EC2 console or the command line to find shared AMIs. </p>
                     <h2 id="usingsharedamis-finding-console">Finding a Shared AMI (Console)</h2>
                     			
                     			
                     <p class="title"><b>To find a shared private AMI using the console</b></p>
                     <ol>
                        <li>
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p>
                        </li>
                        <li>
                           					
                           <p>In the navigation pane, choose <b>AMIs</b>. 
                           </p>
                           				
                        </li>
                        <li>
                           					
                           <p>In the first filter, choose <b>Private images</b>. All AMIs that have been
                              						shared with you are listed. To granulate your search, choose the Search bar
                              						and use the filter options provided in the menu.
                           </p>
                           				
                        </li>
                     </ol>
                     			
                     <p class="title"><b>To find a shared public AMI using the console</b></p>
                     <ol>
                        <li>
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p>
                        </li>
                        <li>
                           					
                           <p>In the navigation pane, choose <b>AMIs</b>.
                           </p>
                           				
                        </li>
                        <li>
                           					
                           <p>In the first filter, choose <b>Public images</b>. To granulate your search, choose the
                              						Search bar and use the filter options provided in the menu.
                           </p>
                           				
                        </li>
                        <li>
                           					
                           <p>Use filters to list only the types of AMIs that interest you. For example, choose
                              						<b>Owner :</b> and then choose <b>Amazon images</b> to display only Amazon&apos;s public
                              						images.
                           </p>	
                           				
                        </li>
                     </ol>
                     		
                     <h2 id="usingsharedamis-finding-cli">Finding a Shared AMI (AWS CLI)</h2>
                     			
                     
                     			
                     <p>Use the <a href="./cli/latest/reference/ec2/describe-images.html" target="_blank">describe-images</a> command
                        				(AWS CLI) to list AMIs. You can scope the list to the types of AMIs that interest
                        you,
                        				as shown in the following examples.
                     </p>
                     
                     
                     	
                     <p class="title"><b>Example: List all public AMIs</b></p>
                     	
                     <p>The following command lists all public AMIs, including any public AMIs that you own.</p>
                     
                     			<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 describe-images --executable-users all</code></strong></code></pre>
                     
                     
                     	<p class="title"><b>Example: List AMIs with explicit launch permissions</b></p>
                     	
                     <p>The following command lists the AMIs for which you have explicit launch
                        		permissions. This list does not include any AMIs that you own.
                     </p>
                     
                     			<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 describe-images --executable-users self</code></strong></code></pre>
                     
                     
                     	<p class="title"><b>Example: List AMIs owned by Amazon</b></p>
                     	
                     <p>The following command lists the AMIs owned by Amazon. Amazon&apos;s public AMIs have an
                        		aliased owner, which appears as <code class="code">amazon</code> in the account field. This
                        		enables you to find AMIs from Amazon easily. Other users can&apos;t alias their
                        		AMIs.
                     </p>
                     
                     			<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 describe-images --owners amazon</code></strong></code></pre>
                     
                     
                     	<p class="title"><b>Example: List AMIs owned by an account</b></p>
                     	
                     <p>The following command lists the AMIs owned by the specified AWS account.</p>
                     
                     			<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 describe-images --owners <em class="replaceable"><code>123456789012</code></em></code></strong></code></pre>
                     
                     
                     	<p class="title"><b>Example: Scope AMIs using a filter</b></p>
                     	
                     <p>To reduce the number of displayed AMIs, use a filter to list only the types of
                        		AMIs that interest you. For example, use the following filter to display only
                        		EBS-backed AMIs.
                     </p>
                     
                     			<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>--filters &quot;Name=root-device-type,Values=ebs&quot;</code></strong></code></pre>
                     
                     		<h2 id="usingsharedamis-confirm">Using Shared AMIs</h2>
                     			
                     			
                     <p>Before you use a shared AMI, take the following steps to confirm that there are no
                        				pre-installed credentials that would allow unwanted access to your instance by
                        a
                        				third party and no pre-configured remote logging that could transmit sensitive
                        data
                        				to a third party. Check the documentation for the Linux distribution used by the
                        AMI
                        				for information about improving the security of the system.
                     </p>
                     			
                     <p>To ensure that you don&apos;t accidentally lose access to your instance, we recommend
                        				that you initiate two SSH sessions and keep the second session open until you&apos;ve
                        				removed credentials that you don&apos;t recognize and confirmed that you can still
                        log
                        				into your instance using SSH.
                     </p>
                     			
                     <ol>
                        <li>
                           					
                           <p>Identify and disable any unauthorized public SSH keys. The only key in the
                              						file should be the key you used to launch the AMI. The following command
                              						locates <code>authorized_keys</code> files:
                           </p>
                           					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code><b>sudo find</b> / -name &quot;authorized_keys&quot; -print -exec cat {} \;</code></strong></code></pre>
                           				</li>
                        <li>
                           					
                           <p>Disable password-based authentication for the root user. Open the
                              							<code>sshd_config</code> file and edit the
                              							<code class="code">PermitRootLogin</code> line as follows:
                           </p>
                           					<pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">PermitRootLogin without-password</code></pre>
                           					<p>Alternatively, you can disable the ability to log into the instance as the root
                              						user:
                           </p>
                           					<pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">PermitRootLogin No</code></pre>
                           					<p>Restart the sshd service.</p>
                           				
                        </li>
                        <li>
                           					
                           <p>Check whether there are any other user accounts that are able to log in to
                              						your instance. Accounts with superuser privileges are particularly
                              						dangerous. Remove or lock the password of any unknown accounts.
                           </p>
                           				
                        </li>
                        <li>
                           					
                           <p>Check for open ports that you aren&apos;t using and running network services
                              						listening for incoming connections.
                           </p>
                           				
                        </li>
                        <li>
                           					
                           <p>To prevent preconfigured remote logging, you should delete the existing
                              						configuration file and restart the rsyslog service. For example:
                           </p>
                           					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code><b>sudo rm</b> /etc/rsyslog.config</code></strong>
<code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo service rsyslog restart</code></strong></code></pre>
                           				</li>
                        <li>
                           					
                           <p>Verify that all cron jobs are legitimate.</p>
                           				
                        </li>
                     </ol>
                     			
                     <p>If you discover a public AMI that you feel presents a security risk, contact the
                        				AWS security team. For more information, see the <a href="https://aws.amazon.com/security/" target="_blank">AWS Security Center</a>.
                     </p>
                     		
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="sharing-amis.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="sharingamis-intro.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Finding a Shared AMI (Console)"><a class="pagetoc" href="#usingsharedamis-finding-console">Finding a Shared AMI (Console)</a></li>
                        <li class="pagetoc" name="Finding a Shared AMI (AWS CLI)"><a class="pagetoc" href="#usingsharedamis-finding-cli">Finding a Shared AMI (AWS CLI)</a></li>
                        <li class="pagetoc" name="Using Shared AMIs"><a class="pagetoc" href="#usingsharedamis-confirm">Using Shared AMIs</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>