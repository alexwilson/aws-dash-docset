<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Spot Fleet Example Configurations - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="spot-fleet-requests.html" title="Spot Fleet Requests">
      <link rel="prev" href="spot-fleet-requests.html" title="Spot Fleet Requests">
      <link rel="next" href="spot-fleet-cloudwatch-metrics.html" title="CloudWatch Metrics for Spot Fleet">
      <meta name="description" content="Learn how to create launch configurations for your Spot Fleet request.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-fleet-examples.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/ec2">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="Instances.html">Amazon EC2 Instances</a> &#xBB; <a href="instance-purchasing-options.html">Instance Purchasing Options</a> &#xBB; <a href="using-spot-instances.html">Spot Instances</a> &#xBB; <a href="spot-fleet-requests.html">Spot Fleet Requests</a> &#xBB; <span class="breadcrumb">Spot Fleet Example Configurations</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="spot-fleet-examples">Spot Fleet Example Configurations</h1>
                     <p>The following examples show launch configurations that you can use with the <a href="./cli/latest/reference/ec2/request-spot-fleet.html" target="_blank">request-spot-fleet</a>
                        				command to create a Spot Fleet request. For more information, see <a href="spot-fleet-requests.html#create-spot-fleet">Creating a Spot Fleet Request</a>.
                     </p>
                     <div class="orderedlist">
                        				
                        				
                        				
                        				
                        				
                        				
                        				
                        			
                        <ol>
                           <li>
                              					
                              <p><a href="spot-fleet-examples.html#fleet-config1">Launch Spot Instances using the lowest-priced Availability
                                    							Zone or subnet in the region</a></p>
                              				
                           </li>
                           <li>
                              					
                              <p><a href="spot-fleet-examples.html#fleet-config2">Launch Spot Instances using the lowest-priced Availability
                                    							Zone or subnet in a specified list</a></p>
                              				
                           </li>
                           <li>
                              					
                              <p><a href="spot-fleet-examples.html#fleet-config3">Launch Spot Instances using the lowest-priced instance type
                                    							in a specified list</a></p>
                              				
                           </li>
                           <li>
                              					
                              <p><a href="spot-fleet-examples.html#fleet-config4">Override the price for the request</a></p>
                              				
                           </li>
                           <li>
                              					
                              <p><a href="spot-fleet-examples.html#fleet-config5">Launch a Spot Fleet using the diversified allocation
                                    							strategy</a></p>
                              				
                           </li>
                           <li>
                              					
                              <p><a href="spot-fleet-examples.html#fleet-config6">Launch a Spot Fleet using instance weighting</a></p>
                              				
                           </li>
                           <li>
                              					
                              <p><a href="spot-fleet-examples.html#fleet-config7">Launch a Spot Fleet with On-Demand capacity</a></p>
                              				
                           </li>
                        </ol>
                     </div>
                     				
                     <h2 id="fleet-config1">Example 1: Launch Spot Instances Using the Lowest-Priced
                        						Availability Zone or Subnet in the Region
                     </h2>
                     				
                     <p>The following example specifies a single launch specification without an Availability
                        Zone
                        					or subnet. If your account supports EC2-VPC only, the Spot Fleet launches the
                        					instances in the lowest-priced Availability Zone that has a default subnet. If
                        					your account supports EC2-Classic, the Spot Fleet launches the instances in
                        					EC2-Classic in the lowest-priced Availability Zone. The price you pay will not
                        					exceed the On-Demand price.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;TargetCapacity&quot;: 20,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;KeyName&quot;: &quot;my-key-pair&quot;,
          &quot;SecurityGroups&quot;: [
              {
                  &quot;GroupId&quot;: &quot;sg-1a2b3c4d&quot;
              }
          ],
          &quot;InstanceType&quot;: &quot;m3.medium&quot;,
          &quot;IamInstanceProfile&quot;: {
              &quot;Arn&quot;: &quot;arn:aws:iam::123456789012:instance-profile/my-iam-role&quot;
          }
      }
  ]
}</code></pre>
                     			
                     				<h2 id="fleet-config2">Example 2: Launch Spot Instances Using the Lowest-Priced
                        						Availability Zone or Subnet in a Specified List
                     </h2>
                     				
                     <p>The following examples specify two launch specifications with different
                        					Availability Zones or subnets, but the same instance type and AMI.
                     </p>
                     				
                     <p><b>Availability Zones</b></p>
                     				
                     <p>If your account supports EC2-VPC only, the Spot Fleet launches the instances in the
                        					default subnet of the lowest-priced Availability Zone that you specified. If
                        					your account supports EC2-Classic, the Spot Fleet launches the instances in the
                        					lowest-priced Availability Zone that you specified.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;TargetCapacity&quot;: 20,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;KeyName&quot;: &quot;my-key-pair&quot;,
          &quot;SecurityGroups&quot;: [
              {
                  &quot;GroupId&quot;: &quot;sg-1a2b3c4d&quot;
              }
          ],
          &quot;InstanceType&quot;: &quot;m3.medium&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;<em class="replaceable"><code>us-west-2a</code></em>, <em class="replaceable"><code>us-west-2b</code></em>&quot;
          },
          &quot;IamInstanceProfile&quot;: {
              &quot;Arn&quot;: &quot;arn:aws:iam::123456789012:instance-profile/my-iam-role&quot;
          }
      }
  ]
}</code></pre>
                     				<p><b>Subnets</b></p>
                     				
                     <p>You can specify default subnets or nondefault subnets, and the nondefault
                        					subnets can be from a default VPC or a nondefault VPC. The Spot service launches
                        					the instances in whichever subnet is in the lowest-priced Availability
                        					Zone.
                     </p>
                     				
                     <p>You can&apos;t specify different subnets from the same Availability Zone in a Spot Fleet
                        					request.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;TargetCapacity&quot;: 20,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;KeyName&quot;: &quot;my-key-pair&quot;,
          &quot;SecurityGroups&quot;: [
              {
                  &quot;GroupId&quot;: &quot;sg-1a2b3c4d&quot;
              }
          ],
          &quot;InstanceType&quot;: &quot;m3.medium&quot;,
          &quot;SubnetId&quot;: &quot;<em class="replaceable"><code>subnet-a61dafcf</code></em>, <em class="replaceable"><code>subnet-65ea5f08</code></em>&quot;,
          &quot;IamInstanceProfile&quot;: {
              &quot;Arn&quot;: &quot;arn:aws:iam::123456789012:instance-profile/my-iam-role&quot;
          }
      }
  ]
}</code></pre>
                     				<p>If the instances are launched in a default VPC, they receive a public IPv4 address
                        by
                        					default. If the instances are launched in a nondefault VPC, they do not receive
                        					a public IPv4 address by default. Use a network interface in the launch
                        					specification to assign a public IPv4 address to instances launched in a
                        					nondefault VPC. When you specify a network interface, you must include the
                        					subnet ID and security group ID using the network interface.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json "><code class="code" copy="false">  ...</code>       
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;KeyName&quot;: &quot;my-key-pair&quot;,
          &quot;InstanceType&quot;: &quot;m3.medium&quot;,
          &quot;NetworkInterfaces&quot;: [
              {
                  &quot;DeviceIndex&quot;: 0,
                  &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;,
                  &quot;Groups&quot;: [ &quot;sg-1a2b3c4d&quot; ],
                  &quot;AssociatePublicIpAddress&quot;: true
              }
          ],
          &quot;IamInstanceProfile&quot;: {
              &quot;Arn&quot;: &quot;arn:aws:iam::880185128111:instance-profile/my-iam-role&quot;
          }
      }
  <code class="code" copy="false">...</code></code></pre>
                     			
                     				<h2 id="fleet-config3">Example 3: Launch Spot Instances Using the Lowest-Priced Instance
                        						Type in a Specified List
                     </h2>
                     				
                     <p>The following examples specify two launch configurations with different instance types,
                        					but the same AMI and Availability Zone or subnet. The Spot Fleet launches the
                        					instances using the specified instance type with the lowest price.
                     </p>
                     				
                     <p><b>Availability Zone</b></p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;TargetCapacity&quot;: 20,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;SecurityGroups&quot;: [
              {
                  &quot;GroupId&quot;: &quot;sg-1a2b3c4d&quot;
              }
          ],
          &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>cc2.8xlarge</code></em>&quot;,
          &quot;Placement&quot;: {
            &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          }
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;SecurityGroups&quot;: [
              {
                  &quot;GroupId&quot;: &quot;sg-1a2b3c4d&quot;
              }
          ],
          &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>r3.8xlarge</code></em>&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          }
      }
  ]
}</code></pre>
                     				<p><b>Subnet</b></p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;TargetCapacity&quot;: 20,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;SecurityGroups&quot;: [
              {
                  &quot;GroupId&quot;: &quot;sg-1a2b3c4d&quot;
              }
          ],
          &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>cc2.8xlarge</code></em>&quot;,
          &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;SecurityGroups&quot;: [
              {
                  &quot;GroupId&quot;: &quot;sg-1a2b3c4d&quot;
              }
          ],
          &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>r3.8xlarge</code></em>&quot;,
          &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;
      }
  ]
}</code></pre>
                     			
                     				<h2 id="fleet-config4">Example 4. Override the Price for the Request</h2>
                     				
                     <p>We recommended that you use the default maximum price, which is the On-Demand price.
                        					If you prefer, you can specify a maximum price for the fleet request and maximum
                        prices 
                        					for individual launch specifications.
                     </p> 
                     			    
                     <p>The following examples specify a maximum price for the fleet request and maximum prices
                        
                        			    	for two of the three launch specifications. The maximum price for the fleet
                        request is used 
                        			    	for any launch specification that does not specify a maximum price. The Spot
                        Fleet
                        					launches the instances using the instance type with the lowest price.
                     </p>
                     				
                     <p><b>Availability Zone</b></p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;SpotPrice&quot;: &quot;<em class="replaceable"><code>1.00</code></em>&quot;,
  &quot;TargetCapacity&quot;: 30,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.2xlarge&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          },
          &quot;SpotPrice&quot;: &quot;<em class="replaceable"><code>0.10</code></em>&quot;
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.4xlarge&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          },
          &quot;SpotPrice&quot;: &quot;<em class="replaceable"><code>0.20</code></em>&quot;
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.8xlarge&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          }
      }
    ]
}</code></pre>
                     				<p><b>Subnet</b></p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;SpotPrice&quot;: &quot;<em class="replaceable"><code>1.00</code></em>&quot;,
  &quot;TargetCapacity&quot;: 30,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.2xlarge&quot;,
          &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;,
          &quot;SpotPrice&quot;: &quot;<em class="replaceable"><code>0.10</code></em>&quot;
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.4xlarge&quot;,
          &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;,
          &quot;SpotPrice&quot;: &quot;<em class="replaceable"><code>0.20</code></em>&quot;
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.8xlarge&quot;,
          &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;
      }
  ]
}</code></pre>
                     			
                     				<h2 id="fleet-config5">Example 5: Launch a Spot Fleet Using the Diversified
                        					Allocation Strategy
                     </h2>
                     				
                     <p>The following example uses the <code class="code">diversified</code> allocation strategy. The launch
                        					specifications have different instance types but the same AMI and Availability
                        					Zone or subnet. The Spot Fleet distributes the 30 instances across the 3 launch
                        					specifications, such that there are 10 instances of each type. For more
                        					information, see <a href="spot-fleet.html#spot-fleet-allocation-strategy">Spot Fleet Allocation Strategy</a>.
                     </p>
                     				
                     <p><b>Availability Zone</b></p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;SpotPrice&quot;: &quot;0.70&quot;, 
  &quot;TargetCapacity&quot;: 30,
  &quot;AllocationStrategy&quot;: &quot;<em class="replaceable"><code>diversified</code></em>&quot;,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>c4.2xlarge</code></em>&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          }
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>m3.2xlarge</code></em>&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          }
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>r3.2xlarge</code></em>&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          }
      }
  ]
}</code></pre>
                     				<p><b>Subnet</b></p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    &quot;SpotPrice&quot;: &quot;0.70&quot;, 
    &quot;TargetCapacity&quot;: 30,
    &quot;AllocationStrategy&quot;: &quot;<em class="replaceable"><code>diversified</code></em>&quot;,
    &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
    &quot;LaunchSpecifications&quot;: [
        {
            &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
            &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>c4.2xlarge</code></em>&quot;,
            &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;
        },
        {
            &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
            &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>m3.2xlarge</code></em>&quot;,
            &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;
        },
        {
            &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
            &quot;InstanceType&quot;: &quot;<em class="replaceable"><code>r3.2xlarge</code></em>&quot;,
            &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;
        }
    ]
}</code></pre>
                     			
                     				<h2 id="fleet-config6">Example 6: Launch a Spot Fleet Using Instance
                        					Weighting
                     </h2>
                     				
                     <p>The following examples use instance weighting, which means that the price is per unit
                        					hour instead of per instance hour. Each launch configuration lists a different
                        					instance type and a different weight. The Spot Fleet selects the instance type
                        					with the lowest price per unit hour. The Spot Fleet calculates the number of
                        					Spot Instances to launch by dividing the target capacity by the instance weight.
                        					If the result isn&apos;t an integer, the Spot Fleet rounds it up to the next integer,
                        					so that the size of your fleet is not below its target capacity.
                     </p>
                     				
                     <p>If the <code class="code">r3.2xlarge</code> request is successful, Spot provisions 4 of these 
                        					instances. Divide 20 by 6 for a total of 3.33 instances, then round up to 4
                        					instances.
                     </p>
                     				
                     <p>If the <code class="code">c3.xlarge</code> request is successful, Spot provisions 7 of these 
                        					instances. Divide 20 by 3 for a total of 6.66 instances, then round up to 7
                        					instances.
                     </p>
                     				
                     <p>For more information, see <a href="spot-fleet.html#spot-instance-weighting">Spot Fleet Instance Weighting</a>.
                     </p>
                     				
                     <p><b>Availability Zone</b></p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;SpotPrice&quot;: &quot;0.70&quot;,
  &quot;TargetCapacity&quot;: 20,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;r3.2xlarge&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          },
          &quot;WeightedCapacity&quot;: <em class="replaceable"><code>6</code></em>
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.xlarge&quot;,
          &quot;Placement&quot;: {
              &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;
          },
          &quot;WeightedCapacity&quot;: <em class="replaceable"><code>3</code></em>
      }
    ]
}</code></pre>
                     				<p><b>Subnet</b></p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;SpotPrice&quot;: &quot;0.70&quot;,
  &quot;TargetCapacity&quot;: 20,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;r3.2xlarge&quot;,
          &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;,
          &quot;WeightedCapacity&quot;: <em class="replaceable"><code>6</code></em>
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.xlarge&quot;,
          &quot;SubnetId&quot;: &quot;subnet-1a2b3c4d&quot;,
          &quot;WeightedCapacity&quot;: <em class="replaceable"><code>3</code></em>
      }
  ]
}</code></pre>
                     				<p><b>Priority</b></p>
                     				
                     <p>You can also use instance weighting to give priority to an Availability Zone or subnet.
                        					For example, the following launch specifications are nearly identical, except
                        					that they specify different subnets and weights. The Spot Fleet finds the
                        					specification with the highest value for <code class="code">WeightedCapacity</code>, and
                        					attempts to provision the request in the least expensive Spot Instance pool in
                        					that subnet. The second launch specification does not include a weight, so it
                        					defaults to 1.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;SpotPrice&quot;: &quot;0.42&quot;,
  &quot;TargetCapacity&quot;: 40,
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::123456789012:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;LaunchSpecifications&quot;: [
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.2xlarge&quot;,
          &quot;SubnetId&quot;: &quot;<em class="replaceable"><code>subnet-482e4972</code></em>&quot;,
          &quot;WeightedCapacity&quot;: <em class="replaceable"><code>2</code></em>
      },
      {
          &quot;ImageId&quot;: &quot;ami-1a2b3c4d&quot;,
          &quot;InstanceType&quot;: &quot;c3.2xlarge&quot;,
          &quot;SubnetId&quot;: &quot;<em class="replaceable"><code>subnet-bb3337d</code></em>&quot;
      }
    ]
}</code></pre>
                     			
                     				<h2 id="fleet-config7">Example 7: Launch a Spot Fleet with On-Demand Capacity</h2>
                     				
                     <p>To ensure that you always have instance capacity, you can include a request for On-Demand
                        					capacity in your Spot Fleet request. The On-Demand request is always fulfilled
                        if
                        					there is capacity, while the balance of the target capacity is fulfilled as Spot
                        					if there is capacity and availability.
                     </p>
                     				
                     <p>The following example specifies the desired target capacity as 10, of which 5 must
                        be
                        					On-Demand capacity. Spot capacity is not specified; it is implied in the balance
                        					of the target capacity minus the On-Demand capacity. Amazon EC2 launches 5 capacity
                        					units as On-Demand, and 5 capacity units (10-5=5) as Spot if there is available
                        					EC2 capacity and availability. 
                     </p>
                     				
                     <p>For more information, see <a href="spot-fleet.html#on-demand-in-spot">On-Demand in Spot Fleet</a>.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;IamFleetRole&quot;: &quot;arn:aws:iam::781603563322:role/aws-ec2-spot-fleet-tagging-role&quot;,
  &quot;AllocationStrategy&quot;: &quot;lowestPrice&quot;,
  &quot;TargetCapacity&quot;: 10,
  &quot;SpotPrice&quot;: null,
  &quot;ValidFrom&quot;: &quot;2018-04-04T15:58:13Z&quot;,
  &quot;ValidUntil&quot;: &quot;2019-04-04T15:58:13Z&quot;,
  &quot;TerminateInstancesWithExpiration&quot;: true,
  &quot;LaunchSpecifications&quot;: [],
  &quot;Type&quot;: &quot;maintain&quot;,
  &quot;OnDemandTargetCapacity&quot;: 5,
  &quot;LaunchTemplateConfigs&quot;: [
    {
      &quot;LaunchTemplateSpecification&quot;: {
        &quot;LaunchTemplateId&quot;: &quot;lt-0dbb04d4a6cca5ad1&quot;,
        &quot;Version&quot;: &quot;2&quot;
      },
      &quot;Overrides&quot;: [
        {
          &quot;InstanceType&quot;: &quot;t2.medium&quot;,
          &quot;WeightedCapacity&quot;: 1,
          &quot;SubnetId&quot;: &quot;subnet-d0dc51fb&quot;
        }
      ]
    }
  ]
}</code></pre>
                     			</div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="spot-fleet-requests.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="spot-fleet-cloudwatch-metrics.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Example 1: Launch Spot Instances Using the Lowest-Priced
						Availability Zone or Subnet in the Region"><a class="pagetoc" href="#fleet-config1">Example 1: Launch Spot Instances Using the Lowest-Priced
                              						Availability Zone or Subnet in the Region</a></li>
                        <li class="pagetoc" name="Example 2: Launch Spot Instances Using the Lowest-Priced
						Availability Zone or Subnet in a Specified List"><a class="pagetoc" href="#fleet-config2">Example 2: Launch Spot Instances Using the Lowest-Priced
                              						Availability Zone or Subnet in a Specified List</a></li>
                        <li class="pagetoc" name="Example 3: Launch Spot Instances Using the Lowest-Priced Instance
						Type in a Specified List"><a class="pagetoc" href="#fleet-config3">Example 3: Launch Spot Instances Using the Lowest-Priced Instance
                              						Type in a Specified List</a></li>
                        <li class="pagetoc" name="Example 4. Override the Price for the Request"><a class="pagetoc" href="#fleet-config4">Example 4. Override the Price for the Request</a></li>
                        <li class="pagetoc" name="Example 5: Launch a Spot Fleet Using the Diversified
					Allocation Strategy"><a class="pagetoc" href="#fleet-config5">Example 5: Launch a Spot Fleet Using the Diversified
                              					Allocation Strategy</a></li>
                        <li class="pagetoc" name="Example 6: Launch a Spot Fleet Using Instance
					Weighting"><a class="pagetoc" href="#fleet-config6">Example 6: Launch a Spot Fleet Using Instance
                              					Weighting</a></li>
                        <li class="pagetoc" name="Example 7: Launch a Spot Fleet with On-Demand Capacity"><a class="pagetoc" href="#fleet-config7">Example 7: Launch a Spot Fleet with On-Demand Capacity</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>