<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Tutorial: Install a LAMP Web Server with the Amazon Linux AMI - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="ec2-tutorials.html" title="Tutorials for Amazon EC2 Instances Running Linux">
      <link rel="prev" href="ec2-lamp-amazon-linux-2.html" title="Tutorial: Install a LAMP Web Server on Amazon Linux 2">
      <link rel="next" href="hosting-wordpress.html" title="Tutorial: Hosting a WordPress Blog with Amazon Linux">
      <meta name="description" content="Install the Apache web server with PHP and MySQL support on your EC2 instance.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/install-LAMP.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/ec2">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="ec2-tutorials.html">Tutorials for Amazon EC2 Instances Running Linux</a> &#xBB; <span class="breadcrumb">Tutorial: Install a LAMP Web Server with the Amazon Linux AMI</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="install-LAMP">Tutorial: Install a LAMP Web Server with the Amazon Linux AMI</h1>
                     <p>The following procedures help you install an Apache web server with PHP and MySQL
                        support
                        on your Amazon Linux instance (sometimes called a LAMP web server or LAMP stack).
                        You can use this
                        server to host a static website or deploy a dynamic PHP application that reads and
                        writes
                        information to a database.
                     </p>
                     <p>To set up a LAMP web server on Amazon Linux 2, see <a href="ec2-lamp-amazon-linux-2.html">Tutorial: Install a LAMP Web Server on Amazon Linux 2</a>.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>If you are trying to set up a LAMP web server on an Ubuntu or Red Hat Enterprise Linux
                           instance, this tutorial will not work for you. For more information about other distributions,
                           
                           see their specific documentation. For information about LAMP web servers on Ubuntu,
                           see the Ubuntu
                           community documentation <a href="https://help.ubuntu.com/community/ApacheMySQLPHP" target="_blank">ApacheMySQLPHP</a> topic. 
                        </p>
                     </div>
                     
                     <p class="title"><b>Prerequisites</b></p>
                     
                     <p>This tutorial assumes that you have already launched a new instance using the Amazon
                        Linux AMI, 
                        with a public DNS name that is reachable from the internet. For more information,
                        see <a href="EC2_GetStarted.html#ec2-launch-instance">Step 1: Launch an Instance</a>. You must also
                        have configured your security group to allow SSH (port 22), HTTP (port 80), and HTTPS
                        (port 443) connections. For more information about these prerequisites, see <a href="get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a>.
                     </p>
                     <a id="install_apache"></a><p class="title"><b>To install and start the LAMP web server with the Amazon Linux AMI</b></p>
                     <ol>
                        <li>
                           
                           <p><a href="EC2_GetStarted.html#ec2-connect-to-instance-linux">Connect to your
                                 instance</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>To ensure that all of your software packages are up to date, perform a quick
                              software update on your instance. This process may take a few minutes, but it is
                              important to make sure that you have the latest security updates and bug
                              fixes.
                           </p>
                           
                           <p>The <code class="code">-y</code> option installs the updates without asking for
                              confirmation. If you would like to examine the updates before installing,
                              you can omit this option.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum update -y</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Now that your instance is current, you can install the Apache web server, MySQL,
                              and PHP software packages. 
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>Some applications may not be compatible with the following recommended
                                 software environment. Before installing these packages, check whether your LAMP
                                 applications are compatible with them. If there is a problem, you may need to
                                 install an alternative environment. For more information, see <a href="install-LAMP.html#software_versions">The application software I want to run on my server
                                    is incompatible with the installed PHP version or other software</a>
                                 
                              </p>
                           </div>
                           
                           <p>Use the <b>yum install</b> command to install multiple software
                              packages and all related dependencies at the same time.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum install -y httpd24 php70 mysql56-server php70-mysqlnd</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Start the Apache web server.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo service httpd start</code></strong><code class="computeroutput" copy="false">
Starting httpd:                                            [  OK  ]</code></code></pre>
                           </li>
                        <li>
                           
                           <p> Use the <b>chkconfig</b> command to configure the Apache web server
                              to start at each system boot. 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo chkconfig httpd on</code></strong></code></pre>
                           <p>The <b>chkconfig</b> command does not provide any confirmation
                              message when you successfully use it to enable a service.
                           </p>
                           
                           <p>You can verify that <b>httpd</b> is on by running the following command:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>chkconfig --list httpd</code></strong><code class="computeroutput" copy="false">
httpd           0:off   1:off   2:on    3:on    4:on    5:on    6:off</code></code></pre>
                           <p>Here, <b>httpd</b> is <code class="code">on</code> in runlevels 2, 3, 4, and 5 (which is what you want to see).
                           </p> 
                           
                        </li>
                        <li>
                           
                           <p>Add a security rule to allow inbound HTTP (port 80) connections to your instance
                              if you have not already done so. By default, a
                              <b>launch-wizard-<em class="replaceable"><code>N</code></em></b> security
                              group was set up for your instance during initialization. This group contains a
                              single rule to allow SSH connections. 
                           </p>
                           
                           <ol>
                              <li>
                                 <p>Open the Amazon EC2 console at
                                    <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                                 </p>
                              </li>
                              <li>
                                 <p>Choose <b>Instances</b> and select your instance.
                                 </p>
                              </li>
                              <li>
                                 <p>Under <b>Security groups</b>, choose <b>view inbound
                                       rules</b>.
                                 </p>
                              </li>
                              <li>
                                 <p>You should see the following list of
                                    rules in your default security group:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Security Groups associated with i-1234567890abcdef0
Ports     Protocol     Source     launch-wizard-<em class="replaceable"><code>N</code></em>
22        tcp          0.0.0.0/0          &#x2714;</code></pre>
                                 <p>Using the procedures in <a href="using-network-security.html#adding-security-group-rule">Adding Rules to a Security Group</a>, add a new inbound security rule
                                    with the following values:
                                 </p>
                                 
                                 
                                 <div class="itemizedlist">
                                    
                                    
                                    
                                    
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><b>Type</b>: HTTP
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Protocol</b>: TCP
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Port Range</b>: 80
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><b>Source</b>: Custom
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>Test your web server. In a web browser, type the public DNS address (or the public
                              IP address) of your instance. If there is no content in <code>/var/www/html</code>,
                              you should see the Apache test page. You can get the
                              public DNS for your instance using the Amazon EC2 console (check the <b>Public
                                 DNS</b> column; if this column is hidden, choose <b>Show/Hide
                                 Columns</b> (the gear-shaped icon) and choose <b>Public
                                 DNS</b>).
                           </p> 
                           
                           <p>If you
                              are unable to see the Apache test page, check that the security group you
                              are using contains a rule to allow HTTP (port 80)
                              traffic. For information about adding an HTTP rule to
                              your security group, see <a href="using-network-security.html#adding-security-group-rule">Adding Rules to a Security Group</a>.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>If you are not using Amazon Linux, you may also need to configure the firewall on
                                 your instance to allow these connections. For more information about how to
                                 configure the firewall, see the documentation for your specific
                                 distribution.
                              </p>
                           </div>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/apache_test_page2.4.png" alt="
                    Apache test page
                ">
                              
                              
                              
                           </div>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>This test page appears only when there is no content in
                                 <code>/var/www/html</code>. When you add content to the document
                                 root, your content appears at the public DNS address of your instance instead of
                                 this test page.
                              </p>
                           </div>
                           
                        </li>
                     </ol>
                     <p>Apache <b>httpd</b> serves files that are kept in a directory called the
                        Apache document root. The Amazon Linux Apache document root is <code>/var/www/html</code>,
                        which by default is owned by root.
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>ls -l /var/www</code></strong><code class="computeroutput" copy="false">
total 16
drwxr-xr-x 2 root root 4096 Jul 12 01:00 cgi-bin
drwxr-xr-x 3 root root 4096 Aug  7 00:02 error
drwxr-xr-x 2 root root 4096 Jan  6  2012 html
drwxr-xr-x 3 root root 4096 Aug  7 00:02 icons
drwxr-xr-x 2 root root 4096 Aug  7 21:17 noindex</code></code></pre><p>To allow the ec2-user account to manipulate files in this directory, you must modify
                        the
                        ownership and permissions of the directory. There are many ways to accomplish this
                        task. In
                        this tutorial, you add the ec2-user user to the <code class="code">apache</code> group, to give the
                        <code class="code">apache</code> group ownership of the <code>/var/www</code> directory and
                        assign write permissions to the group.
                     </p><a id="SettingFilePermissions"></a><p class="title"><b>To set file permissions</b></p>
                     <ol>
                        <li>
                           
                           <p>Add your user (in this case, ec2-user) to the <code class="code">apache</code> group.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo usermod -a -G apache <em class="replaceable"><code>ec2-user</code></em></code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Log out and then log back in again to pick up the new group, and then verify your
                              membership.
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>Log out (use the <b>exit</b> command or close the terminal window):
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>exit</code></strong></code></pre>
                                 </li>
                              <li>
                                 
                                 <p>To verify your membership in the <code class="code">apache</code> group, reconnect to
                                    your instance, and then run the following command:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>groups</code></strong><code class="computeroutput" copy="false">
ec2-user wheel apache</code></code></pre>
                                 </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>Change the group ownership of <code>/var/www</code> and its contents to
                              the <code class="code">apache</code> group.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo chown -R ec2-user:apache /var/www</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>To add group write permissions and to set the group ID on future subdirectories,
                              change the directory permissions of <code>/var/www</code> and its
                              subdirectories.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo chmod 2775 /var/www</code></strong>
<code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>find /var/www -type d -exec sudo chmod 2775 {} \;</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>To add group write permissions, recursively change the file permissions of
                              <code>/var/www</code> and its subdirectories:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>find /var/www -type f -exec sudo chmod 0664 {} \;</code></strong></code></pre>
                           </li>
                     </ol>
                     <p>Now, the ec2-user user (and any future members of the <code class="code">apache</code> group) can add,
                        delete, and edit files in the Apache document root. Now you are ready to add content,
                        such
                        as a static website or a PHP application.
                     </p>
                     
                     <p class="title"><b>(Optional) Secure your web server</b></p>
                     
                     <p>A web server running the HTTP protocol provides no transport security for the data
                        that it sends or receives. When you connect to an HTTP server using a web browser,
                        the
                        URLs that you visit, the content of webpages that you receive, and the contents
                        (including passwords) of any HTML forms that you submit are all visible to eavesdroppers
                        anywhere along the network pathway. The best practice for securing your web server
                        is to
                        install support for HTTPS (HTTP Secure), which protects your data with SSL/TLS
                        encryption.
                     </p>
                     
                     <p>For information about enabling HTTPS on your server, see <a href="./AWSEC2/latest/UserGuide/SSL-on-an-instance.html" target="_blank">Tutorial: Configure Apache Web Server on
                           Amazon Linux to use SSL/TLS</a>.
                     </p>
                     <p class="title"><b>To test your LAMP web server </b></p>
                     <p>If your server is installed and running, and your file permissions are set correctly,
                        your ec2-user account should be able to create a PHP file in the
                        <code>/var/www/html</code> directory that is available from the
                        internet.
                     </p>
                     <ol>
                        <li>
                           
                           <p>Create a PHP file in the Apache document root.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>echo &quot;&lt;?php phpinfo(); ?&gt;&quot; &gt; /var/www/html/phpinfo.php</code></strong></code></pre>
                           <p>If you get a &quot;Permission denied&quot; error when trying to run this command, try logging
                              out and logging back in again 
                              to pick up the proper group permissions that you configured in <a href="install-LAMP.html#SettingFilePermissions">To set file permissions</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In a web browser, type the URL of the file that you just created. This URL is the
                              public DNS address of your instance followed by a forward slash and the file name.
                              For example:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">http://<em class="replaceable"><code>my.public.dns.amazonaws.com</code></em>/phpinfo.php</code></pre>
                           <p>You should see the PHP information page:</p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/phpinfo5.6.6.png">
                              
                              
                           </div>
                           
                           <p>If you do not see this page, verify that the
                              <code>/var/www/html/phpinfo.php</code> file was created properly in
                              the previous step. You can also verify that all of the required packages were
                              installed with the following command. The package versions in the second column
                              do not need to match this example output.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum list installed httpd24 php70 mysql56-server php70-mysqlnd</code></strong><code class="computeroutput" copy="false">
Loaded plugins: priorities, update-motd, upgrade-helper
Installed Packages
httpd24.x86_64                          2.4.25-1.68.amzn1                    @amzn-updates
mysql56-server.x86_64                   5.6.35-1.23.amzn1                    @amzn-updates
php70.x86_64                            7.0.14-1.20.amzn1                    @amzn-updates
php70-mysqlnd.x86_64                    7.0.14-1.20.amzn1                    @amzn-updates</code></code></pre>
                           <p>If any of the required packages are not listed in your output, install them
                              using the <b>sudo yum install <em class="replaceable"><code>package</code></em></b> command.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Delete the <code>phpinfo.php</code> file. Although this can be useful
                              information, it should not be broadcast to the internet for security reasons.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>rm /var/www/html/phpinfo.php</code></strong></code></pre>
                           </li>
                     </ol><a id="SecuringMySQLProcedure"></a><p class="title"><b>To secure the database server</b></p>
                     <p>The default installation of the MySQL server has several features that are great for
                        testing and development, but they should be disabled or removed for production servers.
                        The <b>mysql_secure_installation</b> command walks you through the process
                        of setting a root password and removing the insecure features from your installation.
                        Even if you are not planning on using the MySQL server, we recommend performing this
                        procedure.
                     </p>
                     <ol>
                        <li>
                           
                           <p>Start the MySQL server.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo service mysqld start</code></strong><code class="computeroutput" copy="false">
Initializing MySQL database:  
...

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
...

Starting mysqld:                                           [  OK  ]</code></code></pre>
                           </li>
                        <li>
                           
                           <p>Run <b>mysql_secure_installation</b>.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo mysql_secure_installation</code></strong></code></pre>
                           <ol>
                              <li>
                                 
                                 <p>When prompted, type a password for the root account.</p>
                                 
                                 <ol>
                                    <li>
                                       
                                       <p>Type the current root password. By default, the root account does
                                          not have a password set. Press Enter.
                                       </p>
                                       
                                    </li>
                                    <li>
                                       
                                       <p>Type <strong class="userinput"><code>Y</code></strong> to set a password, and type a secure
                                          password twice. For more information about creating a secure
                                          password, see <a href="https://identitysafe.norton.com/password-generator/" target="_blank">https://identitysafe.norton.com/password-generator/</a>. Make sure to
                                          store this password in a safe place.
                                       </p>
                                       
                                       <div class="aws-note">
                                          <p class="aws-note">Note</p>
                                          <p>Setting a root password for MySQL is only the most basic
                                             measure for securing your database. When you build or install a
                                             database-driven application, you typically create a database
                                             service user for that application and avoid using the root
                                             account for anything but database administration. 
                                          </p>
                                       </div>
                                       
                                    </li>
                                 </ol>
                                 
                              </li>
                              <li>
                                 
                                 <p>Type <strong class="userinput"><code>Y</code></strong> to remove the anonymous user accounts.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Type <strong class="userinput"><code>Y</code></strong> to disable the remote root login.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Type <strong class="userinput"><code>Y</code></strong> to remove the test database.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Type <strong class="userinput"><code>Y</code></strong> to reload the privilege tables and save your
                                    changes.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>(Optional) If you do not plan to use the MySQL server right away, stop it. You can
                              restart it when you need it again.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo service mysqld stop</code></strong><code class="computeroutput" copy="false">
Stopping mysqld:                                           [  OK  ]</code></code></pre>
                           </li>
                        <li>
                           
                           <p>(Optional) If you want the MySQL server to start at every boot, type the following
                              command.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo chkconfig mysqld on</code></strong></code></pre>
                           </li>
                     </ol>
                     <p>You should now have a fully functional LAMP web server. If you add content to the
                        Apache
                        document root at <code>/var/www/html</code>, you should be able to view that content
                        at the public DNS address for your instance. 
                     </p>
                     <p class="title"><b>(Optional) Install phpMyAdmin</b></p>
                     <p><a href="https://www.phpmyadmin.net/" target="_blank">phpMyAdmin</a> is a web-based database
                        management tool that you can use to view and edit the MySQL databases on your EC2
                        instance. Follow the steps below to install and configure phpMyAdmin on your Amazon
                        Linux
                        instance.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>We do not recommend using phpMyAdmin to access a LAMP server unless you have
                           enabled SSL/TLS in Apache; otherwise, your database administrator password and other
                           data are transmitted insecurely across the internet. For security recommendations
                           from the developers, see <a href="https://docs.phpmyadmin.net/en/latest/setup.html#securing-your-phpmyadmin-installation" target="_blank">Securing your phpMyAdmin installation</a>. For general information about
                           securing a web server on an EC2 instance, see <a href="./AWSEC2/latest/UserGuide/SSL-on-an-instance.html" target="_blank">Tutorial: Configure Apache Web
                              Server on Amazon Linux to use SSL/TLS</a>.
                        </p>
                     </div>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>The Amazon Linux package management system does not currently support the automatic
                           installation of
                           phpMyAdmin in a PHP 7 environment. This tutorial describes how to install phpMyAdmin
                           manually.
                        </p>
                     </div>
                     <ol>
                        <li>
                           
                           <p>Log in to your EC2 instance using SSH.</p>
                           
                        </li>
                        <li>
                           
                           <p>Install the required dependencies.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum install php70-mbstring.x86_64 php70-zip.x86_64 -y</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Restart Apache.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo service httpd restart</code></strong><code class="computeroutput" copy="false">
Stopping httpd:                                            [  OK  ]
Starting httpd:                                            [  OK  ]</code></code></pre>
                           </li>
                        <li>
                           
                           <p>Navigate to the Apache document root at <code class="code">/var/www/html</code>.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>cd /var/www/html</code></strong>
<code class="prompt" copy="false">[ec2-user html]$ </code></code></pre>
                           </li>
                        <li>
                           
                           <p>Select a source package for the latest phpMyAdmin release from <a href="https://www.phpmyadmin.net/downloads" target="_blank">https://www.phpmyadmin.net/downloads</a>. To download the file directly to
                              your instance, copy the link and paste it into a <b>wget</b> command, as
                              in this example:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user html]$ </code><strong class="userinput"><code>wget <em class="replaceable"><code>https://www.phpmyadmin.net/downloads/phpMyAdmin-latest-all-languages.tar.gz</code></em></code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Extract the package and change the name of the resulting directory to something
                              more manageable.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user html]$ </code><strong class="userinput"><code>tar -xvzf <em class="replaceable"><code>phpMyAdmin-latest-all-languages.tar.gz</code></em></code></strong>
<code class="prompt" copy="false">[ec2-user html]$ </code><strong class="userinput"><code>mv <em class="replaceable"><code>phpMyAdmin-4.7.5-all-languages</code></em> phpMyAdmin</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p> (Optional) If the MySQL server is not running, start it now.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo service mysqld start</code></strong><code class="computeroutput" copy="false">
Starting mysqld:                                           [  OK  ]</code></code></pre>
                           </li>
                        <li>
                           
                           <p>In a web browser, type the URL of your phpMyAdmin installation. This URL is the
                              public DNS address (or the public IP address) of your instance followed by a forward
                              slash and the name of your installation directory. For example:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">http://<em class="replaceable"><code>my.public.dns.amazonaws.com</code></em>/phpMyAdmin</code></pre>
                           <p>You should see the phpMyAdmin login page:</p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/phpmyadmin_login.png">
                              
                              
                           </div>
                           
                           
                        </li>
                        <li>
                           
                           <p>Log in to your phpMyAdmin installation with the <code class="code">root</code> user name and
                              the MySQL root password you created earlier. 
                           </p>
                           
                           <p>Your installation must still be configured before you put it into service. To
                              configure phpMyAdmin, you can <a href="https://docs.phpmyadmin.net/en/latest/setup.html#manually-creating-the-file" target="_blank">manually create a configuration file</a>, <a href="https://docs.phpmyadmin.net/en/latest/setup.html#using-setup-script" target="_blank">use
                                 the setup console</a>, or combine both approaches. 
                           </p>
                           
                           <p> For information about using phpMyAdmin, see the <a href="http://docs.phpmyadmin.net/en/latest/user.html" target="_blank">phpMyAdmin User
                                 Guide</a>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <h2 id="lamp-troubleshooting">Troubleshooting</h2>
                     
                     <p>This section offers suggestions for resolving common problems you may encounter while
                        setting up a new LAMP server.
                        
                     </p>
                     
                     
                     <h3 id="is_apache_on">I can&apos;t connect to my server using a web browser.</h3>
                     
                     <p>Perform the following checks to see if your Apache web server is running and
                        accessible.
                     </p>        
                     
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><b>Is the web server running?</b></p>
                              
                              <p>You can verify that <b>httpd</b> is on by running the following command:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>chkconfig --list httpd</code></strong><code class="computeroutput" copy="false">
httpd           0:off   1:off   2:on    3:on    4:on    5:on    6:off</code></code></pre>
                              <p>Here, <b>httpd</b> is <code class="code">on</code> in runlevels 2, 3, 4, and 5 (which is what you want to see).
                              </p>
                              
                              <p>If the <b>httpd</b> process is not running, repeat the steps
                                 described in <a href="install-LAMP.html#install_apache">To install and start the LAMP web server with the Amazon Linux AMI</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>Is the firewall correctly configured?</b></p>
                              
                              <p>If you
                                 are unable to see the Apache test page, check that the security group you
                                 are using contains a rule to allow HTTP (port 80)
                                 traffic. For information about adding an HTTP rule to
                                 your security group, see <a href="using-network-security.html#adding-security-group-rule">Adding Rules to a Security Group</a>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     
                     <h3 id="software_versions">The application software I want to run on my server
                        is incompatible with the installed PHP version or other software
                     </h3>
                     
                     <p>This tutorial recommends installing the most up-to-date versions of Apache HTTP
                        Server, PHP, and MySQL. Before installing an additional LAMP application, check its
                        requirements to confirm that it is compatible with your installed environment. If
                        the latest version of PHP is not supported, it is possible (and entirely safe) to
                        downgrade to an earlier supported configuration. You can also install more than one
                        version of PHP in parallel, which solves certain compatibility problems with a
                        minimum of effort. For information about configuring a preference among multiple
                        installed PHP versions, see <a href="https://aws.amazon.com/amazon-linux-ami/2016.09-release-notes/" target="_blank">Amazon Linux AMI
                           2016.09 Release Notes.</a></p>
                     
                     
                     <p class="title"><b>How to downgrade</b></p>
                     
                     <p>The well-tested previous version of this tutorial called for the following
                        core LAMP packages:
                     </p>
                     
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><code class="code">httpd24</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">php56</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">mysql55-server</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">php56-mysqlnd</code></p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>If you have already installed the latest packages as recommended at the start of
                        this tutorial, you must first uninstall these packages and other dependencies as
                        follows:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum remove -y httpd24 php70 mysql56-server php70-mysqlnd perl-DBD-MySQL56</code></strong></code></pre>
                     <p>Next, install the replacement environment:</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum install -y  httpd24 php56 mysql55-server php56-mysqlnd</code></strong></code></pre>
                     <p>If you decide later to upgrade to the recommended environment, you must first
                        remove the customized packages and dependencies:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>sudo yum remove -y  httpd24 php56 mysql55-server php56-mysqlnd perl-DBD-MySQL55</code></strong></code></pre>
                     <p>Now you can install the latest packages, as described earlier.</p>
                     
                     
                     
                     <h2 id="lamp-more-info">Related Topics</h2>
                     
                     <p>For more information about transferring files to your instance or installing a
                        WordPress blog on your web server, see the following documentation:
                     </p> 
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="putty.html#Transfer_WinSCP">Transferring Files to Your Linux Instance Using
                                    				WinSCP</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="AccessingInstancesLinux.html#AccessingInstancesLinuxSCP">Transferring Files to Linux Instances from
                                    				Linux Using SCP</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="hosting-wordpress.html">Tutorial: Hosting a WordPress Blog with Amazon Linux</a></p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>For more information about the commands and software used in this tutorial, see the
                        following webpages:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Apache web server: <a href="http://httpd.apache.org/" target="_blank">http://httpd.apache.org/</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>MySQL database server: <a href="http://www.mysql.com/" target="_blank">http://www.mysql.com/</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>PHP programming language: <a href="http://php.net/" target="_blank">http://php.net/</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>The <code class="code">chmod</code> command: <a href="https://en.wikipedia.org/wiki/Chmod" target="_blank">https://en.wikipedia.org/wiki/Chmod</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>The <code class="code">chown</code> command: <a href="https://en.wikipedia.org/wiki/Chown" target="_blank">https://en.wikipedia.org/wiki/Chown</a></p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>For more information about registering a domain name for your web server, or
                        transferring an existing domain name to this host, see <a href="./Route53/latest/DeveloperGuide/creating-migrating.html" target="_blank">Creating and Migrating Domains and
                           Subdomains to Amazon Route 53</a> in the
                        <em>Amazon Route&#xA0;53 Developer Guide</em>.
                     </p>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="ec2-lamp-amazon-linux-2.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="hosting-wordpress.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Troubleshooting"><a class="pagetoc" href="#lamp-troubleshooting">Troubleshooting</a></li>
                        <li class="pagetoc" name="Related Topics"><a class="pagetoc" href="#lamp-more-info">Related Topics</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>