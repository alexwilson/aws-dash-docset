<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Example Policies for Working with the AWS CLI or an AWS
         SDK - Amazon Elastic Compute Cloud
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="iam-policies-for-amazon-ec2.html" title="IAM Policies for Amazon EC2">
      <link rel="prev" href="ec2-supported-iam-actions-resources.html" title="Supported Resource-Level Permissions for Amazon EC2 API Actions">
      <link rel="next" href="iam-policies-ec2-console.html" title="Example Policies for Working in the Amazon EC2 Console">
      <meta name="description" content="Learn to create policy statements to control the permissions that IAM users have to Amazon EC2.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ExamplePolicies_EC2.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/ec2">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="EC2_Network_and_Security.html">Network and Security</a> &#xBB; <a href="UsingIAM.html">Controlling Access to Amazon EC2 Resources</a> &#xBB; <a href="iam-policies-for-amazon-ec2.html">IAM Policies for Amazon EC2</a> &#xBB; <span class="breadcrumb">Example Policies for Working with the AWS CLI or an AWS
                                    SDK</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="ExamplePolicies_EC2">Example Policies for Working with the AWS CLI or an AWS
                        SDK
                     </h1>
                     <p>The following examples show policy statements that you could use to control the
                        				permissions that IAM users have to Amazon EC2. These policies are designed for
                        requests
                        				that are made with the AWS CLI or an AWS SDK. For example policies for working
                        in the
                        				Amazon EC2 console, see <a href="iam-policies-ec2-console.html">Example Policies for Working in the Amazon EC2 Console</a>. For examples of IAM policies
                        				specific to Amazon VPC, see <a href="./AmazonVPC/latest/UserGuide/VPC_IAM.html" target="_blank">Controlling Access to
                           					Amazon VPC Resources</a>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Contents</strong></p>
                        <ul>
                           <li><a href="#iam-example-read-only">1: Read-Only Access</a></li>
                           <li><a href="#iam-example-region">2: Restricting Access to a Specific Region</a></li>
                           <li><a href="#iam-example-instances">3: Working with Instances</a></li>
                           <li><a href="#iam-example-manage-volumes">4. Working with Volumes</a></li>
                           <li><a href="#iam-example-manage-snapshots">5. Working with Snapshots</a></li>
                           <li><a href="#iam-example-runinstances">6: Launching Instances (RunInstances)</a></li>
                           <li><a href="#iam-example-classiclink">7. Working with ClassicLink</a></li>
                           <li><a href="#iam-example-reservedinstances">8. Working with Reserved Instances</a></li>
                           <li><a href="#iam-example-taggingresources">9. Tagging Resources</a></li>
                           <li><a href="#iam-example-iam-roles">10: Working with IAM Roles</a></li>
                           <li><a href="#iam-example-route-tables">11: Working with Route Tables</a></li>
                           <li><a href="#iam-example-source-instance">12: Allowing a Specific Instance to View Resources in
                                 Other AWS Services</a></li>
                           <li><a href="#iam-example-launch-templates">13. Working with Launch Templates</a></li>
                        </ul>
                     </div>
                     				
                     <h2 id="iam-example-read-only">1: Read-Only Access</h2>
                     				
                     				
                     <p>The following policy grants users permissions to use all Amazon EC2 API actions whose
                        names
                        begin with <code class="code">Describe</code>. The <code class="code">Resource</code> element uses a wildcard to
                        indicate that users can specify all resources with these API actions. The * wildcard
                        is
                        also necessary in cases where the API action does not support resource-level
                        permissions. For more information about which ARNs you can use with which Amazon EC2
                        API
                        actions, see <a href="ec2-supported-iam-actions-resources.html">Supported Resource-Level Permissions for Amazon EC2 API Actions</a>. 
                     </p>
                     				
                     <p>Users don&apos;t have permission to perform any actions on the resources (unless
                        					another statement grants them permission to do so) because they&apos;re denied
                        					permission to use API actions by default.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:Describe*&quot;,
      &quot;Resource&quot;: &quot;*&quot;
    }
   ]
}</code></pre>
                     			
                     				<h2 id="iam-example-region">2: Restricting Access to a Specific Region</h2>
                     				
                     				
                     <p>The following policy grants users permissions to use all Amazon EC2 API actions in
                        the
                        EU (Frankfurt) region only. Users cannot view, create, modify, or delete
                        resources in any other region.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;:&quot;2012-10-17&quot;,
  &quot;Statement&quot;:[
    {
    &quot;Effect&quot;: &quot;Allow&quot;,
    &quot;Action&quot;: &quot;ec2:*&quot;,
    &quot;Resource&quot;: &quot;*&quot;,
    &quot;Condition&quot;: {
      &quot;StringEquals&quot;: {
        &quot;ec2:Region&quot;: &quot;eu-central-1&quot;
      }
    }
  }
  ]
}</code></pre>
                     			
                     				<h2 id="iam-example-instances">3: Working with Instances</h2>
                     
                     				
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#iam-example-instances-all">Describe, Launch, Stop, Start, and Terminate All
                                 Instances</a></li>
                           <li><a href="#iam-example-instances-specific">Describe All Instances, and Stop, Start, and
                                 Terminate Only Particular Instances</a></li>
                        </ul>
                     </div>
                     				
                     					
                     <h3 id="iam-example-instances-all">Describe, Launch, Stop, Start, and Terminate All
                        Instances
                     </h3>
                     					
                     					
                     <p>The following policy grants users permissions to use the API actions specified in
                        the
                        <code class="code">Action</code> element. The <code class="code">Resource</code> element uses a * wildcard
                        to indicate that users can specify all resources with these API actions. The *
                        wildcard is also necessary in cases where the API action does not support
                        resource-level permissions. For more information about which ARNs you can use with
                        which Amazon EC2 API actions, see <a href="ec2-supported-iam-actions-resources.html">Supported Resource-Level Permissions for Amazon EC2 API Actions</a>. 
                     </p>
                     					
                     <p>The users don&apos;t have permission to use any other API actions (unless
                        						another statement grants them permission to do so) because users are denied
                        						permission to use API actions by default.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;ec2:DescribeInstances&quot;, &quot;ec2:DescribeImages&quot;,
        &quot;ec2:DescribeKeyPairs&quot;, &quot;ec2:DescribeSecurityGroups&quot;,
        &quot;ec2:DescribeAvailabilityZones&quot;,
        &quot;ec2:RunInstances&quot;, &quot;ec2:TerminateInstances&quot;,
        &quot;ec2:StopInstances&quot;, &quot;ec2:StartInstances&quot;
      ],
      &quot;Resource&quot;: &quot;*&quot;
    }
   ]
}</code></pre>
                     				
                     				
                     					<h3 id="iam-example-instances-specific">Describe All Instances, and Stop, Start, and
                        Terminate Only Particular Instances
                     </h3>
                     					
                     					
                     <p>The following policy allows users to describe all instances, to start and
                        						stop only instances i-1234567890abcdef0 and i-0598c7d356eba48d7,
                        						and to terminate only instances in the US East (N. Virginia) Region
                        							(<code class="code">us-east-1</code>) with the resource tag
                        							&quot;<code class="code">purpose=test</code>&quot;. 
                     </p>
                     					
                     <p>The first statement uses a * wildcard for the <code class="code">Resource</code>
                        						element to indicate that users can specify all resources with the action; in
                        						this case, they can list all instances. The * wildcard is also necessary in
                        						cases where the API action does not support resource-level permissions (in
                        						this case, <code class="code">ec2:DescribeInstances</code>). For more information about
                        						which ARNs you can use with which Amazon EC2 API actions, see <a href="ec2-supported-iam-actions-resources.html">Supported Resource-Level Permissions for Amazon EC2 API Actions</a>. 
                     </p>
                     					
                     <p>The second statement uses resource-level permissions for the
                        							<code class="code">StopInstances</code> and <code class="code">StartInstances</code> actions. The
                        						specific instances are indicated by their ARNs in the <code class="code">Resource</code>
                        						element.
                     </p>
                     					
                     <p>The third statement allows users to terminate all instances in the
                        						US East (N. Virginia) Region (<code class="code">us-east-1</code>) that belong to the
                        						specified AWS account, but only where the instance has the tag
                        							<code class="code">&quot;purpose=test&quot;</code>. The <code class="code">Condition</code> element
                        						qualifies when the policy statement is in effect. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [
   {
   &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:DescribeInstances&quot;,
      &quot;Resource&quot;: &quot;*&quot;
   },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;ec2:StopInstances&quot;, 
        &quot;ec2:StartInstances&quot;
      ],
      &quot;Resource&quot;: [
      &quot;arn:aws:ec2:us-east-1:123456789012:instance/i-1234567890abcdef0&quot;,
      &quot;arn:aws:ec2:us-east-1:123456789012:instance/i-0598c7d356eba48d7&quot;
      ]
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:TerminateInstances&quot;,
      &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:123456789012:instance/*&quot;,
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
            &quot;ec2:ResourceTag/purpose&quot;: &quot;test&quot;
         }
      }
   }

   ]
}</code></pre>
                     				
                     			
                     				<h2 id="iam-example-manage-volumes">4. Working with Volumes</h2>
                     				
                     				
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#iam-example-manage-volumes-attach-detach">Attaching and Detaching Volumes</a></li>
                           <li><a href="#iam-example-manage-volumes-create">Creating a Volume</a></li>
                           <li><a href="#iam-example-manage-volumes-tags">Creating a Volume with Tags</a></li>
                        </ul>
                     </div>
                     				
                     					
                     <h3 id="iam-example-manage-volumes-attach-detach">Attaching and Detaching Volumes</h3>
                     					
                     					
                     <p>When an API action requires a caller to specify multiple resources, you
                        						must create a policy statement that allows users to access all required
                        						resources. If you need to use a <code class="code">Condition</code> element with one or
                        						more of these resources, you must create multiple statements as shown in
                        						this example.
                     </p>
                     					
                     <p>The following policy allows users to attach volumes with the tag
                        							&quot;<code class="code">volume_user</code>=<em>iam-user-name</em>&quot; to
                        						instances with the tag &quot;<code class="code">department=dev</code>&quot;, and to detach those
                        						volumes from those instances. If you attach this policy to an IAM group,
                        						the <code class="code">aws:username</code> policy variable gives each IAM user in the
                        						group permission to attach or detach volumes from the instances with a tag
                        						named <code class="code">volume_user</code> that has his or her IAM user name as a
                        						value.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;ec2:AttachVolume&quot;,
        &quot;ec2:DetachVolume&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:123456789012:instance/*&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;ec2:ResourceTag/department&quot;: &quot;dev&quot;
        }
      }
   },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;ec2:AttachVolume&quot;,
        &quot;ec2:DetachVolume&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:123456789012:volume/*&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;ec2:ResourceTag/volume_user&quot;: &quot;${aws:username}&quot;
        }
      }
   }
  ]
}</code></pre>
                     				
                     				
                     					<h3 id="iam-example-manage-volumes-create">Creating a Volume</h3>
                     					
                     					
                     <p>The following policy allows users to use the <a href="./AWSEC2/latest/APIReference/API_CreateVolume.html" target="_blank">CreateVolume</a> API
                        						action. The user is allowed to create a volume only if the volume is
                        						encrypted and only if the volume size is less than 20 GiB.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:CreateVolume&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:123456789012:volume/*&quot;,
      &quot;Condition&quot;:{
         &quot;NumericLessThan&quot;: {
             &quot;ec2:VolumeSize&quot; : &quot;20&quot;
          },
          &quot;Bool&quot;:{
              &quot;ec2:Encrypted&quot; : &quot;true&quot;
          }
       }
    }
  ]
}</code></pre>
                     				
                     				
                     					<h3 id="iam-example-manage-volumes-tags">Creating a Volume with Tags</h3>
                     
                     					
                     <p>The following policy includes the <code class="code">aws:RequestTag</code> condition
                        						key that requires users to tag any volumes they create with the tags
                        							<code class="code">costcenter=115</code> and <code class="code">stack=prod</code>. The
                        							<code class="code">aws:TagKeys</code> condition key uses the
                        							<code class="code">ForAllValues</code> modifier to indicate that only the keys
                        							<code class="code">costcenter</code> and <code class="code">stack</code> are allowed in the
                        						request (no other tags can be specified). If users don&apos;t pass these specific
                        						tags, or if they don&apos;t specify tags at all, the request fails. 
                     </p>
                     					
                     <p>For resource-creating actions that apply tags, users must also have permissions to
                        use
                        the <code class="code">CreateTags</code> action. The second statement uses the
                        <code class="code">ec2:CreateAction</code> condition key to allow users to create tags only
                        in the context of <code class="code">CreateVolume</code>. Users cannot tag existing volumes or
                        any other resources. For more information, see <a href="ec2-supported-iam-actions-resources.html#supported-iam-actions-tagging">Resource-Level Permissions for Tagging</a>.
                     </p>
                     
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Sid&quot;: &quot;AllowCreateTaggedVolumes&quot;,
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:CreateVolume&quot;,
      &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:123456789012:volume/*&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;aws:RequestTag/costcenter&quot;: &quot;115&quot;,
          &quot;aws:RequestTag/stack&quot;: &quot;prod&quot;
         },
         &quot;ForAllValues:StringEquals&quot;: {
             &quot;aws:TagKeys&quot;: [&quot;costcenter&quot;,&quot;stack&quot;]
         }
       }
     },
     {
       &quot;Effect&quot;: &quot;Allow&quot;,
       &quot;Action&quot;: [
         &quot;ec2:CreateTags&quot;
       ],
       &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:123456789012:volume/*&quot;,
       &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
             &quot;ec2:CreateAction&quot; : &quot;CreateVolume&quot;
        }
      }
    }
  ]
}</code></pre>
                     					<p>The following policy allows users to create a volume without having to
                        						specify tags. The <code class="code">CreateTags</code> action is only evaluated if tags
                        						are specified in the <code class="code">CreateVolume</code> request. If users do specify
                        						tags, the tag must be <code class="code">purpose=test</code>. No other tags are allowed
                        						in the request.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:CreateVolume&quot;,
      &quot;Resource&quot;: &quot;*&quot;
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:CreateTags&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:1234567890:volume/*&quot;,
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
             &quot;aws:RequestTag/purpose&quot;: &quot;test&quot;,
             &quot;ec2:CreateAction&quot; : &quot;CreateVolume&quot;
          },
         &quot;ForAllValues:StringEquals&quot;: {
             &quot;aws:TagKeys&quot;: &quot;purpose&quot;
          }
       }
    }
  ]
}</code></pre>
                     				
                     			
                     <h2 id="iam-example-manage-snapshots">5. Working with Snapshots</h2>
                     
                     
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#iam-creating-snapshop">Creating a Snapshot</a></li>
                           <li><a href="#iam-creating-snapshot-with-tags">Creating a Snapshot with Tags</a></li>
                           <li><a href="#iam-modifying-snapshot-with-tags">Modifying Permission
                                 Settings for Snapshots</a></li>
                        </ul>
                     </div>
                     
                     
                     <h3 id="iam-creating-snapshop">Creating a Snapshot</h3>
                     
                     <p>The following policy allows customers to use the <a href="./AWSEC2/latest/APIReference/API_CreateSnapshot.html" target="_blank">CreateSnapshot</a> API action. The customer
                        may create a snapshot only if the volume is encrypted and only if the volume size
                        is less
                        than 20 GiB.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;:&quot;2012-10-17&quot;,
   &quot;Statement&quot;:[
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateSnapshot&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;
      },
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateSnapshot&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1:123456789012:volume/*&quot;,
         &quot;Condition&quot;:{
            &quot;NumericLessThan&quot;:{
               &quot;ec2:VolumeSize&quot;:&quot;20&quot;
            },
            &quot;Bool&quot;:{
               &quot;ec2:Encrypted&quot;:&quot;true&quot;
            }
         }
      }
   ]
}</code></pre>
                     
                     
                     <h3 id="iam-creating-snapshot-with-tags">Creating a Snapshot with Tags</h3>
                     
                     <p>The following policy includes the <code class="code">aws:RequestTag</code> condition key that
                        requires the customer to apply the tags <code class="code">costcenter=115</code> and
                        <code class="code">stack=prod</code> to any new snapshot. The <code class="code">aws:TagKeys</code> condition key
                        uses the <code class="code">ForAllValues</code> modifier to indicate that only the keys
                        <code class="code">costcenter</code> and <code class="code">stack</code> may be specified in the request. The
                        request fails if either of these conditions is not met.
                     </p>
                     
                     <p>For resource-creating actions that apply tags, customers must also have permissions
                        to
                        use the <code class="code">CreateTags</code> action. The third statement uses the
                        <code class="code">ec2:CreateAction</code> condition key to allow customers to create tags only in the
                        context of <code class="code">CreateSnapshot</code>. Customers cannot tag existing volumes or any other
                        resources. For more information, see <a href="./AWSEC2/latest/UserGuide/ec2-supported-iam-actions-resources.html#supported-iam-actions-tagging" target="_blank">Resource-Level Permissions for Tagging</a>.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;:&quot;2012-10-17&quot;,
   &quot;Statement&quot;:[
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateSnapshot&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1:123456789012:volume/*&quot;
      },
      {
         &quot;Sid&quot;:&quot;AllowCreateTaggedSnapshots&quot;,
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateSnapshot&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;,
         &quot;Condition&quot;:{
            &quot;StringEquals&quot;:{
               &quot;aws:RequestTag/costcenter&quot;:&quot;115&quot;,
               &quot;aws:RequestTag/stack&quot;:&quot;prod&quot;
            },
            &quot;ForAllValues:StringEquals&quot;:{
               &quot;aws:TagKeys&quot;:[
                  &quot;costcenter&quot;,
                  &quot;stack&quot;
               ]
            }
         }
      },
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateTags&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;,
         &quot;Condition&quot;:{
            &quot;StringEquals&quot;:{
               &quot;ec2:CreateAction&quot;:&quot;CreateSnapshot&quot;
            }
         }
      }
   ]
}</code></pre>
                     <p>The following policy allows customers to create a snapshot without having to specify
                        tags. The <code class="code">CreateTags</code> action is evaluated only if tags are specified in the
                        <code class="code">CreateSnapshot</code> request. If a tag is specified, the tag must be
                        <code class="code">purpose=test</code>. No other tags are allowed in the request.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;:&quot;2012-10-17&quot;,
   &quot;Statement&quot;:[
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateSnapshot&quot;,
         &quot;Resource&quot;:&quot;*&quot;
      },
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateTags&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;,
         &quot;Condition&quot;:{
            &quot;StringEquals&quot;:{
               &quot;aws:RequestTag/purpose&quot;:&quot;test&quot;,
               &quot;ec2:CreateAction&quot;:&quot;CreateSnapshot&quot;
            },
            &quot;ForAllValues:StringEquals&quot;:{
               &quot;aws:TagKeys&quot;:&quot;purpose&quot;
            }
         }
      }
   ]
}</code></pre>
                     <p>The following policy allows a snapshot to be created only if the source volume is
                        tagged
                        with <code class="code">User:<em>username</em></code> for the customer, and the
                        snapshot itself is tagged with <code class="code">Environment:Dev</code> and <code class="code">User:<em>username</em></code>. The customer may add additional tags to the
                        snapshot.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;:&quot;2012-10-17&quot;,
   &quot;Statement&quot;:[
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateSnapshot&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1:123456789012:volume/*&quot;,
         &quot;Condition&quot;:{
            &quot;StringEquals&quot;:{
               &quot;ec2:ResourceTag/User&quot;:&quot;${aws:<em>username</em>}&quot;
            }
         }
      },
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateSnapshot&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;,
         &quot;Condition&quot;:{
            &quot;StringEquals&quot;:{
               &quot;aws:RequestTag/Environment&quot;:&quot;Dev&quot;,
               &quot;aws:RequestTag/User&quot;:&quot;${aws:<em>username</em>}&quot;
            }
         }
      },
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:CreateTags&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;
      }
   ]
}</code></pre>
                     <p>The following policy allows deletion of a snapshot only if the snapshot is tagged
                        with
                        User:<em>username</em> for the customer.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;:&quot;2012-10-17&quot;,
   &quot;Statement&quot;:[
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2:DeleteSnapshot&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;,
         &quot;Condition&quot;:{
            &quot;StringEquals&quot;:{
               &quot;ec2:ResourceTag/User&quot;:&quot;${aws:<em>username</em>}&quot;
            }
         }
      }
   ]
}</code></pre>
                     <p>The following policy allows a customer to create a snapshot but denies the action
                        if the
                        snapshot being created has a tag key <code class="code">value=stack</code>.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;:&quot;2012-10-17&quot;,
   &quot;Statement&quot;:[
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:[
            &quot;ec2:CreateSnapshot&quot;,
            &quot;ec2:CreateTags&quot;
         ],
         &quot;Resource&quot;:&quot;*&quot;
      },
      {
         &quot;Effect&quot;:&quot;Deny&quot;,
         &quot;Action&quot;:&quot;ec2:CreateSnapshot&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;,
         &quot;Condition&quot;:{
            &quot;ForAnyValue:StringEquals&quot;:{
               &quot;aws:TagKeys&quot;:&quot;stack&quot;
            }
         }
      }
   ]
}</code></pre>
                     
                     
                     <h3 id="iam-modifying-snapshot-with-tags">Modifying Permission
                        Settings for Snapshots
                     </h3>
                     
                     <p>The following policy allows modification of a snapshot only if the snapshot is tagged
                        with <code class="code">User:<em class="replaceable"><code>username</code></em></code>, where
                        <em class="replaceable"><code>username</code></em> is the customer&apos;s AWS account user name. The request
                        fails if this condition is not met.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;:&quot;2012-10-17&quot;,
   &quot;Statement&quot;:[
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:&quot;ec2: ModifySnapshotAttribute&quot;,
         &quot;Resource&quot;:&quot;arn:aws:ec2:us-east-1::snapshot/*&quot;,
         &quot;Condition&quot;:{
            &quot;StringEquals&quot;:{
               &quot;ec2:ResourceTag/user-name&quot;:&quot;${aws:<em class="replaceable"><code>username</code></em>}&quot;
            }
         }
      }
   ]
}</code></pre>
                     
                     
                     				<h2 id="iam-example-runinstances">6: Launching Instances (RunInstances)</h2>
                     				
                     				
                     <p>The <a href="./AWSEC2/latest/APIReference/ApiReference-query-RunInstances.html" target="_blank">RunInstances</a>
                        API action launches one or more instances. <code class="code">RunInstances</code> requires an AMI and
                        creates an instance; and users can specify a key pair and security group in the request.
                        Launching into EC2-VPC requires a subnet, and creates a network interface. Launching
                        from an Amazon EBS-backed AMI creates a volume. Therefore, the user must have permissions
                        to
                        use these Amazon EC2 resources. You can create a policy statement that requires users
                        to
                        specify an optional parameter on <code class="code">RunInstances</code>, or restricts users to
                        particular values for a parameter.
                     </p>
                     
                     <p>For more information about the resource-level permissions that are required to
                        launch an instance, see <a href="ec2-supported-iam-actions-resources.html#supported-iam-actions-runinstances">Resource-Level Permissions for RunInstances</a>.
                     </p>
                     				
                     <p>By default, users don&apos;t have permissions to describe, start, stop, or terminate the
                        resulting instances. One way to grant the users permission to manage the resulting
                        instances is to create a specific tag for each instance, and then create a statement
                        that enables them to manage instances with that tag. For more information, see <a href="ExamplePolicies_EC2.html#iam-example-instances">3: Working with Instances</a>.
                     </p>
                     				
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#iam-example-runinstances-ami">AMI</a></li>
                           <li><a href="#iam-example-runinstances-instance-type">Instance Type</a></li>
                           <li><a href="#iam-example-runinstances-subnet">Subnet</a></li>
                           <li><a href="#iam-example-runinstances-volumes">EBS Volumes</a></li>
                           <li><a href="#iam-example-runinstances-tags">Applying Tags</a></li>
                           <li><a href="#iam-example-tags-launch-template">Applying Tags in a Launch Template</a></li>
                           <li><a href="#iam-example-runinstances-egpu">Attaching an Elastic GPU</a></li>
                           <li><a href="#iam-example-runinstances-launch-templates">Launch Templates</a></li>
                        </ul>
                     </div>
                     				
                     					
                     <h3 id="iam-example-runinstances-ami">AMI</h3>
                     					
                     <p>The following policy allows users to launch instances using only the specified AMIs,
                        <code class="code">ami-9e1670f7</code> and <code class="code">ami-45cf5c3c</code>. The users can&apos;t
                        launch an instance using other AMIs (unless another statement grants the
                        users permission to do so).
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [
        &quot;arn:aws:ec2:<em>region</em>::image/ami-9e1670f7&quot;,
        &quot;arn:aws:ec2:<em>region</em>::image/ami-45cf5c3c&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;
      ]
    }
   ]
}</code></pre>
                     					<p>Alternatively, the following policy allows users to launch instances from all AMIs
                        owned
                        by Amazon. The <code class="code">Condition</code> element of the first statement tests
                        whether <code class="code">ec2:Owner</code> is <code class="code">amazon</code>. The users can&apos;t
                        launch an instance using other AMIs (unless another statement grants the
                        users permission to do so).
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [ 
         &quot;arn:aws:ec2:<em>region</em>::image/ami-*&quot;
      ],
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
            &quot;ec2:Owner&quot;: &quot;amazon&quot;
         }
      }
   },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [ 
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;
         ]
      }
   ]
}</code></pre>
                     <p>[EC2-Classic only] The following policy allows users to launch instances
                        using only the AMIs that have the specified tag,
                        &quot;<code class="code">department=dev</code>&quot;, associated with them. The users can&apos;t
                        launch instances using other AMIs because the <code class="code">Condition</code> element
                        of the first statement requires that users specify an AMI that has this tag.
                        Users can only launch into EC2-Classic, as the policy does not grant
                        permissions for the subnet and network interface resources. The second
                        statement uses a wildcard to enable users to create instance resources, and
                        requires users to specify the key pair <code class="code">project_keypair</code> and the
                        security group <code class="code">sg-1a2b3c4d</code>. Users are still able to launch
                        instances without a key pair.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [ 
         &quot;arn:aws:ec2:<em>region</em>::image/ami-*&quot;
      ],
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
            &quot;ec2:ResourceTag/department&quot;: &quot;dev&quot;
         }
      }
   },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [ 
          &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
          &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
          &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/project_keypair&quot;,
          &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/sg-1a2b3c4d&quot;
         ]
      }
   ]
}</code></pre>
                     				
                     
                     				
                     					<h3 id="iam-example-runinstances-instance-type">Instance Type</h3>
                     					
                     					
                     <p>The following policy allows users to launch instances using only the
                        							<code class="code">t2.micro</code> or <code class="code">t2.small</code> instance type, which you
                        						might do to control costs. The users can&apos;t launch larger instances because
                        						the <code class="code">Condition</code> element of the first statement tests whether
                        							<code class="code">ec2:InstanceType</code> is either <code class="code">t2.micro</code> or
                        							<code class="code">t2.small</code>. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;
      ],
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
            &quot;ec2:InstanceType&quot;: [&quot;t2.micro&quot;, &quot;t2.small&quot;]
         }
      }
   },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>::image/ami-*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;
         ]
      }
   ]
}</code></pre>
                     					<p>Alternatively, you can create a policy that denies users permissions to launch any
                        instances except <code class="code">t2.micro</code> and <code class="code">t2.small</code> instance
                        types.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Deny&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;
      ],
      &quot;Condition&quot;: {
         &quot;StringNotEquals&quot;: {
            &quot;ec2:InstanceType&quot;: [&quot;t2.micro&quot;, &quot;t2.small&quot;]
         }
      }
   },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>::image/ami-*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;
         ]
      }
   ]
}</code></pre>
                     				
                     				
                     					<h3 id="iam-example-runinstances-subnet">Subnet</h3>
                     					
                     					
                     <p>The following policy allows users to launch instances using only the
                        						specified subnet, <code class="code">subnet-12345678</code>. The group can&apos;t launch
                        						instances into any another subnet (unless another statement grants the users
                        						permission to do so). Users are still able to launch instances into
                        						EC2-Classic.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/subnet-12345678&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>::image/ami-*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;
      ]
    }
   ]
}</code></pre>
                     					<p>Alternatively, you could create a policy that denies users permissions to launch an
                        instance into any other subnet. The statement does this by denying permission to
                        create a network interface, except where subnet <code class="code">subnet-12345678</code> is
                        specified. This denial overrides any other policies that are created to allow
                        launching instances into other subnets. Users are still able to launch instances
                        into EC2-Classic.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Deny&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;
      ],
      &quot;Condition&quot;: {
         &quot;ArnNotEquals&quot;: {
            &quot;ec2:Subnet&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/subnet-12345678&quot;
         }
      }
   },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>::image/ami-*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;
         ]
      }
   ]
}</code></pre>
                     				
                     				
                     					<h3 id="iam-example-runinstances-volumes">EBS Volumes</h3>
                     					
                     					
                     <p>The following policy allows users to launch instances only if the EBS
                        						volumes for the instance are encrypted. The user must launch an instance
                        						from an AMI that was created with encrypted snapshots, to ensure that the
                        						root volume is encrypted. Any additional volume that the user attaches to
                        						the instance during launch must also be encrypted.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
            &quot;Resource&quot;: [
                &quot;arn:aws:ec2:*:*:volume/*&quot;
            ],
            &quot;Condition&quot;: {
                &quot;Bool&quot;: {
                    &quot;ec2:Encrypted&quot;: &quot;true&quot;
                }
            }
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
            &quot;Resource&quot;: [
                &quot;arn:aws:ec2:*::image/ami-*&quot;,
                &quot;arn:aws:ec2:*:*:network-interface/*&quot;,
                &quot;arn:aws:ec2:*:*:instance/*&quot;,
                &quot;arn:aws:ec2:*:*:subnet/*&quot;,
                &quot;arn:aws:ec2:*:*:key-pair/*&quot;,
                &quot;arn:aws:ec2:*:*:security-group/*&quot;
            ]
        }
    ]
}</code></pre>
                     				
                     				
                     					<h3 id="iam-example-runinstances-tags">Applying Tags</h3>
                     					
                     					
                     <p>The following policy allows users to launch instances and tag the instances during
                        creation. For resource-creating actions that apply tags, users must have permissions
                        to use the <code class="code">CreateTags</code> action. The second statement uses the
                        <code class="code">ec2:CreateAction</code> condition key to allow users to create tags only
                        in the context of <code class="code">RunInstances</code>, and only for instances. Users cannot
                        tag existing resources, and users cannot tag volumes using the
                        <code class="code">RunInstances</code> request. 
                     </p>
                     					
                     <p>For more information, see <a href="ec2-supported-iam-actions-resources.html#supported-iam-actions-tagging">Resource-Level Permissions for Tagging</a>.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:RunInstances&quot;
      ],
      &quot;Resource&quot;: &quot;*&quot;
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:CreateTags&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:123456789012:instance/*&quot;,
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
             &quot;ec2:CreateAction&quot; : &quot;RunInstances&quot;
          }
       }
    }
  ]
}</code></pre>
                     					<p>The following policy includes the <code class="code">aws:RequestTag</code> condition
                        						key that requires users to tag any instances and volumes that are created by
                        							<code class="code">RunInstances</code> with the tags
                        							<code class="code">environment=production</code> and <code class="code">purpose=webserver</code>.
                        						The <code class="code">aws:TagKeys</code> condition key uses the
                        							<code class="code">ForAllValues</code> modifier to indicate that only the keys
                        							<code class="code">environment</code> and <code class="code">purpose</code> are allowed in the
                        						request (no other tags can be specified). If no tags are specified in the
                        						request, the request fails. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:RunInstances&quot;
      ],
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>::image/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/*&quot;
      ]
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:RunInstances&quot;
      ],
      &quot;Resource&quot;: [
          &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
          &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;
      ],
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
             &quot;aws:RequestTag/environment&quot;: &quot;production&quot; ,
             &quot;aws:RequestTag/purpose&quot;: &quot;webserver&quot;
          },
          &quot;ForAllValues:StringEquals&quot;: {
              &quot;aws:TagKeys&quot;: [&quot;environment&quot;,&quot;purpose&quot;]
          }
       }
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:CreateTags&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:*/*&quot;,
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
             &quot;ec2:CreateAction&quot; : &quot;RunInstances&quot;
          }
       }
    }
  ]
}</code></pre>
                     					<p>The following policy uses the <code class="code">ForAnyValue</code> modifier on the
                        							<code class="code">aws:TagKeys</code> condition to indicate that at least one tag
                        						must be specified in the request, and it must contain the key
                        							<code class="code">environment</code> or <code class="code">webserver</code>. The tag must be
                        						applied to both instances and volumes. Any tag values can be specified in
                        						the request. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:RunInstances&quot;
      ],
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>::image/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:key-pair/*&quot;
      ]
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
          &quot;ec2:RunInstances&quot;
      ],
      &quot;Resource&quot;: [
          &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:volume/*&quot;,
          &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;
      ],
      &quot;Condition&quot;: {
          &quot;ForAnyValue:StringEquals&quot;: {
              &quot;aws:TagKeys&quot;: [&quot;environment&quot;,&quot;webserver&quot;]
          }
       }
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
          &quot;ec2:CreateTags&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:*/*&quot;,
      &quot;Condition&quot;: {
          &quot;StringEquals&quot;: {
              &quot;ec2:CreateAction&quot; : &quot;RunInstances&quot;
          }
       }
    }
  ]
}</code></pre>
                     					<p>In the following policy, users do not have to specify tags in the request,
                        						but if they do, the tag must be <code class="code">purpose=test</code>. No other tags are
                        						allowed. Users can apply the tags to any taggable resource in the
                        							<code class="code">RunInstances</code> request.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:RunInstances&quot;
      ],
      &quot;Resource&quot;: &quot;*&quot;
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:CreateTags&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:*/*&quot;,
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
             &quot;aws:RequestTag/purpose&quot;: &quot;test&quot;,
             &quot;ec2:CreateAction&quot; : &quot;RunInstances&quot;
          },
          &quot;ForAllValues:StringEquals&quot;: {
              &quot;aws:TagKeys&quot;: &quot;purpose&quot;
          }
       }
    }
  ]
}</code></pre>
                     				
                     			    
                     			        <h3 id="iam-example-tags-launch-template">Applying Tags in a Launch Template</h3>
                     			        
                     <p>In the following example, users can launch instances, but only if they use a
                        specific launch template (<code class="code">lt-09477bcd97b0d310e</code>). The
                        <code class="code">ec2:IsLaunchTemplateResource</code> condition key prevents users from
                        overriding any of the launch template parameters. The second part of the statement
                        allows users to tag instances on creation&#x2014;this part of the statement is
                        necessary if tags are specified for the instance in the launch template.
                     </p>
                     			        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: &quot;*&quot;,
      &quot;Condition&quot;: {
         &quot;ArnLike&quot;: {
             &quot;ec2:LaunchTemplate&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/lt-09477bcd97b0d310e&quot; 
          },
          &quot;Bool&quot;: {
             &quot;ec2:IsLaunchTemplateResource&quot;: &quot;true&quot;
          }
       }
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:CreateTags&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
             &quot;ec2:CreateAction&quot; : &quot;RunInstances&quot;
          }
       }
    }
  ]
}</code></pre>
                     			    
                     			    
                     			        <h3 id="iam-example-runinstances-egpu">Attaching an Elastic GPU</h3>
                     
                     <p>In the following policy, users can launch an instance and specify an
                        elastic GPU to attach to the instance. Users can launch instances in any region, but
                        they can only attach an elastic GPU during a launch in the <code class="code">us-east-2</code>
                        region. 
                     </p>
                     			        
                     <p>The <code class="code">ec2:ElasticGpuType</code> condition key uses the <code class="code">ForAnyValue</code>
                        modifier to indicate that only the elastic GPU types <code class="code">eg1.medium</code>
                        and <code class="code">eg1.large</code> are allowed in the request. 
                     </p>
                     			        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;ec2:RunInstances&quot;
            ],
            &quot;Resource&quot;: [
                &quot;arn:aws:ec2:*:<em>account</em>:elastic-gpu/*&quot;
            ],
            &quot;Condition&quot;: {
                &quot;StringEquals&quot;: {
                    &quot;ec2:Region&quot;: &quot;us-east-2&quot;
                },
                &quot;ForAnyValue:StringLike&quot;: {
                    &quot;ec2:ElasticGpuType&quot;: [
                        &quot;eg1.medium&quot;,
                        &quot;eg1.large&quot;
                    ]
                }
            }
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
            &quot;Resource&quot;: [
                &quot;arn:aws:ec2:*::image/ami-*&quot;,
                &quot;arn:aws:ec2:*:<em>account</em>:network-interface/*&quot;,
                &quot;arn:aws:ec2:*:<em>account</em>:instance/*&quot;,
                &quot;arn:aws:ec2:*:<em>account</em>:subnet/*&quot;,
                &quot;arn:aws:ec2:*:<em>account</em>:volume/*&quot;,
                &quot;arn:aws:ec2:*:<em>account</em>:key-pair/*&quot;,
                &quot;arn:aws:ec2:*:<em>account</em>:security-group/*&quot;
            ]
        }
    ]
}</code></pre>
                     			    
                     			    
                     			        <h3 id="iam-example-runinstances-launch-templates">Launch Templates</h3>
                     			        
                     <p>In the following example, users can launch instances, but only if they use a
                        specific launch template (<code class="code">lt-09477bcd97b0d310e</code>). Users can override any
                        parameters in the launch template by specifying the parameters in the
                        <code class="code">RunInstances</code> action.
                     </p>
                     			        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: &quot;*&quot;,
      &quot;Condition&quot;: {
         &quot;ArnLike&quot;: {
             &quot;ec2:LaunchTemplate&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/lt-09477bcd97b0d310e&quot; 
          }
       }
    }
  ]
}</code></pre>
                     			        <p>In this example, users can launch instances only if they use a launch template. The
                        policy uses the <code class="code">ec2:IsLaunchTemplateResource</code> condition key to
                        prevent users from overriding any of the launch template parameters in the
                        <code class="code">RunInstances</code> request.
                     </p>
                     			        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: &quot;*&quot;,
      &quot;Condition&quot;: {
         &quot;ArnLike&quot;: {
             &quot;ec2:LaunchTemplate&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/*&quot; 
          },
          &quot;Bool&quot;: {
             &quot;ec2:IsLaunchTemplateResource&quot;: &quot;true&quot;
          }
       }
    }
  ]
}</code></pre>
                     			        <p>The following example policy allows user to launch instances, but only if they use
                        a launch template. Users cannot override the subnet and network interface parameters
                        in the request; these parameters can only be specified in the launch template. The
                        first part of the statement uses the <a href="./IAM/latest/UserGuide/reference_policies_elements_notresource.html" target="_blank">NotResource</a> element to allow all other resources except subnets and
                        network interfaces. The second part of the statement allows the subnet and network
                        interface resources, but only if they are sourced from the launch template.
                     </p>
                     			        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;NotResource&quot;: [&quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
                      &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot; ],
      &quot;Condition&quot;: {
         &quot;ArnLike&quot;: {
             &quot;ec2:LaunchTemplate&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/*&quot; 
          }
       }
    },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: [&quot;arn:aws:ec2:<em>region</em>:<em>account</em>:subnet/*&quot;,
                   &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:network-interface/*&quot; ],
      &quot;Condition&quot;: {
         &quot;ArnLike&quot;: {
             &quot;ec2:LaunchTemplate&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/*&quot; 
          },
          &quot;Bool&quot;: {
             &quot;ec2:IsLaunchTemplateResource&quot;: &quot;true&quot;
          }
       }
    }
  ]
}</code></pre>
                     <p>The following example allows users to launch instances only if they use a
                        launch template, and only if the launch template has the tag
                        <code class="code">Purpose=Webservers</code>. Users cannot override any of the launch
                        template parameters in the <code class="code">RunInstances</code> action.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;, 
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;NotResource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/*&quot;,
      &quot;Condition&quot;: {
         &quot;ArnLike&quot;: {
             &quot;ec2:LaunchTemplate&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/*&quot; 
          },
         &quot;Bool&quot;: {
             &quot;ec2:IsLaunchTemplateResource&quot;: &quot;true&quot;
          }
       }
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:RunInstances&quot;,
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/*&quot;,
      &quot;Condition&quot;: {
       &quot;StringEquals&quot;: {
           &quot;ec2:ResourceTag/Purpose&quot;: &quot;Webservers&quot; 
        }
       }
     }
  ]
}</code></pre>
                     			
                     			
                     				<h2 id="iam-example-classiclink">7. Working with ClassicLink</h2>
                     				
                     				
                     <p>You can enable a VPC for ClassicLink and then link an EC2-Classic instance
                        					to the VPC. You can also view your ClassicLink-enabled VPCs, and all of your
                        					EC2-Classic instances that are linked to a VPC. You can create policies with
                        					resource-level permission for the <code class="code">ec2:EnableVpcClassicLink</code>,
                        						<code class="code">ec2:DisableVpcClassicLink</code>,
                        						<code class="code">ec2:AttachClassicLinkVpc</code>, and
                        						<code class="code">ec2:DetachClassicLinkVpc</code> actions to control how users are able
                        					to use those actions. Resource-level permissions are not supported for
                        						<code class="code">ec2:Describe*</code> actions.
                     </p>
                     				
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#iam-example-classiclink-full"> Full Permissions to Work with ClassicLink</a></li>
                           <li><a href="#iam-example-classiclink-enable">Enable and Disable a VPC for ClassicLink</a></li>
                           <li><a href="#iam-example-classiclink-link">Link Instances</a></li>
                           <li><a href="#iam-example-classiclink-unlink">Unlink Instances</a></li>
                        </ul>
                     </div>
                     				
                     					
                     <h3 id="iam-example-classiclink-full"> Full Permissions to Work with ClassicLink</h3>
                     					
                     					
                     <p>The following policy grants users permissions to view ClassicLink-enabled VPCs and
                        linked EC2-Classic instances, to enable and disable a VPC for ClassicLink, and to
                        link and unlink instances from a ClassicLink-enabled VPC. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;ec2:DescribeClassicLinkInstances&quot;, &quot;ec2:DescribeVpcClassicLink&quot;,
        &quot;ec2:EnableVpcClassicLink&quot;, &quot;ec2:DisableVpcClassicLink&quot;,
        &quot;ec2:AttachClassicLinkVpc&quot;, &quot;ec2:DetachClassicLinkVpc&quot;
      ],
      &quot;Resource&quot;: &quot;*&quot;
    }
   ]
}</code></pre>
                     				
                     				
                     					<h3 id="iam-example-classiclink-enable">Enable and Disable a VPC for ClassicLink</h3>
                     					
                     					
                     <p>The following policy allows user to enable and disable VPCs for
                        						ClassicLink that have the specific tag &apos;<code class="code">purpose=classiclink</code>&apos;.
                        						Users cannot enable or disable any other VPCs for ClassicLink. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:*VpcClassicLink&quot;,
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:vpc/*&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;ec2:ResourceTag/purpose&quot;:&quot;classiclink&quot;
        }
      }
    }
  ]
}</code></pre>
                     				
                     				
                     					<h3 id="iam-example-classiclink-link">Link Instances</h3>
                     					
                     					
                     <p>The following policy grants users permissions to link instances to a VPC only if the
                        instance is an <code class="code">m3.large</code> instance type. The second statement allows
                        users to use the VPC and security group resources, which are required to link an
                        instance to a VPC.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:AttachClassicLinkVpc&quot;,
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;ec2:InstanceType&quot;:&quot;m3.large&quot;
        }
      }
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:AttachClassicLinkVpc&quot;,
      &quot;Resource&quot;: [
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:vpc/*&quot;,
        &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*&quot;
      ]
    }
  ]
}				</code></pre>
                     					<p>The following policy grants users permissions to link instances to a specific VPC
                        (<code class="code">vpc-1a2b3c4d</code>) only, and to associate only specific security groups
                        from the VPC to the instance (<code class="code">sg-1122aabb</code> and
                        <code class="code">sg-aabb2233</code>). Users cannot link an instance to any other VPC, and they
                        cannot specify any other of the VPC security groups to associate with the instance
                        in the request.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:AttachClassicLinkVpc&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:vpc/vpc-1a2b3c4d&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/sg-1122aabb&quot;,
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/sg-aabb2233&quot;
       ]
    }
  ]
}				</code></pre>
                     				
                     				
                     					<h3 id="iam-example-classiclink-unlink">Unlink Instances</h3>
                     					
                     					
                     <p>The following grants users permission to unlink any linked EC2-Classic instance from
                        a
                        VPC, but only if the instance has the tag &quot;<code class="code">unlink=true</code>&quot;. The second
                        statement grants users permissions to use the VPC resource, which is required to
                        unlink an instance from a VPC.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:DetachClassicLinkVpc&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;
      ],
      &quot;Condition&quot;: {
         &quot;StringEquals&quot;: {
            &quot;ec2:ResourceTag/unlink&quot;:&quot;true&quot;
         }
      }
   },
   {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:DetachClassicLinkVpc&quot;,
      &quot;Resource&quot;: [
         &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:vpc/*&quot;
         ]
      }
   ]
}</code></pre>
                     				
                     			
                     				<h2 id="iam-example-reservedinstances">8. Working with Reserved Instances</h2>
                     				
                     				
                     <p>The following policy gives users permission to view, modify, and purchase Reserved
                        Instances in your
                        account.
                     </p>
                     				
                     <p>It is not possible to set resource-level permissions for individual Reserved Instances.
                        This policy
                        means that users have access to all the Reserved Instances in the account.
                     </p>
                     				
                     <p>The <code class="code">Resource</code> element uses a * wildcard to indicate that users can specify all
                        resources with the action; in this case, they can list and modify all Reserved Instances
                        in the
                        account. They can also purchase Reserved Instances using the account credentials.
                        The * wildcard is
                        also necessary in cases where the API action does not support resource-level
                        permissions.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;ec2:DescribeReservedInstances&quot;, &quot;ec2:ModifyReservedInstances&quot;,
        &quot;ec2:PurchaseReservedInstancesOffering&quot;, &quot;ec2:DescribeAvailabilityZones&quot;,
        &quot;ec2:DescribeReservedInstancesOfferings&quot;
      ],
      &quot;Resource&quot;: &quot;*&quot;
    }
   ]
}</code></pre>
                     				<p>To allow users to view and modify the Reserved Instances in your account, but not
                        purchase new
                        Reserved Instances.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;ec2:DescribeReservedInstances&quot;, &quot;ec2:ModifyReservedInstances&quot;,
        &quot;ec2:DescribeAvailabilityZones&quot;
      ],
      &quot;Resource&quot;: &quot;*&quot;
    }
  ]
}</code></pre>
                     			
                     				<h2 id="iam-example-taggingresources">9. Tagging Resources</h2>
                     
                     				
                     <p>The following policy allows users to use the <code class="code">CreateTags</code> action to
                        					apply tags to an instance only if the tag contains the key
                        						<code class="code">environment</code> and the value <code class="code">production</code>. The
                        						<code class="code">ForAllValues</code> modifier is used with the <code class="code">aws:TagKeys</code>
                        					condition key to indicate that only the key <code class="code">environment</code> is allowed
                        					in the request (no other tags are allowed). The user cannot tag any other
                        					resource types.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">
{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;ec2:CreateTags&quot;
            ],
            &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
            &quot;Condition&quot;: {
                &quot;StringEquals&quot;: {
                    &quot;aws:RequestTag/environment&quot;: &quot;production&quot;
                },
                &quot;ForAllValues:StringEquals&quot;: {
                    &quot;aws:TagKeys&quot;: [
                        &quot;environment&quot;
                    ]
                }
            }
        }
    ]
}</code></pre>
                     				<p>The following policy allows users to tag any taggable resource that already has a
                        tag with
                        a key of <code class="code">owner</code> and a value of the IAM username. In addition, users must
                        specify a tag with a key of <code class="code">environment</code> and a value of either
                        <code class="code">test</code> or <code class="code">prod</code> in the request. Users can specify additional
                        tags in the request.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;ec2:CreateTags&quot;
            ],
            &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:*/*&quot;,
            &quot;Condition&quot;: {
                &quot;StringEquals&quot;: {
                    &quot;aws:RequestTag/environment&quot;: [&quot;test&quot;,&quot;prod&quot;],
                    &quot;ec2:ResourceTag/owner&quot;: &quot;${aws:username}&quot;
                }
            }
        }
    ]
}</code></pre>
                     				<p>You can create an IAM policy that allows users to delete specific tags for a
                        					resource. For example, the following policy allows users to delete tags for a
                        					volume if the tag keys specified in the request are <code class="code">environment</code> or
                        						<code class="code">cost-center</code>. Any value can be specified for the tag but the tag
                        					key must match either of the specified keys.
                     </p>
                     				
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>If you delete a resource, all tags associated with the resource are also deleted.
                           Users
                           do not need permissions to use the <code class="code">ec2:DeleteTags</code> action to delete a
                           resource that has tags; they only need permissions to perform the deleting
                           action.
                        </p>
                     </div>
                     
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:DeleteTags&quot;,
      &quot;Resource&quot;: &quot;arn:aws:ec2:us-east-1:123456789012:volume/*&quot;,
      &quot;Condition&quot;: {
        &quot;ForAllValues:StringEquals&quot;: {
          &quot;aws:TagKeys&quot;: [&quot;environment&quot;,&quot;cost-center&quot;]
        }
      }
    }
  ]
}</code></pre>
                     
                     				<p>This policy allows users to delete only the <code class="code">environment=prod</code> tag on any
                        resource, and only if the resource is already tagged with a key of <code class="code">owner</code>
                        and a value of the IAM username. Users cannot delete any other tags for a
                        resource.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;ec2:DeleteTags&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:*/*&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;aws:RequestTag/environment&quot;: &quot;prod&quot;,
          &quot;ec2:ResourceTag/owner&quot;: &quot;${aws:username}&quot;
        },
        &quot;ForAllValues:StringEquals&quot;: {
          &quot;aws:TagKeys&quot;: [&quot;environment&quot;]
        }
      }
    }
  ]
}</code></pre>
                     			
                     				<h2 id="iam-example-iam-roles">10: Working with IAM Roles</h2>
                     
                     				
                     <p>The following policy allows users to attach, replace, and detach an IAM role
                        					to instances that have the tag <code class="code">department=test</code>. Replacing or
                        					detaching an IAM role requires an association ID, therefore the policy also
                        					grants users permission to use the
                        						<code class="code">ec2:DescribeIamInstanceProfileAssociations</code> action. 
                     </p>
                     				
                     <p>IAM users must have permission to use the <code class="code">iam:PassRole</code> action
                        					in order to pass the role to the instance. 
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
         &quot;ec2:AssociateIamInstanceProfile&quot;,
         &quot;ec2:ReplaceIamInstanceProfileAssociation&quot;,
         &quot;ec2:DisassociateIamInstanceProfile&quot;
      ],
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/*&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;ec2:ResourceTag/department&quot;:&quot;test&quot;
        }
      }
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;ec2:DescribeIamInstanceProfileAssociations&quot;,
      &quot;Resource&quot;: &quot;*&quot;
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: &quot;iam:PassRole&quot;,
      &quot;Resource&quot;: &quot;*&quot;
    }
  ]
}</code></pre>
                     				<p>The following policy allows users to attach or replace an IAM role for any
                        					instance. Users can only attach or replace IAM roles with names that begin
                        					with <code class="code">TestRole-</code>. For the <code class="code">iam:PassRole</code> action, ensure
                        					that you specify the name of the IAM role and not the instance profile (if the
                        					names are different). For more information, see <a href="iam-roles-for-amazon-ec2.html#ec2-instance-profile">Instance Profiles</a>.
                     </p>
                     				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;ec2:AssociateIamInstanceProfile&quot;,
                &quot;ec2:ReplaceIamInstanceProfileAssociation&quot;
            ],
            &quot;Resource&quot;: &quot;*&quot;
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: &quot;ec2:DescribeIamInstanceProfileAssociations&quot;,
            &quot;Resource&quot;: &quot;*&quot;
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: &quot;iam:PassRole&quot;,
            &quot;Resource&quot;: &quot;arn:aws:iam::<em>account</em>:role/TestRole-*&quot;
        }
    ]
}</code></pre>
                     			
                     		        <h2 id="iam-example-route-tables">11: Working with Route Tables</h2>
                     		        
                     		        
                     <p>The following policy allows users to add, remove, and replace routes for route
                        tables that are associated with VPC <code class="code">vpc-ec43eb89</code> only. To specify a
                        VPC for the <code class="code">ec2:Vpc</code> condition key, you must specify the full ARN of
                        the VPC.
                     </p>
                     		        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;ec2:DeleteRoute&quot;,
                &quot;ec2:CreateRoute&quot;,
                &quot;ec2:ReplaceRoute&quot;
            ],
            &quot;Resource&quot;: [
                &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:route-table/*&quot;
            ],
            &quot;Condition&quot;: {
                &quot;StringEquals&quot;: {
                    &quot;ec2:Vpc&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:vpc/vpc-ec43eb89&quot;
                }
            }
        }
    ]
}</code></pre>
                     		    
                     		        <h2 id="iam-example-source-instance">12: Allowing a Specific Instance to View Resources in
                        Other AWS Services
                     </h2>
                     		        
                     <p>The following is an example of a policy that you might attach to an IAM role. The
                        policy allows an instance to view resources in various AWS services. It uses the
                        <code class="code">ec2:SourceInstanceARN</code> condition key to specify that the instance from
                        which the request is made must be instance <code class="code">i-093452212644b0dd6</code>. If the same
                        IAM role is associated with another instance, the other instance cannot perform any
                        of
                        these actions.
                     </p>
                     
                     <p>The <code class="code">ec2:SourceInstanceARN</code> key is an AWS-wide condition key,
                        therefore it can be used for other service actions, not just Amazon EC2.
                     </p>
                     		        
                     		        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;ec2:DescribeVolumes&quot;,
                &quot;s3:ListAllMyBuckets&quot;,
                &quot;dynamodb:ListTables&quot;,
                &quot;rds:DescribeDBInstances&quot;
            ],
            &quot;Resource&quot;: [
                &quot;*&quot;
            ],
            &quot;Condition&quot;: {
                &quot;ArnEquals&quot;: {
                    &quot;ec2:SourceInstanceARN&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:instance/i-093452212644b0dd6&quot;
                }
            }
        }
    ]
}</code></pre>
                     		    
                     		        <h2 id="iam-example-launch-templates">13. Working with Launch Templates</h2>
                     		        
                     <p>The following policy allows users to create a launch template version and modify a
                        launch template, but only for a specific launch template
                        (<code class="code">lt-09477bcd97b0d3abc</code>). Users cannot work with other launch
                        templates.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Action&quot;: [
        &quot;ec2:CreateLaunchTemplateVersion&quot;,
        &quot;ec2:ModifyLaunchTemplate&quot;
      ],
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/lt-09477bcd97b0d3abc&quot;
    }
  ]
}</code></pre>
                     <p>The following policy allows users to delete any launch template and launch
                        template version, provided that the launch template has the tag
                        <code class="code">Purpose</code>=<code class="code">Testing</code>.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Action&quot;: [
        &quot;ec2:DeleteLaunchTemplate&quot;,
        &quot;ec2:DeleteLaunchTemplateVersions&quot;
      ],
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Resource&quot;: &quot;arn:aws:ec2:<em>region</em>:<em>account</em>:launch-template/*&quot;,
      &quot;Condition&quot;: {
        &quot;StringEquals&quot;: {
          &quot;ec2:ResourceTag/Purpose&quot;: &quot;Testing&quot;
        }
      }
    }
  ]
}</code></pre>
                     		    </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="ec2-supported-iam-actions-resources.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="iam-policies-ec2-console.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="1: Read-Only Access"><a class="pagetoc" href="#iam-example-read-only">1: Read-Only Access</a></li>
                        <li class="pagetoc" name="2: Restricting Access to a Specific Region"><a class="pagetoc" href="#iam-example-region">2: Restricting Access to a Specific Region</a></li>
                        <li class="pagetoc" name="3: Working with Instances"><a class="pagetoc" href="#iam-example-instances">3: Working with Instances</a></li>
                        <li class="pagetoc" name="4. Working with Volumes"><a class="pagetoc" href="#iam-example-manage-volumes">4. Working with Volumes</a></li>
                        <li class="pagetoc" name="5. Working with Snapshots"><a class="pagetoc" href="#iam-example-manage-snapshots">5. Working with Snapshots</a></li>
                        <li class="pagetoc" name="6: Launching Instances (RunInstances)"><a class="pagetoc" href="#iam-example-runinstances">6: Launching Instances (RunInstances)</a></li>
                        <li class="pagetoc" name="7. Working with ClassicLink"><a class="pagetoc" href="#iam-example-classiclink">7. Working with ClassicLink</a></li>
                        <li class="pagetoc" name="8. Working with Reserved Instances"><a class="pagetoc" href="#iam-example-reservedinstances">8. Working with Reserved Instances</a></li>
                        <li class="pagetoc" name="9. Tagging Resources"><a class="pagetoc" href="#iam-example-taggingresources">9. Tagging Resources</a></li>
                        <li class="pagetoc" name="10: Working with IAM Roles"><a class="pagetoc" href="#iam-example-iam-roles">10: Working with IAM Roles</a></li>
                        <li class="pagetoc" name="11: Working with Route Tables"><a class="pagetoc" href="#iam-example-route-tables">11: Working with Route Tables</a></li>
                        <li class="pagetoc" name="12: Allowing a Specific Instance to View Resources in
        Other AWS Services"><a class="pagetoc" href="#iam-example-source-instance">12: Allowing a Specific Instance to View Resources in
                              Other AWS Services</a></li>
                        <li class="pagetoc" name="13. Working with Launch Templates"><a class="pagetoc" href="#iam-example-launch-templates">13. Working with Launch Templates</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>