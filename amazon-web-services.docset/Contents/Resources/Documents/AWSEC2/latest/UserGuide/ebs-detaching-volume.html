<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Detaching an Amazon EBS Volume from an Instance - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="EBSVolumes.html" title="Amazon EBS Volumes">
      <link rel="prev" href="monitoring-volume-status.html" title="Monitoring the Status of Your Volumes">
      <link rel="next" href="ebs-deleting-volume.html" title="Deleting an Amazon EBS Volume">
      <meta name="description" content="Detach an Amazon EBS volume from an instance explicitly or by terminating the instance.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-detaching-volume.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/ec2">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="Storage.html">Storage</a> &#xBB; <a href="AmazonEBS.html">Amazon Elastic Block Store (Amazon EBS)</a> &#xBB; <a href="EBSVolumes.html">Amazon EBS Volumes</a> &#xBB; <span class="breadcrumb">Detaching an Amazon EBS Volume from an Instance</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="ebs-detaching-volume">Detaching an Amazon EBS Volume from an Instance</h1>
                     <p>You can detach an Amazon EBS volume from an instance explicitly or by terminating
                        the instance.
                        			However, if the instance is running, you must first unmount the volume from the
                        			instance.
                     </p>
                     <p>If an EBS volume is the root device of an instance, you must stop the instance before
                        you
                        can detach the volume.
                     </p>
                     <p>When a volume with an AWS Marketplace product code is detached from an instance, the
                        product code is no longer associated with the instance.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>After you detach a volume, you are still charged for volume storage as long as the
                           storage amount exceeds the limit of the AWS Free Tier. You must delete a volume to
                           avoid
                           incurring further charges. For more information, see <a href="ebs-deleting-volume.html">Deleting an Amazon EBS Volume</a>.
                        </p>
                     </div>
                     <p>This example unmounts the volume and then explicitly detaches it from the instance.
                        This
                        is useful when you want to terminate an instance or attach a volume to a different
                        instance.
                        To verify that the volume is no longer attached to the instance, see <a href="ebs-describing-volumes.html">Viewing Volume Information</a>.
                     </p>
                     <p>You can reattach a volume that you detached (without unmounting it), but it might
                        not get
                        the same mount point and the data on the volume might be out of sync if there were
                        writes to
                        the volume in progress when it was detached.
                     </p>
                     <p class="title"><b>To detach an EBS volume using the console</b></p>
                     <ol>
                        <li>
                           
                           <p>Use the following command to unmount the <code>/dev/sdh</code>
                              device.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>umount -d <em class="replaceable"><code>/dev/sdh</code></em></code></strong></code></pre>
                           
                           </li>
                        <li>
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>In the navigation pane, choose <b>Volumes</b>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select a volume and choose <b>Actions</b>, <b>Detach
                                 Volume</b>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the confirmation dialog box, choose <b>Yes, Detach</b>. 
                           </p>
                           
                        </li>
                     </ol>
                     <div class="itemizedlist">
                        
                        <p class="title"><b>To detach an EBS volume from an instance using the command line</b></p>
                        
                        <p>You can use one of the following commands. For more information about these command
                           line
                           interfaces, see <a href="concepts.html#access-ec2">Accessing Amazon EC2</a>.
                        </p>
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="./cli/latest/reference/ec2/detach-volume.html" target="_blank">detach-volume</a> (AWS CLI)
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="./powershell/latest/reference/items/Dismount-EC2Volume.html" target="_blank">Dismount-EC2Volume</a>
                                 (AWS Tools for Windows PowerShell)
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <h2 id="detach-troubleshoot">Troubleshooting</h2>
                     
                     
                     <p>The following are common problems encountered when detaching volumes, and how to
                        resolve them.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>To guard against the possibility of data loss, take a snapshot of your volume before
                           attempting to unmount it. Forced detachment of a stuck volume can cause damage to
                           the
                           file system or the data it contains or an inability to attach a new volume using the
                           same device name, unless you reboot the instance.
                        </p>
                     </div>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>If you encounter problems while detaching a volume through the Amazon EC2 console,
                                 it may
                                 be helpful to use the <b>describe-volumes</b> CLI command to diagnose the
                                 issue. For more information, see <a href="./cli/latest/reference/ec2/describe-volumes.html" target="_blank">describe-volumes&gt;</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If your volume stays in the <code class="code">detaching</code> state, you can force the
                                 detachment by choosing <b>Force Detach</b>. Use this option only as a last
                                 resort to detach a volume from a failed instance, or if you are detaching a volume
                                 with
                                 the intention of deleting it. The instance doesn&apos;t get an opportunity to flush file
                                 system caches or file system metadata. If you use this option, you must perform the
                                 file
                                 system check and repair procedures. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If you&apos;ve tried to force the volume to detach multiple times over several minutes
                                 and it stays in the <code class="code">detaching</code> state, you can post a request for help to the
                                 <a href="https://forums.aws.amazon.com/forum.jspa?forumID=30" target="_blank">Amazon EC2 forum</a>. To help expedite a resolution, include the volume ID and describe the steps
                                 that you&apos;ve already taken.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>When you attempt to detach a volume that is still mounted, the volume can become
                                 stuck in the <code class="code">busy</code> state while it is trying to detach. The following output
                                 from <b>describe-volumes</b> shows an example of this condition:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 describe-volumes --region us-west-2 --volume-ids vol-1234abcd</code></strong><code class="computeroutput" copy="false"> 
{
    &quot;Volumes&quot;: [
        {
            &quot;AvailabilityZone&quot;: &quot;us-west-2b&quot;,
            &quot;Attachments&quot;: [
                {
                    &quot;AttachTime&quot;: &quot;2016-07-21T23:44:52.000Z&quot;,
                    &quot;InstanceId&quot;: &quot;i-fedc9876&quot;,
                    &quot;VolumeId&quot;: &quot;vol-1234abcd&quot;,
                    &quot;State&quot;: &quot;busy&quot;,
                    &quot;DeleteOnTermination&quot;: false,
                    &quot;Device&quot;: &quot;/dev/sdf&quot;
                }
....</code></code></pre>
                              <p>When you encounter this state, detachment can be delayed indefinitely until you
                                 unmount the volume, force detachment, reboot the instance, or all three.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="monitoring-volume-status.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="ebs-deleting-volume.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Troubleshooting"><a class="pagetoc" href="#detach-troubleshoot">Troubleshooting</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>