<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS Identity and Access Management Template Snippets - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="CHAP_TemplateQuickRef.html" title="Template Snippets">
      <link rel="prev" href="quickref-elb.html" title="Elastic Load Balancing Template Snippets">
      <link rel="next" href="quickref-lambda.html" title="AWS Lambda Template">
      <meta name="description" content="Use these sample template snippets with your AWS Identity and Access Management resources in AWS CloudFormation.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-iam.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-guide.html">Working with AWS CloudFormation Templates</a> &#xBB; <a href="CHAP_TemplateQuickRef.html">Template Snippets</a> &#xBB; <span class="breadcrumb">AWS Identity and Access Management Template Snippets</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="quickref-iam">AWS Identity and Access Management Template Snippets</h1>
                     <p>This section contains AWS Identity and Access Management template snippets.</p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#scenario-iam-user">Declaring an IAM User Resource</a></li>
                           <li><a href="#scenario-iam-accesskey">Declaring an IAM Access Key Resource</a></li>
                           <li><a href="#scenario-iam-group">Declaring an IAM Group Resource</a></li>
                           <li><a href="#scenario-iam-addusertogroup">Adding Users to a Group</a></li>
                           <li><a href="#scenario-iam-policy">Declaring an IAM Policy</a></li>
                           <li><a href="#scenario-bucket-policy">Declaring an Amazon S3 Bucket Policy</a></li>
                           <li><a href="#scenario-sns-policy">Declaring an Amazon SNS Topic Policy</a></li>
                           <li><a href="#scenario-sqs-policy">Declaring an Amazon SQS Policy</a></li>
                           <li><a href="#scenarios-iamroles">IAM Role Template Examples</a></li>
                        </ul>
                     </div>
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>When creating or updating a stack using a template containing IAM resources, you must
                           acknowledge the use of IAM capabilities. For more information about using IAM resources
                           in templates, see <a href="using-iam-template.html">Controlling Access with AWS Identity and Access Management</a>.
                        </p>
                     </div>
                     <h2 id="scenario-iam-user">Declaring an IAM User Resource</h2>
                     
                     
                     <p>This snippet shows how to declare an <code class="code"><a href="aws-properties-iam-user.html">AWS::IAM::User</a></code> resource to create an IAM user. The user is declared
                        with the path (<code class="code">&quot;/&quot;</code>) and a login profile with the password
                        (<code class="code">myP@ssW0rd</code>).
                     </p>
                     
                     
                     <p>The policy document named <code class="code">giveaccesstoqueueonly</code> gives the user
                        permission to perform all Amazon SQS actions on the Amazon SQS queue resource <code class="code">myqueue</code>, and
                        denies access to all other Amazon SQS queue resources. The <code class="code"><a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code> function gets
                        the Arn attribute of the <code class="code"><a href="aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code> resource <code class="code">myqueue</code>. 
                     </p>
                     
                     
                     <p>The policy document named <code class="code">giveaccesstotopiconly</code> is added to the user
                        to give the user permission to perform all Amazon SNS actions on the Amazon SNS topic
                        resource
                        <code class="code">mytopic</code> and to deny access to all other Amazon SNS resources. The <a href="intrinsic-function-reference-ref.html"><code class="code">Ref</code></a> function gets the ARN
                        of the <code class="code"><a href="aws-properties-sns-topic.html">AWS::SNS::Topic</a></code>
                        resource <code class="code">mytopic</code>.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-iam-example-1.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;myuser&quot; : {
   &quot;Type&quot; : &quot;AWS::IAM::User&quot;,
   &quot;Properties&quot; : {
      &quot;Path&quot; : &quot;/&quot;,
      &quot;LoginProfile&quot; : {
         &quot;Password&quot; : &quot;myP@ssW0rd&quot;
      },
      &quot;Policies&quot; : [ {
         &quot;PolicyName&quot; : &quot;giveaccesstoqueueonly&quot;,
         &quot;PolicyDocument&quot; : {
            &quot;Version&quot;: &quot;2012-10-17&quot;,
            &quot;Statement&quot; : [ {
               &quot;Effect&quot; : &quot;Allow&quot;,
               &quot;Action&quot; : [ &quot;sqs:*&quot; ],
               &quot;Resource&quot; : [ {
                  &quot;Fn::GetAtt&quot; : [ &quot;myqueue&quot;, &quot;Arn&quot; ]
               } ]
            }, {
               &quot;Effect&quot; : &quot;Deny&quot;,
               &quot;Action&quot; : [ &quot;sqs:*&quot; ],
               &quot;NotResource&quot; : [ {
                  &quot;Fn::GetAtt&quot; : [ &quot;myqueue&quot;, &quot;Arn&quot; ]
               } ]
            }
         ] }
      }, {
         &quot;PolicyName&quot; : &quot;giveaccesstotopiconly&quot;,
         &quot;PolicyDocument&quot; : {
            &quot;Version&quot;: &quot;2012-10-17&quot;,
            &quot;Statement&quot; : [ {
               &quot;Effect&quot; : &quot;Allow&quot;,
               &quot;Action&quot; : [ &quot;sns:*&quot; ],
               &quot;Resource&quot; : [ { &quot;Ref&quot; : &quot;mytopic&quot; } ]
            }, {
               &quot;Effect&quot; : &quot;Deny&quot;,
               &quot;Action&quot; : [ &quot;sns:*&quot; ],
               &quot;NotResource&quot; : [ { &quot;Ref&quot; : &quot;mytopic&quot; } ]
            } ]
         }
      } ]
   }
} </code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-iam-example-1.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">myuser:
  Type: AWS::IAM::User
  Properties:
    Path: &quot;/&quot;
    LoginProfile:
      Password: myP@ssW0rd
    Policies:
    - PolicyName: giveaccesstoqueueonly
      PolicyDocument:
        Version: &apos;2012-10-17&apos;
        Statement:
        - Effect: Allow
          Action:
          - sqs:*
          Resource:
          - !GetAtt myqueue.Arn
        - Effect: Deny
          Action:
          - sqs:*
          NotResource:
          - !GetAtt myqueue.Arn
    - PolicyName: giveaccesstotopiconly
      PolicyDocument:
        Version: &apos;2012-10-17&apos;
        Statement:
        - Effect: Allow
          Action:
          - sns:*
          Resource:
          - !Ref mytopic
        - Effect: Deny
          Action:
          - sns:*
          NotResource:
          - !Ref mytopic</code></pre>
                        </div>
                     
                     <h2 id="scenario-iam-accesskey">Declaring an IAM Access Key Resource</h2>
                     
                     <h3 id="quickref-iam-access-key"></h3>
                     
                     <p>This snippet shows an <code class="code"><a href="aws-properties-iam-accesskey.html">AWS::IAM::AccessKey</a></code> resource. The <code class="code">myaccesskey</code> resource
                        creates an access key and assigns it to an IAM user that is declared as an <code class="code"><a href="aws-properties-iam-user.html">AWS::IAM::User</a></code> resource in the
                        template.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="quickref-iam-example-2.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;myaccesskey&quot; : {
   &quot;Type&quot; : &quot;AWS::IAM::AccessKey&quot;,
   &quot;Properties&quot; : {
      &quot;UserName&quot; : { &quot;Ref&quot; : &quot;myuser&quot; }
   }
} </code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="quickref-iam-example-2.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">myaccesskey:
  Type: AWS::IAM::AccessKey
  Properties:
    UserName:
      !Ref myuser</code></pre>
                        </div>
                     
                     
                     <h3 id="quickref-iam-access-key-2"></h3>
                     
                     <p>You can get the secret key for an <code class="code">AWS::IAM::AccessKey</code> resource using the
                        <code class="code"><a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>
                        function. The only time that you can get the secret key for an AWS access key is when
                        it is
                        created. One way to retrieve the secret key is to put it into an <code class="code">Output</code> value.
                        You can get the access key using the <code class="code">Ref</code> function. The following
                        <code class="code">Output</code> value declarations get the access key and secret key for
                        <code class="code">myaccesskey</code>.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="quickref-iam-example-3.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;AccessKeyformyaccesskey&quot; : {
   &quot;Value&quot; : { &quot;Ref&quot; : &quot;myaccesskey&quot; }
},
&quot;SecretKeyformyaccesskey&quot; : {
   &quot;Value&quot; : {
      &quot;Fn::GetAtt&quot; : [ &quot;myaccesskey&quot;, &quot;SecretAccessKey&quot; ]
   }
} </code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="quickref-iam-example-3.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AccessKeyformyaccesskey:
  Value:
    !Ref myaccesskey
SecretKeyformyaccesskey:
  Value: !GetAtt myaccesskey.SecretAccessKey</code></pre>
                        </div>
                     
                     
                     <h3 id="quickref-iam-access-key-3"></h3>
                     
                     <p>You can also pass the AWS access key and secret key to an EC2 instance or Auto Scaling
                        group defined in the template. The following <code class="code"><a href="aws-properties-ec2-instance.html">AWS::EC2::Instance</a></code> declaration
                        uses the <code class="code">UserData</code> property to pass the access key and secret key for the
                        <code class="code">myaccesskey</code> resource.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="quickref-iam-example-4.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">
&quot;myinstance&quot; : {
   &quot;Type&quot; : &quot;AWS::EC2::Instance&quot;,
   &quot;Properties&quot; : {
      &quot;AvailabilityZone&quot; : &quot;<span><code class="code" copy="true">us-east-1a</code></span>&quot;,
      &quot;ImageId&quot; : &quot;ami-20b65349&quot;,
      &quot;UserData&quot; : {
         &quot;Fn::Base64&quot; : {
            &quot;Fn::Join&quot; : [
               &quot;&quot;, [
                  &quot;ACCESS_KEY=&quot;, {
                     &quot;Ref&quot; : &quot;myaccesskey&quot;
                  },
                  &quot;&amp;&quot;,
                  &quot;SECRET_KEY=&quot;,
                  {
                     &quot;Fn::GetAtt&quot; : [
                        &quot;myaccesskey&quot;,
                        &quot;SecretAccessKey&quot;
                     ]
                  }
               ]
            ]
         }
      }
   }
} </code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="quickref-iam-example-4.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">myinstance:
  Type: AWS::EC2::Instance
  Properties:
    AvailabilityZone: &quot;<span><code class="code" copy="true">us-east-1a</code></span>&quot;
    ImageId: ami-20b65349
    UserData:
      Fn::Base64: !Sub &quot;ACCESS_KEY=${myaccesskey}&amp;SECRET_KEY=${myaccesskey.SecretAccessKey}</code></pre>
                        </div>
                     
                     
                     <h2 id="scenario-iam-group">Declaring an IAM Group Resource</h2>
                     
                     
                     <p>This snippet shows an <code class="code"><a href="aws-properties-iam-group.html">AWS::IAM::Group</a></code> resource. The group has a path
                        (<code class="code">&quot;/myapplication/&quot;</code>). The policy document named <code class="code">myapppolicy</code> is
                        added to the group to allow the group&apos;s users to perform all Amazon SQS actions on
                        the Amazon SQS queue
                        resource myqueue and deny access to all other Amazon SQS resources except <code class="code">myqueue</code>. 
                     </p>
                     
                     <p>To assign a policy to a resource, IAM requires the Amazon Resource Name (ARN) for
                        the
                        resource. In the snippet, the <code class="code"><a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code> function gets the ARN of the <code class="code"><a href="aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code> resource
                        queue.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-iam-example-5.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;mygroup&quot; : {
   &quot;Type&quot; : &quot;AWS::IAM::Group&quot;,
   &quot;Properties&quot; : {
      &quot;Path&quot; : &quot;/myapplication/&quot;,
      &quot;Policies&quot; : [ {
         &quot;PolicyName&quot; : &quot;myapppolicy&quot;,
         &quot;PolicyDocument&quot; : {
            &quot;Version&quot;: &quot;2012-10-17&quot;,
            &quot;Statement&quot; : [ {
               &quot;Effect&quot; : &quot;Allow&quot;,
               &quot;Action&quot; : [ &quot;sqs:*&quot; ],
               &quot;Resource&quot; : [ {
                  &quot;Fn::GetAtt&quot; : [ &quot;myqueue&quot;, &quot;Arn&quot; ]
               } ]
            },
            {
               &quot;Effect&quot; : &quot;Deny&quot;,
               &quot;Action&quot; : [ &quot;sqs:*&quot; ],
               &quot;NotResource&quot; : [ { &quot;Fn::GetAtt&quot; : [ &quot;myqueue&quot;, &quot;Arn&quot; ] } ]
            }
         ] }
      } ]
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-iam-example-5.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">mygroup:
  Type: AWS::IAM::Group
  Properties:
    Path: &quot;/myapplication/&quot;
    Policies:
    - PolicyName: myapppolicy
      PolicyDocument:
        Version: &apos;2012-10-17&apos;
        Statement:
        - Effect: Allow
          Action:
          - sqs:*
          Resource: !GetAtt myqueue.Arn
        - Effect: Deny
          Action:
          - sqs:*
          NotResource: !GetAtt myqueue.Arn</code></pre>
                        </div>
                     
                     <h2 id="scenario-iam-addusertogroup">Adding Users to a Group</h2>
                     
                     
                     <p>The <code class="code"><a href="aws-properties-iam-addusertogroup.html">AWS::IAM::UserToGroupAddition</a></code> resource adds users to a group. In the
                        following snippet, the <code class="code">addUserToGroup</code> resource adds the following users to an
                        existing group named <code class="code">myexistinggroup2</code>: the existing user
                        <code class="code">existinguser1</code> and the user <code class="code">myuser</code> which is declared as an
                        <code class="code"><a href="aws-properties-iam-user.html">AWS::IAM::User</a></code> resource
                        in the template.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-iam-example-6.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;addUserToGroup&quot; : {
   &quot;Type&quot; : &quot;AWS::IAM::UserToGroupAddition&quot;,
   &quot;Properties&quot; : {
      &quot;GroupName&quot; : &quot;myexistinggroup2&quot;,
      &quot;Users&quot; : [ &quot;existinguser1&quot;, { &quot;Ref&quot; : &quot;myuser&quot; } ]
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-iam-example-6.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">addUserToGroup:
  Type: AWS::IAM::UserToGroupAddition
  Properties:
    GroupName: myexistinggroup2
    Users:
    - existinguser1
    - !Ref myuser</code></pre>
                        </div>
                     
                     <h2 id="scenario-iam-policy">Declaring an IAM Policy</h2>
                     
                     
                     <p>This snippet shows how to create a policy and apply it to multiple groups using an
                        <code class="code"><a href="aws-resource-iam-policy.html">AWS::IAM::Policy</a></code> resource
                        named <code class="code">mypolicy</code>. The <code class="code">mypolicy</code> resource contains a
                        <code class="code">PolicyDocument</code> property that allows <code class="code">GetObject</code>,
                        <code class="code">PutObject</code>, and <code class="code">PutObjectAcl</code> actions on the objects in the S3
                        bucket represented by the ARN <code class="code">arn:aws:s3:::myAWSBucket</code>. The
                        <code class="code">mypolicy</code> resource applies the policy to an existing group named
                        <code class="code">myexistinggroup1</code> and a group <code class="code">mygroup</code> that is declared in the
                        template as an <code class="code"><a href="aws-properties-iam-group.html">AWS::IAM::Group</a></code>
                        resource. This example shows how to apply a policy to a group using the <code class="code">Groups</code>
                        property; however, you can alternatively use the <code class="code">Users</code> property to add a
                        policy document to a list of users.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>The Amazon SNS policy actions that are <a href="quickref-iam.html#scenario-iam-policy">declared in the
                              <code class="code">AWS::IAM::Policy</code> resource</a> differ from the Amazon SNS
                           topic policy actions that are <a href="quickref-iam.html#scenario-sns-policy">declared in the
                              <code class="code">AWS::SNS::TopicPolicy</code> resource</a>. For example, the policy
                           actions <code class="code">sns:Unsubscribe</code> and <code class="code">sns:SetSubscriptionAttributes</code> are
                           valid for the <code class="code">AWS::IAM::Policy</code> resource, but are invalid for the
                           <code class="code">AWS::SNS::TopicPolicy</code> resource. For more information about valid Amazon SNS
                           policy actions that you can use with the <code class="code">AWS::IAM::Policy</code> resource, see
                           <a href="./sns/latest/dg/AccessPolicyLanguage_SpecialInfo.html" target="_blank">Special Information
                              for Amazon SNS Policies</a> in the <em>Amazon Simple Notification Service Developer Guide</em>. 
                        </p>
                     </div>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-iam-example-7.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;mypolicy&quot; : {
   &quot;Type&quot; : &quot;AWS::IAM::Policy&quot;,
   &quot;Properties&quot; : {
      &quot;PolicyName&quot; : &quot;mygrouppolicy&quot;,
      &quot;PolicyDocument&quot; : {
         &quot;Version&quot;: &quot;2012-10-17&quot;,
         &quot;Statement&quot; : [ {
            &quot;Effect&quot; : &quot;Allow&quot;,
            &quot;Action&quot; : [
               &quot;s3:GetObject&quot; , &quot;s3:PutObject&quot; , &quot;s3:PutObjectAcl&quot; ],
            &quot;Resource&quot; : &quot;arn:aws:s3:::myAWSBucket/*&quot;
         } ]
      },
      &quot;Groups&quot; : [ &quot;myexistinggroup1&quot;, { &quot;Ref&quot; : &quot;mygroup&quot; } ]
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-iam-example-7.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">mypolicy:
  Type: AWS::IAM::Policy
  Properties:
    PolicyName: mygrouppolicy
    PolicyDocument:
      Version: &apos;2012-10-17&apos;
      Statement:
      - Effect: Allow
        Action:
        - s3:GetObject
        - s3:PutObject
        - s3:PutObjectAcl
        Resource: arn:aws:s3:::myAWSBucket/*
    Groups:
    - myexistinggroup1
    - !Ref mygroup</code></pre>
                        </div>
                     
                     <h2 id="scenario-bucket-policy">Declaring an Amazon S3 Bucket Policy</h2>
                     
                     
                     <p>This snippet shows how to create a policy and apply it to an Amazon S3 bucket using
                        the
                        <code class="code"><a href="aws-properties-s3-policy.html">AWS::S3::BucketPolicy</a></code>
                        resource. The <code class="code">mybucketpolicy</code> resource declares a policy document that allows
                        the <code class="code">user1</code> IAM user to perform the <code class="code">GetObject</code> action on all
                        objects in the S3 bucket to which this policy is applied. In the snippet, the <code class="code"><a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code> function gets
                        the ARN of the <code class="code">user1</code> resource. The <code class="code">mybucketpolicy</code> resource
                        applies the policy to the <code class="code"><a href="aws-properties-s3-bucket.html">AWS::S3::Bucket</a></code> resource mybucket. The <code class="code"><a href="intrinsic-function-reference-ref.html">Ref</a></code> function gets the bucket
                        name of the <code class="code">mybucket</code> resource. 
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-iam-example-8.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;mybucketpolicy&quot; : {
   &quot;Type&quot; : &quot;AWS::S3::BucketPolicy&quot;,
   &quot;Properties&quot; : {
      &quot;PolicyDocument&quot; : {
         &quot;Id&quot; : &quot;MyPolicy&quot;,
         &quot;Version&quot;: &quot;2012-10-17&quot;,
         &quot;Statement&quot; : [ {
            &quot;Sid&quot; : &quot;ReadAccess&quot;,
            &quot;Action&quot; : [ &quot;s3:GetObject&quot; ],
            &quot;Effect&quot; : &quot;Allow&quot;,
            &quot;Resource&quot; : { &quot;Fn::Join&quot; : [
                  &quot;&quot;, [ &quot;arn:aws:s3:::&quot;, { &quot;Ref&quot; : &quot;mybucket&quot; } , &quot;/*&quot; ]
               ] },
            &quot;Principal&quot; : {
               &quot;AWS&quot; : { &quot;Fn::GetAtt&quot; : [ &quot;user1&quot;, &quot;Arn&quot; ] }
            }
         } ]
      },
      &quot;Bucket&quot; : { &quot;Ref&quot; : &quot;mybucket&quot; }
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-iam-example-8.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">mybucketpolicy:
  Type: AWS::S3::BucketPolicy
  Properties:
    PolicyDocument:
      Id: MyPolicy
      Version: &apos;2012-10-17&apos;
      Statement:
      - Sid: ReadAccess
        Action:
        - s3:GetObject
        Effect: Allow
        Resource: !Sub &quot;arn:aws:s3:::${mybucket}/*&quot;
        Principal:
          AWS: !GetAtt user1.Arn
    Bucket: !Ref mybucket</code></pre>
                        </div>
                     
                     <h2 id="scenario-sns-policy">Declaring an Amazon SNS Topic Policy</h2>
                     
                     
                     <p>This snippet shows how to create a policy and apply it to an Amazon SNS topic using
                        the
                        <code class="code"><a href="aws-properties-sns-policy.html">AWS::SNS::TopicPolicy</a></code>
                        resource. The <code class="code">mysnspolicy</code> resource contains a <code class="code">PolicyDocument</code>
                        property that allows the <code class="code"><a href="aws-properties-iam-user.html">AWS::IAM::User</a></code> resource <code class="code">myuser</code> to perform the
                        <code class="code">Publish</code> action on an <code class="code"><a href="aws-properties-sns-topic.html">AWS::SNS::Topic</a></code> resource <code class="code">mytopic</code>. In the snippet, the
                        <code class="code"><a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a></code>
                        function gets the ARN for the <code class="code">myuser</code> resource and the <code class="code"><a href="intrinsic-function-reference-ref.html">Ref</a></code> function gets the ARN
                        for the <code class="code">mytopic</code> resource.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>The Amazon SNS policy actions that are <a href="quickref-iam.html#scenario-iam-policy">declared in the
                              <code class="code">AWS::IAM::Policy</code> resource</a> differ from the Amazon SNS
                           topic policy actions that are <a href="quickref-iam.html#scenario-sns-policy">declared in the
                              <code class="code">AWS::SNS::TopicPolicy</code> resource</a>. For example, the policy
                           actions <code class="code">sns:Unsubscribe</code> and <code class="code">sns:SetSubscriptionAttributes</code> are
                           valid for the <code class="code">AWS::IAM::Policy</code> resource, but are invalid for the
                           <code class="code">AWS::SNS::TopicPolicy</code> resource. For more information about valid Amazon SNS
                           policy actions that you can use with the <code class="code">AWS::IAM::Policy</code> resource, see
                           <a href="./sns/latest/dg/AccessPolicyLanguage_SpecialInfo.html" target="_blank">Special Information
                              for Amazon SNS Policies</a> in the <em>Amazon Simple Notification Service Developer Guide</em>. 
                        </p>
                     </div>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-iam-example-9.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
&quot;mysnspolicy&quot; : {
   &quot;Type&quot; : &quot;AWS::SNS::TopicPolicy&quot;,
   &quot;Properties&quot; : {
      &quot;PolicyDocument&quot; :  {
         &quot;Id&quot; : &quot;MyTopicPolicy&quot;,
         &quot;Version&quot; : &quot;2012-10-17&quot;,
         &quot;Statement&quot; : [ {
            &quot;Sid&quot; : &quot;My-statement-id&quot;,
            &quot;Effect&quot; : &quot;Allow&quot;,
            &quot;Principal&quot; : {
               &quot;AWS&quot; : { &quot;Fn::GetAtt&quot; : [ &quot;myuser&quot;, &quot;Arn&quot; ] }
            },
            &quot;Action&quot; : &quot;sns:Publish&quot;,
            &quot;Resource&quot; : &quot;*&quot;
         } ]
      },
      &quot;Topics&quot; : [ { &quot;Ref&quot; : &quot;mytopic&quot; } ]
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-iam-example-9.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">mysnspolicy:
  Type: AWS::SNS::TopicPolicy
  Properties:
    PolicyDocument:
      Id: MyTopicPolicy
      Version: &apos;2012-10-17&apos;
      Statement:
      - Sid: My-statement-id
        Effect: Allow
        Principal:
          AWS: !GetAtt myuser.Arn
        Action: sns:Publish
        Resource: &quot;*&quot;
    Topics:
    - !Ref mytopic</code></pre>
                        </div>
                     
                     <h2 id="scenario-sqs-policy">Declaring an Amazon SQS Policy</h2>
                     
                     
                     <p>This snippet shows how to create a policy and apply it to an Amazon SQS queue using
                        the
                        <code class="code"><a href="aws-properties-sqs-policy.html">AWS::SQS::QueuePolicy</a></code>
                        resource. The <code class="code">PolicyDocument</code> property allows the existing user
                        <code class="code">myapp</code> (specified by its ARN) to perform the <code class="code">SendMessage</code> action
                        on an existing queue, which is specified by its URL, and an <code class="code"><a href="aws-properties-sqs-queues.html">AWS::SQS::Queue</a></code> resource myqueue.
                        The <a href="intrinsic-function-reference-ref.html">Ref</a> function gets the URL for
                        the <code class="code">myqueue</code> resource. 
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-iam-example-10.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">
&quot;mysqspolicy&quot; : {
   &quot;Type&quot; : &quot;AWS::SQS::QueuePolicy&quot;,
   &quot;Properties&quot; : {
      &quot;PolicyDocument&quot; : {
         &quot;Id&quot; : &quot;MyQueuePolicy&quot;,
         &quot;Version&quot; : &quot;2012-10-17&quot;,
         &quot;Statement&quot; : [ {
            &quot;Sid&quot; : &quot;Allow-User-SendMessage&quot;,
            &quot;Effect&quot; : &quot;Allow&quot;,
            &quot;Principal&quot; : {
               &quot;AWS&quot; : &quot;arn:aws:iam::123456789012:user/myapp&quot;
            },
            &quot;Action&quot; : [ &quot;sqs:SendMessage&quot; ],
            &quot;Resource&quot; : &quot;*&quot;
         } ]
      },
      &quot;Queues&quot; : [
         &quot;https://sqs.<span><code class="code" copy="true">us-east-2</code></span>.amazonaws.com/123456789012/myexistingqueue&quot;,
         { &quot;Ref&quot; : &quot;myqueue&quot; }
      ]
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-iam-example-10.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">mysqspolicy:
  Type: AWS::SQS::QueuePolicy
  Properties:
    PolicyDocument:
      Id: MyQueuePolicy
      Version: &apos;2012-10-17&apos;
      Statement:
      - Sid: Allow-User-SendMessage
        Effect: Allow
        Principal:
          AWS: arn:aws:iam::123456789012:user/myapp
        Action:
        - sqs:SendMessage
        Resource: &quot;*&quot;
    Queues:
    - https://sqs.<span><code class="code" copy="true">us-east-2</code></span>.amazonaws.com/123456789012/myexistingqueue
    - !Ref myqueue</code></pre>
                        </div>
                     
                     <h2 id="scenarios-iamroles">IAM Role Template Examples</h2>
                     
                     
                     
                     <p>This section provides CloudFormation template examples for IAM Roles for EC2 Instances.</p>
                     
                     
                     <p>For more information about IAM roles, see <a href="./IAM/latest/UserGuide/WorkingWithRoles.html" target="_blank">Working with Roles</a> in the
                        <em>AWS Identity and Access Management User Guide</em>.
                     </p>
                     
                     
                     
                     <h3 id="scenario-iamrole-ec2">IAM Role with EC2</h3>
                     
                     
                     <p>In this example, the instance profile is referenced by the
                        <code class="code">IamInstanceProfile</code> property of the EC2 Instance. Both the
                        instance policy and role policy reference <code class="code"><a href="aws-resource-iam-role.html">AWS::IAM::Role</a></code>.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="quickref-iam-example-11.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
   &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
   &quot;Resources&quot;: {
      &quot;myEC2Instance&quot;: {
         &quot;Type&quot;: &quot;AWS::EC2::Instance&quot;,
         &quot;Version&quot;: &quot;2009-05-15&quot;,
         &quot;Properties&quot;: {
            &quot;ImageId&quot;: &quot;ami-205fba49&quot;,
            &quot;InstanceType&quot;: &quot;m1.small&quot;,
            &quot;Monitoring&quot;: &quot;true&quot;,
            &quot;DisableApiTermination&quot;: &quot;false&quot;,
            &quot;IamInstanceProfile&quot;: {
               &quot;Ref&quot;: &quot;RootInstanceProfile&quot;
            }
         }
      },
      &quot;RootRole&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
         &quot;Properties&quot;: {
            &quot;AssumeRolePolicyDocument&quot;: {
               &quot;Version&quot; : &quot;2012-10-17&quot;,
               &quot;Statement&quot;: [ {
                  &quot;Effect&quot;: &quot;Allow&quot;,
                  &quot;Principal&quot;: {
                     &quot;Service&quot;: [ &quot;ec2.amazonaws.com&quot; ]
                  },
                  &quot;Action&quot;: [ &quot;sts:AssumeRole&quot; ]
               } ]
            },
            &quot;Path&quot;: &quot;/&quot;
         }
      },
      &quot;RolePolicies&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::Policy&quot;,
         &quot;Properties&quot;: {
            &quot;PolicyName&quot;: &quot;root&quot;,
            &quot;PolicyDocument&quot;: {
               &quot;Version&quot; : &quot;2012-10-17&quot;,
               &quot;Statement&quot;: [ {
                  &quot;Effect&quot;: &quot;Allow&quot;,
                  &quot;Action&quot;: &quot;*&quot;,
                  &quot;Resource&quot;: &quot;*&quot;
               } ]
            },
            &quot;Roles&quot;: [ { &quot;Ref&quot;: &quot;RootRole&quot; } ]
         }
      },
      &quot;RootInstanceProfile&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
         &quot;Properties&quot;: {
            &quot;Path&quot;: &quot;/&quot;,
            &quot;Roles&quot;: [ { &quot;Ref&quot;: &quot;RootRole&quot; } ]
         }
      }
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="quickref-iam-example-11.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AWSTemplateFormatVersion: &apos;2010-09-09&apos;
Resources:
  myEC2Instance:
    Type: AWS::EC2::Instance
    Version: &apos;2009-05-15&apos;
    Properties:
      ImageId: ami-205fba49
      InstanceType: m1.small
      Monitoring: &apos;true&apos;
      DisableApiTermination: &apos;false&apos;
      IamInstanceProfile:
        !Ref RootInstanceProfile
  RootRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: &apos;2012-10-17&apos;
        Statement:
        - Effect: Allow
          Principal:
            Service:
            - ec2.amazonaws.com
          Action:
          - sts:AssumeRole
      Path: &quot;/&quot;
  RolePolicies:
    Type: AWS::IAM::Policy
    Properties:
      PolicyName: root
      PolicyDocument:
        Version: &apos;2012-10-17&apos;
        Statement:
        - Effect: Allow
          Action: &quot;*&quot;
          Resource: &quot;*&quot;
      Roles:
      - !Ref RootRole
  RootInstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: &quot;/&quot;
      Roles:
      - !Ref RootRole</code></pre>
                        </div>
                     
                     
                     
                     
                     <h3 id="scenario-iamrole-asg">IAM Role with AutoScaling Group</h3>
                     
                     
                     <p>In this example, the instance profile is referenced by the
                        <code class="code">IamInstanceProfile</code> property of an AutoScaling Group Launch
                        Configuration.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="quickref-iam-example-12.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
   &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
   &quot;Resources&quot;: {
      &quot;myLCOne&quot;: {
         &quot;Type&quot;: &quot;AWS::AutoScaling::LaunchConfiguration&quot;,
         &quot;Version&quot;: &quot;2009-05-15&quot;,
         &quot;Properties&quot;: {
            &quot;ImageId&quot;: &quot;ami-205fba49&quot;,
            &quot;InstanceType&quot;: &quot;m1.small&quot;,
            &quot;InstanceMonitoring&quot;: &quot;true&quot;,
            &quot;IamInstanceProfile&quot;: { &quot;Ref&quot;: &quot;RootInstanceProfile&quot; }
         }
      },
      &quot;myASGrpOne&quot;: {
         &quot;Type&quot;: &quot;AWS::AutoScaling::AutoScalingGroup&quot;,
         &quot;Version&quot;: &quot;2009-05-15&quot;,
         &quot;Properties&quot;: {
            &quot;AvailabilityZones&quot;: [ &quot;<span><code class="code" copy="true">us-east-1a</code></span>&quot; ],
            &quot;LaunchConfigurationName&quot;: { &quot;Ref&quot;: &quot;myLCOne&quot; },
            &quot;MinSize&quot;: &quot;0&quot;,
            &quot;MaxSize&quot;: &quot;0&quot;,
            &quot;HealthCheckType&quot;: &quot;EC2&quot;,
            &quot;HealthCheckGracePeriod&quot;: &quot;120&quot;
         }
      },
      &quot;RootRole&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::Role&quot;,
         &quot;Properties&quot;: {
            &quot;AssumeRolePolicyDocument&quot;: {
               &quot;Version&quot; : &quot;2012-10-17&quot;,
               &quot;Statement&quot;: [ {
                  &quot;Effect&quot;: &quot;Allow&quot;,
                  &quot;Principal&quot;: {
                     &quot;Service&quot;: [ &quot;ec2.amazonaws.com&quot; ]
                  },
                  &quot;Action&quot;: [ &quot;sts:AssumeRole&quot; ]
               } ]
            },
            &quot;Path&quot;: &quot;/&quot;
         }
      },
      &quot;RolePolicies&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::Policy&quot;,
         &quot;Properties&quot;: {
            &quot;PolicyName&quot;: &quot;root&quot;,
            &quot;PolicyDocument&quot;: {
               &quot;Version&quot; : &quot;2012-10-17&quot;,
               &quot;Statement&quot;: [ {
                  &quot;Effect&quot;: &quot;Allow&quot;,
                  &quot;Action&quot;: &quot;*&quot;,
                  &quot;Resource&quot;: &quot;*&quot;
               } ]
            },
            &quot;Roles&quot;: [ { &quot;Ref&quot;: &quot;RootRole&quot; } ]
         }
      },
      &quot;RootInstanceProfile&quot;: {
         &quot;Type&quot;: &quot;AWS::IAM::InstanceProfile&quot;,
         &quot;Properties&quot;: {
            &quot;Path&quot;: &quot;/&quot;,
            &quot;Roles&quot;: [ { &quot;Ref&quot;: &quot;RootRole&quot; } ]
         }
      }
   }
}  </code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="quickref-iam-example-12.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">AWSTemplateFormatVersion: &apos;2010-09-09&apos;
Resources:
  myLCOne:
    Type: AWS::AutoScaling::LaunchConfiguration
    Version: &apos;2009-05-15&apos;
    Properties:
      ImageId: ami-205fba49
      InstanceType: m1.small
      InstanceMonitoring: &apos;true&apos;
      IamInstanceProfile:
        !Ref RootInstanceProfile
  myASGrpOne:
    Type: AWS::AutoScaling::AutoScalingGroup
    Version: &apos;2009-05-15&apos;
    Properties:
      AvailabilityZones:
      - &quot;<span><code class="code" copy="true">us-east-1a</code></span>&quot;
      LaunchConfigurationName:
        !Ref myLCOne
      MinSize: &apos;0&apos;
      MaxSize: &apos;0&apos;
      HealthCheckType: EC2
      HealthCheckGracePeriod: &apos;120&apos;
  RootRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: &apos;2012-10-17&apos;
        Statement:
        - Effect: Allow
          Principal:
            Service:
            - ec2.amazonaws.com
          Action:
          - sts:AssumeRole
      Path: &quot;/&quot;
  RolePolicies:
    Type: AWS::IAM::Policy
    Properties:
      PolicyName: root
      PolicyDocument:
        Version: &apos;2012-10-17&apos;
        Statement:
        - Effect: Allow
          Action: &quot;*&quot;
          Resource: &quot;*&quot;
      Roles:
      - !Ref RootRole
  RootInstanceProfile:
    Type: AWS::IAM::InstanceProfile
    Properties:
      Path: &quot;/&quot;
      Roles:
      - !Ref RootRole</code></pre>
                        </div>
                     
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="quickref-elb.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="quickref-lambda.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Declaring an IAM User Resource"><a class="pagetoc" href="#scenario-iam-user">Declaring an IAM User Resource</a></li>
                        <li class="pagetoc" name="Declaring an IAM Access Key Resource"><a class="pagetoc" href="#scenario-iam-accesskey">Declaring an IAM Access Key Resource</a></li>
                        <li class="pagetoc" name="Declaring an IAM Group Resource"><a class="pagetoc" href="#scenario-iam-group">Declaring an IAM Group Resource</a></li>
                        <li class="pagetoc" name="Adding Users to a Group"><a class="pagetoc" href="#scenario-iam-addusertogroup">Adding Users to a Group</a></li>
                        <li class="pagetoc" name="Declaring an IAM Policy"><a class="pagetoc" href="#scenario-iam-policy">Declaring an IAM Policy</a></li>
                        <li class="pagetoc" name="Declaring an Amazon S3 Bucket Policy"><a class="pagetoc" href="#scenario-bucket-policy">Declaring an Amazon S3 Bucket Policy</a></li>
                        <li class="pagetoc" name="Declaring an Amazon SNS Topic Policy"><a class="pagetoc" href="#scenario-sns-policy">Declaring an Amazon SNS Topic Policy</a></li>
                        <li class="pagetoc" name="Declaring an Amazon SQS Policy"><a class="pagetoc" href="#scenario-sqs-policy">Declaring an Amazon SQS Policy</a></li>
                        <li class="pagetoc" name="IAM Role Template Examples"><a class="pagetoc" href="#scenarios-iamroles">IAM Role Template Examples</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>