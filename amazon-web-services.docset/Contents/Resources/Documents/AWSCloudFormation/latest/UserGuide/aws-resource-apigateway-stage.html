<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::ApiGateway::Stage - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="aws-template-resource-type-ref.html" title="AWS Resource Types Reference">
      <link rel="prev" href="aws-resource-apigateway-restapi.html" title="AWS::ApiGateway::RestApi">
      <link rel="next" href="aws-resource-apigateway-usageplan.html" title="AWS::ApiGateway::UsagePlan">
      <meta name="description" content="Use the AWS CloudFormation AWS::ApiGateway::Stage resource to create a stage for an Amazon API Gateway deployment.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-apigateway-stage.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-reference.html">Template Reference</a> &#xBB; <a href="aws-template-resource-type-ref.html">AWS Resource Types Reference</a> &#xBB; <span class="breadcrumb">AWS::ApiGateway::Stage</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-resource-apigateway-stage">AWS::ApiGateway::Stage</h1>
                     <p>The <code class="code">AWS::ApiGateway::Stage</code> resource creates a stage for an Amazon API Gateway (API Gateway) deployment.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-apigateway-stage-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10c80b9">Properties</a></li>
                           <li><a href="#w2ab2c21c10c80c11">Return Value</a></li>
                           <li><a href="#aws-resource-apigateway-stage-examples">Example</a></li>
                        </ul>
                     </div>
                     <h2 id="aws-resource-apigateway-stage-syntax">Syntax</h2>
                     
                     
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-apigateway-stage-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::ApiGateway::Stage&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-cacheclusterenabled"><code class="code">CacheClusterEnabled</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-cacheclustersize"><code class="code">CacheClusterSize</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-clientcertificateid"><code class="code">ClientCertificateId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-deploymentid"><code class="code">DeploymentId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-description"><code class="code">Description</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-documentationversion"><code class="code">DocumentationVersion</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-methodsettings"><code class="code">MethodSettings</code></a>&quot; : [ <a href="aws-properties-apigateway-stage-methodsetting.html"><em class="replaceable"><code>MethodSetting</code></em></a>, ... ],
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-restapiid"><code class="code">RestApiId</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-stagename"><code class="code">StageName</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-variables"><code class="code">Variables</code></a>&quot; : { <em class="replaceable"><code>String</code></em>:<em class="replaceable"><code>String, ...</code></em> }
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-apigateway-stage-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: &quot;AWS::ApiGateway::Stage&quot;
Properties:
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-cacheclusterenabled"><code class="code">CacheClusterEnabled</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-cacheclustersize"><code class="code">CacheClusterSize</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-clientcertificateid"><code class="code">ClientCertificateId</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-deploymentid"><code class="code">DeploymentId</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-description"><code class="code">Description</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-documentationversion"><code class="code">DocumentationVersion</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-methodsettings"><code class="code">MethodSettings</code></a>:
    - <a href="aws-properties-apigateway-stage-methodsetting.html"><em class="replaceable"><code>MethodSetting</code></em></a>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-restapiid"><code class="code">RestApiId</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-stagename"><code class="code">StageName</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-apigateway-stage.html#cfn-apigateway-stage-variables"><code class="code">Variables</code></a>:
    <em class="replaceable"><code>String</code></em>: <em class="replaceable"><code>String</code></em>
</code></pre>
                        </div>
                     
                     <h2 id="w2ab2c21c10c80b9">Properties</h2>
                     
                     
                     <div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-apigateway-stage-cacheclusterenabled"></a><span class="term"><code class="code">CacheClusterEnabled</code></span></dt>
                           
                           <dd>
                              
                              <p>Indicates whether cache clustering is enabled for the stage.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-cacheclustersize"></a><span class="term"><code class="code">CacheClusterSize</code></span></dt>
                           
                           <dd>
                              
                              <p>The stage&apos;s cache cluster size.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-clientcertificateid"></a><span class="term"><code class="code">ClientCertificateId</code></span></dt>
                           
                           <dd>
                              
                              <p>The identifier of the client certificate that API Gateway uses to call your integration
                                 endpoints in the stage.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-deploymentid"></a><span class="term"><code class="code">DeploymentId</code></span></dt>
                           
                           <dd>
                              
                              <p>The ID of the deployment that the stage points to.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-description"></a><span class="term"><code class="code">Description</code></span></dt>
                           
                           <dd>
                              
                              <p>A description of the stage&apos;s purpose.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-documentationversion"></a><span class="term"><code class="code">DocumentationVersion</code></span></dt>
                           
                           <dd>
                              
                              <p>The version identifier of the API documentation snapshot.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-methodsettings"></a><span class="term"><code class="code">MethodSettings</code></span></dt>
                           
                           <dd>
                              
                              <p>Settings for all methods in the stage.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-apigateway-stage-methodsetting.html">API Gateway Stage MethodSetting</a></p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-restapiid"></a><span class="term"><code class="code">RestApiId</code></span></dt>
                           
                           <dd>
                              
                              <p>The ID of the <code class="code">RestApi</code> resource that you&apos;re deploying with this stage.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-stagename"></a><span class="term"><code class="code">StageName</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of the stage, which API Gateway uses as the first path segment in the invoked
                                 Uniform Resource Identifier (URI).
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-apigateway-stage-variables"></a><span class="term"><code class="code">Variables</code></span></dt>
                           
                           <dd>
                              
                              <p>A map (string-to-string map) that defines the stage variables, where the variable
                                 name is the key and the variable value is the value. Variable names are limited to
                                 alphanumeric characters. Values must match the following regular expression:
                                 <code class="code">[A-Za-z0-9-._~:/?#&amp;amp;=,]+</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Mapping of key-value pairs
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     <h2 id="w2ab2c21c10c80c11">Return Value</h2>
                     
                     
                     <h3 id="w2ab2c21c10c80c11b2">Ref</h3>
                     
                     
                     <p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic function, <code class="code">Ref</code> returns the name of the stage, such as <code class="code">MyTestStage</code>.
                     </p>
                     
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     
                     
                     <h2 id="aws-resource-apigateway-stage-examples">Example</h2>
                     
                     
                     <p>The following example creates a stage for the <code class="code">TestDeployment</code> deployment. The stage also specifies method 
                        settings for the <code class="code">MyRestApi</code> API.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-apigateway-stage-example.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
    &quot;Resources&quot;: {
        &quot;Prod&quot;: {
            &quot;Type&quot;: &quot;AWS::ApiGateway::Stage&quot;,
            &quot;Properties&quot;: {
                &quot;StageName&quot;: &quot;Prod&quot;,
                &quot;Description&quot;: &quot;Prod Stage&quot;,
                &quot;RestApiId&quot;: {
                    &quot;Ref&quot;: &quot;MyRestApi&quot;
                },
                &quot;DeploymentId&quot;: {
                    &quot;Ref&quot;: &quot;TestDeployment&quot;
                },
                &quot;DocumentationVersion&quot;: {
                    &quot;Ref&quot;: &quot;MyDocumentationVersion&quot;
                },
                &quot;ClientCertificateId&quot;: {
                    &quot;Ref&quot;: &quot;ClientCertificate&quot;
                },
                &quot;Variables&quot;: {
                    &quot;Stack&quot;: &quot;Prod&quot;
                },
                &quot;MethodSettings&quot;: [
                    {
                        &quot;ResourcePath&quot;: &quot;/&quot;,
                        &quot;HttpMethod&quot;: &quot;GET&quot;,
                        &quot;MetricsEnabled&quot;: &quot;true&quot;,
                        &quot;DataTraceEnabled&quot;: &quot;true&quot;
                    },
                    {
                        &quot;ResourcePath&quot;: &quot;/stack&quot;,
                        &quot;HttpMethod&quot;: &quot;POST&quot;,
                        &quot;MetricsEnabled&quot;: &quot;true&quot;,
                        &quot;DataTraceEnabled&quot;: &quot;true&quot;,
                        &quot;ThrottlingBurstLimit&quot;: &quot;999&quot;
                    },
                    {
                        &quot;ResourcePath&quot;: &quot;/stack&quot;,
                        &quot;HttpMethod&quot;: &quot;GET&quot;,
                        &quot;MetricsEnabled&quot;: &quot;true&quot;,
                        &quot;DataTraceEnabled&quot;: &quot;true&quot;,
                        &quot;ThrottlingBurstLimit&quot;: &quot;555&quot;
                    }
                ]
            }
        }
    }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-apigateway-stage-example.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Resources:
  Prod:
    Type: &apos;AWS::ApiGateway::Stage&apos;
    Properties:
      StageName: Prod
      Description: Prod Stage
      RestApiId: !Ref MyRestApi
      DeploymentId: !Ref TestDeployment
      DocumentationVersion: !Ref MyDocumentationVersion
      ClientCertificateId: !Ref ClientCertificate
      Variables:
        Stack: Prod
      MethodSettings:
        - ResourcePath: /
          HttpMethod: GET
          MetricsEnabled: &apos;true&apos;
          DataTraceEnabled: &apos;true&apos;
        - ResourcePath: /stack
          HttpMethod: POST
          MetricsEnabled: &apos;true&apos;
          DataTraceEnabled: &apos;true&apos;
          ThrottlingBurstLimit: &apos;999&apos;
        - ResourcePath: /stack
          HttpMethod: GET
          MetricsEnabled: &apos;true&apos;
          DataTraceEnabled: &apos;true&apos;
          ThrottlingBurstLimit: &apos;555&apos;</code></pre>
                        </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-resource-apigateway-restapi.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-resource-apigateway-usageplan.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-resource-apigateway-stage-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#w2ab2c21c10c80b9">Properties</a></li>
                        <li class="pagetoc" name="Return Value"><a class="pagetoc" href="#w2ab2c21c10c80c11">Return Value</a></li>
                        <li class="pagetoc" name="Example"><a class="pagetoc" href="#aws-resource-apigateway-stage-examples">Example</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>