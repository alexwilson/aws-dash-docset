<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::KMS::Key - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="aws-template-resource-type-ref.html" title="AWS Resource Types Reference">
      <link rel="prev" href="aws-resource-kms-alias.html" title="AWS::KMS::Alias">
      <link rel="next" href="aws-resource-lambda-eventsourcemapping.html" title="AWS::Lambda::EventSourceMapping">
      <meta name="description" content="Use the AWS::KMS::Key resource to create an AWS Key Management Service customer master key. Use the AWS KMS master key to encrypt data stored in AWS services that are integrated with AWS KMS or within applications.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-reference.html">Template Reference</a> &#xBB; <a href="aws-template-resource-type-ref.html">AWS Resource Types Reference</a> &#xBB; <span class="breadcrumb">AWS::KMS::Key</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-resource-kms-key">AWS::KMS::Key</h1>
                     <p>The <code class="code">AWS::KMS::Key</code> resource creates a customer master key (CMK) in AWS Key Management Service
                        (AWS KMS). Users (customers) can use the master key to encrypt their data stored in
                        AWS services
                        that are integrated with AWS KMS or within their applications. For more information,
                        see <a href="./kms/latest/developerguide/" target="_blank">What is the AWS Key Management Service?</a> in the
                        <em>AWS Key Management Service Developer Guide</em>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-kms-key-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10d828b9">Properties</a></li>
                           <li><a href="#w2ab2c21c10d828c11">Return Values</a></li>
                           <li><a href="#w2ab2c21c10d828c13">Examples</a></li>
                        </ul>
                     </div>
                     <h2 id="aws-resource-kms-key-syntax">Syntax</h2>
                     
                     
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-kms-key-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::KMS::Key&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-kms-key.html#cfn-kms-key-description"><code class="code">Description</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-kms-key.html#cfn-kms-key-enabled"><code class="code">Enabled</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-kms-key.html#cfn-kms-key-enablekeyrotation"><code class="code">EnableKeyRotation</code></a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
    &quot;<a href="aws-resource-kms-key.html#cfn-kms-key-keypolicy"><code class="code">KeyPolicy</code></a>&quot; : <em class="replaceable"><code>JSON object</code></em>
    &quot;<a href="aws-resource-kms-key.html#cfn-kms-key-tags"><code class="code">Tags</code></a>&quot; : [ <em class="replaceable"><code>Resource Tag, ...</code></em> ],
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-kms-key-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: &quot;AWS::KMS::Key&quot;
Properties: 
  <a href="aws-resource-kms-key.html#cfn-kms-key-description"><code class="code">Description</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-kms-key.html#cfn-kms-key-enabled"><code class="code">Enabled</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-kms-key.html#cfn-kms-key-enablekeyrotation"><code class="code">EnableKeyRotation</code></a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="aws-resource-kms-key.html#cfn-kms-key-keypolicy"><code class="code">KeyPolicy</code></a>: <em class="replaceable"><code>JSON object</code></em>
  <a href="aws-resource-kms-key.html#cfn-kms-key-tags"><code class="code">Tags</code></a>:
    - <em class="replaceable"><code>Resource Tag</code></em>
</code></pre>
                        </div>
                     
                     <h2 id="w2ab2c21c10d828b9">Properties</h2>
                     
                     
                     <div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-kms-key-description"></a><span class="term"><code class="code">Description</code></span></dt>
                           
                           <dd>
                              
                              <p>A description of the key. Use a description that helps your users decide
                                 whether the key is appropriate for a particular task.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-kms-key-enabled"></a><span class="term"><code class="code">Enabled</code></span></dt>
                           
                           <dd>
                              
                              <p>Indicates whether the key is available for use. AWS CloudFormation sets this value
                                 to
                                 <code class="code">true</code> by default.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-kms-key-enablekeyrotation"></a><span class="term"><code class="code">EnableKeyRotation</code></span></dt>
                           
                           <dd>
                              
                              <p>Indicates whether AWS KMS rotates the key. AWS CloudFormation sets this value to
                                 <code class="code">false</code> by default.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Boolean
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-kms-key-keypolicy"></a><span class="term"><code class="code">KeyPolicy</code></span></dt>
                           
                           <dd>
                              
                              <p>An AWS KMS key policy to attach to the key. Use a policy to specify who has permission
                                 to use the key and which actions they can perform. For more information, see <a href="./kms/latest/developerguide/key-policies.html" target="_blank">Key Policies</a> in the <em>AWS Key Management Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: JSON object
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-kms-key-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                           
                           <dd>
                              
                              <p>Specifies an arbitrary set of tags (key&#x2013;value pairs) to associate with this
                                 key. Use tags to manage your resources.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-resource-tags.html">AWS CloudFormation Resource Tags</a></p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     <h2 id="w2ab2c21c10d828c11">Return Values</h2>
                     
                     
                     <h3 id="w2ab2c21c10d828c11b2">Ref</h3>
                     
                     
                     <p>When you provide the logical ID of this resource to the <code class="code">Ref</code> intrinsic
                        function, it returns the key ID, such as
                        <code class="code">123ab456-a4c2-44cb-95fd-b781f32fbb37</code>.
                     </p>
                     
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     
                     
                     <h3 id="w2ab2c21c10d828c11b4">Fn::GetAtt</h3>
                     
                     
                     <p><code class="code">Fn::GetAtt</code> returns a value for a specified attribute of this type.
                        The following are the available attributes and sample return values.
                     </p>
                     
                     <div class="variablelist">
                        
                        
                        <dl>
                           
                           <dt><span class="term"><code class="code">Arn</code></span></dt>
                           
                           <dd>
                              
                              <p>The ARN of the AWS KMS key, such as <code class="code">arn:aws:kms:us-west-2:123456789012:key/12a34567-8c90-1defg-af84-0bf06c1747f3</code>.
                              </p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     <p>For more information about using <code class="code">Fn::GetAtt</code>, see <a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                     </p>
                     
                     
                     <h2 id="w2ab2c21c10d828c13">Examples</h2>
                     
                     
                     <h3 id="w2ab2c21c10d828c13b2"></h3>
                     
                     
                     <p>The following example creates a custom CMK, which permits the IAM user
                        <code class="code">Alice</code> to administer the key and allows <code class="code">Bob</code> to use the key
                        for encrypting and decrypting data.
                     </p>         
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-kms-key-example.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;myKey&quot; : {
  &quot;Type&quot; : &quot;AWS::KMS::Key&quot;,
  &quot;Properties&quot; : {
    &quot;Description&quot; : &quot;A sample key&quot;,
    &quot;KeyPolicy&quot; : {
      &quot;Version&quot;: &quot;2012-10-17&quot;,
      &quot;Id&quot;: &quot;key-default-1&quot;,
      &quot;Statement&quot;: [
        {
          &quot;Sid&quot;: &quot;Allow administration of the key&quot;,
          &quot;Effect&quot;: &quot;Allow&quot;,
          &quot;Principal&quot;: { &quot;AWS&quot;: &quot;arn:aws:iam::123456789012:user/Alice&quot; },
          &quot;Action&quot;: [
            &quot;kms:Create*&quot;,
            &quot;kms:Describe*&quot;,
            &quot;kms:Enable*&quot;,
            &quot;kms:List*&quot;,
            &quot;kms:Put*&quot;,
            &quot;kms:Update*&quot;,
            &quot;kms:Revoke*&quot;,
            &quot;kms:Disable*&quot;,
            &quot;kms:Get*&quot;,
            &quot;kms:Delete*&quot;,
            &quot;kms:ScheduleKeyDeletion&quot;,
            &quot;kms:CancelKeyDeletion&quot;
          ],
          &quot;Resource&quot;: &quot;*&quot;
        },
        {
          &quot;Sid&quot;: &quot;Allow use of the key&quot;,
          &quot;Effect&quot;: &quot;Allow&quot;,
          &quot;Principal&quot;: { &quot;AWS&quot;: &quot;arn:aws:iam::123456789012:user/Bob&quot; },
          &quot;Action&quot;: [
            &quot;kms:Encrypt&quot;,
            &quot;kms:Decrypt&quot;,
            &quot;kms:ReEncrypt*&quot;,
            &quot;kms:GenerateDataKey*&quot;,
            &quot;kms:DescribeKey&quot;
          ], 
          &quot;Resource&quot;: &quot;*&quot;
        }    
      ]
    }
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-kms-key-example.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">myKey: 
  Type: &quot;AWS::KMS::Key&quot;
  Properties: 
    Description: &quot;A sample key&quot;
    KeyPolicy: 
      Version: &quot;2012-10-17&quot;
      Id: &quot;key-default-1&quot;
      Statement: 
        - 
          Sid: &quot;Allow administration of the key&quot;
          Effect: &quot;Allow&quot;
          Principal: 
            AWS: &quot;arn:aws:iam::123456789012:user/Alice&quot;
          Action: 
            - &quot;kms:Create*&quot;
            - &quot;kms:Describe*&quot;
            - &quot;kms:Enable*&quot;
            - &quot;kms:List*&quot;
            - &quot;kms:Put*&quot;
            - &quot;kms:Update*&quot;
            - &quot;kms:Revoke*&quot;
            - &quot;kms:Disable*&quot;
            - &quot;kms:Get*&quot;
            - &quot;kms:Delete*&quot;
            - &quot;kms:ScheduleKeyDeletion&quot;
            - &quot;kms:CancelKeyDeletion&quot;
          Resource: &quot;*&quot;
        - 
          Sid: &quot;Allow use of the key&quot;
          Effect: &quot;Allow&quot;
          Principal: 
            AWS: &quot;arn:aws:iam::123456789012:user/Bob&quot;
          Action: 
            - &quot;kms:Encrypt&quot;
            - &quot;kms:Decrypt&quot;
            - &quot;kms:ReEncrypt*&quot;
            - &quot;kms:GenerateDataKey*&quot;
            - &quot;kms:DescribeKey&quot;
          Resource: &quot;*&quot;
</code></pre>
                        </div>
                     
                     
                     
                     <p>The following example creates a custom CMK with a single tag.</p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        
                        <h4 id="aws-resource-kms-key-example-tags.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;Resources&quot; : {
    &quot;myKey&quot; : {
      &quot;Type&quot; : &quot;AWS::KMS::Key&quot;,
      &quot;Properties&quot; : {
        &quot;KeyPolicy&quot; : {
          &quot;Version&quot;: &quot;2012-10-17&quot;,
          &quot;Id&quot;: &quot;key-default-1&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;Enable IAM User Permissions&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;AWS&quot;: { &quot;Fn::Join&quot; : [&quot;&quot; , [&quot;arn:aws:iam::&quot;, {&quot;Ref&quot; : &quot;AWS::AccountId&quot;} ,&quot;:root&quot; ]] }
              },
              &quot;Action&quot;: &quot;kms:*&quot;,
              &quot;Resource&quot;: &quot;*&quot;
            }
          ]
        },
        &quot;Tags&quot; : [
          {
            &quot;Key&quot; : {&quot;Ref&quot; : &quot;Key&quot;},
            &quot;Value&quot; : {&quot;Ref&quot; : &quot;Value&quot;}
          }
        ]
      }
    }
  },
  &quot;Parameters&quot; : {
    &quot;Key&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;Value&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    }
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        
                        <h4 id="aws-resource-kms-key-example-tags.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Resources:
  myKey:
    Type: &apos;AWS::KMS::Key&apos;
    Properties:
      KeyPolicy:
        Version: 2012-10-17
        Id: key-default-1
        Statement:
          - Sid: Enable IAM User Permissions
            Effect: Allow
            Principal:
              AWS: !Join 
                - &apos;&apos;
                - - &apos;arn:aws:iam::&apos;
                  - !Ref &apos;AWS::AccountId&apos;
                  - &apos;:root&apos;
            Action: &apos;kms:*&apos;
            Resource: &apos;*&apos;
      Tags:
        - Key: !Ref Key
          Value: !Ref Value
Parameters:
  Key:
    Type: String
  Value:
    Type: String</code></pre>
                        </div>
                     
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-resource-kms-alias.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-resource-lambda-eventsourcemapping.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-resource-kms-key-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#w2ab2c21c10d828b9">Properties</a></li>
                        <li class="pagetoc" name="Return Values"><a class="pagetoc" href="#w2ab2c21c10d828c11">Return Values</a></li>
                        <li class="pagetoc" name="Examples"><a class="pagetoc" href="#w2ab2c21c10d828c13">Examples</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>