<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::WAF::WebACL - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="aws-template-resource-type-ref.html" title="AWS Resource Types Reference">
      <link rel="prev" href="aws-resource-waf-sqlinjectionmatchset.html" title="AWS::WAF::SqlInjectionMatchSet">
      <link rel="next" href="aws-resource-waf-xssmatchset.html" title="AWS::WAF::XssMatchSet">
      <meta name="description" content="Use the AWS::WAF::WebACL resource to create an AWS WAF web ACL containing the rules that identify the Amazon CloudFront web requests that you want to allow, block, or count.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-waf-webacl.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-reference.html">Template Reference</a> &#xBB; <a href="aws-template-resource-type-ref.html">AWS Resource Types Reference</a> &#xBB; <span class="breadcrumb">AWS::WAF::WebACL</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-resource-waf-webacl">AWS::WAF::WebACL</h1>
                     <p>The <code class="code">AWS::WAF::WebACL</code> resource creates an AWS WAF web access control group
                        (ACL) containing the rules that identify the Amazon CloudFront (CloudFront) web requests
                        that you want to
                        allow, block, or count. For more information, see <a href="./waf/latest/APIReference/API_CreateWebACL.html" target="_blank">CreateWebACL</a> in the
                        <em>AWS WAF API Reference</em>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-waf-webacl-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10e1123b9">Properties</a></li>
                           <li><a href="#w2ab2c21c10e1123c11">Return Values</a></li>
                           <li><a href="#w2ab2c21c10e1123c13">Examples</a></li>
                           <li><a href="#w2ab2c21c10e1123c15">Associate a Web ACL with a CloudFront Distribution</a></li>
                        </ul>
                     </div>
                     <h2 id="aws-resource-waf-webacl-syntax">Syntax</h2>
                     
                     
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-waf-webacl-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::WAF::WebACL&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-waf-webacl.html#cfn-waf-webacl-defaultaction"><code class="code">DefaultAction</code></a>&quot; : <em class="replaceable"><code>Action</code></em>,
    &quot;<a href="aws-resource-waf-webacl.html#cfn-waf-webacl-metricname"><code class="code">MetricName</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-waf-webacl.html#cfn-waf-webacl-name"><code class="code">Name</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-waf-webacl.html#cfn-waf-webacl-rules"><code class="code">Rules</code></a>&quot; : [ <em class="replaceable"><code>Rule, ...</code></em> ]
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-waf-webacl-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">
Type: &quot;AWS::WAF::WebACL&quot;
Properties: 
  <a href="aws-resource-waf-webacl.html#cfn-waf-webacl-defaultaction"><code class="code">DefaultAction</code></a>:
    <em class="replaceable"><code>Action</code></em>
  <a href="aws-resource-waf-webacl.html#cfn-waf-webacl-metricname"><code class="code">MetricName</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-waf-webacl.html#cfn-waf-webacl-name"><code class="code">Name</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-waf-webacl.html#cfn-waf-webacl-rules"><code class="code">Rules</code></a>:
    - <em class="replaceable"><code>Rule</code></em> 
</code></pre>
                        </div>
                     
                     <h2 id="w2ab2c21c10e1123b9">Properties</h2>
                     
                     
                     <div class="variablelist">
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-waf-webacl-defaultaction"></a><span class="term"><code class="code">DefaultAction</code></span></dt>
                           
                           <dd>
                              
                              <p>The action that you want AWS WAF to take when a request doesn&apos;t match the
                                 criteria in any of the rules that are associated with the web ACL.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: <a href="aws-properties-waf-webacl-action.html">AWS WAF WebACL Action</a></p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-waf-webacl-metricname"></a><span class="term"><code class="code">MetricName</code></span></dt>
                           
                           <dd>
                              
                              <p>A friendly name or description for the Amazon CloudWatch metric of this web ACL. For
                                 valid values, see the <code class="code">MetricName</code> parameter of the <a href="./waf/latest/APIReference/API_CreateWebACL.html" target="_blank">CreateWebACL</a> action in the <em>AWS WAF API Reference</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-waf-webacl-name"></a><span class="term"><code class="code">Name</code></span></dt>
                           
                           <dd>
                              
                              <p>A friendly name or description of the web ACL.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-waf-webacl-rules"></a><span class="term"><code class="code">Rules</code></span></dt>
                           
                           <dd>
                              
                              <p>The rules to associate with the web ACL and the settings for each rule.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: List of <a href="aws-properties-waf-webacl-rules.html">AWS WAF WebACL Rules</a></p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     <h2 id="w2ab2c21c10e1123c11">Return Values</h2>
                     
                     
                     <h3 id="w2ab2c21c10e1123c11b2">Ref</h3>
                     
                     
                     <p>When the logical ID of this resource is provided to the <code class="code">Ref</code>
                        intrinsic function, <code class="code">Ref</code> returns the resource name, such as
                        <code class="code">1234a1a-a1b1-12a1-abcd-a123b123456</code>.
                     </p>
                     
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     
                     
                     <h2 id="w2ab2c21c10e1123c13">Examples</h2>
                     
                     
                     <h3 id="w2ab2c21c10e1123c13b2">Create a Web ACL</h3>
                     
                     
                     <p>The following example defines a web ACL that allows, by default, any web request.
                        However, if the request matches any rule, AWS WAF blocks the request. AWS WAF evaluates
                        each rule in priority order, starting with the lowest value.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-waf-webacl-example1.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;MyWebACL&quot;: {
  &quot;Type&quot;: &quot;AWS::WAF::WebACL&quot;,
  &quot;Properties&quot;: {
    &quot;Name&quot;: &quot;WebACL to with three rules&quot;,
    &quot;DefaultAction&quot;: {
      &quot;Type&quot;: &quot;ALLOW&quot;
    },
    &quot;MetricName&quot; : &quot;MyWebACL&quot;,
    &quot;Rules&quot;: [
      {
        &quot;Action&quot; : {
          &quot;Type&quot; : &quot;BLOCK&quot;
        },
        &quot;Priority&quot; : 1,
        &quot;RuleId&quot; : { &quot;Ref&quot; : &quot;MyRule&quot; }
      },
      {
        &quot;Action&quot; : {
          &quot;Type&quot; : &quot;BLOCK&quot;
        },
        &quot;Priority&quot; : 2,
        &quot;RuleId&quot; : { &quot;Ref&quot; : &quot;BadReferersRule&quot; }
      },
      {
        &quot;Action&quot; : {
          &quot;Type&quot; : &quot;BLOCK&quot;
        },
        &quot;Priority&quot; : 3,
        &quot;RuleId&quot; : { &quot;Ref&quot; : &quot;SqlInjRule&quot; }
      }
    ]
  }      
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-waf-webacl-example1.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">MyWebACL: 
  Type: &quot;AWS::WAF::WebACL&quot;
  Properties: 
    Name: &quot;WebACL to with three rules&quot;
    DefaultAction: 
      Type: &quot;ALLOW&quot;
    MetricName: &quot;MyWebACL&quot;
    Rules: 
      - 
        Action: 
          Type: &quot;BLOCK&quot;
        Priority: 1
        RuleId: 
          Ref: &quot;MyRule&quot;
      - 
        Action: 
          Type: &quot;BLOCK&quot;
        Priority: 2
        RuleId: 
          Ref: &quot;BadReferersRule&quot;
      - 
        Action: 
          Type: &quot;BLOCK&quot;
        Priority: 3
        RuleId: 
          Ref: &quot;SqlInjRule&quot;</code></pre>
                        </div>
                     
                     
                     <h2 id="w2ab2c21c10e1123c15">Associate a Web ACL with a CloudFront Distribution</h2>
                     
                     
                     <p>The follow example associates the <code class="code">MyWebACL</code> web ACL with a CloudFront distribution.
                        The web ACL restricts which requests can access content served by CloudFront.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-waf-webacl-example2.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;myDistribution&quot;: {
  &quot;Type&quot;: &quot;AWS::CloudFront::Distribution&quot;,
  &quot;Properties&quot;: {
    &quot;DistributionConfig&quot;: {    
      &quot;WebACLId&quot;: { &quot;Ref&quot; : &quot;MyWebACL&quot; },
      &quot;Origins&quot;: [
        {
          &quot;DomainName&quot;: &quot;test.example.com&quot;,
          &quot;Id&quot;: &quot;myCustomOrigin&quot;,
          &quot;CustomOriginConfig&quot;: {
            &quot;HTTPPort&quot;: &quot;80&quot;,
            &quot;HTTPSPort&quot;: &quot;443&quot;,
            &quot;OriginProtocolPolicy&quot;: &quot;http-only&quot;
          }
        }
      ],
      &quot;Enabled&quot;: &quot;true&quot;,
      &quot;Comment&quot;: &quot;TestDistribution&quot;,
      &quot;DefaultRootObject&quot;: &quot;index.html&quot;,
      &quot;DefaultCacheBehavior&quot;: {
        &quot;TargetOriginId&quot;: &quot;myCustomOrigin&quot;,
        &quot;SmoothStreaming&quot; : &quot;false&quot;,
        &quot;ForwardedValues&quot;: {
          &quot;QueryString&quot;: &quot;false&quot;,
          &quot;Cookies&quot; : { &quot;Forward&quot; : &quot;all&quot; }
        },
        &quot;ViewerProtocolPolicy&quot;: &quot;allow-all&quot;
      },
      &quot;CustomErrorResponses&quot; : [
        {
          &quot;ErrorCode&quot; : &quot;404&quot;,
          &quot;ResponsePagePath&quot; : &quot;/error-pages/404.html&quot;,
          &quot;ResponseCode&quot; : &quot;200&quot;,
          &quot;ErrorCachingMinTTL&quot; : &quot;30&quot;
        }
      ],
      &quot;PriceClass&quot; : &quot;PriceClass_200&quot;,
      &quot;Restrictions&quot; : {
        &quot;GeoRestriction&quot; : {
          &quot;RestrictionType&quot; : &quot;whitelist&quot;,
          &quot;Locations&quot; : [ &quot;AQ&quot;, &quot;CV&quot; ]
        }
      },
      &quot;ViewerCertificate&quot; : { &quot;CloudFrontDefaultCertificate&quot; : &quot;true&quot; }
    }
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-waf-webacl-example2.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">myDistribution: 
  Type: &quot;AWS::CloudFront::Distribution&quot;
  Properties: 
    DistributionConfig: 
      WebACLId: 
        Ref: &quot;MyWebACL&quot;
      Origins: 
        - 
          DomainName: &quot;test.example.com&quot;
          Id: &quot;myCustomOrigin&quot;
          CustomOriginConfig: 
            HTTPPort: &quot;80&quot;
            HTTPSPort: &quot;443&quot;
            OriginProtocolPolicy: &quot;http-only&quot;
      Enabled: &quot;true&quot;
      Comment: &quot;TestDistribution&quot;
      DefaultRootObject: &quot;index.html&quot;
      DefaultCacheBehavior: 
        TargetOriginId: &quot;myCustomOrigin&quot;
        SmoothStreaming: &quot;false&quot;
        ForwardedValues: 
          QueryString: &quot;false&quot;
          Cookies: 
            Forward: &quot;all&quot;
        ViewerProtocolPolicy: &quot;allow-all&quot;
      CustomErrorResponses: 
        - 
          ErrorCode: &quot;404&quot;
          ResponsePagePath: &quot;/error-pages/404.html&quot;
          ResponseCode: &quot;200&quot;
          ErrorCachingMinTTL: &quot;30&quot;
      PriceClass: &quot;PriceClass_200&quot;
      Restrictions: 
        GeoRestriction: 
          RestrictionType: &quot;whitelist&quot;
          Locations: 
            - &quot;AQ&quot;
            - &quot;CV&quot;
      ViewerCertificate: 
        CloudFrontDefaultCertificate: &quot;true&quot;</code></pre>
                        </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-resource-waf-sqlinjectionmatchset.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-resource-waf-xssmatchset.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-resource-waf-webacl-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#w2ab2c21c10e1123b9">Properties</a></li>
                        <li class="pagetoc" name="Return Values"><a class="pagetoc" href="#w2ab2c21c10e1123c11">Return Values</a></li>
                        <li class="pagetoc" name="Examples"><a class="pagetoc" href="#w2ab2c21c10e1123c13">Examples</a></li>
                        <li class="pagetoc" name="Associate a Web ACL with a CloudFront Distribution"><a class="pagetoc" href="#w2ab2c21c10e1123c15">Associate a Web ACL with a CloudFront Distribution</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>