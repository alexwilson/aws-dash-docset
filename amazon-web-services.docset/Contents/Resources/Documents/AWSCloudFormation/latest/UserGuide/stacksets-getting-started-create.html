<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Create a New Stack Set - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="stacksets-getting-started.html" title="Getting Started with AWS CloudFormation StackSets">
      <link rel="prev" href="stacksets-getting-started.html" title="Getting Started with AWS CloudFormation StackSets">
      <link rel="next" href="stacksets-update.html" title="Update Your Stack Set">
      <meta name="description" content="You can create a stack set in either the AWS Management Console, or by using AWS CloudFormation commands in the AWS CLI.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-getting-started-create.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="what-is-cfnstacksets.html">Working with AWS CloudFormation StackSets</a> &#xBB; <a href="stacksets-getting-started.html">Getting Started with AWS CloudFormation StackSets</a> &#xBB; <span class="breadcrumb">Create a New Stack Set</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="stacksets-getting-started-create">Create a New Stack Set</h1>
                     <p>You can create a stack set in either the AWS Management Console, or by using AWS CloudFormation
                        commands in
                        the AWS CLI.
                     </p>
                     <p class="title"><b>To create a stack set by using the AWS Management Console</b></p>
                     <ol>
                        <li>
                           <p>Open the AWS CloudFormation console at
                              <a href="https://console.aws.amazon.com/cloudformation/" target="_blank">https://console.aws.amazon.com/cloudformation</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>At the top of the page, choose <b>StackSets</b>, and then choose
                              <b>Create stack set</b>.
                           </p>
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/stacksets_home.png" alt="
                        StackSets home page
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Select template</b> page of the <b>Create stack
                                 set</b> wizard, choose <b>Select a sample template from the
                                 following templates</b>.
                           </p>
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/create_stack_set_selecttemplate.png" alt="
                        StackSets Select Template wizard page
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose the <b>Enable AWS Config</b> sample template, and then choose
                              <b>Next</b>.
                           </p>
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/create_stack_set_cloudtrail.png" alt="
                        StackSets sample Enable AWS Config template
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Specify details</b> page of the wizard, provide the
                              following information.
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>Provide a name for the stack set. Stack set names must begin with an
                                    alphabetical character, and contain only letters, numbers, and hyphens.
                                    In this walkthrough, we use the name
                                    <strong class="userinput"><code>my-awsconfig-stackset</code></strong>.
                                 </p>
                                 
                                 <div class="mediaobject">
                                    
                                    <img src="../../..//img/stacksets_specify_details1.png" alt="
                                Specify Details page, first section
                            " style="max-width:100%">
                                    
                                    
                                    
                                 </div>
                                 
                              </li>
                              <li>
                                 
                                 <p>You are prompted to specify values for parameters that are used by
                                    AWS Config. For more information about these parameters, see <a href="./config/latest/developerguide/gs-console.html" target="_blank">Setting up AWS Config with the Console</a> in the
                                    <em>AWS Config Developer Guide</em>. In this walkthrough, we
                                    will leave default settings for all AWS Config parameters.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Delivery Channel Configuration</b> area, you can
                              configure the delivery channel for updates and notifications. For more
                              information about the delivery channel in AWS Config, see <a href="./config/latest/developerguide/manage-delivery-channel.html" target="_blank">Managing the Delivery Channel</a> in the <em>AWS Config Developer
                                 Guide</em>. For the purposes of this walkthrough, we are leaving
                              default settings in this area.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Delivery Notifications</b> area, you can configure
                              Amazon Simple Notification Service (SNS) updates by email, based on log content. For
                              the purposes of this
                              walkthrough, we are not configuring Amazon SNS updates.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>When you are finished specifying parameters for AWS Config, choose
                              <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Set deployment options</b> page, provide the accounts
                              and regions into which you want stacks in your stack set deployed. AWS CloudFormation
                              deploys
                              stacks in the specified accounts within the first region, then moves on to the
                              next, and so on, as long as a region&apos;s deployment failures do not exceed a
                              specified failure tolerance.
                           </p>
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/stacksets_setdepoptions.png" alt="
                        Set Deployment Options page
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <ol>
                              <li>
                                 
                                 <p>In the <b>Accounts</b> area, choose <b>Deploy
                                       stacks in accounts</b>. Paste your target account numbers in
                                    the text box, separating multiple numbers with commas.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>In the <b>Regions</b> area, choose US West (Oregon) Region and
                                    then choose <b>Add</b>. Repeat for the US East (N. Virginia) Region.
                                    US West (Oregon) Region should be first in the <b>Deployment
                                       order</b> box.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>In the <b>Preferences</b> area, keep the default value
                                    of <b>1</b> and <b>By number</b> for
                                    <b>Maximum concurrent accounts</b>. This means that
                                    AWS CloudFormation deploys your stack in only one account at one time. Keep
                                    <b>Failure tolerance</b> at the default value of
                                    <b>0</b>, and keep the <b>By number</b>
                                    default option. This means that a maximum of one stack deployment can
                                    fail in one of your specified regions before AWS CloudFormation stops deployment in
                                    the current region, and cancels deployment in remaining regions. Choose
                                    <b>Next</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Tags</b> page, add a tag by specifying a key and value
                              pair. In this walkthrough, we create a tag called <b>Stage</b>,
                              with a value of <b>Test</b>. Tags that you apply to stack sets are
                              applied to all resources that are created by your stacks. For more information
                              about how tags are used in AWS, see <a href="./awsaccountbilling/latest/aboutv2/cost-alloc-tags.html" target="_blank">Using Cost Allocation Tags</a> in the <em>AWS Billing and Cost Management User
                                 Guide</em>. After you specify the key-value pair, choose
                              <b>+</b> to save the tag. Choose
                              <b>Next</b>.
                           </p>
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/stacksets_create_tags.png" alt="
                        Tags page
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Review</b> page, review your choices and your stack
                              set&apos;s properties. To make changes, choose <b>Edit</b> in the area
                              in which you want to change properties. Before you can create the stack set, you
                              must fill the check box in the <b>Capabilities</b> area to
                              acknowledge that some of the resources that you are creating with the stack set
                              might require new IAM resources and permissions. For more information about
                              potentially required permissions, see <a href="./AWSCloudFormation/latest/UserGuide/using-iam-template.html#using-iam-capabilities" target="_blank">Acknowledging IAM Resources in AWS CloudFormation Templates</a> in this
                              guide. When you are are ready to create your stack set, choose
                              <b>Create</b>.
                           </p>
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/stacksets_create_capabilities.png" alt="
                        Acknowledge required capabilities
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>AWS CloudFormation starts creating your stack set. View the progress and status of
                              the
                              creation of the stacks in your stack set in the Properties page that opens when
                              you choose <b>Create</b>.
                           </p>
                           
                        </li>
                     </ol>
                     <p class="title"><b>To create a stack set by using the AWS CLI</b></p>
                     <p>When you create stack sets by using AWS CLI commands, you run two separate commands:
                        <code class="code">create-stack-set</code> to upload your template and create the stack set
                        container, and <code class="code">create-stack-instances</code> to create the stacks within your
                        stack set. Start by running an AWS CLI command, <code class="code">create-stack-set</code>, to
                        upload the sample AWS CloudFormation template that enables AWS Config, and then start
                        stack set
                        creation.
                     </p>
                     <ol>
                        <li>
                           
                           <p>Open the AWS CLI.</p>
                           
                        </li>
                        <li>
                           
                           <p>Run the following command. For the <code class="code">--template-url</code> parameter,
                              provide the URL of the Amazon S3 bucket in which you are storing your template. For
                              this walkthrough, we use <code class="code">my-awsconfig-stackset</code> as the value of the
                              <code class="code">--stack-set-name</code> parameter.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">aws cloudformation create-stack-set --stack-set-name my-awsconfig-stackset --template-url https://s3.amazonaws.com/cloudformation-stackset-sample-templates-us-east-1/EnableAWSConfig.yml</code></pre>
                           </li>
                        <li>
                           
                           <p>After your <code class="code">create-stack-set</code> command is finished, run the
                              <code class="code">list-stack-sets</code> command to see that your stack set has been
                              created. You should see your new stack set in the results.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">aws cloudformation list-stack-sets</code></pre>
                           </li>
                        <li>
                           
                           <p>Run the <code class="code">create-stack-instances</code> AWS CLI command to add stack
                              instances to your stack set. In this walkthrough, we use <code class="code">us-west-2</code>
                              and <code class="code">us-east-1</code> as the values of the <code class="code">--regions</code>
                              parameter.
                           </p>
                           
                           <p>Set the failure tolerance and maximum concurrent accounts by setting
                              <code class="code">FailureToleranceCount</code> to <code class="code">0</code> and
                              <code class="code">MaxConcurrentCount</code> to <code class="code">1</code> in the
                              <code class="code">--operation-preferences</code> parameter, as shown in the following
                              example. To apply percentages instead, use
                              <code class="code">FailureTolerancePercentage</code> or
                              <code class="code">MaxConcurrentPercentage</code>. For the purposes of this walkthrough,
                              we are using count, not percentage.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws cloudformation create-stack-instances --stack-set-name my-awsconfig-stackset --accounts &apos;[&quot;<em class="replaceable"><code>account_ID_1</code></em>&quot;,&quot;<em class="replaceable"><code>account_ID_2</code></em>&quot;]&apos; --regions &apos;[&quot;<em class="replaceable"><code>region_1</code></em>&quot;,&quot;<em class="replaceable"><code>region_2</code></em>&quot;]&apos; --operation-preferences FailureToleranceCount=0,MaxConcurrentCount=1</code></pre>
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>Wait until an operation is complete before starting another one. You can
                                 run only one operation at a time.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Verify that the stack instances were created successfully. Run
                              <code class="code">DescribeStackSetOperation</code> with the <code class="code">operation-id</code>
                              that is returned as part of the output of step 4.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws cloudformation describe-stack-set-operation --stack-set-name my-awsconfig-stackset --operation-id <em class="replaceable"><code>operation_ID</code></em></code></pre>
                           </li>
                     </ol>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="stacksets-getting-started.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="stacksets-update.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper"></div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>