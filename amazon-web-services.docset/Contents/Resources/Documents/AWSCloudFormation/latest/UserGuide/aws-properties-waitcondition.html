<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::CloudFormation::WaitCondition - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="aws-template-resource-type-ref.html" title="AWS Resource Types Reference">
      <link rel="prev" href="aws-properties-stack.html" title="AWS::CloudFormation::Stack">
      <link rel="next" href="aws-properties-waitconditionhandle.html" title="AWS::CloudFormation::WaitConditionHandle">
      <meta name="description" content="Adds a wait condition that pauses the AWS CloudFormation stack creation until the condition receives the required number of signals.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-waitcondition.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-reference.html">Template Reference</a> &#xBB; <a href="aws-template-resource-type-ref.html">AWS Resource Types Reference</a> &#xBB; <span class="breadcrumb">AWS::CloudFormation::WaitCondition</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-properties-waitcondition">AWS::CloudFormation::WaitCondition</h1>
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>For Amazon EC2 and Auto Scaling resources, we recommend that you use a CreationPolicy
                           attribute instead of wait conditions.
                           Add a CreationPolicy attribute to those resources, and use the cfn-signal helper script
                           to signal when an instance creation process has completed successfully.
                        </p>
                     </div>
                     <p>You can use a wait condition for situations like the following:</p>
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>To coordinate stack resource creation with configuration actions that are external
                                 to the stack creation
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>To track the status of a configuration process</p>
                              
                           </li>
                        </ul>
                     </div>
                     <p>For these situations, we recommend that you associate a <a href="aws-attribute-creationpolicy.html">CreationPolicy</a>
                        attribute with the wait condition so that you don&apos;t have to use a wait condition handle.
                        For
                        more information and an example, see <a href="using-cfn-waitcondition.html">Creating Wait Conditions in a Template</a>. If you use a CreationPolicy with a wait
                        condition, do not specify any of the wait condition&apos;s properties.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>If you use the <a href="./AmazonVPC/latest/UserGuide/vpc-endpoints.html" target="_blank">VPC endpoint</a>
                           feature, resources in the VPC that respond to wait conditions must have access to
                           AWS CloudFormation-specific Amazon Simple Storage Service (Amazon S3) buckets. Resources
                           must send wait condition responses to
                           a pre-signed Amazon S3 URL. If they can&apos;t send responses to Amazon S3, AWS CloudFormation
                           won&apos;t receive a
                           response and the stack operation fails. For more information, see <a href="cfn-vpce-bucketnames.html">AWS CloudFormation and VPC Endpoints</a>.
                        </p>
                     </div>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-cloudformation-waitcondition-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10d197c17">Properties</a></li>
                           <li><a href="#w2ab2c21c10d197c19">Return Values</a></li>
                           <li><a href="#w2ab2c21c10d197c21">Examples</a></li>
                           <li><a href="#w2ab2c21c10d197c23">See Also</a></li>
                        </ul>
                     </div>
                     <h2 id="aws-resource-cloudformation-waitcondition-syntax">Syntax</h2>
                     
                     
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-cloudformation-waitcondition-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
   &quot;Type&quot; : &quot;AWS::CloudFormation::WaitCondition&quot;,
   &quot;Properties&quot; : {
      &quot;<a href="aws-properties-waitcondition.html#cfn-waitcondition-count">Count</a>&quot; : <em class="replaceable"><code>Integer</code></em>,
      &quot;<a href="aws-properties-waitcondition.html#cfn-waitcondition-handle">Handle</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="aws-properties-waitcondition.html#cfn-waitcondition-timeout">Timeout</a>&quot; : <em class="replaceable"><code>String</code></em>
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-cloudformation-waitcondition-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: &quot;AWS::CloudFormation::WaitCondition&quot;
Properties: 
  <a href="aws-properties-waitcondition.html#cfn-waitcondition-count">Count</a>: <em class="replaceable"><code>Integer</code></em>
  <a href="aws-properties-waitcondition.html#cfn-waitcondition-handle">Handle</a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-properties-waitcondition.html#cfn-waitcondition-timeout">Timeout</a>: <em class="replaceable"><code>String</code></em>
</code></pre>
                        </div>
                     
                     <h2 id="w2ab2c21c10d197c17">Properties</h2>
                     
                     
                     <div class="variablelist">
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-waitcondition-count"></a><span class="term"><code class="literal">Count</code></span></dt>
                           
                           <dd>
                              
                              <p>The number of success signals that AWS CloudFormation must receive before it continues
                                 the stack creation process. When the wait condition receives the requisite
                                 number of success signals, AWS CloudFormation resumes the creation of the stack. If
                                 the
                                 wait condition does not receive the specified number of success signals
                                 before the Timeout period expires, AWS CloudFormation assumes that the wait condition
                                 has
                                 failed and rolls the stack back.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Integer
                              </p>
                              
                              <p><em>Update requires</em>: Updates are not supported.
                              </p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-waitcondition-handle"></a><span class="term"><code class="literal">Handle</code></span></dt>
                           
                           <dd>
                              
                              <p>A reference to the wait condition handle used to signal this wait
                                 condition. Use the <code class="code">Ref</code> intrinsic function to specify an
                                 <a href="aws-properties-waitconditionhandle.html">AWS::CloudFormation::WaitConditionHandle</a> resource.
                              </p>
                              
                              <p>Anytime you add a WaitCondition resource during a stack update, you must
                                 associate the wait condition with a new WaitConditionHandle resource. Do not
                                 reuse an old wait condition handle that has already been defined in the
                                 template. If you reuse a wait condition handle, the wait condition might
                                 evaluate old signals from a previous create or update stack command.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: Updates are not supported.
                              </p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-waitcondition-timeout"></a><span class="term"><code class="literal">Timeout</code></span></dt>
                           
                           <dd>
                              
                              <p>The length of time (in seconds) to wait for the number of signals that the
                                 <code class="code">Count</code> property specifies. <code class="code">Timeout</code> is a
                                 minimum-bound property, meaning the timeout occurs no sooner than the time
                                 you specify, but can occur shortly thereafter. The maximum time that can be
                                 specified for this property is 12 hours (43200 seconds).
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: Updates are not supported.
                              </p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     <h2 id="w2ab2c21c10d197c19">Return Values</h2>
                     
                     
                     <h3 id="w2ab2c21c10d197c19b2">Ref</h3>
                     
                     
                     <p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic
                        function, <code class="code">Ref</code> returns the resource name.
                     </p>
                     
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     
                     
                     <h3 id="w2ab2c21c10d197c19b4">Fn::GetAtt</h3>
                     
                     
                     <p><code class="code">Fn::GetAtt</code> returns a value for a specified attribute of this type.
                        The following are the available attributes and sample return values.
                     </p>
                     
                     <div class="variablelist">
                        
                        
                        <dl>
                           
                           <dt><span class="term"><code class="literal">Data</code></span></dt>
                           
                           <dd>
                              
                              <p><em>Returns</em>: A JSON object that contains the
                                 <code class="code">UniqueId</code> and <code class="code">Data</code>
                                 values from the wait condition signal(s) for the specified wait
                                 condition. For more information about wait condition signals, see <a href="using-cfn-waitcondition.html#using-cfn-waitcondition-signaljson">Wait Condition Signal JSON
                                    Format</a>.
                              </p>
                              
                              <p>Example return value for a wait condition with 2 signals:</p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">
{ &quot;Signal1&quot; : &quot;Step 1 complete.&quot; , &quot;Signal2&quot; : &quot;Step 2 complete.&quot; } </code></pre>
                              </dd>
                           
                        </dl>
                     </div>
                     
                     <p>For more information about using <code class="code">Fn::GetAtt</code>, see <a href="intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                     </p>
                     
                     
                     <h2 id="w2ab2c21c10d197c21">Examples</h2>
                     
                     
                     <h3 id="w2ab2c21c10d197c21b2">WaitCondition that waits for the desired number of instances in a web server
                        group
                     </h3>
                     
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="aws-resource-cloudformation-waitcondition-example.json">JSON</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&quot;WebServerGroup&quot; : {
   &quot;Type&quot; : &quot;AWS::AutoScaling::AutoScalingGroup&quot;,
   &quot;Properties&quot; : {
      &quot;AvailabilityZones&quot; : { &quot;Fn::GetAZs&quot; : &quot;&quot; },
      &quot;LaunchConfigurationName&quot; : { &quot;Ref&quot; : &quot;LaunchConfig&quot; },
      &quot;MinSize&quot; : &quot;1&quot;,
      &quot;MaxSize&quot; : &quot;5&quot;,
      &quot;DesiredCapacity&quot; : { &quot;Ref&quot; : &quot;WebServerCapacity&quot; },
      &quot;LoadBalancerNames&quot; : [ { &quot;Ref&quot; : &quot;ElasticLoadBalancer&quot; } ]
   }
},

&quot;WaitHandle&quot; : {
   &quot;Type&quot; : &quot;AWS::CloudFormation::WaitConditionHandle&quot;
},

&quot;WaitCondition&quot; : {
   &quot;Type&quot; : &quot;AWS::CloudFormation::WaitCondition&quot;,
   &quot;DependsOn&quot; : &quot;WebServerGroup&quot;,
   &quot;Properties&quot; : {
      &quot;Handle&quot;  : { &quot;Ref&quot; : &quot;WaitHandle&quot; },
      &quot;Timeout&quot; : &quot;300&quot;,
      &quot;Count&quot;   : { &quot;Ref&quot; : &quot;WebServerCapacity&quot; }
   }
}        </code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="aws-resource-cloudformation-waitcondition-example.yaml">YAML</h4>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">WebServerGroup: 
  Type: &quot;AWS::AutoScaling::AutoScalingGroup&quot;
  Properties: 
    AvailabilityZones: 
      Fn::GetAZs: &quot;&quot;
    LaunchConfigurationName: 
      Ref: &quot;LaunchConfig&quot;
    MinSize: &quot;1&quot;
    MaxSize: &quot;5&quot;
    DesiredCapacity: 
      Ref: &quot;WebServerCapacity&quot;
    LoadBalancerNames: 
      - 
        Ref: &quot;ElasticLoadBalancer&quot;
WaitHandle: 
  Type: &quot;AWS::CloudFormation::WaitConditionHandle&quot;
WaitCondition: 
  Type: &quot;AWS::CloudFormation::WaitCondition&quot;
  DependsOn: &quot;WebServerGroup&quot;
  Properties: 
    Handle: 
      Ref: &quot;WaitHandle&quot;
    Timeout: &quot;300&quot;
    Count: 
      Ref: &quot;WebServerCapacity&quot;</code></pre>
                        </div>
                     
                     
                     <h2 id="w2ab2c21c10d197c23">See Also</h2>
                     
                     
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="using-cfn-waitcondition.html">Creating Wait Conditions in a Template</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="aws-attribute-dependson.html">DependsOn Attribute</a></p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-properties-stack.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-properties-waitconditionhandle.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-resource-cloudformation-waitcondition-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#w2ab2c21c10d197c17">Properties</a></li>
                        <li class="pagetoc" name="Return Values"><a class="pagetoc" href="#w2ab2c21c10d197c19">Return Values</a></li>
                        <li class="pagetoc" name="Examples"><a class="pagetoc" href="#w2ab2c21c10d197c21">Examples</a></li>
                        <li class="pagetoc" name="See Also"><a class="pagetoc" href="#w2ab2c21c10d197c23">See Also</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>