<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Auto Scaling Template Snippets - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="CHAP_TemplateQuickRef.html" title="Template Snippets">
      <link rel="prev" href="quickref-general.html" title="General Template Snippets">
      <link rel="next" href="quickref-cloudformation.html" title="AWS CloudFormation Template Snippets">
      <meta name="description" content="Use these sample template snippets with your Auto Scaling resources with AWS CloudFormation.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/quickref-autoscaling.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-guide.html">Working with AWS CloudFormation Templates</a> &#xBB; <a href="CHAP_TemplateQuickRef.html">Template Snippets</a> &#xBB; <span class="breadcrumb">Auto Scaling Template Snippets</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="quickref-autoscaling">Auto Scaling Template Snippets</h1>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#scenario-as-launch-config">Auto Scaling Launch Configuration Resource</a></li>
                           <li><a href="#scenario-as-group">Auto Scaling Group Resource</a></li>
                           <li><a href="#scenario-as-policy">Auto Scaling Policy Triggered by CloudWatch Alarm</a></li>
                           <li><a href="#scenario-as-notification">Auto Scaling Group with Notifications</a></li>
                           <li><a href="#w2ab2c17c24c15c13">Auto Scaling with an UpdatePolicy</a></li>
                        </ul>
                     </div>
                     <h2 id="scenario-as-launch-config">Auto Scaling Launch Configuration Resource</h2>
                     
                     
                     <p>This example shows an Auto Scaling AWS::AutoScaling::LaunchConfiguration resource.
                        The SecurityGroups property
                        specifies both an AWS::EC2::SecurityGroup resource named myEC2SecurityGroup and an
                        existing EC2 security
                        group named myExistingEC2SecurityGroup. The BlockDeviceMappings property lists two
                        devices: a 50 gigabyte
                        EBS volume mapped to /dev/sdk and a virtual device ephemeral0 mapped to /dev/sdc.
                        
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-1.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">
&quot;SimpleConfig&quot; : {
   &quot;Type&quot; : &quot;AWS::AutoScaling::LaunchConfiguration&quot;,
   &quot;Properties&quot; : {
      &quot;ImageId&quot; : &quot;ami-6411e20d&quot;,
      &quot;SecurityGroups&quot; : [ { &quot;Ref&quot; : &quot;myEC2SecurityGroup&quot; }, &quot;myExistingEC2SecurityGroup&quot; ],
      &quot;InstanceType&quot; : &quot;m1.small&quot;,
      &quot;BlockDeviceMappings&quot; : [ {
            &quot;DeviceName&quot; : &quot;/dev/sdk&quot;,
            &quot;Ebs&quot; : {&quot;VolumeSize&quot; : &quot;50&quot;}
         }, {
            &quot;DeviceName&quot; : &quot;/dev/sdc&quot;,
            &quot;VirtualName&quot; : &quot;ephemeral0&quot;
      } ]
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-1.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">SimpleConfig:
  Type: AWS::AutoScaling::LaunchConfiguration
  Properties:
    ImageId: ami-6411e20d
    SecurityGroups:
    - Ref: myEC2SecurityGroup
    - myExistingEC2SecurityGroup
    InstanceType: m1.small
    BlockDeviceMappings:
    - DeviceName: &quot;/dev/sdk&quot;
      Ebs:
        VolumeSize: &apos;50&apos;
    - DeviceName: &quot;/dev/sdc&quot;
      VirtualName: ephemeral0</code></pre>
                        </div>
                     
                     <h2 id="scenario-as-group">Auto Scaling Group Resource</h2>
                     
                     
                     <p>This example shows an Auto Scaling <a href="aws-properties-as-group.html">AWS::AutoScaling::AutoScalingGroup</a> resource. The AvailabilityZones property specifies the
                        availability zones where the auto-scaling group&apos;s EC2 instances will be created. In
                        this example, the <a href="intrinsic-function-reference-getavailabilityzones.html">Fn::GetAZs</a> function call <code class="code">{
                           &quot;Fn::GetAZs&quot; : &quot;&quot; }</code> specifies all availability zones for the region in which the stack is created.
                        The LoadBalancerNames property lists the LoadBalancers used to route traffic to the
                        Auto Scaling group. In
                        this example, one LoadBalancer is specified, the <a href="aws-properties-ec2-elb.html">AWS::ElasticLoadBalancing::LoadBalancer</a> resource LB.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-2.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">
&quot;MyServerGroup&quot; : {
   &quot;Type&quot; : &quot;AWS::AutoScaling::AutoScalingGroup&quot;,
   &quot;Properties&quot; : {
      &quot;AvailabilityZones&quot; : { &quot;Fn::GetAZs&quot; : &quot;&quot;},
      &quot;LaunchConfigurationName&quot; : { &quot;Ref&quot; : &quot;SimpleConfig&quot; },
      &quot;MinSize&quot; : &quot;1&quot;,
      &quot;MaxSize&quot; : &quot;3&quot;,
      &quot;LoadBalancerNames&quot; : [ { &quot;Ref&quot; : &quot;LB&quot; } ]
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-2.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">MyServerGroup:
  Type: AWS::AutoScaling::AutoScalingGroup
  Properties:
    AvailabilityZones:
      Fn::GetAZs: &apos;&apos;
    LaunchConfigurationName:
      Ref: SimpleConfig
    MinSize: &apos;1&apos;
    MaxSize: &apos;3&apos;
    LoadBalancerNames:
    - Ref: LB</code></pre>
                        </div>
                     
                     <h2 id="scenario-as-policy">Auto Scaling Policy Triggered by CloudWatch Alarm</h2>
                     
                     
                     <p>This example shows an <a href="aws-properties-as-policy.html">AWS::AutoScaling::ScalingPolicy</a>
                        resource that scales up the Auto Scaling group asGroup. The <code class="code">AdjustmentType</code> property specifies
                        ChangeInCapacity, which means that the <code class="code">ScalingAdjustment</code> represents the number of
                        instances to add (if <code class="code">ScalingAdjustment</code> is positive) or delete (if it is negative). In
                        this example, <code class="code">ScalingAdjustment</code> is 1; therefore, the policy increments the number of
                        EC2 instances in the group by 1 when the policy is executed.
                     </p>
                     
                     <p>The <a href="aws-properties-cw-alarm.html">AWS::CloudWatch::Alarm</a> resource CPUAlarmHigh specifies
                        the scaling policy ScaleUpPolicy as the action to execute when the alarm is in an
                        <code class="code">ALARM</code> state (<code class="code">AlarmActions</code>).
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-3.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">
&quot;ScaleUpPolicy&quot; : {
   &quot;Type&quot; : &quot;AWS::AutoScaling::ScalingPolicy&quot;,
   &quot;Properties&quot; : {
      &quot;AdjustmentType&quot; : &quot;ChangeInCapacity&quot;,
      &quot;AutoScalingGroupName&quot; : { &quot;Ref&quot; : &quot;asGroup&quot; },
      &quot;Cooldown&quot; : &quot;1&quot;,
      &quot;ScalingAdjustment&quot; : &quot;1&quot;
   }
},
&quot;CPUAlarmHigh&quot;: {
   &quot;Type&quot;: &quot;AWS::CloudWatch::Alarm&quot;,
   &quot;Properties&quot;: {
      &quot;EvaluationPeriods&quot;: &quot;1&quot;,
      &quot;Statistic&quot;: &quot;Average&quot;,
      &quot;Threshold&quot;: &quot;10&quot;,
      &quot;AlarmDescription&quot;: &quot;Alarm if CPU too high or metric disappears indicating instance is down&quot;,
      &quot;Period&quot;: &quot;60&quot;,
      &quot;AlarmActions&quot;: [ { &quot;Ref&quot;: &quot;ScaleUpPolicy&quot; } ],
      &quot;Namespace&quot;: &quot;AWS/EC2&quot;,
      &quot;Dimensions&quot;: [ {
         &quot;Name&quot;: &quot;AutoScalingGroupName&quot;,
         &quot;Value&quot;: { &quot;Ref&quot;: &quot;asGroup&quot; }
      } ],
      &quot;ComparisonOperator&quot;: &quot;GreaterThanThreshold&quot;,
      &quot;MetricName&quot;: &quot;CPUUtilization&quot;
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-3.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">ScaleUpPolicy:
  Type: AWS::AutoScaling::ScalingPolicy
  Properties:
    AdjustmentType: ChangeInCapacity
    AutoScalingGroupName:
      Ref: asGroup
    Cooldown: &apos;1&apos;
    ScalingAdjustment: &apos;1&apos;
CPUAlarmHigh:
  Type: AWS::CloudWatch::Alarm
  Properties:
    EvaluationPeriods: &apos;1&apos;
    Statistic: Average
    Threshold: &apos;10&apos;
    AlarmDescription: Alarm if CPU too high or metric disappears indicating instance
      is down
    Period: &apos;60&apos;
    AlarmActions:
    - Ref: ScaleUpPolicy
    Namespace: AWS/EC2
    Dimensions:
    - Name: AutoScalingGroupName
      Value:
        Ref: asGroup
    ComparisonOperator: GreaterThanThreshold
    MetricName: CPUUtilization</code></pre>
                        </div>
                     
                     <h2 id="scenario-as-notification">Auto Scaling Group with Notifications</h2>
                     
                     
                     <p>This example shows an <a href="aws-properties-as-group.html">AWS::AutoScaling::AutoScalingGroup</a> resource that sends Amazon SNS notifications when
                        the specified events take place. The <code class="code">NotificationConfigurations</code>
                        property specifies the SNS topic where AWS CloudFormation sends a notification and
                        the events that will
                        cause AWS CloudFormation to send notifications. When the events specified by
                        <code class="code">NotificationTypes</code> occur, AWS CloudFormation will send a notification to the
                        SNS topic specified by <code class="code">TopicARN</code>. In this example, AWS CloudFormation sends a
                        notification to the SNS topic topic1 when the
                        <code class="code">autoscaling:EC2_INSTANCE_LAUNCH</code> and
                        <code class="code">autoscaling:EC2_INSTANCE_LAUNCH_ERROR</code> events occur.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-4.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;MyAsGroupWithNotification&quot; : {
  &quot;Type&quot; : &quot;AWS::AutoScaling::AutoScalingGroup&quot;,
  &quot;Properties&quot; : {
    &quot;AvailabilityZones&quot; : { &quot;Ref&quot; : &quot;azList&quot; },
    &quot;LaunchConfigurationName&quot; : { &quot;Ref&quot; : &quot;myLCOne&quot; },
    &quot;MinSize&quot; : &quot;0&quot;,
    &quot;MaxSize&quot; : &quot;2&quot;,
    &quot;DesiredCapacity&quot; : &quot;1&quot;,
    &quot;NotificationConfigurations&quot; : [
      {
        &quot;TopicARN&quot; : { &quot;Ref&quot; : &quot;topic1&quot; },
        &quot;NotificationTypes&quot; : [
          &quot;autoscaling:EC2_INSTANCE_LAUNCH&quot;,
          &quot;autoscaling:EC2_INSTANCE_LAUNCH_ERROR&quot;,
          &quot;autoscaling:EC2_INSTANCE_TERMINATE&quot;,
          &quot;autoscaling:EC2_INSTANCE_TERMINATE_ERROR&quot;
        ]
      }
    ]
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-4.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">MyAsGroupWithNotification:
  Type: AWS::AutoScaling::AutoScalingGroup
  Properties:
    AvailabilityZones:
      Ref: azList
    LaunchConfigurationName:
      Ref: myLCOne
    MinSize: &apos;0&apos;
    MaxSize: &apos;2&apos;
    DesiredCapacity: &apos;1&apos;
    NotificationConfigurations:
    - TopicARN:
        Ref: topic1
      NotificationTypes:
      - autoscaling:EC2_INSTANCE_LAUNCH
      - autoscaling:EC2_INSTANCE_LAUNCH_ERROR
      - autoscaling:EC2_INSTANCE_TERMINATE
      - autoscaling:EC2_INSTANCE_TERMINATE_ERROR</code></pre>
                        </div>
                     
                     <h2 id="w2ab2c17c24c15c13">Auto Scaling with an UpdatePolicy</h2>
                     
                     
                     <p>This example shows how to use an <a href="aws-attribute-updatepolicy.html">UpdatePolicy</a> with an auto-scaling group.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-5.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">
&quot;ASG1&quot; : {
   &quot;UpdatePolicy&quot; : {
      &quot;AutoScalingRollingUpdate&quot; : {
         &quot;MinInstancesInService&quot; : &quot;1&quot;,
         &quot;MaxBatchSize&quot; : &quot;1&quot;,
         &quot;PauseTime&quot; : &quot;PT12M5S&quot;
      }
   },
   &quot;Type&quot; : &quot;AWS::AutoScaling::AutoScalingGroup&quot;,
   &quot;Properties&quot; : {
      &quot;AvailabilityZones&quot; : { &quot;Fn::GetAZs&quot; : { &quot;Ref&quot; : &quot;AWS::Region&quot; } },
      &quot;LaunchConfigurationName&quot; : { &quot;Ref&quot; : &quot;ASLC&quot; },
      &quot;MaxSize&quot; : &quot;3&quot;,
      &quot;MinSize&quot; : &quot;1&quot;
   }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="quickref-autoscaling-example-5.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">ASG1:
  UpdatePolicy:
    AutoScalingRollingUpdate:
      MinInstancesInService: &apos;1&apos;
      MaxBatchSize: &apos;1&apos;
      PauseTime: PT12M5S
  Type: AWS::AutoScaling::AutoScalingGroup
  Properties:
    AvailabilityZones:
      Fn::GetAZs:
        Ref: AWS::Region
    LaunchConfigurationName:
      Ref: ASLC
    MaxSize: &apos;3&apos;
    MinSize: &apos;1&apos;</code></pre>
                        </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="quickref-general.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="quickref-cloudformation.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Auto Scaling Launch Configuration Resource"><a class="pagetoc" href="#scenario-as-launch-config">Auto Scaling Launch Configuration Resource</a></li>
                        <li class="pagetoc" name="Auto Scaling Group Resource"><a class="pagetoc" href="#scenario-as-group">Auto Scaling Group Resource</a></li>
                        <li class="pagetoc" name="Auto Scaling Policy Triggered by CloudWatch Alarm"><a class="pagetoc" href="#scenario-as-policy">Auto Scaling Policy Triggered by CloudWatch Alarm</a></li>
                        <li class="pagetoc" name="Auto Scaling Group with Notifications"><a class="pagetoc" href="#scenario-as-notification">Auto Scaling Group with Notifications</a></li>
                        <li class="pagetoc" name="Auto Scaling with an UpdatePolicy"><a class="pagetoc" href="#w2ab2c17c24c15c13">Auto Scaling with an UpdatePolicy</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>