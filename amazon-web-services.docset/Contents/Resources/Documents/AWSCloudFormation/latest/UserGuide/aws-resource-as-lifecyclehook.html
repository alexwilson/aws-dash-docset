<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::AutoScaling::LifecycleHook - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="aws-template-resource-type-ref.html" title="AWS Resource Types Reference">
      <link rel="prev" href="aws-properties-as-launchconfig.html" title="AWS::AutoScaling::LaunchConfiguration">
      <link rel="next" href="aws-properties-as-policy.html" title="AWS::AutoScaling::ScalingPolicy">
      <meta name="description" content="Use lifecycle hook actions to control the state of an instance in an Auto Scaling group after it is launched or terminated.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-as-lifecyclehook.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-reference.html">Template Reference</a> &#xBB; <a href="aws-template-resource-type-ref.html">AWS Resource Types Reference</a> &#xBB; <span class="breadcrumb">AWS::AutoScaling::LifecycleHook</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-resource-as-lifecyclehook">AWS::AutoScaling::LifecycleHook</h1>
                     <p>Use <code class="code">AWS::AutoScaling::LifecycleHook</code> to control the state of an instance in an Auto Scaling group after it is launched
                        or terminated. When you use a lifecycle hook, the Auto Scaling group either pauses
                        the instance after it is launched (before it is put into service) or pauses the instance
                        as it is terminated (before it is fully terminated). For more information, see <a href="./autoscaling/latest/userguide/lifecycle-hooks.html" target="_blank">Examples of How to Use Lifecycle Hooks</a> in the
                        <em>Amazon EC2 Auto Scaling User Guide</em>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#aws-resource-autoscaling-lifecyclehook-syntax">Syntax</a></li>
                           <li><a href="#w2ab2c21c10d139b9">Properties</a></li>
                           <li><a href="#w2ab2c21c10d139c11">Return Value</a></li>
                           <li><a href="#w2ab2c21c10d139c13">Example</a></li>
                           <li><a href="#aws-resource-autoscaling-lifecyclehook-seealso">See Also</a></li>
                        </ul>
                     </div>
                     <h2 id="aws-resource-autoscaling-lifecyclehook-syntax">Syntax</h2>
                     
                     
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-autoscaling-lifecyclehook-syntax.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Type&quot; : &quot;AWS::AutoScaling::LifecycleHook&quot;,
  &quot;Properties&quot; : {
    &quot;<a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-autoscalinggroupname"><code class="code">AutoScalingGroupName</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-defaultresult"><code class="code">DefaultResult</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-heartbeattimeout"><code class="code">HeartbeatTimeout</code></a>&quot; : <em class="replaceable"><code>Integer</code></em>,
    &quot;<a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-lifecyclehookname"><code class="code">LifecycleHookName</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-lifecycletransition"><code class="code">LifecycleTransition</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-notificationmetadata"><code class="code">NotificationMetadata</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-notificationtargetarn"><code class="code">NotificationTargetARN</code></a>&quot; : <em class="replaceable"><code>String</code></em>,
    &quot;<a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-rolearn"><code class="code">RoleARN</code></a>&quot; : <em class="replaceable"><code>String</code></em>
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-autoscaling-lifecyclehook-syntax.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Type: &quot;AWS::AutoScaling::LifecycleHook&quot;
Properties:
  <a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-autoscalinggroupname"><code class="code">AutoScalingGroupName</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-defaultresult"><code class="code">DefaultResult</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-heartbeattimeout"><code class="code">HeartbeatTimeout</code></a>: <em class="replaceable"><code>Integer</code></em>
  <a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-lifecyclehookname"><code class="code">LifecycleHookName</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-lifecycletransition"><code class="code">LifecycleTransition</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-notificationmetadata"><code class="code">NotificationMetadata</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-notificationtargetarn"><code class="code">NotificationTargetARN</code></a>: <em class="replaceable"><code>String</code></em>
  <a href="aws-resource-as-lifecyclehook.html#cfn-as-lifecyclehook-rolearn"><code class="code">RoleARN</code></a>: <em class="replaceable"><code>String</code></em>
</code></pre>
                        </div>
                     
                     <h2 id="w2ab2c21c10d139b9">Properties</h2>
                     
                     
                     <p>For information about valid and default values, see <a href="./autoscaling/ec2/APIReference/API_LifecycleHook.html" target="_blank">LifecycleHook</a> in the
                        <em>Amazon EC2 Auto Scaling API Reference</em>.
                     </p>
                     
                     <div class="variablelist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><a id="cfn-as-lifecyclehook-autoscalinggroupname"></a><span class="term"><code class="code">AutoScalingGroupName</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of the Auto Scaling group for the lifecycle hook.</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-as-lifecyclehook-defaultresult"></a><span class="term"><code class="code">DefaultResult</code></span></dt>
                           
                           <dd>
                              
                              <p>The action the Auto Scaling group takes when the lifecycle hook timeout elapses or
                                 if
                                 an unexpected failure occurs. Valid values are <code class="code">CONTINUE</code> (default) and <code class="code">ABANDON</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-as-lifecyclehook-heartbeattimeout"></a><span class="term"><code class="code">HeartbeatTimeout</code></span></dt>
                           
                           <dd>
                              
                              <p>The amount of time that can elapse before the lifecycle hook times out. When
                                 the lifecycle hook times out, Auto Scaling performs the action that you specified
                                 in the
                                 DefaultResult property.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: Integer
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-as-lifecyclehook-lifecyclehookname"></a><span class="term"><code class="code">LifecycleHookName</code></span></dt>
                           
                           <dd>
                              
                              <p>The name of the lifecycle hook. Length Constraints: Minimum length of 1. Maximum length
                                 of 255.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-as-lifecyclehook-lifecycletransition"></a><span class="term"><code class="code">LifecycleTransition</code></span></dt>
                           
                           <dd>
                              
                              <p>The state of the Amazon EC2 instance to which you want to attach the lifecycle hook.
                                 For valid values, see the <code class="code">LifecycleTransition</code> content for the <a href="./autoscaling/ec2/APIReference/API_LifecycleHook.html" target="_blank">LifecycleHook</a> data type in the
                                 <em>Amazon EC2 Auto Scaling API Reference</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-as-lifecyclehook-notificationmetadata"></a><span class="term"><code class="code">NotificationMetadata</code></span></dt>
                           
                           <dd>
                              
                              <p>Additional information that you want to include when Auto Scaling sends a message
                                 to
                                 the notification target.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-as-lifecyclehook-notificationtargetarn"></a><span class="term"><code class="code">NotificationTargetARN</code></span></dt>
                           
                           <dd>
                              
                              <p>The Amazon resource name (ARN) of the notification target that Auto Scaling uses to
                                 notify you when an instance is in the transition state for the lifecycle hook. You
                                 can specify an Amazon SQS queue or an Amazon SNS topic. The notification message includes
                                 the following information: lifecycle action token, user account ID, Auto Scaling group
                                 name, lifecycle hook name, instance ID, lifecycle transition, and notification
                                 metadata.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                           
                           <dt><a id="cfn-as-lifecyclehook-rolearn"></a><span class="term"><code class="code">RoleARN</code></span></dt>
                           
                           <dd>
                              
                              <p>The ARN of the IAM role that allows the Auto Scaling group to publish to the
                                 specified notification target. The role requires permissions to Amazon SNS and
                                 Amazon SQS.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              
                              <p><em>Type</em>: String
                              </p>
                              
                              <p><em>Update requires</em>: <a href="using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     <h2 id="w2ab2c21c10d139c11">Return Value</h2>
                     
                     
                     <p>When the logical ID of this resource is provided to the <code class="code">Ref</code> intrinsic
                        function, <code class="code">Ref</code> returns the resource name. For example:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{ &quot;Ref&quot;: &quot;<em class="replaceable"><code>myLifecycleHook</code></em>&quot; }</code></pre>
                     <p><code class="code">Ref</code> returns the lifecycle hook name, such as
                        <code class="code">mylifecyclehookname</code>.
                     </p>
                     
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     
                     <h2 id="w2ab2c21c10d139c13">Example</h2>
                     
                     
                     <p>In the following template snippet, the Auto Scaling pauses instances before completely
                        terminating them. While in the pending state, you can, for example, connect to the
                        instance
                        and download logs or any other data before the instance is terminated.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-autoscaling-lifecyclehook-example.json">JSON</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;myLifecycleHook&quot;: {
  &quot;Type&quot;: &quot;AWS::AutoScaling::LifecycleHook&quot;,
  &quot;Properties&quot;: {
    &quot;AutoScalingGroupName&quot;: { &quot;Ref&quot;: &quot;myAutoScalingGroup&quot; },
    &quot;LifecycleTransition&quot;: &quot;autoscaling:EC2_INSTANCE_TERMINATING&quot;,
    &quot;NotificationTargetARN&quot;: { &quot;Ref&quot;: &quot;lifecycleHookTopic&quot; },
    &quot;RoleARN&quot;: { &quot;Fn::GetAtt&quot;: [ &quot;lifecycleHookRole&quot;, &quot;Arn&quot; ] }
  }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-autoscaling-lifecyclehook-example.yaml">YAML</h3>
                        
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">myLifecycleHook: 
  Type: &quot;AWS::AutoScaling::LifecycleHook&quot;
  Properties: 
    AutoScalingGroupName: 
      Ref: myAutoScalingGroup
    LifecycleTransition: &quot;autoscaling:EC2_INSTANCE_TERMINATING&quot;
    NotificationTargetARN: 
      Ref: lifecycleHookTopic
    RoleARN: 
      Fn::GetAtt: 
        - lifecycleHookRole
        - Arn</code></pre>
                        </div>
                     
                     <h2 id="aws-resource-autoscaling-lifecyclehook-seealso">See Also</h2>
                     
                     
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>
                                 <a href="./autoscaling/ec2/APIReference/API_LifecycleHook.html" target="_blank">LifecycleHook</a> in the
                                 <em>Amazon EC2 Auto Scaling API Reference</em> (for valid values and default values) 
                                 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>
                                 <a href="./autoscaling/latest/userguide/lifecycle-hooks.html" target="_blank">Examples of How to Use Lifecycle Hooks</a> in the
                                 <em>Amazon EC2 Auto Scaling User Guide</em>
                                 
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-properties-as-launchconfig.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-properties-as-policy.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-resource-autoscaling-lifecyclehook-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#w2ab2c21c10d139b9">Properties</a></li>
                        <li class="pagetoc" name="Return Value"><a class="pagetoc" href="#w2ab2c21c10d139c11">Return Value</a></li>
                        <li class="pagetoc" name="Example"><a class="pagetoc" href="#w2ab2c21c10d139c13">Example</a></li>
                        <li class="pagetoc" name="See Also"><a class="pagetoc" href="#aws-resource-autoscaling-lifecyclehook-seealso">See Also</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>