<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Troubleshooting
         AWS CloudFormation - AWS CloudFormation
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="Welcome.html" title="What is AWS CloudFormation?">
      <link rel="prev" href="sample-templates-services-us-west-2.html" title="Services">
      <link rel="next" href="ReleaseHistory.html" title="Release History">
      <meta name="description" content="Troubleshoot issues that might occur when you create, update, or delete an AWS CloudFormation stack.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <span class="breadcrumb">Troubleshooting
                                    AWS CloudFormation</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="troubleshooting">Troubleshooting
                        AWS CloudFormation
                     </h1>
                     <p>When you use AWS CloudFormation, you might encounter issues when you create, update,
                        or delete AWS CloudFormation
                        stacks. The following sections can help you troubleshoot some common issues that you
                        might
                        encounter.
                     </p>
                     <p>For general questions about AWS CloudFormation, see the <a href="https://aws.amazon.com/cloudformation/faqs/" target="_blank">AWS CloudFormation FAQs</a>. You can also
                        search for answers and post questions in the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=92" target="_blank">AWS CloudFormation
                           forums</a>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#basic-ts-guide">Troubleshooting Guide</a></li>
                           <li><a href="#troubleshooting-errors">Troubleshooting Errors</a></li>
                           <li><a href="#contacting-support">Contacting Support</a></li>
                        </ul>
                     </div>
                     <h2 id="basic-ts-guide">Troubleshooting Guide</h2>
                     
                     
                     <p>If AWS CloudFormation fails to create, update, or delete your stack, you can view
                        error messages or logs
                        to help you learn more about the issue. The following tasks describe general methods
                        for
                        troubleshooting a AWS CloudFormation issue. For information about specific errors
                        and solutions, see the <a href="troubleshooting.html#troubleshooting-errors">Troubleshooting Errors</a> section.
                     </p>
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Use the <a href="https://console.aws.amazon.com/cloudformation/" target="_blank">AWS CloudFormation
                                    console</a> to view the status of your stack. In the console, you can view a list of
                                 stack events while your stack is being created, updated, or deleted. From this list,
                                 find the
                                 failure event and then view the status reason for that event. The status reason might
                                 contain
                                 an error message from AWS CloudFormation or from a particular service that can help
                                 you troubleshoot your
                                 problem. For more information about viewing stack events, see <a href="cfn-console-view-stack-data-resources.html">Viewing Stack Data and Resources</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>For Amazon EC2 issues, view the cloud-init and cfn logs. These logs are published
                                 on the Amazon EC2
                                 instance in the <code>/var/log/</code> directory. These logs capture processes and
                                 command outputs while AWS CloudFormation is setting up your instance. For Windows,
                                 view the EC2Configure
                                 service and cfn logs in <code>%ProgramFiles%\Amazon\EC2ConfigService</code> and
                                 <code>C:\cfn\log</code>.
                              </p>
                              
                              <p>You can also configure your AWS CloudFormation template so that the logs are published
                                 to Amazon CloudWatch,
                                 which displays logs in the AWS Management Console so you don&apos;t have to connect to
                                 your Amazon EC2 instance. For
                                 more information, see <a href="https://aws.amazon.com/blogs/devops/view-cloudformation-logs-in-the-console/" target="_blank">View CloudFormation Logs in the Console</a> in the Application Management Blog.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <h2 id="troubleshooting-errors">Troubleshooting Errors</h2>
                     
                     
                     <p>When you come across the following errors with your AWS CloudFormation stack, you
                        can use the
                        following solutions to help you find the source of the problems and fix them.
                     </p>
                     
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#troubleshooting-errors-delete-stack-fails">Delete Stack Fails</a></li>
                           <li><a href="#troubleshooting-errors-dependency-error">Dependency Error</a></li>
                           <li><a href="#troubleshooting-errors-error-parsing-parameter-when-passing-a-list">Error Parsing Parameter When Passing a List</a></li>
                           <li><a href="#troubleshooting-errors-insufficient-iam-permissions">Insufficient IAM Permissions</a></li>
                           <li><a href="#troubleshooting-errors-invalid-value-or-unsupported-resource-property">Invalid Value or Unsupported Resource Property</a></li>
                           <li><a href="#troubleshooting-errors-limit-exceeded">Limit Exceeded</a></li>
                           <li><a href="#troubleshooting-errors-nested-stacks-are-stuck">Nested Stacks are Stuck in UPDATE_COMPLETE_CLEANUP_IN_PROGRESS,
                                 UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS, or
                                 UPDATE_ROLLBACK_IN_PROGRESS</a></li>
                           <li><a href="#troubleshooting-errors-no-updates-to-perform">No Updates to Perform</a></li>
                           <li><a href="#troubleshooting-resource-did-not-stabilize">Resource Failed to Stabilize During a Create, Update, or Delete Stack
                                 Operation</a></li>
                           <li><a href="#troubleshooting-errors-security-group-does-not-exist-in-vpc">Security Group Does Not Exist in VPC</a></li>
                           <li><a href="#troubleshooting-errors-update-rollback-failed"> Update Rollback Failed</a></li>
                           <li><a href="#troubleshooting-errors-wait-condition-didnt-receive-the-required-number-of-signals">Wait Condition Didn&apos;t Receive the Required Number of Signals from an Amazon EC2
                                 Instance</a></li>
                        </ul>
                     </div>
                     
                     <h3 id="troubleshooting-errors-delete-stack-fails">Delete Stack Fails</h3>
                     
                     
                     <p>To resolve this situation, try the following:</p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Some resources must be empty before they can be deleted. For example,
                                 you must delete all objects in an Amazon S3 bucket or remove all instances in
                                 an Amazon EC2 security group before you can delete the bucket or security
                                 group.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Ensure that you have the necessary IAM permissions to delete the
                                 resources in the stack. In addition to AWS CloudFormation permissions, you must be
                                 allowed to use the underlying services, such as Amazon S3 or Amazon EC2.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>When stacks are in the <code class="code">DELETE_FAILED</code> state because AWS CloudFormation couldn&apos;t delete a resource, rerun the deletion with
                                 the <a href="./AWSCloudFormation/latest/APIReference/API_DeleteStack.html" target="_blank"><code class="code">RetainResources</code></a> parameter and specify the resource that AWS CloudFormation can&apos;t delete. AWS CloudFormation
                                 deletes the stack without deleting the retained resource. Retaining resources is useful
                                 when you can&apos;t delete a resource, such as an S3 bucket that contains objects that
                                 you want to keep, but
                                 you still want to delete the stack.
                              </p>
                              
                              <p>After you delete the stack, you can manually delete retained resources by using their
                                 associated AWS service.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>You cannot delete stacks that have termination protection enabled. If you attempt
                                 to delete a stack with termination protection enabled, the deletion fails and the
                                 stack--including its status--remains unchanged. Disable termination protection on
                                 the stack, then perform the delete operation again. 
                              </p>
                              
                              <p>This includes <a href="using-cfn-nested-stacks.html">nested stacks</a> whose root stacks have termination protection enabled. Disable termination protection
                                 on the root stack, then perform the delete operation again. It is strongly recommended
                                 that you do not delete nested stacks directly, but only delete them as part of deleting
                                 the root stack and all its resources.
                              </p>
                              
                              <p>For more information, see <a href="using-cfn-protect-stacks.html">Protecting a Stack From Being Deleted</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>For all other issues, if you have AWS Premium Support, you can create
                                 a Technical Support case. See <a href="troubleshooting.html#contacting-support">Contacting Support</a>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <h3 id="troubleshooting-errors-dependency-error">Dependency Error</h3>
                     
                     
                     <p>To resolve a dependency error, add a <code class="code">DependsOn</code> attribute to resources
                        that depend on other resources in your template. In some cases, you must explicitly
                        declare dependencies so that AWS CloudFormation can create or delete resources in
                        the correct
                        order. For example, if you create an Elastic IP and a VPC with an Internet gateway
                        in the same stack, the Elastic IP must depend on the Internet gateway attachment.
                        For additional information, see <a href="aws-attribute-dependson.html">DependsOn Attribute</a>.
                     </p>
                     
                     
                     <h3 id="troubleshooting-errors-error-parsing-parameter-when-passing-a-list">Error Parsing Parameter When Passing a List</h3>
                     
                     
                     <p>When you use the AWS Command Line Interface or AWS CloudFormation to pass in a list,
                        add the escape character
                        (<code class="code">\</code>) before each comma. The following sample shows how you specify
                        an input parameter when using the
                        CLI.
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">ParameterKey=CIDR,ParameterValue=&apos;10.10.0.0/16\,10.10.0.0/24\,10.10.1.0/24&apos;</code></pre>
                     
                     <h3 id="troubleshooting-errors-insufficient-iam-permissions">Insufficient IAM Permissions</h3>
                     
                     
                     <p>When you work with an AWS CloudFormation stack, you not only need permissions to use
                        AWS CloudFormation, you
                        must also have permission to use the underlying services that are described in your
                        template. For example, if you&apos;re creating an Amazon S3 bucket or starting an Amazon
                        EC2
                        instance, you need permissions to Amazon S3 or Amazon EC2. Review your IAM policy
                        and verify
                        that you have the necessary permissions before you work with AWS CloudFormation stacks.
                        For more
                        information see, <a href="using-iam-template.html">Controlling Access with AWS Identity and Access Management</a>.
                     </p>
                     
                     
                     <h3 id="troubleshooting-errors-invalid-value-or-unsupported-resource-property">Invalid Value or Unsupported Resource Property</h3>
                     
                     
                     <p>When you create or update an AWS CloudFormation stack, your stack can fail due to
                        invalid input
                        parameters, unsupported resource property names, or unsupported resource property
                        values. For input parameters, verify that the resource exists. For example, when you
                        specify an Amazon EC2 key pair or VPC ID, the resource must exist in your account
                        and in
                        the region in which you are creating or updating your stack. You can use
                        AWS-specific <a href="parameters-section-structure.html#parameters-section-structure-syntax">parameter
                           types</a> to ensure that you use valid values.
                     </p>
                     
                     <p>For resource property names and values, update your template to use valid names
                        and values. For a list of all the resources and their property names, see <a href="aws-template-resource-type-ref.html">AWS Resource Types Reference</a>.
                     </p>
                     
                     
                     <h3 id="troubleshooting-errors-limit-exceeded">Limit Exceeded</h3>
                     
                     
                     <p>Verify that you didn&apos;t reach a resource limit. For example, the default number
                        Amazon EC2 instances that you can launch is 20. If try to create more Amazon EC2 instances
                        than your account limit, the instance creation fails and you receive the error
                        <code class="code">Status=start_failed</code>. To view the default AWS limits by service, see
                        <a href="./general/latest/gr/aws_service_limits.html" target="_blank">AWS Service Limits</a> in
                        the <em>AWS General Reference</em>.
                     </p>
                     
                     <p>For AWS CloudFormation limits and tweaking strategies, see <a href="cloudformation-limits.html">AWS CloudFormation Limits</a>.
                     </p>
                     
                     <p>Also, during an update, if a resource is replaced, AWS CloudFormation creates new
                        resource
                        before it deletes the old one. This replacement might put your account over the
                        resource limit, which would cause your update to fail. You can delete excess
                        resources or request a <a href="./general/latest/gr/aws_service_limits.html" target="_blank">limit
                           increase</a>.
                     </p>
                     
                     
                     <h3 id="troubleshooting-errors-nested-stacks-are-stuck">Nested Stacks are Stuck in <code class="code">UPDATE_COMPLETE_CLEANUP_IN_PROGRESS</code>,
                        <code class="code">UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS</code>, or
                        <code class="code">UPDATE_ROLLBACK_IN_PROGRESS</code></h3>
                     
                     
                     <p>A nested stack failed to roll back. Because of potential resource dependencies
                        between nested stacks, AWS CloudFormation doesn&apos;t start cleaning up nested stack resources
                        until
                        all nested stacks have been updated or have rolled back. When a nested stack fails
                        to roll back, AWS CloudFormation cancels all operations, regardless of the state that
                        the other
                        nested stacks are in. A nested stack that completed updating or rolling back but did
                        not receive a signal from AWS CloudFormation to start cleaning up because another
                        nested failed
                        to roll back is in an <code class="code">UPDATE_COMPLETE_CLEANUP_IN_PROGRESS</code> or
                        <code class="code">UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS</code> state. A nested stack
                        that failed to update but did not receive a signal to start rolling back is in an
                        <code class="code">UPDATE_ROLLBACK_IN_PROGRESS</code> state.
                     </p>
                     
                     <p>A nested stack might fail to roll back because of changes that were made outside
                        of AWS CloudFormation, when the stack template doesn&apos;t accurately reflect the state
                        of the stack.
                        A nested stack might also fail if an Auto Scaling group in a nested stack had an
                        insufficient resource signal timeout period when the group was created or
                        updated.
                     </p>
                     
                     <p>To fix the stack, contact <a href="troubleshooting.html#contacting-support">AWS customer
                           support</a>.
                     </p>
                     
                     
                     <h3 id="troubleshooting-errors-no-updates-to-perform">No Updates to Perform</h3>
                     
                     
                     <p>To update an AWS CloudFormation stack, you must submit template or parameter value
                        changes to
                        AWS CloudFormation. However, AWS CloudFormation won&apos;t recognize some template changes
                        as an update, such as
                        changes to a deletion policy, update policy, condition declaration, or output
                        declaration. If you need to make such changes without making any other change, you
                        can add or modify a <a href="aws-attribute-metadata.html">metadata</a> attribute
                        for any of your resources.
                     </p>
                     
                     <p>For more information about modifying templates during an update, see <a href="using-cfn-updating-stacks-get-template.html">Modifying a Stack Template</a>.
                     </p>
                     
                     
                     <h3 id="troubleshooting-resource-did-not-stabilize">Resource Failed to Stabilize During a Create, Update, or Delete Stack
                        Operation
                     </h3>
                     
                     
                     
                     <p>A resource did not respond because the operation exceeded the AWS CloudFormation timeout
                        period
                        or an AWS service was interrupted. For service interruptions, <a href="http://status.aws.amazon.com/" target="_blank">check</a> that the relevant AWS service is
                        running, and then retry the stack operation.
                     </p>
                     
                     <p>If the AWS services have been running successfully, check if your stack contains
                        one of the following resources:
                     </p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><code class="code">AWS::AutoScaling::AutoScalingGroup</code> for create, update,
                                 and delete operations
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">AWS::CertificateManager::Certificate</code> for create
                                 operations
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">AWS::CloudFormation::Stack</code> for create, update, and delete
                                 operations
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">AWS::ElasticSearch::Domain</code> for update operations
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">AWS::RDS::DBCluster</code> for create and update
                                 operations
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">AWS::RDS::DBInstance</code> for create, update, and delete
                                 operations
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">AWS::Redshift::Cluster</code> for update operations
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <p>Operations for these resources might take longer than the default timeout period.
                        The timeout period depends on the resource and credentials that you use. To
                        extend the timeout period, specify a <a href="using-iam-servicerole.html">service
                           role</a> when you perform the stack operation. If you&apos;re already using a
                        service role, or if your stack contains a resource that isn&apos;t listed, contact <a href="troubleshooting.html#contacting-support">AWS customer support</a>.
                     </p>
                     
                     <p>If your stack is in the <code class="code">UPDATE_ROLLBACK_FAILED</code> state, see <a href="troubleshooting.html#troubleshooting-errors-update-rollback-failed">Update Rollback
                           Failed</a>.
                     </p>
                     
                     
                     
                     <h3 id="troubleshooting-errors-security-group-does-not-exist-in-vpc">Security Group Does Not Exist in VPC</h3>
                     
                     
                     <p>Verify that the security group exists in the VPC that you specified. If the security
                        group exists, ensure that you specify the security group ID and not the security group
                        name. For example, the <code class="code">AWS::EC2::SecurityGroupIngress</code> resource has a <code class="code">SourceSecurityGroupName</code> and <code class="code">SourceSecurityGroupId</code> properties. For VPC security groups, you must use the <code class="code">SourceSecurityGroupId</code> property and specify the security group ID.
                     </p>
                     
                     
                     <h3 id="troubleshooting-errors-update-rollback-failed"> Update Rollback Failed</h3>
                     
                     
                     <p>A dependent resource cannot return to its original state, causing the rollback to
                        fail (<code class="code">UPDATE_ROLLBACK_FAILED</code> state). For example, you might have a
                        stack that is rolling back to an old database instance that was deleted outside of
                        AWS CloudFormation. Because AWS CloudFormation doesn&apos;t know the database was deleted,
                        it assumes that the
                        database instance still exists and attempts to roll back to it, causing the update
                        rollback to fail.
                     </p>
                     
                     <p>Depending on the cause of the failure, you can manually fix the error and continue
                        the rollback. By continuing the rollback, you can return your stack to a working
                        state (the <code class="code">UPDATE_ROLLBACK_COMPLETE</code> state), and then try to update the
                        stack again. The following list describes solutions to common errors that cause
                        update rollback failures:
                     </p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <div class="variablelist">
                                 
                                 
                                 <dl>
                                    
                                    <dt><span class="term">Failed to receive the required number of signals</span></dt>
                                    
                                    <dd>
                                       
                                       <p>Use the <a href="./cli/latest/reference/cloudformation/signal-resource.html" target="_blank">signal-resource</a> command to manually send the
                                          required number of successful signals to the resource that
                                          is waiting for them, and then continue rolling back the
                                          update. For example, during an update rollback, instances in
                                          an Auto Scaling group might fail to signal success within the
                                          specified timeout duration. Manually send success signals to
                                          the Auto Scaling group. When you continue the update rollback, AWS CloudFormation
                                          sees your signals and proceeds with the rollback.
                                       </p>
                                       
                                    </dd>
                                    
                                 </dl>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <div class="variablelist">
                                 
                                 
                                 <dl>
                                    
                                    <dt><span class="term">Changes to a resource were made outside of AWS CloudFormation</span></dt>
                                    
                                    <dd>
                                       
                                       <p>Manually sync resources so that they match the original
                                          stack&apos;s template, and then continue rolling back the update.
                                          For example, if you manually deleted a resource that AWS CloudFormation
                                          is attempting to roll back to, you must manually create that
                                          resource with the same name and properties it had in the
                                          original stack.
                                       </p>
                                       
                                    </dd>
                                    
                                 </dl>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <div class="variablelist">
                                 
                                 
                                 <dl>
                                    
                                    <dt><span class="term">Insufficient permissions</span></dt>
                                    
                                    <dd>
                                       
                                       <p>Check that you have sufficient IAM permissions to modify
                                          resources, and then continue the update rollback. For
                                          example, your IAM policy might allow you to create an S3
                                          bucket, but not modify the bucket. Add the modify actions to
                                          your policy.
                                       </p>
                                       
                                    </dd>
                                    
                                 </dl>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <div class="variablelist">
                                 
                                 
                                 <dl>
                                    
                                    <dt><span class="term">Invalid security token</span></dt>
                                    
                                    <dd>
                                       
                                       <p>AWS CloudFormation requires a new set of credentials. No change is
                                          required. Continue rolling back the update, which refreshes
                                          the credentials.
                                       </p>
                                       
                                    </dd>
                                    
                                 </dl>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <div class="variablelist">
                                 
                                 
                                 <dl>
                                    
                                    <dt><span class="term">Limitation error</span></dt>
                                    
                                    <dd>
                                       
                                       <p>Delete resources that you don&apos;t need or request a <a href="./general/latest/gr/aws_service_limits.html" target="_blank">limit increase</a>, and
                                          then continue rolling back the update. For example, if your
                                          account limit for the number of EC2 instances is 20 and the
                                          update rollback exceeds that limit, it will fail.
                                       </p>
                                       
                                    </dd>
                                    
                                 </dl>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <div class="variablelist">
                                 
                                 
                                 <dl>
                                    
                                    <dt><span class="term">Resource did not stabilize</span></dt>
                                    
                                    <dd>
                                       
                                       <p>A resource did not respond because the operation might
                                          have exceeded the AWS CloudFormation timeout period or an AWS service
                                          might have been interrupted. No change is required. After
                                          the resource operation is complete or the AWS service is
                                          back in operation, continue rolling back the update.
                                       </p>
                                       
                                    </dd>
                                    
                                 </dl>
                              </div>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>To continue rolling back an update, you can use the AWS CloudFormation console or
                        AWS command
                        line interface (CLI). For more information, see <a href="using-cfn-updating-stacks-continueupdaterollback.html">Continue Rolling Back an
                           Update</a>.
                     </p>
                     
                     <p>If none of these solutions work, you can skip the resources that AWS CloudFormation
                        can&apos;t
                        successfully roll back. For more information, see the <code class="code">ResourcesToSkip</code>
                        parameter for the <a href="./AWSCloudFormation/latest/APIReference/API_ContinueUpdateRollback.html" target="_blank">ContinueUpdateRollback</a> action
                        in the <em>AWS CloudFormation API Reference</em>. AWS CloudFormation sets the status of the
                        specified resources to <code class="code">UPDATE_COMPLETE</code> and continues to roll back the
                        stack. After the rollback is complete, the state of the skipped resources will be
                        inconsistent with the state of the resources in the stack template. Before you
                        perform another stack update, you must modify the resources or update the stack to
                        be consistent with each other. If you don&apos;t, subsequent stack updates might fail and
                        make your stack unrecoverable.
                     </p>
                     
                     
                     <h3 id="troubleshooting-errors-wait-condition-didnt-receive-the-required-number-of-signals">Wait Condition Didn&apos;t Receive the Required Number of Signals from an Amazon EC2
                        Instance
                     </h3>
                     
                     
                     <p>To resolve this situation, try the following:</p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Ensure that the AMI you&apos;re using has the AWS CloudFormation helper scripts
                                 installed. If the AMI doesn&apos;t include the helper scripts, you can also
                                 download them to your instance. For more information, see <a href="cfn-helper-scripts-reference.html">CloudFormation Helper Scripts
                                    Reference</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Verify that the <code class="code">cfn-signal</code> command was successfully run
                                 on the instance. You can view logs, such as
                                 <code>/var/log/cloud-init.log</code> or
                                 <code>/var/log/cfn-init.log</code>, to help you debug the
                                 instance launch. You can retrieve the logs by logging in to your
                                 instance, but you must <a href="cfn-console-add-tags.html">disable
                                    rollback on failure</a> or else AWS CloudFormation deletes the instance after
                                 your stack fails to create. You can also <a href="https://aws.amazon.com/blogs/devops/view-cloudformation-logs-in-the-console/" target="_blank">publish the logs</a> to Amazon CloudWatch. For Windows, you can view cfn
                                 logs in <code>C:\cfn\log</code> and EC2Config service logs in
                                 <code>%ProgramFiles%\Amazon\EC2ConfigService</code>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Verify that the instance has a connection to the Internet. If the
                                 instance is in a VPC, the instance should be able to connect to the
                                 Internet through a NAT device if it&apos;s is in a private subnet or through
                                 an Internet gateway if it&apos;s in a public subnet. To test the instance&apos;s
                                 Internet connection, try to access a public web page, such as
                                 <code class="code">http://aws.amazon.com</code>. For example, you can run the
                                 following command on the instance. It should return an HTTP 200 status
                                 code.
                              </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">curl -I https://aws.amazon.com</code></pre>
                              <p>For information about configuring a NAT device, see <a href="./AmazonVPC/latest/UserGuide/vpc-nat.html" target="_blank">NAT</a> in the
                                 <em>Amazon VPC User Guide</em>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <h2 id="contacting-support">Contacting Support</h2>
                     
                     
                     <p>If you have AWS Premium Support, you can create a technical support case at <a href="https://console.aws.amazon.com/support/home#/" target="_blank">https://console.aws.amazon.com/support/home#/</a>. Before you contact support,
                        gather the following information:
                     </p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>The ID of the stack. You can find the stack ID in the <b>Overview</b> tab
                                 of the <a href="https://console.aws.amazon.com/cloudformation/" target="_blank">AWS CloudFormation console</a>. For
                                 more information, see <a href="cfn-console-view-stack-data-resources.html">Viewing Stack Data and Resources</a>.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>Do not make changes to the stack outside of AWS CloudFormation. Making changes to
                                    your stack outside
                                    of AWS CloudFormation might put your stack in an unrecoverable state.
                                 </p>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Any stack error messages. For information about viewing stack error messages, see
                                 the
                                 <a href="troubleshooting.html#basic-ts-guide">Troubleshooting Guide</a> section.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>For Amazon EC2 issues, gather the cloud-init and cfn logs. These logs are published
                                 on the
                                 Amazon EC2 instance in the <code>/var/log/</code> directory. These logs capture processes
                                 and command outputs while your instance is setting up. For Windows, gather the EC2Configure
                                 service and cfn logs in <code>%ProgramFiles%\Amazon\EC2ConfigService</code> and
                                 <code>C:\cfn\log</code>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>You can also search for answers and post questions in the <a href="https://forums.aws.amazon.com/forum.jspa?forumID=92" target="_blank">AWS CloudFormation forums</a>.
                     </p>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="sample-templates-services-us-west-2.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="ReleaseHistory.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Troubleshooting Guide"><a class="pagetoc" href="#basic-ts-guide">Troubleshooting Guide</a></li>
                        <li class="pagetoc" name="Troubleshooting Errors"><a class="pagetoc" href="#troubleshooting-errors">Troubleshooting Errors</a></li>
                        <li class="pagetoc" name="Contacting Support"><a class="pagetoc" href="#contacting-support">Contacting Support</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>