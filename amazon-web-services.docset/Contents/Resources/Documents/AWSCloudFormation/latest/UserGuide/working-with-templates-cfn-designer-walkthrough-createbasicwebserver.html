<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Walkthrough: Use AWS CloudFormation Designer to Create a Basic Web Server - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="CHAP_Using.html" title="Walkthroughs">
      <link rel="prev" href="CHAP_Using.html" title="Walkthroughs">
      <link rel="next" href="working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html" title="Walkthrough: Use AWS CloudFormation Designer to Modify a Stack&apos;s Template">
      <meta name="description" content="Use AWS CloudFormation Designer to create a basic web server.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudformation">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-guide.html">Working with AWS CloudFormation Templates</a> &#xBB; <a href="CHAP_Using.html">Walkthroughs</a> &#xBB; <span class="breadcrumb">Walkthrough: Use AWS CloudFormation Designer to Create a Basic Web Server</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver">Walkthrough: Use AWS CloudFormation Designer to Create a Basic Web Server</h1>
                     <p>AWS CloudFormation Designer graphically represents your templates to help you see
                        the
                        resources in the template and how they&apos;re connected. The
                        integrated JSON and YAML editor makes it easy to modify templates directly in the
                        AWS CloudFormation console. To demonstrate how to use both of these components, we&apos;ll
                        use
                        AWS CloudFormation Designer to build a basic web server in a VPC. Then, we&apos;ll save
                        the
                        template and use it to create an AWS CloudFormation stack. By the end of the walkthrough,
                        you&apos;ll have a template similar to the following sample: <a href="https://console.aws.amazon.com/cloudformation/designer/home?templateUrl=https://s3.amazonaws.com/cloudformation-examples/sample-ec2-vpc.template&amp;region=us-east-1" target="_blank">https://console.aws.amazon.com/cloudformation/designer/home?templateUrl=https://s3.amazonaws.com/cloudformation-examples/sample-ec2-vpc.template&amp;region=us-east-1</a>.
                     </p>
                     <p>In the walkthrough, you will complete the following steps:</p>
                     <div class="orderedlist">
                        
                        
                        
                        
                        
                        <ol>
                           <li>
                              
                              <p><a href="working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Add and connect resources.</a></p>
                              
                              <p>When you first open AWS CloudFormation Designer, you start with a blank template.
                                 We&apos;ll use AWS CloudFormation Designer to start populating the template by dragging
                                 resources, such as a VPC and an EC2 instance into your template. We&apos;ll
                                 also create links between them. For example, we&apos;ll use AWS CloudFormation Designer
                                 to
                                 create a connection between the Internet gateway and the VPC.
                              </p>
                              
                           </li>
                           <li>
                              
                              <p><a href="working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Add template parameters, mappings, and outputs.</a></p>
                              
                              <p>We&apos;ll use the AWS CloudFormation Designer integrated editor to add other
                                 template components to make the template more useful. For example, we&apos;ll
                                 add parameters to the template so that you can specify input values when
                                 you create a stack. That way you don&apos;t have to constantly edit the
                                 template for property values that you might commonly change.
                              </p>
                              
                           </li>
                           <li>
                              
                              <p><a href="working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Specify resource properties.</a></p>
                              
                              <p>We&apos;ll use the integrated editor again to specify
                                 configuration settings for our resources.
                              </p>
                              
                           </li>
                           <li>
                              
                              <p><a href="working-with-templates-cfn-designer-walkthrough-createbasicwebserver.html#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Provision resources</a></p>
                              
                              <p>None of your template resources are up and running until you create
                                 a stack. We&apos;ll use the template that you just created to launch an AWS CloudFormation
                                 stack, which will provision all the resources that are defined in your
                                 template.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>AWS CloudFormation is a free service; however, you are charged for the
                                    AWS resources you include in your stacks at the current rate for
                                    each. For more information about AWS pricing, see the detail page
                                    for each product on <a href="http://aws.amazon.com" target="_blank">http://aws.amazon.com</a>.
                                 </p>
                              </div>
                              
                           </li>
                        </ol>
                     </div>
                     <p>Prerequisites</p>
                     <p>This walkthrough assumes that you have a working knowledge of Amazon Virtual Private
                        Cloud
                        (Amazon VPC), Amazon Elastic Compute Cloud (Amazon EC2), and AWS CloudFormation. For
                        context, each procedure provides
                        some basic information about each resource.
                     </p>
                     <p>Also, before you begin, make sure you have an Amazon EC2 key pair in the
                        region in which you&apos;re creating your stack. For more information, see <a href="./AWSEC2/latest/UserGuide/ec2-key-pairs.html" target="_blank">Amazon EC2 Key Pairs</a> in the
                        <em>Amazon EC2 User Guide for Linux Instances</em>.
                     </p>
                     <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Step 1: Add and Connect Resources</h2>
                     
                     
                     <p>We&apos;ll use the AWS CloudFormation Designer drag-and-drop interface to add an Amazon
                        EC2
                        instance and network resources, such as a VPC, subnet, route table, and
                        Internet gateway. After adding all the resources, we&apos;ll create connections
                        between them. For example, we&apos;ll associate the Internet gateway with a
                        VPC.
                     </p>
                     
                     <p class="title"><b>To add resources to a template</b></p>
                     <ol>
                        <li>
                           
                           <p>Open AWS CloudFormation Designer at <a href="https://console.aws.amazon.com/cloudformation/designer" target="_blank">https://console.aws.amazon.com/cloudformation/designer</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the integrated editor on the lower half of the page, choose
                              <b>Edit</b> (<span class="inlinemediaobject">
                                 
                                 <img src="../../..//img/designer-edit-icon.png">
                                 
                                 </span>).
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Change the template name to <code class="code">BasicWebServerInVPC</code> and
                              then press <b>Enter</b>.
                           </p>
                           
                           <p>Currently, we have a blank template that isn&apos;t valid. In the next
                              steps, we&apos;ll add resources to make it valid.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Resource types</b>
                              pane, from within the <b>EC2</b> category, drag a <b>VPC</b> resource type onto the <b>Canvas</b> pane.
                           </p>
                           
                           <p>The resources are organized by resource categories. All of the resources we&apos;re adding
                              are in the <b>EC2</b> category.
                           </p>
                           
                           <p>AWS CloudFormation Designer immediately modifies your template to include a VPC resource,
                              with the
                              results looking similar to the following
                              JSON snippet.
                           </p>
                           
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">  &quot;Resources&quot;: {
    &quot;VPC431KO&quot;: {
      &quot;Type&quot;: &quot;AWS::EC2::VPC&quot;,
      &quot;Properties&quot;: {},
      &quot;Metadata&quot;: {
        &quot;AWS::CloudFormation::Designer&quot;: {
          &quot;id&quot;: &quot;445730ea-0d11-45ba-b6ac-12345EXAMPLE&quot;
        }
      }
    }
  }</code></pre>
                           
                           <p>The YAML snippet looks similar to the following.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Resources:
  VPC431KO:
    Type: &apos;AWS::EC2::VPC&apos;
    Properties: {}
    Metadata:
      &apos;AWS::CloudFormation::Designer&apos;:
        id: 9430b008-7a03-41ed-b63e-12345EXAMPLE</code></pre>
                           
                           <p>Note that we still need to specify the VPC properties, such as the
                              VPC&apos;s CIDR block. We&apos;ll do that later. This is true for all resources
                              that we&apos;ll add.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Rename the VPC.</p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>When you rename a resource, you rename its logical ID, which is
                                 the name that is referenced in the template (not the name assigned
                                 when AWS CloudFormation creates the resource). For more information, see <a href="resources-section-structure.html">Resources</a>.
                              </p>
                           </div>
                           
                           <ol>
                              <li>
                                 
                                 <p>Choose the VPC resource.</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>In the integrated editor, choose the
                                    <b>Edit</b> icon (<span class="inlinemediaobject">
                                       
                                       <img src="../../..//img/designer-edit-icon.png">
                                       
                                       </span>).
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Change the name to <code class="code">VPC</code>, and then choose
                                    <b>Enter</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                           <p>Next, we&apos;ll add resources to the VPC.</p>
                           
                        </li>
                        <li>
                           
                           <p>Drag a corner of the VPC resource to expand it so that it&apos;s large
                              enough to fit several more resources.
                           </p>
                           
                           <p>We need to add a subnet because you can&apos;t add an EC2 instance,
                              which hosts the website, directly into the VPC; instances must be
                              located in a subnet.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Add a <b>Subnet</b> resource type inside the VPC and
                              rename it <code class="code">PublicSubnet</code>.
                           </p>
                           
                           <p>We will use the subnet to allocate a range of IP addresses in the
                              VPC that you can associate with other AWS resources, such as an Amazon EC2
                              instance.
                           </p>
                           
                           <p>When you add the subnet inside the VPC, AWS CloudFormation Designer automatically
                              associates the subnet with the VPC. This association is a container
                              model, where resources inside the container are automatically
                              associated with the container resource.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Add an <b>Instance</b> resource type inside the
                              <code class="code">PublicSubnet</code> resource and rename it
                              <code class="code">WebServerInstance</code>.
                           </p>
                           
                           <p>The instance is a virtual computing environment where you&apos;ll host
                              a basic website. Similar to the way this worked with the subnet and
                              VPC, adding the instance in the subnet automatically associates the
                              instance with the subnet.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Add a <b>SecurityGroup</b> resource type inside the
                              VPC and rename it <code class="code">WebServerSecurityGroup</code>.
                           </p>
                           
                           <p>The security group is a virtual firewall that controls the inbound
                              and outbound traffic of the web server instance. It&apos;s also required
                              for instances in a VPC. We&apos;ll need to associate the web server
                              instance with this security group, which we&apos;ll do later when we
                              specify the instance&apos;s properties.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Add an <b>InternetGateway</b> resource type anywhere
                              outside of the VPC and rename it <code class="code">InternetGateway</code>.
                           </p>
                           
                           <p>The Internet gateway enables communication between the instance
                              that is inside the VPC and the Internet. Without the Internet gateway,
                              no one can access your website.
                           </p>
                           
                           <p>Although, you can drag the Internet gateway inside the VPC, this
                              doesn&apos;t create an association with the VPC. The Internet gateway
                              doesn&apos;t follow the container model; instead, you must drag a
                              connection from the Internet gateway to the VPC, as described in the
                              next step.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Create a connection between the <code class="code">InternetGateway</code>
                              resource and the <code class="code">VPC</code> resource.
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>On the <code class="code">InternetGateway</code> resource, hover over the
                                    Internet gateway attachment
                                    (<code class="code">AWS::EC2::VPCGatewayAttachment</code>).
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Drag a connection to the VPC.</p>
                                 
                                 <p>The border of valid target resources changes color. In this
                                    case, the VPC is the only valid target resource. This connection
                                    creates an attachment resource that associates the Internet
                                    gateway with the VPC.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>Next, we need to add a route table and route to specify how to
                              direct network traffic from within a subnet. Add a
                              <b>RouteTable</b> inside the VPC and rename it
                              <code class="code">PublicRouteTable</code>.
                           </p>
                           
                           <p>This associates a new route table with the VPC.</p>
                           
                        </li>
                        <li>
                           
                           <p>To add a routing rule to the route table, add a
                              <b>Route</b> resource type inside the
                              <code class="code">PublicRouteTable</code> resource and rename it
                              <code class="code">PublicRoute</code>.
                           </p>
                           
                           <p>We&apos;ll use the route to specify where to direct traffic.</p>
                           
                        </li>
                        <li>
                           
                           <p>For the public route, we want the Internet gateway to be the
                              destination target. Use <code class="code">GatewayId</code> to create a connection
                              from the <code class="code">PublicRoute</code> resource to the Internet gateway,
                              similar to the way you created a connection between the Internet
                              gateway and the VPC.
                           </p>
                           
                           <p>AWS CloudFormation can&apos;t associate a route with an Internet gateway until you
                              associate the Internet gateway with the VPC. This means we need to
                              create an explicit dependency on the Internet gateway-VPC attachment,
                              as described in the next step. For more information, see <a href="aws-attribute-dependson.html">DependsOn Attribute</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Create an explicit dependency between the <code class="code">PublicRoute</code>
                              resource and the Internet gateway-VPC attachment.
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>On the <code class="code">PublicRoute</code> resource, hover over the
                                    <b>DependsOn</b> dot.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Drag a connection to the Internet gateway-VPC attachment
                                    (<code class="code">AWS::EC2::VPCGatewayAttachment</code>).
                                 </p>
                                 
                                 <p>With <code class="code">DependsOn</code> connections, AWS CloudFormation Designer creates a
                                    dependency (a <code class="code">DependsOn</code> attribute), where the
                                    originating resource depends on the target resource. In this case,
                                    AWS CloudFormation Designer adds a <code class="code">DependsOn</code> attribute to the
                                    <code class="code">PublicRoute</code> resource and specifies the gateway-VPC
                                    attachment as a dependency.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>Create another dependency from the <code class="code">WebServerInstance</code>
                              resource to the <code class="code">PublicRoute</code> resource.
                           </p>
                           
                           <p>The <code class="code">WebServerInstance</code> resource depends on the public
                              route to route traffic to the Internet. Without the public route, the
                              instance cannot send a signal (using the cfn-signal helper script) to
                              notify AWS CloudFormation when the instance configuration and application
                              deployments are complete.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Drag a connection from the <code class="code">PublicRouteTable</code> resource
                              to the <code class="code">PublicSubnet</code> resource to associate the route table
                              and subnet.
                           </p>
                           
                           <p>Now the public subnet will use the public route table to direct
                              traffic.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the AWS CloudFormation Designer toolbar, save the template locally by using
                              the <b>File</b> menu (the file
                              icon).
                           </p>
                           
                           <p>AWS CloudFormation Designer saves your template on your hard drive. You can use the
                              template later to create a stack. We recommend that you save the
                              template regularly to avoid losing changes.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p>In this step, we added seven resources to your template and renamed
                        their logical IDs with friendly names. We also established visual
                        connections with most of the resources to create associations and a
                        dependency. However, before we can create a stack with this template, we
                        need to create a few more connections (such as associating the instance
                        with the security group) and to specify properties for each resource. In
                        the next step, we&apos;ll walk through modifying other components of your
                        template, such as input parameters, by using the AWS CloudFormation Designer
                        integrated editor.
                     </p>
                     
                     <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Step 2: Add Parameters, Mappings, and Outputs</h2>
                     
                     
                     <p>Before we specify resource properties, we need to add other template
                        components to make reusing the template in multiple environments easier.
                        In this step, we&apos;ll use the AWS CloudFormation Designer integrated editor to add
                        parameters, mappings, and outputs. Then, we can refer to these parameters
                        and mappings when we specify resource properties. The walkthrough provides
                        sample JSON and YAML that you can use to copy and paste in to the
                        integrated editor.
                     </p>
                     
                     <p class="title"><b>To add parameters</b></p>
                     <p>Parameters are input values that you specify when you create a
                        stack. They&apos;re useful for passing in values so that you don&apos;t have hard
                        coded values in templates. For example, you don&apos;t need to hard code your
                        web server&apos;s instance type in your template; instead, you can use a
                        parameter to specify the instance type when you create a stack. That way
                        you can use the same template to create multiple web servers with
                        different instance types. For more information, see <a href="parameters-section-structure.html">Parameters</a>.
                     </p>
                     <ol>
                        <li>
                           
                           <p>Click on an open area in the AWS CloudFormation Designer canvas.</p>
                           
                           <p>Depending on what you have selected, the
                              integrated editor shows either template-level or
                              resource-level components that you can edit. At the template-level,
                              you can edit all other sections of a template, such as template
                              parameters, mappings, and outputs, except for the Resources section.
                              At the resource-level, you can edit resource properties and
                              attributes.
                           </p>
                           
                           <p>Clicking on an open area in the canvas allows you to edit
                              template-level components. To edit resource-level components, select a
                              resource.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the integrated editor pane, choose the
                              <b>Parameters</b> tab in the
                              <b>Components</b> view.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Copy the parameters in the following snippet and paste them into
                              the integrated editor.
                           </p>
                           
                           <p>The following JSON snippet adds parameters for specifying your web
                              server&apos;s instance type, an Amazon EC2 key-pair name for SSH access to the
                              web server, and the IP address range that can be used to access the
                              web server using SSH.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;Parameters&quot;: {
    &quot;InstanceType&quot;: {
      &quot;Description&quot;: &quot;WebServer EC2 instance type&quot;,
      &quot;Type&quot;: &quot;String&quot;,
      &quot;Default&quot;: &quot;t2.micro&quot;,
      &quot;AllowedValues&quot;: [
        &quot;t1.micro&quot;,
        &quot;t2.micro&quot;,
        &quot;t2.small&quot;,
        &quot;t2.medium&quot;,
        &quot;m1.small&quot;,
        &quot;m1.medium&quot;,
        &quot;m1.large&quot;,
        &quot;m1.xlarge&quot;,
        &quot;m2.xlarge&quot;,
        &quot;m2.2xlarge&quot;,
        &quot;m2.4xlarge&quot;,
        &quot;m3.medium&quot;,
        &quot;m3.large&quot;,
        &quot;m3.xlarge&quot;,
        &quot;m3.2xlarge&quot;,
        &quot;c1.medium&quot;,
        &quot;c1.xlarge&quot;,
        &quot;c3.large&quot;,
        &quot;c3.xlarge&quot;,
        &quot;c3.2xlarge&quot;,
        &quot;c3.4xlarge&quot;,
        &quot;c3.8xlarge&quot;,
        &quot;c4.large&quot;,
        &quot;c4.xlarge&quot;,
        &quot;c4.2xlarge&quot;,
        &quot;c4.4xlarge&quot;,
        &quot;c4.8xlarge&quot;,
        &quot;g2.2xlarge&quot;,
        &quot;r3.large&quot;,
        &quot;r3.xlarge&quot;,
        &quot;r3.2xlarge&quot;,
        &quot;r3.4xlarge&quot;,
        &quot;r3.8xlarge&quot;,
        &quot;i2.xlarge&quot;,
        &quot;i2.2xlarge&quot;,
        &quot;i2.4xlarge&quot;,
        &quot;i2.8xlarge&quot;,
        &quot;d2.xlarge&quot;,
        &quot;d2.2xlarge&quot;,
        &quot;d2.4xlarge&quot;,
        &quot;d2.8xlarge&quot;,
        &quot;hi1.4xlarge&quot;,
        &quot;hs1.8xlarge&quot;,
        &quot;cr1.8xlarge&quot;,
        &quot;cc2.8xlarge&quot;,
        &quot;cg1.4xlarge&quot;
      ],
      &quot;ConstraintDescription&quot;: &quot;must be a valid EC2 instance type.&quot;
    },
    &quot;KeyName&quot;: {
      &quot;Description&quot;: &quot;Name of an EC2 KeyPair to enable SSH access to the instance.&quot;,
      &quot;Type&quot;: &quot;AWS::EC2::KeyPair::KeyName&quot;,
      &quot;ConstraintDescription&quot;: &quot;must be the name of an existing EC2 KeyPair.&quot;
    },
    &quot;SSHLocation&quot;: {
      &quot;Description&quot;: &quot; The IP address range that can be used to access the web server using SSH.&quot;,
      &quot;Type&quot;: &quot;String&quot;,
      &quot;MinLength&quot;: &quot;9&quot;,
      &quot;MaxLength&quot;: &quot;18&quot;,
      &quot;Default&quot;: &quot;0.0.0.0/0&quot;,
      &quot;AllowedPattern&quot;: &quot;(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})&quot;,
      &quot;ConstraintDescription&quot;: &quot;must be a valid IP CIDR range of the form x.x.x.x/x.&quot;
    }
  }
}</code></pre>
                           
                           <p>Here is the same snippet in YAML.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Parameters:
  InstanceType:
    Description: WebServer EC2 instance type
    Type: String
    Default: t2.micro
    AllowedValues:
      - t1.micro
      - t2.micro
      - t2.small
      - t2.medium
      - m1.small
      - m1.medium
      - m1.large
      - m1.xlarge
      - m2.xlarge
      - m2.2xlarge
      - m2.4xlarge
      - m3.medium
      - m3.large
      - m3.xlarge
      - m3.2xlarge
      - c1.medium
      - c1.xlarge
      - c3.large
      - c3.xlarge
      - c3.2xlarge
      - c3.4xlarge
      - c3.8xlarge
      - c4.large
      - c4.xlarge
      - c4.2xlarge
      - c4.4xlarge
      - c4.8xlarge
      - g2.2xlarge
      - r3.large
      - r3.xlarge
      - r3.2xlarge
      - r3.4xlarge
      - r3.8xlarge
      - i2.xlarge
      - i2.2xlarge
      - i2.4xlarge
      - i2.8xlarge
      - d2.xlarge
      - d2.2xlarge
      - d2.4xlarge
      - d2.8xlarge
      - hi1.4xlarge
      - hs1.8xlarge
      - cr1.8xlarge
      - cc2.8xlarge
      - cg1.4xlarge
    ConstraintDescription: must be a valid EC2 instance type.
  KeyName:
    Description: Name of an EC2 KeyPair to enable SSH access to the instance.
    Type: &apos;AWS::EC2::KeyPair::KeyName&apos;
    ConstraintDescription: must be the name of an existing EC2 KeyPair.
  SSHLocation:
    Description: &apos; The IP address range that can be used to access the web server using SSH.&apos;
    Type: String
    MinLength: &apos;9&apos;
    MaxLength: &apos;18&apos;
    Default: 0.0.0.0/0
    AllowedPattern: &apos;(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})/(\d{1,2})&apos;
    ConstraintDescription: must be a valid IP CIDR range of the form x.x.x.x/x.</code></pre>
                           </li>
                     </ol>
                     
                     <p class="title"><b>To add mappings</b></p>
                     <p>Mappings are a set of keys that are associated with a set of
                        name-value pairs. They&apos;re useful for specifying values based on an input
                        parameter value. For this walkthrough, we&apos;ll use a mapping to specify an
                        AMI ID for an EC2 instance based on the instance type and region in
                        which you create the stack. For more information, see <a href="mappings-section-structure.html">Mappings</a>.
                     </p>
                     <ol>
                        <li>
                           
                           <p>In the integrated editor pane, choose the
                              <b>Mappings</b> tab.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Copy the following JSON mappings and paste them into the
                              integrated editor.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;Mappings&quot;: {
    &quot;AWSInstanceType2Arch&quot; : {
      &quot;t1.micro&quot;    : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;t2.micro&quot;    : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;t2.small&quot;    : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;t2.medium&quot;   : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;m1.small&quot;    : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;m1.medium&quot;   : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;m1.large&quot;    : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;m1.xlarge&quot;   : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;m2.xlarge&quot;   : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;m2.2xlarge&quot;  : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;m2.4xlarge&quot;  : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;m3.medium&quot;   : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;m3.large&quot;    : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;m3.xlarge&quot;   : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;m3.2xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c1.medium&quot;   : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;c1.xlarge&quot;   : { &quot;Arch&quot; : &quot;PV64&quot;   },
      &quot;c3.large&quot;    : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c3.xlarge&quot;   : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c3.2xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c3.4xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c3.8xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c4.large&quot;    : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c4.xlarge&quot;   : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c4.2xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c4.4xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;c4.8xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;g2.2xlarge&quot;  : { &quot;Arch&quot; : &quot;HVMG2&quot;  },
      &quot;r3.large&quot;    : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;r3.xlarge&quot;   : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;r3.2xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;r3.4xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;r3.8xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;i2.xlarge&quot;   : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;i2.2xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;i2.4xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;i2.8xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;d2.xlarge&quot;   : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;d2.2xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;d2.4xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;d2.8xlarge&quot;  : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;hi1.4xlarge&quot; : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;hs1.8xlarge&quot; : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;cr1.8xlarge&quot; : { &quot;Arch&quot; : &quot;HVM64&quot;  },
      &quot;cc2.8xlarge&quot; : { &quot;Arch&quot; : &quot;HVM64&quot;  }
    },
    &quot;AWSRegionArch2AMI&quot; : {
      &quot;us-east-1&quot;        : {&quot;PV64&quot; : &quot;ami-1ccae774&quot;, &quot;HVM64&quot; : &quot;ami-1ecae776&quot;, &quot;HVMG2&quot; : &quot;ami-8c6b40e4&quot;},
      &quot;us-west-2&quot;        : {&quot;PV64&quot; : &quot;ami-ff527ecf&quot;, &quot;HVM64&quot; : &quot;ami-e7527ed7&quot;, &quot;HVMG2&quot; : &quot;ami-abbe919b&quot;},
      &quot;us-west-1&quot;        : {&quot;PV64&quot; : &quot;ami-d514f291&quot;, &quot;HVM64&quot; : &quot;ami-d114f295&quot;, &quot;HVMG2&quot; : &quot;ami-f31ffeb7&quot;},
      &quot;eu-west-1&quot;        : {&quot;PV64&quot; : &quot;ami-bf0897c8&quot;, &quot;HVM64&quot; : &quot;ami-a10897d6&quot;, &quot;HVMG2&quot; : &quot;ami-d5bc24a2&quot;},
      &quot;eu-central-1&quot;     : {&quot;PV64&quot; : &quot;ami-ac221fb1&quot;, &quot;HVM64&quot; : &quot;ami-a8221fb5&quot;, &quot;HVMG2&quot; : &quot;ami-7cd2ef61&quot;},
      &quot;ap-northeast-1&quot;   : {&quot;PV64&quot; : &quot;ami-27f90e27&quot;, &quot;HVM64&quot; : &quot;ami-cbf90ecb&quot;, &quot;HVMG2&quot; : &quot;ami-6318e863&quot;},
      &quot;ap-southeast-1&quot;   : {&quot;PV64&quot; : &quot;ami-acd9e8fe&quot;, &quot;HVM64&quot; : &quot;ami-68d8e93a&quot;, &quot;HVMG2&quot; : &quot;ami-3807376a&quot;},
      &quot;ap-southeast-2&quot;   : {&quot;PV64&quot; : &quot;ami-ff9cecc5&quot;, &quot;HVM64&quot; : &quot;ami-fd9cecc7&quot;, &quot;HVMG2&quot; : &quot;ami-89790ab3&quot;},
      &quot;sa-east-1&quot;        : {&quot;PV64&quot; : &quot;ami-bb2890a6&quot;, &quot;HVM64&quot; : &quot;ami-b52890a8&quot;, &quot;HVMG2&quot; : &quot;NOT_SUPPORTED&quot;},
      &quot;cn-north-1&quot;       : {&quot;PV64&quot; : &quot;ami-fa39abc3&quot;, &quot;HVM64&quot; : &quot;ami-f239abcb&quot;, &quot;HVMG2&quot; : &quot;NOT_SUPPORTED&quot;}
    }
  }
}</code></pre>
                           
                           <p>Here are the same mappings in YAML.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Mappings:
  AWSInstanceType2Arch:
    t1.micro:
      Arch: PV64
    t2.micro:
      Arch: HVM64
    t2.small:
      Arch: HVM64
    t2.medium:
      Arch: HVM64
    m1.small:
      Arch: PV64
    m1.medium:
      Arch: PV64
    m1.large:
      Arch: PV64
    m1.xlarge:
      Arch: PV64
    m2.xlarge:
      Arch: PV64
    m2.2xlarge:
      Arch: PV64
    m2.4xlarge:
      Arch: PV64
    m3.medium:
      Arch: HVM64
    m3.large:
      Arch: HVM64
    m3.xlarge:
      Arch: HVM64
    m3.2xlarge:
      Arch: HVM64
    c1.medium:
      Arch: PV64
    c1.xlarge:
      Arch: PV64
    c3.large:
      Arch: HVM64
    c3.xlarge:
      Arch: HVM64
    c3.2xlarge:
      Arch: HVM64
    c3.4xlarge:
      Arch: HVM64
    c3.8xlarge:
      Arch: HVM64
    c4.large:
      Arch: HVM64
    c4.xlarge:
      Arch: HVM64
    c4.2xlarge:
      Arch: HVM64
    c4.4xlarge:
      Arch: HVM64
    c4.8xlarge:
      Arch: HVM64
    g2.2xlarge:
      Arch: HVMG2
    r3.large:
      Arch: HVM64
    r3.xlarge:
      Arch: HVM64
    r3.2xlarge:
      Arch: HVM64
    r3.4xlarge:
      Arch: HVM64
    r3.8xlarge:
      Arch: HVM64
    i2.xlarge:
      Arch: HVM64
    i2.2xlarge:
      Arch: HVM64
    i2.4xlarge:
      Arch: HVM64
    i2.8xlarge:
      Arch: HVM64
    d2.xlarge:
      Arch: HVM64
    d2.2xlarge:
      Arch: HVM64
    d2.4xlarge:
      Arch: HVM64
    d2.8xlarge:
      Arch: HVM64
    hi1.4xlarge:
      Arch: HVM64
    hs1.8xlarge:
      Arch: HVM64
    cr1.8xlarge:
      Arch: HVM64
    cc2.8xlarge:
      Arch: HVM64
  AWSRegionArch2AMI:
    us-east-1:
      PV64: ami-1ccae774
      HVM64: ami-1ecae776
      HVMG2: ami-8c6b40e4
    us-west-2:
      PV64: ami-ff527ecf
      HVM64: ami-e7527ed7
      HVMG2: ami-abbe919b
    us-west-1:
      PV64: ami-d514f291
      HVM64: ami-d114f295
      HVMG2: ami-f31ffeb7
    eu-west-1:
      PV64: ami-bf0897c8
      HVM64: ami-a10897d6
      HVMG2: ami-d5bc24a2
    eu-central-1:
      PV64: ami-ac221fb1
      HVM64: ami-a8221fb5
      HVMG2: ami-7cd2ef61
    ap-northeast-1:
      PV64: ami-27f90e27
      HVM64: ami-cbf90ecb
      HVMG2: ami-6318e863
    ap-southeast-1:
      PV64: ami-acd9e8fe
      HVM64: ami-68d8e93a
      HVMG2: ami-3807376a
    ap-southeast-2:
      PV64: ami-ff9cecc5
      HVM64: ami-fd9cecc7
      HVMG2: ami-89790ab3
    sa-east-1:
      PV64: ami-bb2890a6
      HVM64: ami-b52890a8
      HVMG2: NOT_SUPPORTED
    cn-north-1:
      PV64: ami-fa39abc3
      HVM64: ami-f239abcb
      HVMG2: NOT_SUPPORTED</code></pre>
                           </li>
                     </ol>
                     
                     <p class="title"><b>To add outputs</b></p>
                     <p>Outputs declare values that you want available to a <code class="code">describe
                           stacks</code> API call or through the AWS CloudFormation console stack
                        <b>Outputs</b> tab. For this walkthrough, we&apos;ll output
                        the website URL so that you can easily view the website after we create
                        it. For more information, see <a href="outputs-section-structure.html">Outputs</a>.
                     </p>
                     <ol>
                        <li>
                           
                           <p>In the integrated editor pane, select the
                              <b>Outputs</b> tab.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Copy the following JSON output and paste it into the
                              integrated editor.
                           </p>
                           
                           <p>The output uses an <code class="code">Fn::GetAtt</code> intrinsic function to
                              get the public IP of the web server instance.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;Outputs&quot;: {
    &quot;URL&quot;: {
      &quot;Value&quot;: {
        &quot;Fn::Join&quot;: [
          &quot;&quot;,
          [
            &quot;http://&quot;,
            {
              &quot;Fn::GetAtt&quot;: [
                &quot;WebServerInstance&quot;,
                &quot;PublicIp&quot;
              ]
            }
          ]
        ]
      },
      &quot;Description&quot;: &quot;Newly created application URL&quot;
    }
  }
}</code></pre>
                           
                           <p>Here is the same output in YAML.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Outputs:
  URL:
    Value: !Join 
      - &apos;&apos;
      - - &apos;http://&apos;
        - !GetAtt 
          - WebServerInstance
          - PublicIp
    Description: Newly created application URL</code></pre>
                           </li>
                        <li>
                           
                           <p>Save your template again so that you don&apos;t lose your changes. You
                              can safely save your changes to the same file that you created in the
                              previous section.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p>Now that the template parameters, mappings, and outputs are in place,
                        we can specify resource properties.
                     </p>
                     
                     <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Step 3: Specify Resource Properties</h2>
                     
                     
                     <p>Many resources have required properties that define their
                        configurations or settings, such as which instance type to use for the web
                        server. Similar to what we did in the previous step, we&apos;ll use the
                        AWS CloudFormation Designer integrated editor to specify resource properties. We
                        provide sample JSON and YAML that you can copy and paste into the
                        integrated editor.
                     </p>
                     
                     <p class="title"><b>To specify resource properties</b></p>
                     <ol>
                        <li>
                           
                           <p>On the AWS CloudFormation Designer canvas, choose the <code class="code">VPC</code>
                              resource.
                           </p>
                           
                           <p>The integrated editor shows the resource-level
                              components that you can edit, such as the resource properties and
                              attributes.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the integrated editor pane, choose the
                              <b>Properties</b> tab.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Copy the following JSON snippet and paste it into the
                              integrated editor between the
                              <b>Properties</b> braces (<code class="code">{}</code>).
                           </p>
                           
                           <p>This snippet specifies DNS settings and the CIDR block of the
                              VPC.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">        &quot;EnableDnsSupport&quot;: &quot;true&quot;,
        &quot;EnableDnsHostnames&quot;: &quot;true&quot;,
        &quot;CidrBlock&quot;: &quot;10.0.0.0/16&quot;</code></pre>
                           <p>For YAML, type a new line after <code class="code">Properties:</code> and paste
                              the following snippet.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">      EnableDnsSupport: &apos;true&apos;
      EnableDnsHostnames: &apos;true&apos;
      CidrBlock: 10.0.0.0/16</code></pre>
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>For efficiency, we provide JSON and YAML snippets that you can
                                 copy and paste. Note, however, that the editor has an auto-complete
                                 feature that you can use to manually specify each property. For more
                                 information, see <a href="working-with-templates-cfn-designer-json-editor.html">Integrated JSON and YAML Editor</a>.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Repeat this process for the following resources:</p>
                           <div class="variablelist">
                              
                              
                              
                              
                              
                              <dl>
                                 
                                 <dt><span class="term"><code class="code">PublicSubnet</code></span></dt>
                                 
                                 <dd>
                                    
                                    <p>Add the following CIDR block property after the VPC ID
                                       property. AWS CloudFormation Designer automatically added the VPC ID property
                                       when you dragged the subnet inside the VPC.
                                    </p>
                                    <div class="aws-note">
                                       <p class="aws-note">Note</p>
                                       <p>You&apos;ll see a few other associations that AWS CloudFormation Designer
                                          automatically created for you. Add just the new
                                          properties, which are in bold.
                                       </p>
                                    </div>
                                    
                                    <p>JSON</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">        &quot;VpcId&quot;: {
          &quot;Ref&quot;: &quot;VPC&quot;
        },
        <b>&quot;CidrBlock&quot;: &quot;10.0.0.0/24&quot;</b></code></pre>
                                    <p>YAML</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">      VpcId: !Ref VPC
      <b>CidrBlock: 10.0.0.0/24</b></code></pre>
                                    </dd>
                                 
                                 
                                 <dt><span class="term"><code class="code">PublicRoute</code></span></dt>
                                 
                                 <dd>
                                    
                                    <p>Add the following destination CIDR block property, which
                                       directs all traffic to the Internet gateway:
                                    </p>
                                    
                                    <p>JSON</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">        <b>&quot;DestinationCidrBlock&quot;: &quot;0.0.0.0/0&quot;,</b>
        &quot;RouteTableId&quot;: {
          &quot;Ref&quot;: &quot;PublicRouteTable&quot;
        },        
        &quot;GatewayId&quot;: {
          &quot;Ref&quot;: &quot;InternetGateway&quot;
        }</code></pre>
                                    <p>YAML</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">      <b>DestinationCidrBlock: 0.0.0.0/0</b>
      RouteTableId: !Ref PublicRouteTable
      GatewayId: !Ref InternetGateway</code></pre>
                                    </dd>
                                 
                                 
                                 <dt><span class="term"><code class="code">WebServerSecurityGroup</code></span></dt>
                                 
                                 <dd>
                                    
                                    <p>Add the following inbound rules that determine what
                                       traffic can reach the web server instance. The rules allow all
                                       HTTP and certain SSH traffic, which you specify as a parameter
                                       value when you create a stack.
                                    </p>
                                    
                                    <p>JSON</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">        &quot;VpcId&quot;: {
          &quot;Ref&quot;: &quot;VPC&quot;
        }<b>,
        &quot;GroupDescription&quot; : &quot;Allow access from HTTP and SSH traffic&quot;,
        &quot;SecurityGroupIngress&quot;: [
          {
            &quot;IpProtocol&quot;: &quot;tcp&quot;,
            &quot;FromPort&quot;: &quot;80&quot;,
            &quot;ToPort&quot;: &quot;80&quot;,
            &quot;CidrIp&quot;: &quot;0.0.0.0/0&quot;
          },
          {
            &quot;IpProtocol&quot;: &quot;tcp&quot;,
            &quot;FromPort&quot;: &quot;22&quot;,
            &quot;ToPort&quot;: &quot;22&quot;,
            &quot;CidrIp&quot;: {
              &quot;Ref&quot;: &quot;SSHLocation&quot;
            }
          }
        ]</b></code></pre>
                                    <p>YAML</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">      VpcId: !Ref VPC
      <b>GroupDescription: Allow access from HTTP and SSH traffic
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: &apos;80&apos;
          ToPort: &apos;80&apos;
          CidrIp: 0.0.0.0/0
        - IpProtocol: tcp
          FromPort: &apos;22&apos;
          ToPort: &apos;22&apos;
          CidrIp: !Ref SSHLocation</b></code></pre>
                                    </dd>
                                 
                                 
                                 <dt><span class="term"><code class="code">WebServerInstance</code></span></dt>
                                 
                                 <dd>
                                    
                                    <p>You need to specify a number of properties for the web
                                       server instance, so we&apos;ll highlight just a few for
                                       demonstration purposes. The <code class="code">InstanceType</code> and
                                       <code class="code">ImageId</code> properties use the parameter and
                                       mapping values that we specified in the previous section. When
                                       you create a stack, you specify the instance type as a
                                       parameter value. The <code class="code">ImageId</code> value is a mapping
                                       that is based on your stack&apos;s region and the instance type
                                       that you specified.
                                    </p>
                                    
                                    <p>The <code class="code">NetworkInterfaces</code> property specifies
                                       network settings for the web server instance. This property
                                       allows us to associate the security group and subnet with the
                                       instance. Although AWS CloudFormation Designer used the <code class="code">SubnetId</code>
                                       property to associate the instance with the subnet, we need to
                                       use the <code class="code">NetworkInterfaces</code> property because that&apos;s
                                       the only way to give the web server a public IP. And when you
                                       specify the <code class="code">NetworkInterfaces</code> property, you are
                                       required to specify the subnet and security group within that
                                       property.
                                    </p>
                                    
                                    <p>In the <code class="code">UserData</code> property, we specify
                                       configuration scripts that run after the instance is up and
                                       running. All of the configuration information is defined in
                                       the instance&apos;s metadata, which we&apos;ll add in the next
                                       step.
                                    </p>
                                    
                                    <p>Replace all properties with the following snippet:</p>
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Important</p>
                                       <p>Do not append this snippet to existing
                                          properties.
                                       </p>
                                    </div>
                                    
                                    <p>JSON</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><b>       &quot;InstanceType&quot;: {
          &quot;Ref&quot;: &quot;InstanceType&quot;
        },
        &quot;ImageId&quot;: {
          &quot;Fn::FindInMap&quot;: [
            &quot;AWSRegionArch2AMI&quot;,
            {
              &quot;Ref&quot;: &quot;AWS::Region&quot;
            },
            {
              &quot;Fn::FindInMap&quot;: [
                &quot;AWSInstanceType2Arch&quot;,
                {
                  &quot;Ref&quot;: &quot;InstanceType&quot;
                },
                &quot;Arch&quot;
              ]
            }
          ]
        },
        &quot;KeyName&quot;: {
          &quot;Ref&quot;: &quot;KeyName&quot;
        },
        &quot;NetworkInterfaces&quot;: [
          {
            &quot;GroupSet&quot;: [
              {
                &quot;Ref&quot;: &quot;WebServerSecurityGroup&quot;
              }
            ],
            &quot;AssociatePublicIpAddress&quot;: &quot;true&quot;,
            &quot;DeviceIndex&quot;: &quot;0&quot;,
            &quot;DeleteOnTermination&quot;: &quot;true&quot;,
            &quot;SubnetId&quot;: {
              &quot;Ref&quot;: &quot;PublicSubnet&quot;
            }
          }
        ],
        &quot;UserData&quot;: {
          &quot;Fn::Base64&quot;: {
            &quot;Fn::Join&quot;: [
              &quot;&quot;,
              [
                &quot;#!/bin/bash -xe\n&quot;,
                &quot;yum install -y aws-cfn-bootstrap\n&quot;,
                &quot;# Install the files and packages from the metadata\n&quot;,
                &quot;/opt/aws/bin/cfn-init -v &quot;,
                &quot;         --stack &quot;,
                {
                  &quot;Ref&quot;: &quot;AWS::StackName&quot;
                },
                &quot;         --resource WebServerInstance &quot;,
                &quot;         --configsets All &quot;,
                &quot;         --region &quot;,
                {
                  &quot;Ref&quot;: &quot;AWS::Region&quot;
                },
                &quot;\n&quot;,
                &quot;# Signal the status from cfn-init\n&quot;,
                &quot;/opt/aws/bin/cfn-signal -e $? &quot;,
                &quot;         --stack &quot;,
                {
                  &quot;Ref&quot;: &quot;AWS::StackName&quot;
                },
                &quot;         --resource WebServerInstance &quot;,
                &quot;         --region &quot;,
                {
                  &quot;Ref&quot;: &quot;AWS::Region&quot;
                },
                &quot;\n&quot;
              ]
            ]
          }
        }</b></code></pre>
                                    <p>YAML</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><b>      InstanceType: !Ref InstanceType
      ImageId: !FindInMap 
        - AWSRegionArch2AMI
        - !Ref &apos;AWS::Region&apos;
        - !FindInMap 
          - AWSInstanceType2Arch
          - !Ref InstanceType
          - Arch
      KeyName: !Ref KeyName
      NetworkInterfaces:
        - GroupSet:
            - !Ref WebServerSecurityGroup
          AssociatePublicIpAddress: &apos;true&apos;
          DeviceIndex: &apos;0&apos;
          DeleteOnTermination: &apos;true&apos;
          SubnetId: !Ref PublicSubnet
      UserData: !Base64 
        &apos;Fn::Join&apos;:
          - &apos;&apos;
          - - |
              #!/bin/bash -xe
            - |
              yum install -y aws-cfn-bootstrap
            - |
              # Install the files and packages from the metadata
            - &apos;/opt/aws/bin/cfn-init -v &apos;
            - &apos;         --stack &apos;
            - !Ref &apos;AWS::StackName&apos;
            - &apos;         --resource WebServerInstance &apos;
            - &apos;         --configsets All &apos;
            - &apos;         --region &apos;
            - !Ref &apos;AWS::Region&apos;
            - |+

            - |
              # Signal the status from cfn-init
            - &apos;/opt/aws/bin/cfn-signal -e $? &apos;
            - &apos;         --stack &apos;
            - !Ref &apos;AWS::StackName&apos;
            - &apos;         --resource WebServerInstance &apos;
            - &apos;         --region &apos;
            - !Ref &apos;AWS::Region&apos;
            - |+</b></code></pre>
                                    </dd>
                                 
                              </dl>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Add the web server configuration metadata to the
                              <code class="code">WebServerInstance</code> resource.
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>Choose the <code class="code">WebServerInstance</code> resource, and then
                                    choose the <b>Metadata</b> tab in the
                                    integrated editor pane.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p><em>If you are authoring your template in
                                       JSON</em>: Within the <code class="code">Metadata</code> braces
                                    (<code class="code">{}</code>) and after the
                                    <code class="code">AWS::CloudFormation::Designer</code> closing brace, add a
                                    comma (<code class="code">,</code>).
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>After the <code class="code">AWS::CloudFormation::Designer</code> property,
                                    add the following snippet, which instructs the cfn-init helper
                                    script to start the web server and create a basic web page.
                                 </p>
                                 
                                 <p>JSON</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">        &quot;AWS::CloudFormation::Init&quot; : {
          &quot;configSets&quot; : {
            &quot;All&quot; : [ &quot;ConfigureSampleApp&quot; ]
          },
          &quot;ConfigureSampleApp&quot; : {
            &quot;packages&quot; : {
              &quot;yum&quot; : {
                &quot;httpd&quot; : []
              }
            },
            &quot;files&quot; : {
              &quot;/var/www/html/index.html&quot; : {
                &quot;content&quot; : { &quot;Fn::Join&quot; : [&quot;\n&quot;, [
                  &quot;&lt;h1&gt;Congratulations, you have successfully launched the AWS CloudFormation sample.&lt;/h1&gt;&quot;
                ]]},
                &quot;mode&quot;    : &quot;000644&quot;,
                &quot;owner&quot;   : &quot;root&quot;,
                &quot;group&quot;   : &quot;root&quot;
              }
            },
            &quot;services&quot; : {
              &quot;sysvinit&quot; : {
                &quot;httpd&quot;    : { &quot;enabled&quot; : &quot;true&quot;, &quot;ensureRunning&quot; : &quot;true&quot; }
              }
            }
          }
        }</code></pre>
                                 <p>YAML</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">      &apos;AWS::CloudFormation::Init&apos;:
        configSets:
          All:
            - ConfigureSampleApp
        ConfigureSampleApp:
          packages:
            yum:
              httpd: []
          files:
            /var/www/html/index.html:
              content: !Join 
                - |+

                - - &gt;-
                    &lt;h1&gt;Congratulations, you have successfully launched the AWS
                    CloudFormation sample.&lt;/h1&gt;
              mode: &apos;000644&apos;
              owner: root
              group: root
          services:
            sysvinit:
              httpd:
                enabled: &apos;true&apos;
                ensureRunning: &apos;true&apos;</code></pre>
                                 </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>On the AWS CloudFormation Designer toolbar, choose <b>Validate
                                 template</b> (<span class="inlinemediaobject">
                                 
                                 <img src="../../..//img/designer-validate-icon.png">
                                 
                                 </span>) to check for syntax errors in
                              your template.
                           </p>
                           
                           <p>View and fix errors in the <b>Messages</b> pane, and
                              then validate the template again. If you don&apos;t see errors, your
                              template is syntactically valid.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Save your completed template to keep all the changes you
                              made.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p>You now have a complete AWS CloudFormation template that you can use to create a
                        basic web server in a VPC. To create the template, we first added and
                        connected template resources by using the AWS CloudFormation Designer canvas pane.
                        Then, we
                        used the integrated editor to add other template components and
                        to specify resource properties. In the next step, we&apos;ll use this template
                        to create a stack.
                     </p>
                     
                     <h2 id="working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Step 4: Provision Resources</h2>
                     
                     
                     <p>To create a stack, you can launch the AWS CloudFormation Create Stack Wizard from
                        AWS CloudFormation Designer. We&apos;ll use the template that we created in the previous
                        steps
                        to create an AWS CloudFormation stack. After AWS CloudFormation provisions all of
                        your resources,
                        you&apos;ll have a basic website up and running.
                     </p>
                     
                     <p class="title"><b>To create the stack</b></p>
                     <ol>
                        <li>
                           
                           <p>On the AWS CloudFormation Designer toolbar, choose <b>Create
                                 Stack</b> (the cloud
                              icon).
                           </p>
                           
                           <p>AWS CloudFormation Designer saves the open template in an S3 bucket, and then
                              launches the AWS CloudFormation Create Stack Wizard. AWS CloudFormation uses the same
                              S3 bucket
                              that it creates whenever you upload templates.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>AWS CloudFormation automatically populates the template URL; choose
                              <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the&#xA0;<b>Specify Details</b>&#xA0;section, enter a stack
                              name in the&#xA0;<b>Stack name</b> &#xA0;field. For this example,
                              use&#xA0;<strong class="userinput"><code>BasicWebServerStack</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the&#xA0;<b>Parameters</b> section, for the
                              <b>KeyName</b>&#xA0;field, enter the name of a valid Amazon
                              EC2 key pair in the same region you are creating the stack.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Keep the other default parameter values and choose
                              <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For this walkthrough, you don&apos;t need to add tags or specify
                              advanced settings, so choose <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Ensure that the stack name and Amazon EC2 key-pair name are correct,
                              and then choose <b>Create</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p>It can take several minutes for AWS CloudFormation to create your stack. To
                        monitor progress, view the stack events. For more information about
                        viewing stack events, see <a href="cfn-console-view-stack-data-resources.html">Viewing Stack Data and Resources</a>. After the stack
                        is created, view the stack outputs and go to the sample website URL to
                        verify that the website is running. For more information, see <a href="cfn-console-view-stack-data-resources.html">Viewing Stack Data and Resources</a>. 
                     </p>
                     
                     <p>Now that you&apos;ve successfully created a template and launched a stack
                        using AWS CloudFormation Designer, you can use the stack in the following walkthrough:
                        <a href="working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html">Walkthrough: Use AWS CloudFormation Designer to Modify a Stack&apos;s Template</a>, which modifies the template to create a scalable web server.
                     </p>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="CHAP_Using.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="working-with-templates-cfn-designer-walkthrough-updatebasicwebserver.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Step 1: Add and Connect Resources"><a class="pagetoc" href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addresources">Step 1: Add and Connect Resources</a></li>
                        <li class="pagetoc" name="Step 2: Add Parameters, Mappings, and Outputs"><a class="pagetoc" href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-addother">Step 2: Add Parameters, Mappings, and Outputs</a></li>
                        <li class="pagetoc" name="Step 3: Specify Resource Properties"><a class="pagetoc" href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-resourceproperties">Step 3: Specify Resource Properties</a></li>
                        <li class="pagetoc" name="Step 4: Provision Resources"><a class="pagetoc" href="#working-with-templates-cfn-designer-walkthrough-createbasicwebserver-provision">Step 4: Provision Resources</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>