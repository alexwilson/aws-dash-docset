<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Set up a Stage Using the API Gateway Console - Amazon API Gateway</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="set-up-stages.html" title="Set up a Stage in API Gateway">
      <link rel="prev" href="set-up-stages.html" title="Set up a Stage in API Gateway">
      <link rel="next" href="api-gateway-request-throttling.html" title="Throttle API Requests for Better
            Throughput">
      <meta name="description" content="Learn how to set up a stage in the Amazon API Gateway console.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/stages.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="how-to-deploy-api.html">Deploying an API in Amazon API Gateway</a> &#xBB; <a href="set-up-stages.html">Set up a Stage in API Gateway</a> &#xBB; <span class="breadcrumb">Set up a Stage Using the API Gateway Console</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="stages">Set up a Stage Using the API Gateway Console</h1>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#how-to-create-stage-console">Create a New Stage</a></li>
                           <li><a href="#how-to-stage-settings">Update Stage Settings</a></li>
                           <li><a href="#how-to-delete-stage">Delete a Stage for an API</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="how-to-create-stage-console">Create a New Stage</h2>
                     
                     
                     <p>
                        After the initial deployment, you can add more stages and associate them with existing
                        deployments.  
                        You can use the API Gateway console to create and use a new stage or choose an existing
                        stage while deploying an API. 
                        In general, you can add a new stage to an API deployment before redeploying the API.
                        To do so using the API Gateway console, 
                        follow the instructions below.
                        
                     </p>
                     
                     
                     <ol>
                        <li>
                           <p>Sign in to the API Gateway console at <a href="https://console.aws.amazon.com/apigateway" target="_blank">https://console.aws.amazon.com/apigateway</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>From the <b>APIs</b> navigation pane, choose <b>Stages</b> under an API.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the <b>Stages</b> navigation pane, choose <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>
                              Under <b>Create Stage</b>, type a stage name, e.g., <code class="code">prod</code>, for <b>Stage name</b>.
                              
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>
                              Optionally, type a stage description for <b>Stage description</b>
                              
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the <b>Deployment</b> drop-down list, choose the date and time of the existing
                              API deployment you want to associate with this stage.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="how-to-stage-settings">Update Stage Settings</h2>   
                     
                     
                     
                     <p>After a successful deployment of an API, the stage is populated with default settings.
                        You
                        can use the console or API Gateway REST API to change the stage settings, including
                        API caching and
                        logging. In the following, we show how to do so using the <b>Stage Editor</b>
                        of the API Gateway console.
                     </p>
                     
                     
                     
                     <h3 id="how-to-stage-settings-console">Update Stage Settings Using the API Gateway Console</h3>
                     
                     
                     <p> Make sure that you have already deployed the API and created a stage at least once
                        before proceeding. 
                     </p>
                     
                     <ol>
                        <li>
                           <p>Sign in to the API Gateway console at <a href="https://console.aws.amazon.com/apigateway" target="_blank">https://console.aws.amazon.com/apigateway</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>In the <b>APIs</b> pane, choose the API you want to update the stage settings, and then choose <b>Stages</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Stages</b> pane, choose the name of the stage.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Stage Editor</b> pane, choose the <b>Settings</b> tab.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>
                              To enable API caching, select the <b>Enable API cache</b> option under the <b>Cache Settings</b> section. 
                              Then, choose desired options and associated values for <b>Cache capacity</b>, <b>Encrypt cache data</b>,  
                              <b>Cache time-to-live (TTL)</b>, as well as the requirements for per-key cache invalidation.  For more information
                              about the stage-level cache settings, see 
                              <a href="api-gateway-caching.html">Enable API Caching</a>.
                              
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>By selecting this option, your AWS account may be charged for API caching.</p>
                           </div>                
                           
                           <div class="aws-note">
                              <p class="aws-note">Tip</p>
                              <p>You can override enabled stage-level cache settings. To do so, expand the stage under
                                 the <b>Stages</b> secondary navigation pane and choose a method. Then, in the stage editor, choose
                                 the <b>Override for this method</b> option for <b>Settings</b>. In the ensuing <b>Cache Settings</b> area, clear <b>Enable Method Cache</b> or customize any other desired options, before choosing <b>Save Changes</b>. For more information about the method-level cache settings, see <a href="api-gateway-caching.html">Enable API Caching</a>.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>To enable Amazon CloudWatch Logs for all of the methods associated with this stage
                              of this API Gateway API, do the following:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p> Under the <b>CloudWatch Settings</b> section, select the
                                    <b>Enable
                                       CloudWatch Logs</b>
                                    option. 
                                 </p>
                                 
                                 <div class="aws-note">
                                    <p class="aws-note">Tip</p>
                                    <p>
                                       To enable method-level CloudWatch settings, expand the stage under the <b>Stages</b> secondary navigation pane, choose each method of interest, and, back in the stage
                                       editor, choose <b>Override for this method</b> for <b>Settings</b>. In the ensuing <b>CloudWatch Settings</b> area, make sure to select <b>Log to CloudWatch Logs</b> and any other desired options, before choosing <b>Save Changes</b>.
                                       
                                    </p>
                                 </div>
                                 
                                 <div class="aws-note">
                                    <p class="aws-note">Important</p>
                                    <p>Your account will be charged for accessing method-level CloudWatch metrics, but not
                                       the API- or stage- level metrics.
                                    </p>
                                 </div>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Log level</b>, choose <b>ERROR</b> to write only error-level entries to CloudWatch Logs, or choose <b>INFO</b> to include all <b>ERROR</b> events as well as extra informational events. 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>To log full API call request and response information, select <b>Log full requests/responses data</b>. No sensitive data will be logged unless the  <b>Log full requests/responses data</b> option is selected.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>To have API Gateway to report to CloudWatch the API metrics of <code class="code">API calls</code>, <code class="code">Latency</code>, 
                                    <code class="code">Integration latency</code>, <code class="code">400 errors</code> and <code class="code">500 errors</code>, select the 
                                    <b>Enable Detailed CloudWatch Metrics</b> option. For more information about CloudWatch, see 
                                    the <a href="./AmazonCloudWatch/latest/DeveloperGuide/" target="_blank">Amazon CloudWatch User Guide</a>.
                                 </p>
                                 
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Save Changes</b>. The new settings will take effect after a new deployment.
                                 </p>
                                 
                                 <div class="aws-note">
                                    <p class="aws-note">Important</p>
                                    <p>To enable CloudWatch Logs for all or only some of the methods, you must also
                                       specify the ARN of an IAM role that enables API Gateway to write
                                       information to CloudWatch Logs on behalf of your IAM user. To do so, choose
                                       <b>Settings</b> from the <b>APIs</b>
                                       main navigation pane. Then type the ARN of an IAM role in the
                                       <b>CloudWatch log role ARN</b> text field. For common
                                       application scenarios, the IAM role could attach the managed
                                       policy of <code class="code">AmazonAPIGatewayPushToCloudWatchLogs</code>, which
                                       contains the following access policy statement:
                                    </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;logs:CreateLogGroup&quot;,
                &quot;logs:CreateLogStream&quot;,
                &quot;logs:DescribeLogGroups&quot;,
                &quot;logs:DescribeLogStreams&quot;,
                &quot;logs:PutLogEvents&quot;,
                &quot;logs:GetLogEvents&quot;,
                &quot;logs:FilterLogEvents&quot;
            ],
            &quot;Resource&quot;: &quot;*&quot;
        }
    ]
}</code></pre><p>The IAM role must also contain the following trust relationship
                                       statement:
                                    </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Sid&quot;: &quot;&quot;,
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;Service&quot;: &quot;apigateway.amazonaws.com&quot;
      },
      &quot;Action&quot;: &quot;sts:AssumeRole&quot;
    }
  ]
}</code></pre><p>For more information about CloudWatch, see the <a href="./AmazonCloudWatch/latest/DeveloperGuide/" target="_blank">Amazon CloudWatch User Guide</a>.
                                    </p>
                                 </div>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>
                              To set the stage-level throttle limit for all of the methods associated with this
                              API, do the following 
                              in the <b>Default Method Throttling</b> section:
                              
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p> For <b>Rate</b>, type the maximum number of stage-level
                                    steady-state requests per second that API Gateway can serve without returning
                                    a <code class="code">429 Too Many Requests</code> response. This stage-level rate
                                    limit must not be more than the <a href="api-gateway-request-throttling.html#apig-request-throttling-account-level-limits">account-level</a> rate limit as specified in <a href="limits.html#api-gateway-execution-service-limits-table">API Gateway Limits for Configuring
                                       and Running an API</a>. 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p> 
                                    For <b>Burst</b>, type the maximum number of stage-level concurrent 
                                    requests that  API Gateway 
                                    can serve without returning a <code class="code">429 Too Many Requests</code> response. 
                                    This stage-level burst must not be more than 
                                    the <a href="api-gateway-request-throttling.html#apig-request-throttling-account-level-limits">account-level</a> burst
                                    limit as specified in <a href="limits.html#api-gateway-execution-service-limits-table">API Gateway Limits for Configuring
                                       and Running an API</a>.
                                    
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p> To override the stage-level throttling for individual methods, expand the
                              stage under the <b>Stages</b> secondary navigation pane, choose a
                              method of interest, and, back in the stage editor, choose <b>Override for
                                 this method</b> for <b>Settings</b>. In the
                              <b>Default Method Throttling</b> area, select appropriate
                              options. 
                           </p>               
                           
                        </li>
                     </ol>
                      
                     
                     
                     
                     <h2 id="how-to-delete-stage">Delete a Stage for an API</h2>   
                     
                     
                     
                     
                     <p>When you no longer need a stage, you can delete it to avoid paying for unused resources.
                        In the following, we explain how to use the API Gateway console to delete a stage
                        .
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Warning</p>
                        <p>
                           Deleting a stage may cause part or all of the corresponding API to be unusable by
                           API callers. 
                           Deleting a stage cannot be undone, but you can recreate the stage and associate it
                           with the same deployment.
                           
                        </p>
                     </div>
                     
                     
                     
                     
                     <h3 id="how-to-delete-stage-console">Delete a Stage with the API Gateway Console</h3>
                     
                     
                     <ol>
                        <li>
                           <p>Sign in to the API Gateway console at <a href="https://console.aws.amazon.com/apigateway" target="_blank">https://console.aws.amazon.com/apigateway</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>In the box that contains the name of the API for the stage, choose
                              <b>Stages</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Stages</b> pane, choose the stage you want to delete,
                              and then choose <b>Delete Stage</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>When prompted, choose <b>Delete</b>.
                           </p>
                           
                        </li>
                     </ol>
                      
                     
                     
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="set-up-stages.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="api-gateway-request-throttling.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Create a New Stage"><a class="pagetoc" href="#how-to-create-stage-console">Create a New Stage</a></li>
                        <li class="pagetoc" name="Update Stage Settings"><a class="pagetoc" href="#how-to-stage-settings">Update Stage Settings</a></li>
                        <li class="pagetoc" name="Delete a Stage for an API"><a class="pagetoc" href="#how-to-delete-stage">Delete a Stage </a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>