<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Set up Request and Response Data Mappings Using the API Gateway Console  - Amazon API Gateway</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="mappings.html" title="Set up
            API Gateway
            Request and Response Data Mappings  ">
      <link rel="prev" href="mappings.html" title="Set up
            API Gateway
            Request and Response Data Mappings  ">
      <link rel="next" href="models-mappings.html" title="Create Models and Mapping Templates for Request and Response Mappings">
      <meta name="description" content="Learn how to use the API Gateway console to set up request and response data mappings.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-method-settings-execution-console.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="how-to-create-api.html">Creating an API in Amazon API Gateway</a> &#xBB; <a href="mappings.html">Set up
                                    API Gateway
                                    Request and Response Data Mappings  </a> &#xBB; <span class="breadcrumb">Set up Request and Response Data Mappings Using the API Gateway Console </span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="how-to-method-settings-execution-console">Set up Request and Response Data Mappings Using the API Gateway Console </h1>
                     <p>To use the API Gateway console to define the API&apos;s integration request/response, follow
                        these instructions.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>These instructions assume you have already completed the steps in <a href="how-to-method-settings-console.html"> Set up an API Integration Request
                              Using the API Gateway Console </a>.
                        </p>
                     </div>
                     <ol>
                        <li>
                           
                           <p>With the method selected in the <b>Resources</b> pane, in the
                              <b>Method Execution</b> pane, choose <b>Integration
                                 Request</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For an HTTP proxy or an AWS service proxy, to associate a path parameter, a
                              query string parameter, or a header parameter defined in the integration request
                              with a corresponding path parameter, query string parameter, or header parameter
                              in the method request of the HTTP proxy or AWS service proxy, do the
                              following:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>Choose the arrow next to <b>URL Path Parameters</b>, <b>URL Query
                                       String Parameters</b>, or <b>HTTP Headers</b> respectively, and
                                    then choose <b>Add path</b>, <b>Add query
                                       string</b>, or <b>Add header</b>,
                                    respectively.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Name</b>, type the name of the path parameter, query
                                    string parameter, or header parameter in the HTTP proxy or AWS service
                                    proxy. 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Mapped from</b>, type the mapping value for the path
                                    parameter, query string parameter, or header parameter. Use one of the
                                    following formats:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                    
                                    
                                    
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p><strong class="userinput"><code>method.request.path.<em class="replaceable"><code>parameter-name</code></em></code></strong>
                                             for a path parameter named
                                             <em class="replaceable"><code>parameter-name</code></em> as defined in the
                                             <b>Method Request</b> page.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><strong class="userinput"><code>method.request.querystring.<em class="replaceable"><code>parameter-name</code></em></code></strong>
                                             for a query string parameter named
                                             <em class="replaceable"><code>parameter-name</code></em> as defined in the
                                             <b>Method Request</b> page.
                                          </p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p><strong class="userinput"><code>method.request.header.<em class="replaceable"><code>parameter-name</code></em></code></strong>
                                             for a header parameter named
                                             <em class="replaceable"><code>parameter-name</code></em> as defined in the
                                             <b>Method Request</b> page.
                                          </p>
                                          
                                          <p>
                                             Alternatively, you can set a literal string value (enclosed by a pair of single quotes)
                                             to an integration header.
                                             
                                             
                                          </p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Create</b>. (To delete a path parameter, query
                                    string parameter, or header parameter, choose
                                    <b>Cancel</b> or <b>Remove</b> next to
                                    the parameter you want to delete.)
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Body Mapping Templates</b> area,
                              choose an option for <b>Request body passthrough</b> to configure
                              how the method request body of an unmapped content type will be passed through the
                              integration request
                              without transformation to the Lambda function, HTTP proxy, or AWS service
                              proxy. There are three options:
                              
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p>Choose <b>When no template matches the request Content-Type header</b>
                                       if you want the method request body to pass through the integration request to the
                                       backend
                                       without transformation when the method request content type does not match any content
                                       types
                                       associated with the mapping templates, as defined in the next step.
                                    </p>
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Note</p>
                                       <p>When calling the API Gateway API, you choose this option by setting <code class="code">WHEN_NO_MATCH</code>
                                          as the <code class="code">passthroughBehavior</code> property value on the <a href="./apigateway/api-reference/resource/integration/" target="_blank">Integration</a>
                                          resource.
                                       </p>
                                    </div>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>Choose <b>When there are no templates defined
                                          (recommended)</b> if you want the method request body to pass
                                       through the integration request to the backend without transformation
                                       when no mapping template is defined in the integration request. If a
                                       template is defined when this option is selected, the method request of
                                       an unmapped content
                                       type will be rejected with an HTTP 415 Unsupported
                                       Media Type response.
                                    </p>
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Note</p>
                                       <p>When calling the API Gateway API, you choose this option by setting <code class="code">WHEN_NO_TEMPLATE</code>
                                          as the <code class="code">passthroughBehavior</code> property value on the <a href="./apigateway/api-reference/resource/integration/" target="_blank">Integration</a>
                                          resource.
                                       </p>
                                    </div>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>Choose <b>Never</b> if you do not want the method
                                       request to pass through when either the method request content type does
                                       not match any content type associated with the mapping templates defined
                                       in the integration request or no mapping template is defined in the
                                       integration request. The method request of an unmapped content
                                       type will be rejected with an HTTP 415 Unsupported
                                       Media Type response. 
                                    </p>
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Note</p>
                                       <p>When calling the API Gateway API, you choose this option by setting <code class="code">NEVER</code>
                                          as the <code class="code">passthroughBehavior</code> property value on the <a href="./apigateway/api-reference/resource/integration/" target="_blank">Integration</a>
                                          resource.
                                       </p>
                                    </div>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                           <p>For more information about the integration passthrough behaviors, see <a href="integration-passthrough-behaviors.html">Integration Passthrough Behaviors</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> To define a mapping template for an incoming request, choose <b>Add
                                 mapping template</b> under <b>Content-Type</b>. Type a
                              content type (e.g.,
                              <strong class="userinput"><code>application/json</code></strong>)
                              in the input text
                              box and then choose the check
                              mark icon to save the input. Then, type the mapping template
                              manually or choose <b>Generate template</b> to create one from a
                              model template. For more information, see <a href="models-mappings.html">Create Models and Mapping Templates for Request and Response Mappings</a>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> You can map an integration response from the
                              backend
                              to a method response of the API returned to the calling app. This includes
                              returning to the client selected response headers from the available ones from
                              the
                              back
                              end, transforming the data format of the
                              backend
                              response payload to an API-specified format. You can specify such mapping by
                              configuring <b>Method Response</b> and <b>Integration
                                 Response</b> from the <b>Method Execution</b> page. 
                           </p>
                           
                           
                           <ol>
                              <li>
                                 
                                 <p>In the <b>Method Execution</b> pane, choose
                                    <b>Integration Response</b>. Choose either the arrow next to
                                    <b>200</b> to specify settings for a 200 HTTP response
                                    code from the method, or choose <b>Add integration
                                       response</b> to specify settings for any other HTTP response
                                    status code from the method.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Lambda error regex</b> (for a Lambda function) or
                                    <b>HTTP status regex</b> (for an HTTP proxy or AWS
                                    service proxy), type a regular expression to specify which Lambda
                                    function error strings (for a Lambda function) or HTTP response status
                                    codes (for an HTTP proxy or AWS service proxy) map to this output
                                    mapping. For example, to map all 2xx HTTP response status codes from an
                                    HTTP proxy to this output mapping, type &quot;<strong class="userinput"><code>2\\d{2}</code></strong>&quot;
                                    for <b>HTTP status regex</b>. To return an error message containing &quot;Invalid Request&quot; from a Lambda function to
                                    a <code class="code">400 Bad Request</code> response, type &quot;<strong class="userinput"><code>.*Invalid request.*</code></strong>&quot; as the <b>Lambda error regex</b> expression. On the other hand, to return <code class="code">400 Bad Request</code> for all unmapped error messages from Lambda, type &quot;<strong class="userinput"><code>(\n|.)+</code></strong>&quot; in <b>Lambda error regex</b>. This last regular expression can be used for the default error response of an API.
                                 </p>
                                 
                                 <div class="aws-note">
                                    <p class="aws-note">Note</p>
                                    <p>The error patterns are matched against the entire string of the
                                       <code class="literal">errorMessage</code> property in the Lambda response, which
                                       is populated by <code class="literal">callback(errorMessage)</code> in
                                       Node.js or by <code class="literal">throw new MyException(errorMessage)</code>
                                       in Java. Also, escaped characters are unescaped before the regular expression is applied.
                                       
                                    </p>
                                    <p>
                                       If you use &apos;.+&apos; as the selection pattern to filter responses, be aware that it may
                                       not match a response containing a newline (&apos;\n&apos;) character.
                                       
                                       
                                       
                                    </p>
                                 </div>
                                 
                              </li>
                              <li>
                                 
                                 <p>If enabled, for <b>Method response status</b>, choose the
                                    HTTP response status code you defined in the <b>Method
                                       Response</b> page.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Header Mappings</b>, for each header you defined for
                                    the HTTP response status code in the <b>Method
                                       Response</b> page, specify a mapping value by choosing
                                    <b>Edit</b>. For <b>Mapping value</b>,
                                    use the format
                                    <strong class="userinput"><code>integration.response.header.<em class="replaceable"><code>header-name</code></em></code></strong>
                                    where <em class="replaceable"><code>header-name</code></em> is the name of a
                                    response header from the backend. For example, to return the backend response&apos;s <code class="code">Date</code>
                                    header as an API method&apos;s response&apos;s <code class="code">Timestamp</code> header, the <b>Response header</b>
                                    column will contain an <b>Timestamp</b> entry and the associated <b>Mapping value</b>
                                    should be set to <b>integration.response.header.Date</b>.
                                    
                                    
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>In the <b>Template Mappings</b> area, next to
                                    <b>Content type</b>, choose <b>Add</b>.
                                    In the <b>Content type</b> box, type the content type of
                                    the data that will be passed from the Lambda function, HTTP proxy, or
                                    AWS service proxy to the method. Choose
                                    <b>Update</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Select <b>Output passthrough</b> if you want the method to
                                    receive, but not modify, the data from the Lambda function, HTTP proxy,
                                    or AWS service proxy.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>If <b>Output passthrough</b> is cleared, for
                                    <b>Output mapping</b>, specify the output mapping
                                    template you want the Lambda function, HTTP proxy, or AWS service proxy
                                    to use to send data to the method. You can either type the mapping
                                    template manually or choose a model from <b>Generate template
                                       from model</b>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Save</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                     </ol>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="mappings.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="models-mappings.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper"></div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>