<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Enable Compression for an API - Amazon API Gateway</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="api-gateway-gzip-compression-decompression.html" title=" Enable Payload Compression for an API ">
      <link rel="prev" href="api-gateway-gzip-compression-decompression.html" title=" Enable Payload Compression for an API ">
      <link rel="next" href="api-gateway-make-request-with-compressed-payload.html" title=" Call an API Method
                with a Compressed Payload ">
      <meta name="description" content="Learn how to enable and disable compression for an API by using the API Gateway console, the AWS CLI, and the API Gateway REST API.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-enable-compression.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="how-to-create-api.html">Creating an API in Amazon API Gateway</a> &#xBB; <a href="api-gateway-gzip-compression-decompression.html"> Enable Payload Compression for an API </a> &#xBB; <span class="breadcrumb">Enable Compression for an API</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="api-gateway-enable-compression">Enable Compression for an API</h1>
                     <p>You can enable
                        compression for an API using the API Gateway console, AWS CLI/SDK, or API Gateway
                        REST API. The steps
                        are detailed in the following sections.
                        
                     </p>
                     <p>For
                        an existing API, you must deploy the API after enabling the compression in order for
                        the
                        change to take effect. For a new API, you can deploy the API after the API setup is
                        complete.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#api-gateway-enable-compression-console">Enable Compression for an
                                 API Using the API Gateway Console</a></li>
                           <li><a href="#api-gateway-enable-compression-cli">Enable Compression for an API
                                 Using AWS CLI</a></li>
                           <li><a href="#api-gateway-enable-compression-api">Enable Compression for an API
                                 Using the API Gateway REST API</a></li>
                           <li><a href="#api-gateway-supported-content-encodings">Content Codings Supported
                                 by API Gateway</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="api-gateway-enable-compression-console">Enable Compression for an
                        API Using the API Gateway Console
                     </h2>
                     
                     <p>The
                        following procedure describes how to enable payload compression for an API. 
                     </p>
                     
                     <p class="title"><b>To enable payload compression by using the API Gateway console</b></p>
                     <ol>
                        <li>
                           
                           <p>Sign in to the API Gateway console.</p>
                           
                        </li>
                        <li>
                           
                           <p>Choose an existing API or create a new one.</p>
                           
                        </li>
                        <li>
                           
                           <p>In the primary navigation pane, choose <b>Settings</b> under
                              the API you chose or the one you created.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Under the <b>Content Encoding</b> section in the
                              <b>Settings</b> pane, select the <b>Content
                                 Encoding enabled</b> option to enable payload compression. Type a
                              number for the minimum compression size (in bytes) next to <b>Minimum
                                 body size required for compression</b>. To disable the
                              compression, clear the <b>Content Encoding enabled</b>
                              option.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Save Changes</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="api-gateway-enable-compression-cli">Enable Compression for an API
                        Using AWS CLI
                     </h2>
                     
                     
                     <p>To use the AWS CLI to create a new API and enable compression, call the <a href="./cli/latest/reference/apigateway/create-rest-api.html" target="_blank"><code class="code">create-rest-api</code></a> command as follows:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws apigateway create-rest-api \
    --name &quot;My test API&quot; \
    --minimumCompressionSize 0</code></pre>
                     <p>To use the AWS CLI to enable compression on an existing API, call the <a href="./cli/latest/reference/apigateway/update-rest-api.html" target="_blank"><code class="code">update-rest-api</code></a> command as follows: 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws apigateway update-rest-api \
    --rest-api-id 1234567890 \
    --patch-operations op=replace,path=/minimumCompressionSize,value=0</code></pre>
                     <p>The <code class="code">minimumCompressionSize</code> property has a non-negative integer value between 0 and 10485760 (10M bytes). It
                        measures the compression threshold. If the payload size is smaller than this value,
                        compression or decompression are not applied on the payload. Setting it to zero allows
                        compression for any payload size.
                     </p>
                     
                     <p>To use the AWS CLI to disable compression, call the <a href="./cli/latest/reference/apigateway/update-rest-api.html" target="_blank"><code class="code">update-rest-api</code></a> command as follows: 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws apigateway update-rest-api \
    --rest-api-id 1234567890 \
    --patch-operations op=replace,path=/minimumCompressionSize,value=</code></pre>
                     <p>You can also set <code class="code">value</code> to an empty string <code class="code">&quot;&quot;</code> or omit the <code class="code">value</code> property altogether in the preceding call.
                     </p>
                     
                     
                     <h2 id="api-gateway-enable-compression-api">Enable Compression for an API
                        Using the API Gateway REST API
                     </h2>
                     
                     
                     <p>To use the <a href="./apigateway/api-reference/" target="_blank">API Gateway REST API</a> to enable compression
                        on a new API, call <a href="./apigateway/api-reference/link-relation/restapi-create/" target="_blank"><code class="code">restapi:create</code></a> as follows:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">POST /restapis
Host: apigateway.{region}.amazonaws.com 
Authorization: apigateway.{region}.amazonaws.com
Content-Type: application/json
Content-Length: ...

{
   &quot;name&quot; : &quot;My test API&quot;,
   &quot;minimumCompressionSize&quot;: 0
}</code></pre>
                     <p>To use the <a href="./apigateway/api-reference/" target="_blank">API Gateway REST API</a> to enable compression
                        on an existing API, call <a href="./apigateway/api-reference/link-relation/restapi-update/" target="_blank"><code class="code">restapi:update</code></a> as follows:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">PATCH /restapis/{restapi_id}
Host: apigateway.{region}.amazonaws.com 
Authorization: ...
Content-Type: application/json
Content-Length: ...

{
   &quot;patchOperations&quot; : [ {
      &quot;op&quot; : &quot;replace&quot;,    
      &quot;path&quot; : &quot;/minimumCompressionSize&quot;,
      &quot;value&quot; : &quot;0&quot;
   } ]
}</code></pre>
                     <p>The <code class="code">minimumCompressionSize</code> property has a non-negative integer value between 0 and 10485760 (10M bytes). It
                        measures the compression threshold. If the payload size is smaller than this value,
                        compression or decompression are not applied on the payload. Setting it to zero allows
                        compression for any payload size.
                     </p>
                     
                     <p>To disable compression by using the API Gateway REST API, call
                        <code class="code">restapi:update</code> as follows:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">PATCH /restapis/{restapi_id}
Host: apigateway.{region}.amazonaws.com 
Authorization: ...
Content-Type: application/json
Content-Length: ...

{
   &quot;patchOperations&quot; : [ {
      &quot;op&quot; : &quot;replace&quot;,    
      &quot;path&quot; : &quot;/minimumCompressionSize&quot;
   } ]
}</code></pre>
                     <p>You can also set <code class="code">value</code> to an empty string <code class="code">&quot;&quot;</code> or omit the <code class="code">value</code> property altogether in the preceding call.
                     </p>
                     
                     
                     <h2 id="api-gateway-supported-content-encodings">Content Codings Supported
                        by API Gateway
                     </h2>
                     
                     <p>API Gateway supports the following content codings:</p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><code class="code">deflate</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">gzip</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">identity</code></p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>API Gateway also supports the following <code class="code">Accept-Encoding</code> header format,
                        according to the <a href="https://tools.ietf.org/html/rfc7231#section-5.3.4" target="_blank">RFC
                           7231</a> specification:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><code class="code">Accept-Encoding:deflate,gzip</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">Accept-Encoding:</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">Accept-Encoding:*</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">Accept-Encoding:deflate;q=0.5,gzip=1.0</code></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><code class="code">Accept-Encoding:gzip;q=1.0,identity;q=0.5,*;q=0</code></p>
                              
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="api-gateway-gzip-compression-decompression.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="api-gateway-make-request-with-compressed-payload.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Enable Compression for an
                    API Using the API Gateway Console"><a class="pagetoc" href="#api-gateway-enable-compression-console">Enable Compression for an
                              API Using the API Gateway Console</a></li>
                        <li class="pagetoc" name="Enable Compression for an API
                    Using AWS CLI"><a class="pagetoc" href="#api-gateway-enable-compression-cli">Enable Compression for an API
                              Using AWS CLI</a></li>
                        <li class="pagetoc" name="Enable Compression for an API
                    Using the API Gateway REST API"><a class="pagetoc" href="#api-gateway-enable-compression-api">Enable Compression for an API
                              Using the API Gateway REST API</a></li>
                        <li class="pagetoc" name="Content Codings Supported
                    by API Gateway"><a class="pagetoc" href="#api-gateway-supported-content-encodings">Content Codings Supported
                              by API Gateway</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>