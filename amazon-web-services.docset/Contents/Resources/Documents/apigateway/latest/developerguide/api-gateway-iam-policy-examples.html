<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>IAM Policy Examples for Managing
         API Gateway APIs - Amazon API Gateway
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="permissions.html" title="Control Access to an API with IAM Permissions">
      <link rel="prev" href="api-gateway-control-access-using-iam-policies-to-invoke-api.html" title=" Control
                Access for Invoking an API">
      <link rel="next" href="api-gateway-iam-policy-examples-for-api-execution.html" title="IAM Policy
                Examples for API Execution Permissions">
      <meta name="description" content="The following example policy documents shows various use cases to set access permissions for managing API resources in API Gateway. For permissions model and other background information, see .">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-iam-policy-examples.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="apigateway-control-access-to-api.html"> Controlling Access to an API in
                                    			API Gateway</a> &#xBB; <a href="permissions.html">Control Access to an API with IAM Permissions</a> &#xBB; <span class="breadcrumb">IAM Policy Examples for Managing
                                    API Gateway APIs</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="api-gateway-iam-policy-examples">IAM Policy Examples for Managing
                        API Gateway APIs
                     </h1>
                     <p>The following example policy documents shows various use cases to set access
                        permissions for managing API resources in API Gateway. For permissions model and other
                        background information, see <a href="api-gateway-control-access-using-iam-policies-to-create-and-manage-api.html#api-gateway-control-access-using-iam-policies"> Control Who Can
                           Create and Manage an API Gateway API with IAM Policies </a>. 
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#api-gateway-policy-example-apigateway-general">Simple Read
                                 Permissions</a></li>
                           <li><a href="#api-gateway-policy-example-apigateway-readonly">Read-Only
                                 Permissions on any APIs</a></li>
                           <li><a href="#api-gateway-policy-example-apigateway-full-access">Full Access
                                 Permissions for any API Gateway Resources</a></li>
                           <li><a href="#api-gateway-policy-example-apigateway-stage-full-access">Full-Access Permissions for Managing API Stages</a></li>
                           <li><a href="#api-gateway-policy-example-apigateway-blacklist-user-for-delete">Block Specified Users from Deleting any API Resources</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="api-gateway-policy-example-apigateway-general">Simple Read
                        Permissions
                     </h2>
                     
                     
                     <p>The following policy statement gives the user permission to get information about
                        all of the resources, methods, models, and stages in the API with the identifier of
                        <code class="literal">a123456789</code> in the AWS region of
                        us-east-1:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;apigateway:GET&quot;
      ],
      &quot;Resource&quot;: [
        &quot;arn:aws:apigateway:us-east-1::/restapis/a123456789/*&quot;
      ]
    }
  ]
}</code></pre>
                     <p>The following example policy statement gives the IAM user permission to list
                        information for all resources, methods, models, and stages in any region. The user
                        also has permission to perform all available API Gateway actions for the API with
                        the
                        identifier of <code class="literal">a123456789</code> in the AWS region of
                        us-east-1:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;apigateway:GET&quot;
      ],
      &quot;Resource&quot;: [
        &quot;arn:aws:apigateway:*::/restapis/*&quot;
      ]
    },
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Action&quot;: [
        &quot;apigateway:*&quot;
      ],
      &quot;Resource&quot;: [
        &quot;arn:aws:apigateway:us-east-1::/restapis/<code class="literal" copy="true">a123456789</code>/*&quot;
      ]
    }
  ]
}</code></pre>
                     
                     
                     <h2 id="api-gateway-policy-example-apigateway-readonly">Read-Only
                        Permissions on any APIs
                     </h2>
                     
                     
                     
                     <p>The following policy document will permit attached entities (users, groups or
                        roles) to retrieve any of the APIs of the caller&apos;s AWS account. This includes any
                        of the child resources of an API, such as method, integration, etc.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Sid&quot;: &quot;Stmt1467321237000&quot;,
            &quot;Effect&quot;: &quot;Deny&quot;,
            &quot;Action&quot;: [
                &quot;apigateway:POST&quot;,
                &quot;apigateway:PUT&quot;,
                &quot;apigateway:PATCH&quot;,
                &quot;apigateway:DELETE&quot;
            ],
            &quot;Resource&quot;: [
                &quot;arn:aws:apigateway:us-east-1::/*&quot;
            ]
        },
        {
            &quot;Sid&quot;: &quot;Stmt1467321341000&quot;,
            &quot;Effect&quot;: &quot;Deny&quot;,
            &quot;Action&quot;: [
                &quot;apigateway:GET&quot;,
                &quot;apigateway:HEAD&quot;,
                &quot;apigateway:OPTIONS&quot;
            ],
            &quot;Resource&quot;: [
                &quot;arn:aws:apigateway:us-east-1::/&quot;,
                &quot;arn:aws:apigateway:us-east-1::/account&quot;,
                &quot;arn:aws:apigateway:us-east-1::/clientcertificates&quot;,
                &quot;arn:aws:apigateway:us-east-1::/domainnames&quot;,
                &quot;arn:aws:apigateway:us-east-1::/apikeys&quot;
            ]
        },
        {
            &quot;Sid&quot;: &quot;Stmt1467321344000&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;apigateway:GET&quot;,
                &quot;apigateway:HEAD&quot;,
                &quot;apigateway:OPTIONS&quot;
            ],
            &quot;Resource&quot;: [
                &quot;arn:aws:apigateway:us-east-1::/restapis/*&quot;
            ]
        }
    ]
}</code></pre>
                     <p>The first <code class="code">Deny</code> statement explicitly prohibits any calls of
                        <code class="code">POST</code>, <code class="code">PUT</code>, <code class="code">PATCH</code>, <code class="code">DELETE</code> on
                        any resources in API Gateway. This ensures that such permissions will not be overridden
                        by
                        other policy documents also attached to the caller. The second <code class="code">Deny</code>
                        statement blocks the caller to query the root (<code class="code">/</code>) resource, account
                        information (<code class="code">/account</code>), client certificates
                        (<code class="code">/clientcertificates</code>), custom domain names
                        (<code class="code">/domainnames</code>) and API keys (<code class="code">/apikeys</code>. Together, the
                        three statements ensure that the caller can only query API-related resources. This
                        can be useful in API testing when you do not want the tester to modify any of the
                        code.
                     </p>
                     
                     <p>To restrict the above read-only access to specified APIs, replace the
                        <code class="code">Resource</code> property of <code class="code">Allow</code> statement by the
                        following:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">&quot;Resource&quot;:  [&quot;arn:aws:apigateway:us-east-1::/restapis/<em class="replaceable"><code>restapi_id1</code></em>/*&quot;, &quot;arn:aws:apigateway:us-east-1::/restapis/<em class="replaceable"><code>restapi_id2</code></em>/*&quot;]</code></pre>
                     
                     <h2 id="api-gateway-policy-example-apigateway-full-access">Full Access
                        Permissions for any API Gateway Resources
                     </h2>
                     
                     
                     <p>The following example policy document grants the full access to any of the API Gateway
                        resource of the AWS account. 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Sid&quot;: &quot;Stmt1467321765000&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;apigateway:*&quot;
            ],
            &quot;Resource&quot;: [
                &quot;*&quot;
            ]
        }
    ]
}</code></pre>
                     <p>In general, you should refrain from using such a broad and open access policy. It
                        may be necessary to do so for your API development core team so that they can
                        create, deploy, update, and delete any API Gateway resources.
                     </p>
                     
                     
                     <h2 id="api-gateway-policy-example-apigateway-stage-full-access">Full-Access Permissions for Managing API Stages</h2>
                     
                     
                     <p>The following example policy documents grants full-access permissions on Stage
                        related resources of any API in the caller&apos;s AWS account.
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;apigateway:*&quot;
            ],
            &quot;Resource&quot;: [
                &quot;arn:aws:apigateway:us-east-1::/restapis/*/stages&quot;,
                &quot;arn:aws:apigateway:us-east-1::/restapis/*/stages/*&quot;
            ]
        }
    ]
}</code></pre>
                     <p>The above policy document grants full access permissions only to the
                        <code class="code">stages</code> collection and any of the contained <code class="code">stage</code>
                        resources, provided that no other policies granting more accesses have been attached
                        to the caller. Otherwise, you must explicitly deny all the other accesses.
                     </p>
                     
                     <p>Using the above policy, caller must find out the REST API&apos;s identifier beforehand
                        because the user cannot call <code class="code">GET /respais</code> to query the available APIs.
                        Also, if <code class="code">arn:aws:apigateway:us-east-1::/restapis/*/stages</code> is not
                        specified in the <code class="code">Resource</code> list, the Stages resource becomes
                        inaccessible. In this case, the caller will not be able to create a stage nor get
                        the existing stages, although he or she can still view, update or delete a stage,
                        provided that he stage&apos;s name is known.
                     </p>
                     
                     <p>To grant permissions for a specific API&apos;s stages, simply replace the
                        <code class="code">restapis/*</code> portion of the <code class="code">Resource</code> specifications by
                        <code class="code">restapis/<em class="replaceable"><code>restapi_id</code></em></code>, where
                        <em class="replaceable"><code>restapi_id</code></em> is the identifier of the API of
                        interest.
                     </p>
                     
                     
                     <h2 id="api-gateway-policy-example-apigateway-blacklist-user-for-delete">Block Specified Users from Deleting any API Resources</h2>
                     
                     
                     <p>The following example IAM policy document blocks a specified user from deleting
                        any API resources in API Gateway.
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Sid&quot;: &quot;Stmt1467331998000&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;apigateway:GET&quot;,
                &quot;apigateway:HEAD&quot;,
                &quot;apigateway:OPTIONS&quot;,
                &quot;apigateway:PATCH&quot;,
                &quot;apigateway:POST&quot;,
                &quot;apigateway:PUT&quot;
            ],
            &quot;Resource&quot;: [
                &quot;arn:aws:apigateway:us-east-1::/restapis/*&quot;
            ]
        },
        {
            &quot;Sid&quot;: &quot;Stmt1467332141000&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;apigateway:DELETE&quot;
            ],
            &quot;Condition&quot;: {
                &quot;StringNotLike&quot;: {
                    &quot;aws:username&quot;: &quot;johndoe&quot;
                }
            },
            &quot;Resource&quot;: [
                &quot;arn:aws:apigateway:us-east-1::/restapis/*&quot;
            ]
        }
    ]
}</code></pre>
                     <p>This IAM policy grants full access permission to create, deploy, update and
                        delete API for attached users, groups or roles, except for the specified user
                        (<code class="code">johndoe</code>), who cannot delete any API resources. It assumes that no
                        other policy document granting <code class="code">Allow</code> permissions on the root, API keys,
                        client certificates or custom domain names has been attached to the caller. 
                     </p>
                     
                     <p>To block the specified user from deleting specific API Gateway resources, e.g., a
                        specific API or an API&apos;s resources, replace the <code class="code">Resource</code> specification
                        above by this: 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">&quot;Resource&quot;: [&quot;arn:aws:apigateway:us-east-1::/restapis/<em class="replaceable"><code>restapi_id_1</code></em>&quot;, &quot;arn:aws:apigateway:us-east-1::/restapis/<em class="replaceable"><code>restapi_id_2</code></em>/resources&quot;]</code></pre>
                     </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="api-gateway-control-access-using-iam-policies-to-invoke-api.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="api-gateway-iam-policy-examples-for-api-execution.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Simple Read
                    Permissions"><a class="pagetoc" href="#api-gateway-policy-example-apigateway-general">Simple Read
                              Permissions</a></li>
                        <li class="pagetoc" name="Read-Only
                    Permissions on any APIs"><a class="pagetoc" href="#api-gateway-policy-example-apigateway-readonly">Read-Only
                              Permissions on any APIs</a></li>
                        <li class="pagetoc" name="Full Access
                    Permissions for any API Gateway Resources"><a class="pagetoc" href="#api-gateway-policy-example-apigateway-full-access">Full Access
                              Permissions for any API Gateway Resources</a></li>
                        <li class="pagetoc" name="Full-Access Permissions for Managing API Stages"><a class="pagetoc" href="#api-gateway-policy-example-apigateway-stage-full-access">Full-Access Permissions for Managing API Stages</a></li>
                        <li class="pagetoc" name="Block Specified Users from Deleting any API Resources"><a class="pagetoc" href="#api-gateway-policy-example-apigateway-blacklist-user-for-delete">Block Specified Users from Deleting any API Resources</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>