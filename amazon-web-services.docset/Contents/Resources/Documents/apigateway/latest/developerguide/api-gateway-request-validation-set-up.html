<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Set up Basic Request Validation in
         API Gateway - Amazon API Gateway
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="api-gateway-method-request-validation.html" title="Enable Request Validation in API Gateway">
      <link rel="prev" href="api-gateway-method-request-validation.html" title="Enable Request Validation in API Gateway">
      <link rel="next" href="api-gateway-request-validation-test.html" title="Test Basic Request Validation in API Gateway">
      <meta name="description" content="You can set up request validators in an API&apos;s Swagger definition file and then import the Swagger definitions into API Gateway. You can also set them up in the API Gateway console or by calling the API Gateway REST API, AWS CLI, or one of the AWS SDKs. Here, we show how to do this with a Swagger file, in the console, and using the API Gateway REST API.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-request-validation-set-up.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="how-to-create-api.html">Creating an API in Amazon API Gateway</a> &#xBB; <a href="api-gateway-method-request-validation.html">Enable Request Validation in API Gateway</a> &#xBB; <span class="breadcrumb">Set up Basic Request Validation in
                                    API Gateway</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="api-gateway-request-validation-set-up">Set up Basic Request Validation in
                        API Gateway
                     </h1>
                     <p> You can set up request validators in an API&apos;s Swagger definition file and then import
                        the Swagger definitions into API Gateway. You can also set them up in the API Gateway
                        console or by
                        calling the API Gateway REST API, AWS CLI, or one of the AWS SDKs. Here, we show how
                        to do
                        this with a Swagger file, in the console, and using the API Gateway REST API. 
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#api-gateway-request-validation-setup-importing-swagger">Set up Basic
                                 Request Validation by Importing API Swagger Definition</a></li>
                           <li><a href="#api-gateway-request-validation-setup-using-rest-api">Set up Request
                                 Validators Using the API Gateway REST API</a></li>
                           <li><a href="#api-gateway-request-validation-setup-in-console">Set up Basic Request
                                 Validation Using the API Gateway Console</a></li>
                        </ul>
                     </div>
                     <h2 id="api-gateway-request-validation-setup-importing-swagger">Set up Basic
                        Request Validation by Importing API Swagger Definition
                     </h2>
                     
                     
                     <p>The following steps describe how to enable basic request validation by importing a
                        Swagger file.
                     </p>
                     
                     <p class="title"><b>To enable request validation by importing a Swagger file into API Gateway</b></p>
                     <ol>
                        <li>
                           
                           <p> Declare request validators in Swagger by specifying a set of the <a href="api-gateway-swagger-extensions-request-validators.requestValidator.html">x-amazon-apigateway-request-validators.requestValidator Object</a> objects in the <a href="api-gateway-swagger-extensions-request-validators.html">x-amazon-apigateway-request-validators Object</a> map
                              at the API level. For example, the <a href="api-gateway-request-validation-sample-api-swagger.html">sample API
                                 Swagger file</a> contains the
                              <code class="literal">x-amazon-apigateway-request-validators</code> map, with the
                              validators&apos; names as the keys. 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
      &quot;swagger&quot;: &quot;2.0&quot;,
      &quot;info&quot;: {
        &quot;title&quot;: &#x201C;ReqValidation Sample&quot;,
        &quot;version&quot;: &quot;1.0.0&quot;
      },
      &quot;schemes&quot;: [
        &quot;https&quot;
      ],
      &quot;basePath&quot;: &quot;/v1&quot;,
      &quot;produces&quot;: [
        &quot;application/json&quot;
      ],
      &quot;x-amazon-apigateway-request-validators&quot; : {
        &quot;all&quot; : {
          &quot;validateRequestBody&quot; : true,
          &quot;validateRequestParameters&quot; : true
        },
        &quot;params-only&quot; : {
          &quot;validateRequestBody&quot; : false,
          &quot;validateRequestParameters&quot; : true
        }
      },
      ...
}</code></pre>
                           <p>You select a validator&apos;s name when enabling the validator on the API or on
                              a method, as shown in the next step. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> To enable a request validator on all methods of an API, specify an <a href="api-gateway-swagger-extensions-request-validator.html">x-amazon-apigateway-request-validator Property</a>
                              property at the API level of the API Swagger definition file. To enable a
                              request validator on an individual method, specify the
                              <code class="literal">x-amazon-apigateway-request-validator</code> property at the
                              method level. For example, the following
                              <code class="code">x-amazon-apigateway-request-validator</code> property enables the
                              <code class="code">params-only</code> validator on all API methods, unless otherwise
                              overridden. 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
      &quot;swagger&quot;: &quot;2.0&quot;,
      &quot;info&quot;: {
        &quot;title&quot;: &#x201C;ReqValidation Sample&quot;,
        &quot;version&quot;: &quot;1.0.0&quot;
      },
      &quot;schemes&quot;: [
        &quot;https&quot;
      ],
      &quot;basePath&quot;: &quot;/v1&quot;,
      &quot;produces&quot;: [
        &quot;application/json&quot;
      ],
      ...
      &quot;x-amazon-apigateway-request-validator&quot; : &quot;params-only&quot;,
      ...
}</code></pre>
                           <p> To enable a request validator on an individual method, specify the
                              <code class="code">x-amazon-apigateway-request-validator</code> property at the
                              method level. For example, the following
                              <code class="code">x-amazon-apigateway-request-validator</code> property enables the
                              <code class="code">all</code> validator on the <code class="code">POST /validation</code> method.
                              This overrides the <code class="code">params-only</code> validator that is inherited from
                              the API. 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
      &quot;swagger&quot;: &quot;2.0&quot;,
      &quot;info&quot;: {
        &quot;title&quot;: &#x201C;ReqValidation Sample&quot;,
        &quot;version&quot;: &quot;1.0.0&quot;
      },
      &quot;schemes&quot;: [
        &quot;https&quot;
      ],
      &quot;basePath&quot;: &quot;/v1&quot;,
      &quot;produces&quot;: [
        &quot;application/json&quot;
      ],
      ...
      &quot;paths&quot;: {
        &quot;/validation&quot;: {
          &quot;post&quot;: {
            &quot;x-amazon-apigateway-request-validator&quot; : &quot;all&quot;,
            ...
          },
          ...
        }
      }
      ...
}</code></pre>
                           
                           </li>
                        <li>
                           
                           <p> In API Gateway, create the API with request validators enabled by importing
                              this <a href="api-gateway-request-validation-sample-api-swagger.html">Sample API Swagger Definition</a>: 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">POST /restapis?mode=import&amp;failonwarning=true HTTP/1.1
Content-Type: application/json
Host: apigateway.us-east-1.amazonaws.com
X-Amz-Date: 20170306T234936Z
Authorization: AWS4-HMAC-SHA256 Credential={access_key_ID}/20170306/us-east-1/apigateway/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date, Signature={sig4_hash}

<em class="replaceable"><code>Copy the JSON object from this <a href="api-gateway-request-validation-sample-api-swagger.html">API Swagger Definition</a> and paste it here.</code></em></code></pre>
                           </li>
                        <li>
                           
                           <p> Deploy the newly created API (<code class="code">fjd6crafxc</code>) to a specified
                              stage (<code class="code">testStage</code>). 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">POST /restapis/fjd6crafxc/deployments HTTP/1.1
Content-Type: application/json
Host: apigateway.us-east-1.amazonaws.com
X-Amz-Date: 20170306T234936Z
Authorization: AWS4-HMAC-SHA256 Credential={access_key_ID}/20170306/us-east-1/apigateway/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date, Signature={sig4_hash}

{
    &quot;stageName&quot; : &quot;testStage&quot;,
    &quot;stageDescription&quot; : &quot;Test stage&quot;,
    &quot;description&quot; : &quot;First deployment&quot;,
    &quot;cacheClusterEnabled&quot; : &quot;false&quot;
}</code></pre>
                           </li>
                     </ol>
                     
                     <p> For instructions on how to test the request validation using the API Gateway REST
                        API,
                        see <a href="api-gateway-request-validation-test.html#api-gateway-request-validation-test-using-rest-api">Test Basic Request Validation Using the API Gateway REST API</a>. For
                        instructions on how to test using the API Gateway console, see <a href="api-gateway-request-validation-test.html#api-gateway-request-validation-test-in-console">Test Basic Request Validation Using the API Gateway Console</a>. 
                     </p>
                     
                     <h2 id="api-gateway-request-validation-setup-using-rest-api">Set up Request
                        Validators Using the API Gateway REST API
                     </h2>
                     
                     
                     <p> In the API Gateway REST API, a request validator is represented by a <a href="./apigateway/api-reference/resource/request-validator/" target="_blank">RequestValidator</a>
                        resource. To have an API support the same request validators as the <a href="api-gateway-request-validation-sample-api-swagger.html">Sample API</a>,
                        add to the <a href="./apigateway/api-reference/resource/request-validators/" target="_blank">RequestValidators</a> collection a parameters-only validator with
                        <code class="code">params-only</code> as the
                        key,
                        and add a full validator with <code class="code">all</code> as its key. 
                     </p>
                     
                     <p class="title"><b>To enable the basic request validation using the API Gateway REST API</b></p>
                     <p> We assume that you have an API similar to the <a href="api-gateway-request-validation-sample-api-swagger.html">sample
                           API</a>, but have not set up the request validators. If your API already
                        has request validators enabled, call the appropriate
                        <code class="code">requestvalidator:update</code> or <code class="code">method:put</code> action
                        instead of <code class="code">requestvalidator:create</code> or <code class="code">method:put</code>. 
                     </p>
                     <ol>
                        <li>
                           
                           <p>
                              To set up the <code class="code">params-only</code> request validator, call the <a href="./apigateway/api-reference/link-relation/requestvalidator-create/" target="_blank">requestvalidator:create</a> action as follows:
                              
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">POST /restapis/<em class="replaceable"><code>restapi-id</code></em>/requestvalidators HTTP/1.1
Content-Type: application/json
Host: apigateway.<em class="replaceable"><code>region</code></em>.amazonaws.com
X-Amz-Date: 20170223T172652Z
Authorization: AWS4-HMAC-SHA256 Credential={access_key_ID}/20170223/<em class="replaceable"><code>region</code></em>/apigateway/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature={sig4_hash}

{
  &quot;name&quot; : &quot;params-only&quot;,
  &quot;validateRequestBody&quot; : &quot;false&quot;,
  &quot;validateRequestParameters&quot; : &quot;true&quot;
}</code></pre>
                           </li>
                        <li>
                           
                           <p>
                              To set up the <code class="code">all</code> request validator, call the <code class="code">requestvalidator:create</code> action as follows:
                              
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">POST /restapis/<em class="replaceable"><code>restapi-id</code></em>/requestvalidators HTTP/1.1
Content-Type: application/json
Host: apigateway.<em class="replaceable"><code>region</code></em>.amazonaws.com
X-Amz-Date: 20170223T172652Z
Authorization: AWS4-HMAC-SHA256 Credential={access_key_ID}/20170223/<em class="replaceable"><code>region</code></em>/apigateway/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature={sig4_hash}

{
  &quot;name&quot; : &quot;all&quot;,
  &quot;validateRequestBody&quot; : &quot;true&quot;,
  &quot;validateRequestParameters&quot; : &quot;true&quot;
}</code></pre>
                           <p> If the preceding validator keys already exist in the
                              <code class="code">RequestValidators</code> map, call the <a href="./apigateway/api-reference/link-relation/requestvalidator-update/" target="_blank">requestvalidator:update</a> action instead to reset the validation
                              rules. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> 
                              To apply the <code class="code">all</code> request validator to the <code class="code">POST</code> method, call <a href="./apigateway/api-reference/link-relation/method-put/" target="_blank">method:put</a> to enable the specified validator (as identified by the <a href="./apigateway/api-reference/link-relation/method-put/#requestValidatorId" target="_blank">requestValidatorId</a> property) or call <a href="./apigateway/api-reference/link-relation/method-update/" target="_blank">method:update</a> to update the enabled validator.
                              
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">PUT /restapis/<em class="replaceable"><code>restapi-id</code></em>/resources/<em class="replaceable"><code>resource-id</code></em>/methods/POST HTTP/1.1
Content-Type: application/json
Host: apigateway.<em class="replaceable"><code>region</code></em>.amazonaws.com
X-Amz-Date: 20170223T172652Z
Authorization: AWS4-HMAC-SHA256 Credential={access_key_ID}/20170223/<em class="replaceable"><code>region</code></em>/apigateway/aws4_request, SignedHeaders=content-type;host;x-amz-date, Signature={sig4_hash}

{
  &quot;authorizationType&quot; : &quot;NONE&quot;,
  ...,
  &quot;requestValidatorId&quot; : &quot;all&quot;
}</code></pre>
                           </li>
                     </ol>
                     
                     <h2 id="api-gateway-request-validation-setup-in-console">Set up Basic Request
                        Validation Using the API Gateway Console
                     </h2>
                     
                     
                     <p>
                        The API Gateway console lets you set up the basic request validation on a method using
                        one of the three validators:
                        
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><b>Validate body</b>: This is the body-only validator.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>Validate query string parameters and headers</b>: This is the parameters-only validator.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>Validate body, query string parameters, and headers</b>: This validator is for both body and parameters validation.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>
                        When you choose one of the above validators to enable it on an API method, the API
                        Gateway console will add the validator to the API&apos;s <a href="./apigateway/api-reference/resource/request-validators/" target="_blank">RequestValidators</a> map, if the validator has not already been added to the validators map of the API.
                        
                        
                     </p>
                     
                     
                     <p class="title"><b>To enable a request validator on a method</b></p>
                     <ol>
                        <li>
                           <p>Sign in to the API Gateway console, if not already logged in.</p>
                        </li>
                        <li>
                           <p>Create a new or choose an existing API.</p>
                        </li>
                        <li>
                           <p>Create a new or choose an existing resource of the API.</p>
                        </li>
                        <li>
                           <p>Create a new or choose an existing method the resource.</p>
                        </li>
                        <li>
                           <p>Choose <b>Method Request</b>.
                           </p>
                        </li>
                        <li>
                           
                           <p>Choose the pencil icon of <b>Request Validator</b> under <b>Settings</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <code class="literal">Validate body</code>, <code class="literal">Validate query string parameters and headers</code> or <code class="literal">Validate body, query string parameters, and headers</code> from the <b>Request Validator</b>
                              drop-down list and then choose the check mark icon to save your choice.
                              
                           </p>
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/request-validator-choose-to-enable.png" alt="
                             
                        " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           
                        </li>
                     </ol>
                     
                     <p>To test and use the request validator in the console, follow the instructions  in
                        <a href="api-gateway-request-validation-test.html#api-gateway-request-validation-test-in-console">Test Basic Request Validation Using the API Gateway Console</a>.
                     </p>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="api-gateway-method-request-validation.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="api-gateway-request-validation-test.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Set up Basic
                Request Validation by Importing API Swagger Definition"><a class="pagetoc" href="#api-gateway-request-validation-setup-importing-swagger">Set up Basic
                              Request Validation by Importing API Swagger Definition</a></li>
                        <li class="pagetoc" name="Set up Request
                Validators Using the API Gateway REST API"><a class="pagetoc" href="#api-gateway-request-validation-setup-using-rest-api">Set up Request
                              Validators Using the API Gateway REST API</a></li>
                        <li class="pagetoc" name="Set up Basic Request
                Validation Using the API Gateway Console"><a class="pagetoc" href="#api-gateway-request-validation-setup-in-console">Set up Basic Request
                              Validation Using the API Gateway Console</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>