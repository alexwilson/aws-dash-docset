<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Build an API with HTTP Custom
         Integration - Amazon API Gateway
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="getting-started-http-integrations.html" title=" 
            Build an API Gateway API with HTTP Integrations 
        ">
      <link rel="prev" href="api-gateway-create-api-as-simple-proxy-for-http.html" title="Build an API with HTTP
            Proxy Integration ">
      <link rel="next" href="getting-started-with-private-integration.html" title="Build an API with API Gateway Private Integration">
      <meta name="description" content="Learn how to create an API Gateway API with the HTTP custom integration using the API Gateway console.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-create-api-step-by-step.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="getting-started.html">Getting Started with Amazon API Gateway</a> &#xBB; <a href="getting-started-http-integrations.html"> 
                                    Build an API Gateway API with HTTP Integrations 
                                    </a> &#xBB; <span class="breadcrumb">Build an API with HTTP Custom
                                    Integration</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="api-gateway-create-api-step-by-step">Build an API with HTTP Custom
                        Integration
                     </h1>
                     <p>
                        In this tutorial,
                        you
                        create an API from
                        ground up using the Amazon API Gateway console. You
                        can think
                        of the console as an API design studio
                        and use it
                        to scope the API features, to experiment with its behaviors, to build the
                        API, and to deploy your API in stages. 
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#api-gateway-create-resource-and-methods">Create the API with HTTP
                                 Custom Integration</a></li>
                           <li><a href="#getting-started-mappings">Map Request Parameters for an API Gateway API</a></li>
                           <li><a href="#getting-started-models">Map Response Payload</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="api-gateway-create-resource-and-methods">Create the API with HTTP
                        Custom Integration
                     </h2>
                     
                     <p> This section walks you through the steps to create resources, expose methods on a
                        resource, configure a method to achieve the desired API behaviors, and to test and
                        deploy the API.
                     </p>
                     
                     <ol>
                        <li>
                           
                           <p> From <b>Create new API</b>, select <b>New
                                 API</b>, type a name in <b>API Name</b>, optionally add a
                              description in <b>Description</b>, and then choose
                              <b>Create API</b>. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step.png" alt="
                        Create an API manually
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> As a result, an empty API is created. The <b>Resources</b> tree
                              shows the root resource (<code class="code">/</code>) without any methods. In this exercise,
                              we will build the API with the HTTP custom integration of the PetStore website
                              (http://petstore-demo-endpoint.execute-api.com/petstore/pets.) For illustration purposes,
                              we
                              will create a <code class="code">/pets</code> resource as a child of the root and expose a
                              GET method on this resource for a client to retrieve a list of available Pets
                              items from the PetStore website. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> To create the <code class="code">/pets</code> resource, select the root, choose
                              <b>Actions</b> and then choose <b>Create
                                 Resource</b>. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-create-resource.png" alt="
                        Create a resource
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> Type <code class="code">Pets</code> in <b>Resource Name</b>, leave the
                              <b>Resource Path</b> value as given, and choose
                              <b>Create Resource</b>. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-create-resource-2.png" alt="
                        Create a resource Part B
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p> To expose a GET method on the <code class="code">/pets</code> resource, choose
                              <b>Actions</b> and then <b>Create Method</b>. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-create-method.png" alt="
                        Create method on a resource
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> Choose <b>GET</b> from the list under the
                              <b>/pets</b> resource node and choose the check mark icon to
                              finish creating the method. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-create-get-method.png" alt="
                        Create method on a resource
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>Other options for an API method include:</p>
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p><b>POST</b>, primarily used to create child
                                          resources.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p><b>PUT</b>, primarily used to update existing
                                          resources (and, although not recommended, can be used to create
                                          child resources).
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p><b>DELETE</b>, used to delete resources.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p><b>PATCH</b>, used to update resources.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p><b>HEAD</b>, primarily used in testing scenarios. It
                                          is the same as GET but does not return the resource
                                          representation.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p><b>OPTIONS</b>, which can be used by callers to get
                                          information about available communication options for the target
                                          service.
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                           </div>
                           
                           <p> The method created is not yet integrated with the backend. The next step sets
                              this up. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> In the method&apos;s <b>Setup</b> pane, select
                              <b>HTTP</b> for <b>Integration type</b>, select
                              <b>GET</b> from the <b>HTTP method</b> drop-down
                              list, type
                              <strong class="userinput"><code>http://petstore-demo-endpoint.execute-api.com/petstore/pets</code></strong>
                              as the <b>Endpoint URL</b> value, leave all other settings as
                              default, and then choose <b>Save</b>. 
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p> For the integration request&apos;s <b>HTTP method</b>, you must
                                 choose one supported by the backend. For <code class="code">HTTP</code> or <code class="code">Mock
                                    integration</code>, it makes sense that the method request and the
                                 integration request use the same HTTP verb. For other integration types the
                                 method request will likely use an HTTP verb different from the integration
                                 request. For example, to call a Lambda function, the integration request must
                                 use <code class="code">POST</code> to invoke the function, whereas the method request may
                                 use any HTTP verb depending on the logic of the Lambda function. 
                              </p>
                           </div>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-integrate-get-on-pets.png" alt="
                        Integrate GET on Pets with PetStore site
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> When the method setup finishes, you are presented with the <b>Method
                                 Execution</b> pane, where you can further configure the method
                              request to add query string or custom header parameters. You can also update the
                              integration request to map input data from the method request to the format
                              required by the back end. 
                           </p>
                           
                           <p> The PetStore website allows you to retrieve a list of <code class="code">Pet</code> items
                              by the pet type (e.g., &quot;Dog&quot; or &quot;Cat&quot;) on a given page. It uses the
                              <code class="code">type</code> and <code class="code">page</code> query string parameters to accept
                              such input. As such, we must add the query string parameters to the method
                              request and map them into the corresponding query strings of the integration
                              request. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> In the GET method&apos;s <b>Method Execution</b> pane, choose
                              <b>Method Request</b>, select <code class="code">AWS_IAM</code> for
                              <b>Authorization</b>, expand the <b>URL Query String
                                 Parameters</b> section, and choose <b>Add query
                                 string</b> to create two query string parameters named
                              <code class="code">type</code> and <code class="code">page</code>. Choose the check mark icon to save
                              the newly added query string parameters. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-add-query-strings-for-get-on-pets.png" alt="
                        Add query strings to GET on Pets method request
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> The client can now supply a pet type and a page number as query string
                              parameters when submitting a request. These input parameters must be mapped into
                              the integration&apos;s query string parameters to forward the input values to our
                              PetStore website in the backend. Because the method uses <code class="code">AWS_IAM</code>,
                              you must sign the request to invoke the method. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> From the method&apos;s <b>Integration Request</b> page, expand the
                              <b>URL Query String Parameters</b> section. By default, the
                              method request query string parameters are mapped to the like-named integration
                              request query string parameters. This default mapping works for our demo API. We
                              will leave them as given. To map a different method request parameter to the
                              corresponding integration request parameter, choose the pencil icon for the
                              parameter to edit the mapping expression, shown in the <b>Mapped
                                 from</b> column. To map a method request parameter to a different
                              integration request parameter, first choose the delete icon to remove the
                              existing integration request parameter, choose <b>Add query
                                 string</b> to specify a new name and the desired method request
                              parameter mapping expression. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-map-query-strings-for-get-on-pets.png" alt="
                        Map query strings to GET on Pets from method request to integration
                            request
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> This completes building the simple demo API. It&apos;s time to test the API.
                              
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> To test the API using the API Gateway console, choose <b>Test</b> on
                              the <b>Method Execution</b> pane for the <code class="code">GET /pets</code>
                              method. In the <b>Method Test</b> pane, enter
                              <strong class="userinput"><code>Dog</code></strong> and <strong class="userinput"><code>2</code></strong> for the
                              <b>type</b> and <b>page</b> query strings,
                              respectively, and then choose <b>Test</b>. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-test-invoke-get-on-pets.png" alt="
                        Test-invoke GET on Pets method
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> The result is shown as follows. (You may need to scroll down to see the test
                              result.) 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-test-invoke-get-on-pets-result.png" alt="
                        Test-invoke GET on Pets method result
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> Now that the test is successful, we can deploy the API to make it publicly
                              available. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> To deploy the API, select the API and then choose <b>Deploy
                                 API</b> from the <b>Actions</b> drop-down menu. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-deploy-api.png" alt="
                        Deploy API
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> In the <b>Deploy API</b> dialog, choose a stage (or <code class="code">[New
                                 Stage]</code> for the API&apos;s first deployment); enter a name (e.g., &quot;test&quot;,
                              &quot;prod&quot;, &quot;dev&quot;, etc.) in the <b>Stage name</b> input field;
                              optionally, provide a description in <b>Stage description</b>
                              and/or <b>Deployment description</b>; and then choose
                              <b>Deploy</b>. 
                           </p>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-create-api-step-by-step-deploy-api-2.png" alt="
                        Deploy API part 2
                    " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <p> Once deployed, you can obtain the invocation URLs (<b>Invoke
                                 URL</b>) of the API&apos;s endpoints. 
                           </p>
                           
                           
                           <p> If the GET method supported open access, (i.e., if the method&apos;s authorization
                              type were set to <code class="literal">NONE</code>) you could double-click
                              the <b>Invoke URL</b> link to invoke the method in your default
                              browser. If needed, you could also append necessary query string parameters to
                              the invocation URL. With the <code class="literal">AWS_IAM</code>
                              authorization type described here, you must sign the request with an <a href="./IAM/latest/UserGuide/id_credentials_access-keys.html" target="_blank">access key ID and the
                                 corresponding secret key</a> of an IAM user of your AWS account. To
                              do this, you must use a client that supports the <a href="./general/latest/gr/sigv4_signing.html" target="_blank">Signature Version 4</a> (SigV4)
                              protocols. An example of such a client is an app that uses one of the AWS SDKs
                              or the <a href="https://www.getpostman.com/" target="_blank">Postman</a> application or
                              cURL commands. To call a POST, PUT, or PATCH method that take a payload, you
                              also need to use such a client to handle the payload. 
                           </p>
                           
                           <p> To invoke this API method in the Postman, append the query string parameters
                              to the stage-specific method invocation URL (as shown in the previous image) to
                              create the complete method request URL: 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://<em class="replaceable"><code>api-id</code></em>.execute-api.<em class="replaceable"><code>region</code></em>.amazonaws.com/test/pets?type=Dog&amp;page=2</code></pre>
                           <p> Specify this URL in the address bar of the browser. Choose
                              <b>GET</b> as the HTTP verb. Select <b>AWS
                                 Signature</b> for the <b>Type</b> option under the
                              <b>Authorization</b> tab, and then specify the following
                              required properties before sending the request: 
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p>For <b>AccessKey</b>, type the caller&apos;s AWS access
                                       key, as provisioned from <a href="./IAM/latest/UserGuide/id_credentials_access-keys.html" target="_blank">AWS
                                          IAM</a>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>For <b>SecretKey</b>, type the caller&apos;s AWS secret
                                       key, as provisioned from AWS IAM when the access key was first
                                       created.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>For <b>AWS Region</b>, type the API-hosting AWS
                                       Region, as specified in the invocation URL.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>For <b>Service Name</b>, type <code class="literal">execute-api</code>, for the API Gateway execution service. 
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                           
                           <p> If you use an SDK to create a client, you can call the methods exposed by the
                              SDK to sign the request. For implementation details, see the <a href="https://aws.amazon.com/tools/" target="_blank">AWS SDK</a> of your choosing. 
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p> When changes are made to your API, you must redeploy the API to make the
                                 new or updated features available before invoking the request URL again.
                                 
                              </p>
                           </div>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="getting-started-mappings">Map Request Parameters for an API Gateway API</h2>
                     
                     <p> In this walkthrough, we describe how to map method request parameters to the
                        corresponding integration request parameters for an API Gateway API. We create an
                        example API with
                        the HTTP custom integration and use it to demonstrate how to use API Gateway to map
                        a method request
                        parameter to the corresponding integration request parameter. We then access the following
                        publicly accessible HTTP endpoint: 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">http://petstore-demo-endpoint.execute-api.com/petstore/pets</code></pre>
                     <p> If you copy the above URL, paste it into the address bar of a web browser, and press
                        <code class="literal">Enter</code> or <code class="literal">Return</code>, you get
                        the following JSON-formatted response body: 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;id&quot;: 1,
    &quot;type&quot;: &quot;dog&quot;,
    &quot;price&quot;: 249.99
  },
  {
    &quot;id&quot;: 2,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 124.99
  },
  {
    &quot;id&quot;: 3,
    &quot;type&quot;: &quot;fish&quot;,
    &quot;price&quot;: 0.99
  }
]</code></pre>
                     <p>The preceding endpoint can take two query parameters: <code class="literal">type</code>
                        and <code class="literal">page</code>. For example, change the URL to the
                        following:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">http://petstore-demo-endpoint.execute-api.com/petstore/pets?type=cat&amp;page=2</code></pre>
                     <p>You receive the following JSON-formatted response payload, displaying page 2 of only
                        the
                        cats:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;id&quot;: 4,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 999.99
  },
  {
    &quot;id&quot;: 5,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 249.99
  },
  {
    &quot;id&quot;: 6,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 49.97
  }
]</code></pre>
                     <p>This endpoint also supports the use of an item ID, as expressed by a URL path parameter.
                        For example, browse to the following:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">http://petstore-demo-endpoint.execute-api.com/petstore/pets/1</code></pre>
                     <p>The following JSON-formatted information about the item with an ID of 1 is
                        displayed:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;id&quot;: 1,
  &quot;type&quot;: &quot;dog&quot;,
  &quot;price&quot;: 249.99
}</code></pre>
                     <p>In addition to supporting GET operations, this endpoint takes POST requests with a
                        payload. For example, use <a href="https://www.getpostman.com/" target="_blank">Postman</a> to send a
                        POST method request to the following:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">http://petstore-demo-endpoint.execute-api.com/petstore/pets</code></pre>
                     <p>Include the header <code class="literal">Content-type: application/json</code> and the
                        following request body:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;type&quot;: &quot;dog&quot;,
  &quot;price&quot;: 249.99
}</code></pre>
                     <p>You receive the following JSON object in the response body:</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;pet&quot;: {
    &quot;type&quot;: &quot;dog&quot;,
    &quot;price&quot;: 249.99
  },
  &quot;message&quot;: &quot;success&quot;
}</code></pre>
                     <p> We now expose these and other features by building an API Gateway API with the HTTP
                        custom
                        integration of this PetStore website. The tasks include the following:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p> Create an API with a resource of <code class="literal">https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code">test</code>/petstorewalkthrough/pets</code>
                                 acting as a proxy to the HTTP endpoint of <code class="literal">http://petstore-demo-endpoint.execute-api.com/petstore/pets</code>. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Enable the API to accept two method request query parameters of <code class="literal">petType</code> and <code class="literal">petsPage</code>,
                                 map them to the <code class="code">type</code> and <code class="code">page</code> query parameters of the
                                 integration request, respectively, and pass the request to the HTTP endpoint.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Support a path parameter of <code class="code">{petId}</code> on the API&apos;s method request URL
                                 to specify an item ID, map it to the <code class="code">{id}</code> path parameter in the
                                 integration request URL, and send the request to the HTTP endpoint.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Enable the method request to accept the JSON payload of the format defined by the
                                 backend website, and pass the payload without modification through the integration
                                 request to the backend HTTP endpoint. 
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#getting-started-mappings-prerequisites">Prerequisites</a></li>
                           <li><a href="#getting-started-mappings-add-resources">Step 1: Create
                                 Resources</a></li>
                           <li><a href="#getting-started-mappings-set-methods">Step 2: Create and Test the
                                 Methods</a></li>
                           <li><a href="#getting-started-mappings-deploy">Step 3: Deploy the API</a></li>
                           <li><a href="#getting-started-mappings-test">Step 4: Test the API</a></li>
                           <li><a href="#getting-started-mappings-next-steps">Next Steps</a></li>
                        </ul>
                     </div>
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p> Pay attention to the casing used in the steps of this walkthrough. Typing a lowercase
                           letter instead of an uppercase letter (or vice versa) can cause errors later in the
                           walkthrough. 
                        </p>
                     </div>
                     
                     
                     <h3 id="getting-started-mappings-prerequisites">Prerequisites</h3>
                     
                     <p>Before you begin this walkthrough, you should do the following:</p>
                     
                     <ol>
                        <li>
                           
                           <p>Complete the steps in <a href="getting-started.html#setting-up">Get Ready to Build an API Gateway API</a>,
                              including assigning API Gateway access permission to the IAM user.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> At a minimum, follow the steps in <a href="api-gateway-create-api-step-by-step.html">Build an API with HTTP Custom
                                 Integration</a> to create a new API
                              named <code class="literal">MyDemoAPI</code> in the API Gateway console.
                              
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h3 id="getting-started-mappings-add-resources">Step 1: Create
                        Resources
                     </h3>
                     
                     <p>In this step, you create three resources that enable the API to interact with the
                        HTTP
                        endpoint.
                     </p>
                     
                     <p class="title"><b>To create the first resource</b></p>
                     <ol>
                        <li>
                           
                           <p> In the <b>Resources</b> pane, select the resource root, as
                              represented by a single forward slash (<code class="literal">/</code>), and
                              then choose <b>Create Resource</b> from the
                              <b>Actions</b> drop-down menu. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Name</b>, type
                              <strong class="userinput"><code>petstorewalkthrough</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Path</b>, accept the default of
                              <b>/petstorewalkthrough</b>, and then choose
                              <b>Create Resource</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the second resource</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose
                              <b>/petstorewalkthrough</b>, and then choose
                              <b>Create Resource</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Name</b>, type
                              <strong class="userinput"><code>pets</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Path</b>, accept the default of
                              <b>/petstorewalkthrough/pets</b>,
                              and then choose <b>Create Resource</b>. 
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the third resource</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose
                              <b>/petstorewalkthrough/pets</b>,
                              and then choose <b>Create Resource</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Name</b>, type
                              <strong class="userinput"><code>petId</code></strong>. This maps to the item
                              ID in the HTTP endpoint.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Path</b>, overwrite <b>petid</b>
                              with <strong class="userinput"><code>{petId}</code></strong>. Use curly braces
                              (<code class="literal">{ }</code>) around <code class="literal">petId</code> so that
                              <b>/petstorewalkthrough/pets/{petId}</b>
                              is displayed, and then choose <b>Create Resource</b>.
                           </p>
                           
                           <p>This maps to <code class="literal">/petstore/pets/<em class="replaceable"><code>my-item-id</code></em></code>
                              in the HTTP endpoint.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     
                     <h3 id="getting-started-mappings-set-methods">Step 2: Create and Test the
                        Methods
                     </h3>
                     
                     <p> In this step, you integrate the methods with the backend HTTP endpoints, map the
                        GET
                        method request parameters to the corresponding integration request parameters, and
                        then
                        test the methods. 
                     </p>
                     
                     <p class="title"><b>To set up and test the first GET method</b></p>
                     <p> This procedure demonstrates the following: </p>
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Create and integrate the method request of <code class="code">GET
                                    /petstorewalkthrough/pets</code> with the integration request of
                                 <code class="code">GET
                                    http://petstore-demo-endpoint.execute-api.com/petstore/pets</code>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Map the method request query parameters of <code class="code">petType</code> and
                                 <code class="code">petsPage</code> to the integration request query string parameters
                                 of <code class="code">type</code> and <code class="code">page</code>, respectively.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose
                              <b>/petstorewalkthrough/pets</b>,
                              choose <b>Create Method</b> from the <b>Actions</b>
                              menu, and then choose <b>GET</b> under /<b>pets</b>
                              from the drop-down list of the method names.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>/petstorewalkthrough/pets - GET - Setup</b> pane,
                              choose <b>HTTP</b> for <b>Integration type</b> and
                              choose <b>GET</b> for <b>HTTP method</b>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Endpoint URL</b>, type
                              <strong class="userinput"><code>http://petstore-demo-endpoint.execute-api.com/petstore/pets</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Method Execution</b> pane, choose <b>Method
                                 Request</b>, and then choose the arrow next to <b>URL Query
                                 String Parameters</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Add query string</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Name</b>, type
                              <strong class="userinput"><code>petType</code></strong>.
                           </p>
                           
                           <p>This specifies the <code class="literal">petType</code> query parameter in the API&apos;s
                              method request.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the check mark icon to finish creating the method request URL query
                              string parameter.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Add query string</b> again.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Name</b>, type
                              <strong class="userinput"><code>petsPage</code></strong>.
                           </p>
                           
                           <p>This specifies the <code class="literal">petsPage</code> query parameter in the API&apos;s
                              method request.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the check mark icon to finish creating the method request URL query
                              string parameter.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Method Execution</b>, choose <b>Integration
                                 Request</b>, and then choose the arrow next to <b>URL Query
                                 String Parameters</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Delete the <strong class="userinput"><code>petType</code></strong> entry mapped from
                              <strong class="userinput"><code>method.request.querystring.petType</code></strong> and the
                              <strong class="userinput"><code>petsPage</code></strong> entry mapped from
                              <strong class="userinput"><code>method.request.querystring.petsPage</code></strong>. You perform this
                              step because the endpoint requires query string parameters named
                              <strong class="userinput"><code>type</code></strong> and <strong class="userinput"><code>page</code></strong> for the request
                              URL, instead of the default values. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Add query string</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Name</b>, type
                              <strong class="userinput"><code>type</code></strong>. This
                              creates the required query string parameter for the integration request
                              URL.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Mapped from</b>, type
                              <strong class="userinput"><code>method.request.querystring.petType</code></strong>. 
                           </p>
                           
                           <p>This maps the method request&apos;s <code class="literal">petType</code> query parameter to the
                              integration request&apos;s <code class="literal">type</code> query parameter. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the check mark icon to finish creating the integration request URL
                              query string parameter. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Add query string</b> again.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Name</b>, type
                              <strong class="userinput"><code>page</code></strong>. This
                              creates the required query string parameter for the integration request
                              URL.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Mapped from</b>, type
                              <strong class="userinput"><code>method.request.querystring.petsPage</code></strong>.
                           </p>
                           
                           <p>This maps the method request&apos;s <code class="literal">petsPage</code> query parameter to the
                              integration request&apos;s <code class="literal">page</code> query parameter. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the check mark icon to finish creating the integration request URL
                              query string parameter.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Method Execution</b>. In the
                              <b>Client</b> box, choose <b>TEST</b>. In the
                              <b>Query Strings</b> area, for <b>petType</b>,
                              type <strong class="userinput"><code>cat</code></strong>. For <b>petsPage</b>, type
                              <strong class="userinput"><code>2</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Test</b>. If successful, <b>Response
                                 Body</b> displays the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;id&quot;: 4,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 999.99
  },
  {
    &quot;id&quot;: 5,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 249.99
  },
  {
    &quot;id&quot;: 6,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 49.97
  }
]</code></pre>
                           </li>
                     </ol>
                     
                     <p class="title"><b>To set up and test the second GET method</b></p>
                     <p> This procedure demonstrates the following: </p>
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Create and integrate the method request of <code class="code">GET
                                    /petstorewalkthrough/pets/{petId}</code> with the integration request of
                                 <code class="code">GET
                                    http://petstore-demo-endpoint.execute-api.com/petstore/pets/{id}</code>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Map the method request path parameters of <code class="code">petId</code> to the
                                 integration request path parameters of <code class="code">id</code>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> list, choose
                              <b>/petstorewalkthrough/pets/{petId}</b>,
                              choose <b>Create Method</b> from the <b>Actions</b>
                              drop-down menu, and then choose <b>GET</b> as the HTTP verb for
                              the method.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Setup</b> pane, choose <b>HTTP</b> for
                              <b>Integration type</b> and choose <b>GET</b>
                              for <b>HTTP method</b>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Endpoint URL</b>, type
                              <strong class="userinput"><code>http://petstore-demo-endpoint.execute-api.com/petstore/pets/{id}</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Method Execution</b> pane, choose
                              <b>Integration Request</b>, and then choose the arrow next to
                              <b>URL Path Parameters</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Add path</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Name</b>, type <strong class="userinput"><code>id</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Mapped from</b>, type
                              <strong class="userinput"><code>method.request.path.petId</code></strong>.
                           </p>
                           
                           <p>This maps the method request&apos;s path parameter of <code class="code">petId</code> to the
                              integration request&apos;s path parameter of <code class="code">id</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the check mark icon to finish creating the URL path parameter.</p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Method Execution</b>, and in the
                              <b>Client</b> box, choose <b>TEST</b>. In the
                              <b>Path</b> area, for <b>petId</b>, type
                              <strong class="userinput"><code>1</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Test</b>. If successful, <b>Response
                                 Body</b> displays the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{   
  &quot;id&quot;: 1,
  &quot;type&quot;: &quot;dog&quot;,
  &quot;price&quot;: 249.99
}</code></pre>
                           </li>
                     </ol>
                     
                     <p class="title"><b>To set up and test the POST method</b></p>
                     <p> This procedure demonstrates the following: </p>
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Create and integrate the method request of <code class="code">POST
                                    /petstorewalkthrough/pets</code> with the integration request of
                                 <code class="code">POST
                                    http://petstore-demo-endpoint.execute-api.com/petstore/pets</code>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Pass the method request JSON payload through to the integration request
                                 payload, without modification.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose
                              <b>/petstorewalkthrough/pets</b>,
                              choose <b>Create Method</b> from the <b>Actions</b>
                              drop-down menu, and then choose <b>POST</b> as the HTTP verb for
                              the method.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Setup</b> pane, choose <b>HTTP</b> for
                              <b>Integration type</b> and choose <b>POST</b>
                              for <b>HTTP method</b>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Endpoint URL</b>, type
                              <strong class="userinput"><code>http://petstore-demo-endpoint.execute-api.com/petstore/pets</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Method Execution</b> pane, in the
                              <b>Client</b> box, choose <b>TEST</b>. Expand
                              <b>Request Body</b>, and then type the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;type&quot;: &quot;dog&quot;,
  &quot;price&quot;: 249.99
}</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Test</b>. If successful, <b>Response
                                 Body</b> displays the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;pet&quot;: {
    &quot;type&quot;: &quot;dog&quot;,
    &quot;price&quot;: 249.99
  },
  &quot;message&quot;: &quot;success&quot;
}</code></pre>
                           </li>
                     </ol>
                     
                     
                     
                     <h3 id="getting-started-mappings-deploy">Step 3: Deploy the API</h3>
                     
                     <p>In this step, you deploy the API so that you can begin calling it outside of the API
                        Gateway
                        console.
                     </p>
                     
                     <p class="title"><b>To deploy the API</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose <b>Deploy
                                 API</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Deployment stage</b>, choose
                              <strong class="userinput"><code><code class="code">test</code></code></strong>.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>The input must be UTF-8 encoded (i.e., unlocalized) text.</p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Deployment description</b>, type <strong class="userinput"><code>Calling HTTP
                                    endpoint walkthrough</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Deploy</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h3 id="getting-started-mappings-test">Step 4: Test the API</h3>
                     
                     <p>In this step, you go outside of the API Gateway console and use your API to access
                        the HTTP
                        endpoint.
                     </p>
                     
                     <ol>
                        <li>
                           
                           <p>In the <b>Stage Editor</b> pane, next to <b>Invoke
                                 URL</b>, copy the URL to the clipboard. It should look something like
                              this:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code" copy="true">test</code></code></pre>
                           </li>
                        <li>
                           
                           <p>Paste this URL in the address box of a new browser tab.</p>
                           
                        </li>
                        <li>
                           
                           <p>Append <code class="literal">/petstorewalkthrough/pets</code> so that it
                              looks like this:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code" copy="true">test</code>/petstorewalkthrough/pets</code></pre>
                           <p>Browse to the URL. The following information should be displayed:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;id&quot;: 1,
    &quot;type&quot;: &quot;dog&quot;,
    &quot;price&quot;: 249.99
  },
  {
    &quot;id&quot;: 2,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 124.99
  },
  {
    &quot;id&quot;: 3,
    &quot;type&quot;: &quot;fish&quot;,
    &quot;price&quot;: 0.99
  }
]</code></pre>
                           </li>
                        <li>
                           
                           <p>After <code class="literal">petstorewalkthrough/pets</code>, type
                              <strong class="userinput"><code>?petType=cat&amp;petsPage=2</code></strong>
                              so that it looks like this:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code" copy="true">test</code>/petstorewalkthrough/pets?petType=cat&amp;petsPage=2</code></pre>
                           </li>
                        <li>
                           
                           <p>Browse to the URL. The following information should be displayed:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;id&quot;: 4,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 999.99
  },
  {
    &quot;id&quot;: 5,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 249.99
  },
  {
    &quot;id&quot;: 6,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 49.97
  }
]</code></pre>
                           </li>
                        <li>
                           
                           <p>After <code class="literal">petstorewalkthrough/pets</code>, replace
                              <strong class="userinput"><code>?petType=cat&amp;petsPage=2</code></strong>
                              with <strong class="userinput"><code>/1</code></strong> so that it looks like this:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code" copy="true">test</code>/petstorewalkthrough/pets/1</code></pre>
                           </li>
                        <li>
                           
                           <p>Browse to the URL. The following information should be displayed:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;id&quot;: 1,
  &quot;type&quot;: &quot;dog&quot;,
  &quot;price&quot;: 249.99
}</code></pre>
                           </li>
                        <li>
                           
                           <p>Using a web debugging proxy tool or the cURL command-line tool, send a POST
                              method request to the URL from the previous procedure. Append <code class="literal">/petstorewalkthrough/pets</code> so that it
                              looks like this:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code" copy="true">test</code>/petstorewalkthrough/pets</code></pre>
                           <p>Append the following header:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Content-Type: application/json</code></pre>
                           <p>Add the following code to the request body:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;type&quot;: &quot;dog&quot;,
  &quot;price&quot;: 249.99
}</code></pre>
                           <p>For example, if you use the cURL command-line tool, run a command similar to
                              the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">curl -H &quot;Content-Type: application/json&quot; -X POST -d &quot;{\&quot;type\&quot;: \&quot;dog\&quot;,\&quot;price\&quot;: 249.99}&quot; https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code" copy="true">test</code>/petstorewalkthrough/pets</code></pre>
                           <p>The following information should be returned in the response body:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;pet&quot;: {
    &quot;type&quot;: &quot;dog&quot;,
    &quot;price&quot;: 249.99
  },
  &quot;message&quot;: &quot;success&quot;
}</code></pre>
                           </li>
                     </ol>
                     
                     <p>You have reached the end of this walkthrough.</p>
                     
                     
                     
                     <h3 id="getting-started-mappings-next-steps">Next Steps</h3>
                     
                     <p>The next walkthrough shows how to use models and mappings in API Gateway to transform
                        the
                        output of an API call from one data format to another. See <a href="api-gateway-create-api-step-by-step.html#getting-started-models">Map Response Payload</a>.
                     </p>
                     
                     
                     
                     <h2 id="getting-started-models">Map Response Payload</h2>   
                     
                     
                     
                     
                     <p>In this walkthrough, we show how to use models and mapping templates in API Gateway
                        to transform
                        the output of an API call from one data schema to another. This walkthrough builds
                        on the
                        instructions and concepts in the <a href="getting-started.html">Getting Started with Amazon API Gateway</a> and the <a href="api-gateway-create-api-step-by-step.html#getting-started-mappings">Map Request Parameters for an API Gateway API</a>. If you have not yet completed those
                        walkthroughs, we suggest you do them first.
                     </p>
                     
                     <p>This walkthrough uses API Gateway to get example data from a publicly accessible HTTP
                        endpoint
                        and from an AWS Lambda function you create. Both the HTTP endpoint and the Lambda
                        function
                        return the same example data:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;id&quot;: 1,
    &quot;type&quot;: &quot;dog&quot;,
    &quot;price&quot;: 249.99
  },
  {
    &quot;id&quot;: 2,
    &quot;type&quot;: &quot;cat&quot;,
    &quot;price&quot;: 124.99
  },
  {
    &quot;id&quot;: 3,
    &quot;type&quot;: &quot;fish&quot;,
    &quot;price&quot;: 0.99
  }
]</code></pre>
                     <p>You will use models and mapping templates to transform this data to one or more output
                        formats. In API Gateway, a model defines the format, also known as the schema or shape,
                        of some data. In API Gateway, a mapping template is used to transform some data from
                        one format to another. For more information, see <a href="models-mappings.html">Create Models and Mapping Templates for Request and Response Mappings</a>.
                     </p>
                     
                     <p>The first model and mapping template is used to rename <code class="literal">id</code> to 
                        <code class="literal">number</code>, <code class="literal">type</code> to <code class="literal">class</code>, and 
                        <code class="literal">price</code> to <code class="literal">salesPrice</code>, as follows:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;number&quot;: 1,
    &quot;class&quot;: &quot;dog&quot;,
    &quot;salesPrice&quot;: 249.99
  },
  {
    &quot;number&quot;: 2,
    &quot;class&quot;: &quot;cat&quot;,
    &quot;salesPrice&quot;: 124.99
  },
  {
    &quot;number&quot;: 3,
    &quot;class&quot;: &quot;fish&quot;,
    &quot;salesPrice&quot;: 0.99
  }
]</code></pre>
                     <p>The second model and mapping template is used to combine <code class="literal">id</code> and
                        <code class="literal">type</code> into <code class="literal">description</code>, and to rename
                        <code class="literal">price</code> to <code class="literal">askingPrice</code>, as follows:
                     </p>    
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;description&quot;: &quot;Item 1 is a dog.&quot;,
    &quot;askingPrice&quot;: 249.99
  },
  {
    &quot;description&quot;: &quot;Item 2 is a cat.&quot;,
    &quot;askingPrice&quot;: 124.99
  },
  {
    &quot;description&quot;: &quot;Item 3 is a fish.&quot;,
    &quot;askingPrice&quot;: 0.99
  }
]</code></pre>
                     <p>The third model and mapping template is used to combine <code class="literal">id</code>, <code class="literal">type</code>, and <code class="literal">price</code>
                        into a set of <code class="literal">listings</code>, as follows:
                     </p>        
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;listings&quot;: [
    &quot;Item 1 is a dog. The asking price is 249.99.&quot;,
    &quot;Item 2 is a cat. The asking price is 124.99.&quot;,
    &quot;Item 3 is a fish. The asking price is 0.99.&quot;
  ]
}</code></pre>
                     
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#getting-started-models-add-models">Step 1: Create Models</a></li>
                           <li><a href="#getting-started-models-add-resources">Step 2: Create Resources</a></li>
                           <li><a href="#getting-started-models-add-methods">Step 3: Create GET Methods</a></li>
                           <li><a href="#getting-started-models-lambda">Step 4: Create a Lambda Function</a></li>
                           <li><a href="#getting-started-models-set-methods">Step 5: Set up and Test the Methods</a></li>
                           <li><a href="#getting-started-models-deploy">Step 6: Deploy the API</a></li>
                           <li><a href="#getting-started-models-test">Step 7: Test the API</a></li>
                           <li><a href="#getting-started-models-clean-up">Step 8: Clean Up</a></li>
                           <li><a href="#getting-started-models-next-steps">Next Steps</a></li>
                        </ul>
                     </div>
                     
                     
                     <h3 id="getting-started-models-add-models">Step 1: Create Models</h3>
                     
                     
                     <p>In this step, you create four models. The first three models represent the data output
                        formats for use with the HTTP endpoint and the Lambda function. The last model represents
                        the data input schema for use with the Lambda function.
                     </p>
                     
                     <p class="title"><b>To create the first output model</b></p>
                     <ol>
                        <li>
                           
                           <p>Sign in to the API Gateway console at <a href="https://console.aws.amazon.com/apigateway" target="_blank">https://console.aws.amazon.com/apigateway</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>If <b>MyDemoAPI</b> is displayed, choose
                              <b>Models</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model name</b>, type
                              <strong class="userinput"><code>PetsModelNoFlatten</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Content type</b>, type
                              <strong class="userinput"><code>application/json</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model description</b>, type <strong class="userinput"><code>Changes id to
                                    number, type to class, and price to salesPrice</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model schema</b>, type the following JSON
                              Schema-compatible definition:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;,
  &quot;title&quot;: &quot;PetsModelNoFlatten&quot;,
  &quot;type&quot;: &quot;array&quot;,
  &quot;items&quot;: {
    &quot;type&quot;: &quot;object&quot;,
    &quot;properties&quot;: {
      &quot;number&quot;: { &quot;type&quot;: &quot;integer&quot; },
      &quot;class&quot;: { &quot;type&quot;: &quot;string&quot; },
      &quot;salesPrice&quot;: { &quot;type&quot;: &quot;number&quot; }
    }
  }
}</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Create model</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the second output model</b></p>
                     <ol>
                        <li>
                           
                           <p>Choose <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model name</b>, type
                              <strong class="userinput"><code>PetsModelFlattenSome</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Content type</b>, type
                              <strong class="userinput"><code>application/json</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model description</b>, type <strong class="userinput"><code>Combines id and
                                    type into description, and changes price to askingPrice</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model schema</b>, type the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;,
  &quot;title&quot;: &quot;PetsModelFlattenSome&quot;,
  &quot;type&quot;: &quot;array&quot;,
  &quot;items&quot;: {
    &quot;type&quot;: &quot;object&quot;,
    &quot;properties&quot;: {
      &quot;description&quot;: { &quot;type&quot;: &quot;string&quot; },
      &quot;askingPrice&quot;: { &quot;type&quot;: &quot;number&quot; }    
    }
  }
}</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Create model</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the third output model</b></p>
                     <ol>
                        <li>
                           
                           <p>Choose <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model name</b>, type
                              <strong class="userinput"><code>PetsModelFlattenAll</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Content type</b>, type
                              <strong class="userinput"><code>application/json</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model description</b>, type <strong class="userinput"><code>Combines id, type,
                                    and price into a set of listings</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model schema</b>, type the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;,
  &quot;title&quot;: &quot;PetsModelFlattenAll&quot;,
  &quot;type&quot;: &quot;object&quot;,
  &quot;properties&quot;: {
    &quot;listings&quot;: {
      &quot;type&quot;: &quot;array&quot;,
      &quot;items&quot;: {
        &quot;type&quot;: &quot;string&quot;
      }
    }
  }
}</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Create model</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the input model</b></p>
                     <ol>
                        <li>
                           
                           <p>Choose <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model name</b>, type
                              <strong class="userinput"><code>PetsLambdaModel</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Content type</b>, type
                              <strong class="userinput"><code>application/json</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model description</b>, type
                              <strong class="userinput"><code>GetPetsInfo model</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Model schema</b>, type the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;$schema&quot;: &quot;http://json-schema.org/draft-04/schema#&quot;,
  &quot;title&quot;: &quot;PetsLambdaModel&quot;,
  &quot;type&quot;: &quot;array&quot;,
  &quot;items&quot;: {
    &quot;type&quot;: &quot;object&quot;, 
    &quot;properties&quot;: {
      &quot;id&quot;: { &quot;type&quot;: &quot;integer&quot; },
      &quot;type&quot;: { &quot;type&quot;: &quot;string&quot; },
      &quot;price&quot;: { &quot;type&quot;: &quot;number&quot; }
    }
  }
}</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Create model</b>.
                           </p>
                           
                        </li>
                     </ol>        
                     
                     
                     
                     <h3 id="getting-started-models-add-resources">Step 2: Create Resources</h3>
                     
                     
                     <p>In this step, you create four resources. The first three resources enable you to get
                        the example data from the HTTP endpoint in the three output formats. The last resource
                        enables you to get the example data from the Lambda function in the output schema
                        that
                        combines <code class="literal">id</code> and <code class="literal">type</code>
                        into <code class="literal">description</code> and renames <code class="literal">price</code> to <code class="literal">askingPrice</code>.
                     </p>
                     
                     <p class="title"><b>To create the first resource</b></p>
                     <ol>
                        <li>
                           
                           <p>In the links list, choose <b>Resources</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose
                              <b>/petstorewalkthrough</b>, and then choose
                              <b>Create Resource</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Name</b>, type
                              <strong class="userinput"><code>NoFlatten</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Path</b>, accept the default of
                              <b>/petstorewalkthrough/noflatten</b>,
                              and then choose <b>Create Resource</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the second resource</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose
                              <b>/petstorewalkthrough</b> again, and then choose
                              <b>Create Resource</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Name</b>, type
                              <strong class="userinput"><code>FlattenSome</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Path</b>, accept the default of
                              <b>/petstorewalkthrough/flattensome</b>,
                              and then choose <b>Create Resource</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the third resource</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose
                              <b>/petstorewalkthrough</b> again, and then choose
                              <b>Create Resource</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Name</b>, type
                              <strong class="userinput"><code>FlattenAll</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Path</b>, accept the default of
                              <b>/petstorewalkthrough/flattenall</b>,
                              and then choose <b>Create Resource</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the fourth resource</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose
                              <b>/petstorewalkthrough</b> again, and then choose
                              <b>Create Resource</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Name</b>, type
                              <strong class="userinput"><code>LambdaFlattenSome</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Resource Path</b>, accept the default of
                              <b>/petstorewalkthrough/lambdaflattensome</b>,
                              and then choose <b>Create Resource</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h3 id="getting-started-models-add-methods">Step 3: Create GET Methods</h3>
                     
                     
                     <p>In this step, you create a GET method for each of the resources you created in the
                        previous step.
                     </p>
                     
                     <p class="title"><b>To create the first GET method</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> list, choose
                              <b>/petstorewalkthrough/flattenall</b>,
                              and then choose <b>Create Method</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the drop-down list, choose <b>GET</b>, and then choose the
                              check mark icon to save your choice.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the Setup pane, choose <b>HTTP</b> for the <b>Integration type</b> and  <b>GET</b> for <b>HTTP method</b>, type <strong class="userinput"><code>http://petstore-demo-endpoint.execute-api.com/petstore/pets</code></strong> in <b>Endpoint URL</b>, and choose <b>Save</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the second GET method</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> list, choose
                              <b>/petstorewalkthrough/lambdaflattensome</b>,
                              and then choose <b>Create Method</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the drop-down list, choose <b>GET</b>, and then choose the
                              check mark to save your choice.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the Setup pane, choose <b>Lambda Function</b> for the <b>Integration type</b>, choose the region where you have created the <a href="api-gateway-create-api-step-by-step.html#getting-started-models-lambda"><code class="code">GetPetsInfo</code> Lambda function</a> from the <b>Lambda Region</b> drop-down list, choose  <strong class="userinput"><code>GetPetsInfo</code></strong> for <b>Lambda Function</b>, and choose <b>Save</b>. Choose <b>OK</b> when prompted to add permission to the Lambda function.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the third GET method</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> list, choose
                              <b>/petstorewalkthrough/flattensome</b>,
                              and then choose <b>Create Method</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the drop-down list, choose <b>GET</b>, and then choose the
                              check mark icon to save your choice.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the Setup pane, choose <b>HTTP</b> for the <b>Integration type</b> and  <b>GET</b> for <b>HTTP method</b>, type <strong class="userinput"><code>http://petstore-demo-endpoint.execute-api.com/petstore/pets</code></strong> in <b>Endpoint URL</b>, and then choose <b>Save</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To create the fourth GET method</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> list, choose
                              <b>/petstorewalkthrough/noflatten</b>,
                              and then choose <b>Actions</b>, <b>Create
                                 Method</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the drop-down list, choose <b>GET</b>, and then choose the
                              check mark icon to save your choice.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the Setup pane, choose <b>HTTP</b> for the <b>Integration type</b> and  <b>GET</b> for <b>HTTP method</b>, type <strong class="userinput"><code>http://petstore-demo-endpoint.execute-api.com/petstore/pets</code></strong> in <b>Endpoint URL</b>, and then choose <b>Save</b>.
                           </p>
                           
                        </li>
                     </ol>        
                     
                     
                     
                     <h3 id="getting-started-models-lambda">Step 4: Create a Lambda Function</h3>
                     
                     
                     <p>In this step, you create a Lambda function that returns the sample data.</p>
                     
                     <p class="title"><b>To create the Lambda function</b></p>
                     <ol>
                        <li>
                           <p>Open the AWS Lambda console at
                              <a href="https://console.aws.amazon.com/lambda/" target="_blank">https://console.aws.amazon.com/lambda/</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>Do one of the following:</p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p>If a welcome page appears, choose <b>Get Started
                                          Now</b>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>If the <b>Lambda: Function list</b> page appears, choose
                                       <b>Create a Lambda function</b>.
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Name</b>, type
                              <strong class="userinput"><code>GetPetsInfo</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Description</b>, type <strong class="userinput"><code>Gets information about
                                    pets</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Code template</b>, choose
                              <b>None</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Type the following code:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">console.log(&apos;Loading event&apos;);

exports.handler = function(event, context, callback) {
  callback(null, 
    [{&quot;id&quot;: 1, &quot;type&quot;: &quot;dog&quot;, &quot;price&quot;: 249.99},
    {&quot;id&quot;: 2, &quot;type&quot;: &quot;cat&quot;, &quot;price&quot;: 124.99},
    {&quot;id&quot;: 3, &quot;type&quot;: &quot;fish&quot;, &quot;price&quot;: 0.99}]); // SUCCESS with message
};</code></pre>
                           <div class="aws-note">
                              <p class="aws-note">Tip</p>
                              <p>In the preceding code, written in Node.js, <code class="code">console.log</code> writes
                                 information to an Amazon CloudWatch log. <code class="code">event</code> contains the input to the
                                 Lambda function. <code class="code">context</code> contains calling context.
                                 <code class="code">callback</code> returns the result (for Node.js 4.3 and later).
                                 For more information about how to write Lambda function code, see the
                                 &quot;Programming Model&quot; section in <a href="./lambda/latest/dg/lambda-introduction.html" target="_blank">AWS Lambda: How it
                                    Works</a> and the sample walkthroughs in the <em>AWS Lambda
                                    Developer Guide</em>.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Handler name</b>, leave the default of
                              <code class="literal">index.handler</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Role</b>, choose the Lambda execution role,
                              <b>APIGatewayLambdaExecRole</b>, you created in the
                              <a href="getting-started-with-lambda-integration.html">Build an API Gateway API with Lambda Integration</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create Lambda function</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the list of functions, choose
                              <b>GetPetsInfo</b> to show the
                              function&apos;s details.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Make a note of the AWS region where you created this function. You need it
                              later.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the pop-up list, choose <b>Edit or test function</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Sample event</b>, replace any code that appears with the
                              following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
                   
}</code></pre>
                           <div class="aws-note">
                              <p class="aws-note">Tip</p>
                              <p>The empty curly braces mean that there are no input values for this Lambda
                                 function. This function simply returns the JSON object containing the pets
                                 information, so those key-value pairs are not required here.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Invoke</b>. <b>Execution result</b>
                              shows <code class="literal">[{&quot;id&quot;:1,&quot;type&quot;:&quot;dog&quot;,&quot;price&quot;:249.99},{&quot;id&quot;:2,&quot;type&quot;:&quot;cat&quot;,&quot;price&quot;:124.99},{&quot;id&quot;:3,&quot;type&quot;:&quot;fish&quot;,&quot;price&quot;:0.99}]</code>,
                              which is also written to the CloudWatch Logs log files.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Go to function list</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h3 id="getting-started-models-set-methods">Step 5: Set up and Test the Methods</h3>
                     
                     
                     <p>In this step, you configure the method responses, integration requests, and
                        integration responses to specify the input and output data schemas (or models) for
                        the
                        GET methods associated with the HTTP endpoint and the Lambda function. You also learn
                        to
                        test calling these methods using the API Gateway console.
                     </p>
                     
                     <p class="title"><b>To set up the integration for the first GET method and then test it</b></p>
                     <ol>
                        <li>
                           
                           <p>From the API&apos;s <b>Resources</b> tree, choose <b>GET</b> under the
                              <b>/petstorewalkthrough/flattenall</b> node.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Method Execution</b> pane, choose <b>Method
                                 Response</b>, and then choose the arrow next to
                              <b>200</b>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Response Models for 200</b> area, for
                              <b>application/json</b>, choose the pencil icon to start
                              setting up the model for the method output. For <b>Models</b>,
                              choose <b>PetsModelFlattenAll</b>, and then
                              choose the check mark icon to save the setting.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Method Execution</b>, choose <b>Integration
                                 Response</b>, and then choose the arrow next to
                              <b>200</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Expand the <b>Body Mapping Templates</b> section, choose <b>application/json</b> under <b>Content-Type</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>
                              For <b>Generate template from model</b>, choose
                              <b>PetsModelFlattenAll</b> to display
                              a mapping template after the <code class="code">PetsModelFlattenAll</code> model as a
                              starting point.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Modify the mapping template code as follows:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">#set($inputRoot = $input.path(&apos;$&apos;))
{
  &quot;listings&quot; : [
#foreach($elem in $inputRoot)
    &quot;Item number $elem.id is a $elem.type. The asking price is $elem.price.&quot;#if($foreach.hasNext),#end
        
#end
  ]
}</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Method Execution</b>, and in the
                              <b>Client</b> box, choose <b>TEST</b>, and then
                              choose <b>Test</b>. If successful, <b>Response
                                 Body</b> displays the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;listings&quot; : [
    &quot;Item number 1 is a dog. The asking price is 249.99.&quot;,        
    &quot;Item number 2 is a cat. The asking price is 124.99.&quot;,        
    &quot;Item number 3 is a fish. The asking price is 0.99.&quot;        
  ]
}</code></pre>
                           </li>
                     </ol>
                     
                     <p class="title"><b>To set up integration for the second GET method and then test it</b></p>
                     <ol>
                        <li>
                           
                           <p>From the API&apos;s <b>Resources</b> tree, choose
                              <b>GET</b> under the
                              <b>/petstorewalkthrough/lambdaflattensome</b>
                              node.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In <b>Method Execution</b>,  choose <b>Method
                                 Response</b>. And then choose the arrow next to
                              <b>200</b> to expand the section. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Response Models for 200</b> area, choose the pencil
                              icon on the row for the content type of <b>application/json</b>.
                              Choose <b>PetsModelFlattenSome</b> for
                              <b>Models</b>, and then choose the check mark icon to save the
                              choice.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Go back to <b>Method Execution</b>. Choose <b>Integration
                                 Response</b>, and then choose the arrow next to
                              <b>200</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Body Mapping Templates</b> section, choose
                              <b>application/json</b> under
                              <b>Content-Type</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Generate template</b>, choose
                              <b>PetsModelFlattenSome</b> to display the
                              mapping script template for the output of this method.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Modify the code as follows, and then choose <b>Save</b>:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">#set($inputRoot = $input.path(&apos;$&apos;))
[
#foreach($elem in $inputRoot)
  {
    &quot;description&quot; : &quot;Item $elem.id is a $elem.type.&quot;,
    &quot;askingPrice&quot; : $elem.price
  }#if($foreach.hasNext),#end

#end
]</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Method Execution</b>, and in the
                              <b>Client</b> box, choose <b>TEST</b>, and then
                              choose <b>Test</b>. If successful, <b>Response
                                 Body</b> displays the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;description&quot; : &quot;Item 1 is a dog.&quot;,
    &quot;askingPrice&quot; : 249.99
  },    
  {
    &quot;description&quot; : &quot;Item 2 is a cat.&quot;,
    &quot;askingPrice&quot; : 124.99
  },    
  {
    &quot;description&quot; : &quot;Item 3 is a fish.&quot;,
    &quot;askingPrice&quot; : 0.99
  }    
]</code></pre>
                           </li>
                     </ol>
                     
                     <p class="title"><b>To set up integration for the third GET method and then test it</b></p>
                     <ol>
                        <li>
                           
                           <p>From the API&apos;s <b>Resources</b> tree, choose <b>GET</b> under the
                              <b>/petstorewalkthrough/flattensome</b> node.
                           </p>
                           
                        </li>
                        <li> 
                           
                           <p>In the <b>Method Execution</b> pane, choose <b>Method
                                 Response</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the arrow next to <b>200</b>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Response Models for 200</b> area, for
                              <b>application/json</b>, choose the pencil icon. For
                              <b>Models</b>, choose
                              <b>PetsModelFlattenSome</b>, and then
                              choose the check-mark icon to save the choice.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Go back to <b>Method Execution</b> and choose <b>Integration
                                 Response</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the arrow next to <b>200</b> to expand the section.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Expand the <b>Body Mapping Templates</b> area. Choose <b>application/json</b> for <b>Content-Type</b>. 
                              For <b>Generate template</b>, choose
                              <b>PetsModelFlattenSome</b> to display a mapping script template for the output of this method.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Modify the code as follows:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">#set($inputRoot = $input.path(&apos;$&apos;))
[
#foreach($elem in $inputRoot)
  {
    &quot;description&quot;: &quot;Item $elem.id is a $elem.type.&quot;,
    &quot;askingPrice&quot;: $elem.price 
  }#if($foreach.hasNext),#end

#end
]</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Go back to <b>Method Execution</b> and choose
                              <b>TEST</b> in the <b>Client</b> box. And then
                              choose <b>Test</b>. If successful, <b>Response
                                 Body</b> displays the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;description&quot;: &quot;Item 1 is a dog.&quot;,
    &quot;askingPrice&quot;: 249.99
  },    
  {
    &quot;description&quot;: &quot;Item 2 is a cat.&quot;,
    &quot;askingPrice&quot;: 124.99
  },    
  {
    &quot;description&quot;: &quot;Item 3 is a fish.&quot;,
    &quot;askingPrice&quot;: 0.99
  }    
]</code></pre>
                           </li>
                     </ol>
                     
                     <p class="title"><b>To set up integration for the fourth GET method and then test it</b></p>
                     <ol>
                        <li>
                           
                           <p>From the API&apos;s <b>Resources</b> tree, choose <b>GET</b> under the
                              <b>/petstorewalkthrough/noflatten</b> node.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Method Execution</b> pane, choose
                              <b>Method Response</b>, and then expand the
                              <b>200</b> section. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Response Models for 200</b> area, for <b>application/json</b>, choose the pencil icon to update the response model for this method. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose  <b>PetsModelNoFlatten</b> as the model for the content type of <b>application/json</b>, and then choose the check-mark icon to save the choice.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Method Execution</b>, choose <b>Integration
                                 Response</b>, and then choose the arrow next to
                              <b>200</b> to expand the section.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Expand the <b>Mapping Templates</b> section. Choose
                              <b>application/json</b> for <b>Content-Type</b>.
                              For <b>Generate templates</b>, choose
                              <b>PetsModelNoFlatten</b> to display a
                              mapping script template for the output of this method.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Modify the code as follows:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">#set($inputRoot = $input.path(&apos;$&apos;))
[
#foreach($elem in $inputRoot)
  {
    &quot;number&quot;: $elem.id,
    &quot;class&quot;: &quot;$elem.type&quot;,
    &quot;salesPrice&quot;: $elem.price 
  }#if($foreach.hasNext),#end

#end
]</code></pre>
                           </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Go back to <b>Method Execution</b>, and in the
                              <b>Client</b> box, choose <b>TEST</b>, and then
                              choose <b>Test</b>. If successful, <b>Response
                                 Body</b> displays the following:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;number&quot;: 1,
    &quot;class&quot;: &quot;dog&quot;,
    &quot;salesPrice&quot;: 249.99
  },    
  {
    &quot;number&quot;: 2,
    &quot;class&quot;: &quot;cat&quot;,
    &quot;salesPrice&quot;: 124.99
  },    
  {
    &quot;number&quot;: 3,
    &quot;class&quot;: &quot;fish&quot;,
    &quot;salesPrice&quot;: 0.99
  }    
]</code></pre>
                           </li>
                     </ol>
                     
                     
                     
                     
                     <h3 id="getting-started-models-deploy">Step 6: Deploy the API</h3>
                     
                     
                     <p>In this step, you deploy the API so that you can begin calling it outside of the API
                        Gateway
                        console.
                     </p>
                     
                     <p class="title"><b>To deploy the API</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <b>Resources</b> pane, choose <b>Deploy
                                 API</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Deployment stage</b>, choose <code class="code">test</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Deployment description</b>, type <strong class="userinput"><code>Using models
                                    and mapping templates walkthrough</code></strong>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Deploy</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h3 id="getting-started-models-test">Step 7: Test the API</h3>
                     
                     
                     <p>In this step, you go outside of the API Gateway console to interact with both the
                        HTTP
                        endpoint and the Lambda function.
                     </p>
                     
                     <ol>
                        <li>
                           
                           <p>In the <b>Stage Editor</b> pane, next to <b>Invoke
                                 URL</b>, copy the URL to the clipboard. It should look something like
                              this:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code" copy="true">test</code></code></pre>
                           </li>
                        <li>
                           
                           <p>Paste this URL in the address box of a new browser tab.</p>
                           
                        </li>
                        <li>
                           
                           <p>Append <code class="literal">/petstorewalkthrough/noflatten</code> so
                              that it looks like this:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://<em class="replaceable"><code>my-api-id</code></em>.execute-api.<em class="replaceable"><code>region-id</code></em>.amazonaws.com/<code class="code" copy="true">test</code>/petstorewalkthrough/noflatten</code></pre>
                           <p>Browse to the URL. The following information should be displayed:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;number&quot;: 1,
    &quot;class&quot;: &quot;dog&quot;,
    &quot;salesPrice&quot;: 249.99
  },    
  {
    &quot;number&quot;: 2,
    &quot;class&quot;: &quot;cat&quot;,
    &quot;salesPrice&quot;: 124.99
  },    
  {
    &quot;number&quot;: 3,
    &quot;class&quot;: &quot;fish&quot;,
    &quot;salesPrice&quot;: 0.99
  }    
]</code></pre>
                           </li>
                        <li>
                           
                           <p>After <code class="literal">petstorewalkthrough/</code>, replace
                              <code class="literal">noflatten</code> with
                              <code class="literal">flattensome</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Browse to the URL. The following information should be displayed:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;description&quot;: &quot;Item 1 is a dog.&quot;,
    &quot;askingPrice&quot;: 249.99
  },    
  {
    &quot;description&quot;: &quot;Item 2 is a cat.&quot;,
    &quot;askingPrice&quot;: 124.99
  },    
  {
    &quot;description&quot;: &quot;Item 3 is a fish.&quot;,
    &quot;askingPrice&quot;: 0.99
  }    
]</code></pre>
                           </li>
                        <li>
                           
                           <p>After <code class="literal">petstorewalkthrough/</code>, replace
                              <code class="literal">flattensome</code> with
                              <code class="literal">flattenall</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Browse to the URL. The following information should be displayed:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;listings&quot; : [
    &quot;Item number 1 is a dog. The asking price is 249.99.&quot;,        
    &quot;Item number 2 is a cat. The asking price is 124.99.&quot;,        
    &quot;Item number 3 is a fish. The asking price is 0.99.&quot;        
  ]
}</code></pre>
                           </li>
                        <li>
                           
                           <p>After <code class="literal">petstorewalkthrough/</code>, replace
                              <code class="literal">flattenall</code> with
                              <code class="literal">lambdaflattensome</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Browse to the URL. The following information should be displayed:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">[
  {
    &quot;description&quot; : &quot;Item 1 is a dog.&quot;,
    &quot;askingPrice&quot; : 249.99
  },    
  {
    &quot;description&quot; : &quot;Item 2 is a cat.&quot;,
    &quot;askingPrice&quot; : 124.99
  },    
  {
    &quot;description&quot; : &quot;Item 3 is a fish.&quot;,
    &quot;askingPrice&quot; : 0.99
  }    
]</code></pre>
                           </li>
                     </ol>  
                     
                     
                     
                     <h3 id="getting-started-models-clean-up">Step 8: Clean Up</h3>
                     
                     
                     <p>If you no longer need the Lambda function you created for this walkthrough, you can
                        delete it now. You can also delete the accompanying IAM resources.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Warning</p>
                        <p>If you delete a Lambda function your APIs rely on, those APIs will no longer work.
                           Deleting a Lambda function cannot be undone. If you want to use the Lambda function
                           again, you must re-create the function.
                        </p>
                        <p>If you delete an IAM resource a Lambda function relies on, the Lambda function and
                           any APIs that rely on it will no longer work. Deleting an IAM resource cannot be
                           undone. If you want to use the IAM resource again, you must re-create the
                           resource. If you plan to continue experimenting with the resources you created for
                           this and the other walkthroughs, do not delete the Lambda invocation role or the
                           Lambda execution role.
                        </p>
                        <p>API Gateway  does not currently support the deactivation or deletion of APIs that
                           no
                           longer work.
                        </p>
                     </div>
                     
                     <p class="title"><b>To delete the Lambda function</b></p>
                     <ol>
                        <li>
                           
                           <p>Sign in to the AWS Management Console and open the AWS Lambda console at
                              <a href="https://console.aws.amazon.com/lambda/" target="_blank">https://console.aws.amazon.com/lambda/</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Lambda: Function list</b> page, in the list of
                              functions, choose the button next to
                              <b>GetPetsInfo</b>, and then choose
                              <b>Actions</b>, <b>Delete</b>. When prompted,
                              choose <b>Delete</b> again.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To delete the associated IAM resources</b></p>
                     <ol>
                        <li>
                           
                           <p>Open the IAM console at
                              <a href="https://console.aws.amazon.com/iam/" target="_blank">https://console.aws.amazon.com/iam/</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Details</b> area, choose
                              <b>Roles</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select <b>APIGatewayLambdaExecRole</b>, and then choose
                              <b>Role Actions</b>, <b>Delete Role</b>. When
                              prompted, choose <b>Yes, Delete</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the <b>Details</b> area, choose
                              <b>Policies</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Select <b>APIGatewayLambdaExecPolicy</b>, and then
                              choose <b>Policy Actions</b>, <b>Delete</b>. When
                              prompted, choose <b>Delete</b>.
                           </p>
                           
                        </li>
                     </ol>        
                     
                     <p>You have now reached the end of this walkthrough.</p>        
                     
                     
                     
                     <h3 id="getting-started-models-next-steps">Next Steps</h3>
                     
                     
                     <p>You may want to begin the next walkthrough, which shows you how to create an API Gateway
                        API to access an AWS service. See <a href="getting-started-aws-proxy.html">Build an API Gateway API with AWS Integration</a>.
                     </p>
                     
                     
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="api-gateway-create-api-as-simple-proxy-for-http.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="getting-started-with-private-integration.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Create the API with HTTP
                Custom Integration"><a class="pagetoc" href="#api-gateway-create-resource-and-methods">Create the API with HTTP
                              Custom Integration</a></li>
                        <li class="pagetoc" name="Map Request Parameters for an API Gateway API"><a class="pagetoc" href="#getting-started-mappings">Map Request Parameters</a></li>
                        <li class="pagetoc" name="Map Response Payload"><a class="pagetoc" href="#getting-started-models">Map Response Payload</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>