<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Create, Configure, and
         Test Usage Plans with the API Gateway Console - Amazon API Gateway
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="api-gateway-api-usage-plans.html" title="Create and Use API Gateway Usage Plans">
      <link rel="prev" href="api-gateway-setup-api-key-with-console.html" title="Set Up API Keys Using the API Gateway
                Console">
      <link rel="next" href="api-gateway-setup-api-key-with-restapi.html" title="Set Up API Keys Using the API Gateway
                REST API">
      <meta name="description" content="Create, configure, and test usage plans with the API Gateway console.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-create-usage-plans-with-console.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="apigateway-control-access-to-api.html"> Controlling Access to an API in
                                    			API Gateway</a> &#xBB; <a href="api-gateway-api-usage-plans.html">Create and Use API Gateway Usage Plans</a> &#xBB; <span class="breadcrumb">Create, Configure, and
                                    Test Usage Plans with the API Gateway Console</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="api-gateway-create-usage-plans-with-console">Create, Configure, and
                        Test Usage Plans with the API Gateway Console
                     </h1>
                     <p>Before creating a usage plan, make sure that you&apos;ve set up the desired API keys. For
                        more information, see <a href="api-gateway-setup-api-key-with-console.html">Set Up API Keys Using the API Gateway
                           Console</a>.
                     </p>
                     <p>This section describes how to create and use a usage plan by using the API Gateway
                        console.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#api-gateway-usage-plan-migrate-to-default">Migrate Your API to
                                 Default Usage Plans (If Needed)</a></li>
                           <li><a href="#api-gateway-usage-plan-create">Create Usage Plans</a></li>
                           <li><a href="#api-gateway-usage-plan-test-console">Test a Usage Plan</a></li>
                           <li><a href="#api-gateway-usage-plan-manage-usage">Maintain Plan Usage</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="api-gateway-usage-plan-migrate-to-default">Migrate Your API to
                        Default Usage Plans (If Needed)
                     </h2>
                     
                     <p>If you started to use API Gateway <em>after</em> the usage plans feature was
                        rolled out on August 11, 2016, you will automatically have usage plans enabled for
                        you in all supported regions.
                     </p>
                     
                     <p>If you started to use API Gateway before that date, you may need to migrate to default
                        usage plans. You&apos;ll be prompted with the <b>Enable Usage Plans</b>
                        option before using usage plans for the first time in the
                        selected region. When you enable this option, you have default usage plans created
                        for every unique API stage that&apos;s associated with existing API keys. In the default
                        usage plan, no throttle or quota limits are set initially, and the associations between
                        the API keys and API stages are
                        copied to the usage plans. The API behaves the same as before. However, you must use
                        the <a href="./apigateway/api-reference/resource/usage-plan/" target="_blank">UsagePlan</a>
                        <code class="code">apiStages</code> property to associate specified API stage values
                        (<code class="code">apiId</code> and <code class="code">stage</code>) with included API keys (via <a href="./apigateway/api-reference/resource/usage-plan-key/" target="_blank">UsagePlanKey</a>), instead of using the <a href="./apigateway/api-reference/resource/api-key/" target="_blank">ApiKey</a>
                        <code class="code">stageKeys</code> property.
                     </p>
                     
                     <p>To check whether you&apos;ve already migrated to default usage plans, use the <a href=" ./cli/latest/reference/apigateway/get-account.html" target="_blank">get-account</a> CLI command. In the command output, the
                        <code class="code">features</code> list will include an entry of <code class="code">&quot;UsagePlans&quot;</code>
                        when usage plans are enabled.
                     </p>
                     
                     <p>You can also migrate your APIs to default usage
                        plans by using the AWS CLI as follows:
                     </p>
                     
                     <p class="title"><b>To migrate to default usage plans using the AWS CLI</b></p>
                     <ol>
                        <li>
                           
                           <p>Call this CLI command: <a href="./cli/latest/reference/apigateway/update-account.html" target="_blank">update-account</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For the <code class="code">cli-input-json</code> parameter, use the following
                              JSON:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">[
    {
        &quot;op&quot;: &quot;add&quot;,
        &quot;path&quot;: &quot;/features&quot;,
        &quot;value&quot;: &quot;UsagePlans&quot;
    }
]</code></pre>
                           </li>
                     </ol>
                     
                     
                     
                     <h2 id="api-gateway-usage-plan-create">Create Usage Plans</h2>
                     
                     <p>The following procedure describes how to create a usage plan.</p>
                     
                     <p class="title"><b>To create a usage plan</b></p>
                     <ol>
                        <li>
                           
                           <p>In the Amazon API Gateway main navigation pane, choose <b>Usage
                                 Plans</b>, and then choose <b>Create</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Under <b>Create Usage Plan</b>, do the following:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>For <b>Name</b>, type a name for your plan (for
                                    example, <strong class="userinput"><code>Plan_A</code></strong>). 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Description</b>, type a description for your
                                    plan. 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Select <b>Enable throttling</b>, and set
                                    <b>Rate</b> (for example,
                                    <strong class="userinput"><code>100</code></strong>) and <b>Burst</b> (for
                                    example, <strong class="userinput"><code>200</code></strong>). 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Enable quota</b>, and set its limit (for
                                    example, <strong class="userinput"><code>5000</code></strong>) for a selected time interval
                                    (for example, <b>Month</b>).
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p> Choose <b>Save</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-usage-plan-keys-create-setup.png" alt="
                            API usage plan entities
                        " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>To add a stage to the plan, do the following in the <b>Associated
                                 API Stages</b> pane: 
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>Choose <b>Add API Stage</b>. 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose an API (for example, <strong class="userinput"><code>PetStore</code></strong>) from
                                    the <b>API</b> drop-down list. 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose a stage (for example, <strong class="userinput"><code>Stage_1</code></strong>) from
                                    the <b>Stage</b> drop-down list. 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose the checkmark icon to save.</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose <b>Next</b>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/api-gateway-usage-plan-keys-create-add-stage.png" alt="
                            API usage plan entities
                        " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>To add a key to the plan, do the following in the <b>Usage Plan API
                                 Keys</b> pane:
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>To use an existing key, choose <b>Add API Key to Usage
                                       Plan</b>. 
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>For <b>Name</b>, type a name for the key you want to
                                    add (for example, <strong class="userinput"><code>MyFirstKey</code></strong>).
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Choose the checkmark icon to save.</p>
                                 
                              </li>
                              <li>
                                 
                                 <p>As needed, repeat the preceding steps to add other existing API
                                    keys to this usage plan.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                           
                           <div class="mediaobject">
                              
                              
                              
                              <img src="../../..//img/api-gateway-usage-plan-keys-create-add-key.png" alt="
                            API usage plan entities
                        " style="max-width:100%">
                              
                              
                              
                           </div>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>To
                                 add a new API key to the usage plan, choose <b>Create API Key and
                                    add to Usage Plan</b> and follow the
                                 instructions.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>To finish creating the usage plan, choose
                              <b>Done</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>If you want to add more API stages to the usage plan, choose <b>Add
                                 API Stage</b> to repeat the preceding steps.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="api-gateway-usage-plan-test-console">Test a Usage Plan</h2>
                     
                     <p>To test the usage plan, you can use an AWS SDK, AWS CLI, or a REST API client like
                        Postman. For an example of using <a href="https://www.getpostman.com/" target="_blank">Postman</a> to test the usage plan, see <a href="api-gateway-create-usage-plans-with-rest-api.html#api-gateway-usage-plan-test-with-postman">Test Usage Plans</a>.
                     </p>
                     
                     
                     <h2 id="api-gateway-usage-plan-manage-usage">Maintain Plan Usage</h2>
                     
                     <p>Maintaining a usage plan involves monitoring the used and remaining quotas over a
                        given time period and extending the remaining quotas by a specified amount. The
                        following procedures describe how to monitor and extend quotas.
                     </p>
                     
                     <p class="title"><b>To monitor used and remaining quotas</b></p>
                     <ol>
                        <li>
                           
                           <p>In the API Gateway main navigation pane, choose <b>Usage
                                 Plans</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose a usage plan from the list of the usage plans in
                              the
                              secondary navigation pane in the middle.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From within the specified plan, choose <b>API
                                 Keys</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose an API key, and then choose <b>Usage</b> to view
                              <b>Subscriber&apos;s Traffic</b> from the plan you&apos;re
                              monitoring.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Optionally, choose <b>Export</b>, choose a
                              <b>From</b> date and a <b>To</b> date,
                              choose <strong class="userinput"><code>JSON</code></strong> or <strong class="userinput"><code>CSV</code></strong> for the
                              exported data format, and then choose <b>Export</b>.
                           </p>
                           
                           <p>The following example shows an exported file. </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;thisPeriod&quot;: {
    &quot;px1KW6...qBazOJH&quot;: [
      [
        0,
        5000
      ],
      [
        0,
        5000
      ],
      [
        0,
        10
      ]
    ]
  },
  &quot;startDate&quot;: &quot;2016-08-01&quot;,
  &quot;endDate&quot;: &quot;2016-08-03&quot;
}</code></pre>
                           <p>The usage data in the example shows the daily usage data for an API
                              client, as identified by the API key (<code class="code">px1KW6...qBazOJH</code>),
                              between August 1, 2016 and August 3, 2016. Each daily usage data shows used
                              and remaining quotas. In this example, the subscriber hasn&apos;t used any
                              allotted quotas yet, and the API owner or administrator has reduced the
                              remaining quota from 5000 to 10 on the third day.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p class="title"><b>To extend the remaining quotas</b></p>
                     <ol>
                        <li>
                           
                           <p>Repeat steps 1&#x2013;3 of the previous procedure.</p>
                           
                        </li>
                        <li>
                           
                           <p>On the usage plan
                              page,
                              choose <b>Extension</b> from the usage plan window.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Type a number for the <b>Remaining</b> request
                              quotas.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="api-gateway-setup-api-key-with-console.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="api-gateway-setup-api-key-with-restapi.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Migrate Your API to
                    Default Usage Plans (If Needed)"><a class="pagetoc" href="#api-gateway-usage-plan-migrate-to-default">Migrate Your API to
                              Default Usage Plans (If Needed)</a></li>
                        <li class="pagetoc" name="Create Usage Plans"><a class="pagetoc" href="#api-gateway-usage-plan-create">Create Usage Plans</a></li>
                        <li class="pagetoc" name="Test a Usage Plan"><a class="pagetoc" href="#api-gateway-usage-plan-test-console">Test a Usage Plan</a></li>
                        <li class="pagetoc" name="Maintain Plan Usage"><a class="pagetoc" href="#api-gateway-usage-plan-manage-usage">Maintain Plan Usage</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>