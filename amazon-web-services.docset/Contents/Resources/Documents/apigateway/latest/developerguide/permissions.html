<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Control Access to an API with IAM Permissions - Amazon API Gateway</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="apigateway-control-access-to-api.html" title=" Controlling Access to an API in
			API Gateway">
      <link rel="prev" href="apigateway-resource-policies-aws-condition-keys.html" title="AWS Conditions that
                can be used in API Gateway Resource Policies">
      <link rel="next" href="api-gateway-control-access-using-iam-policies-to-create-and-manage-api.html" title=" Control Access for Managing an API">
      <meta name="description" content="Learn how to provide access permissions to IAM users for Amazon API Gateway actions and resources.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/permissions.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="apigateway-control-access-to-api.html"> Controlling Access to an API in
                                    			API Gateway</a> &#xBB; <span class="breadcrumb">Control Access to an API with IAM Permissions</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="permissions">Control Access to an API with IAM Permissions</h1>
                     <p> You control access to Amazon API Gateway with <a href="./IAM/latest/UserGuide/access_permissions.html" target="_blank">IAM permissions</a> by controlling access to the following two API Gateway component
                        processes: 
                     </p>
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p> To create, deploy, and manage an API in API Gateway, you must grant the API developer
                                 permissions to perform the required actions supported by the API management
                                 component of API Gateway. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p> To call a deployed API or to refresh the API caching, you must grant the API
                                 caller permissions to perform required IAM actions supported by the API execution
                                 component of API Gateway. 
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <p> The access control for the two processes involves different permissions models, explained
                        next.
                     </p>
                     
                     <h2 id="api-gateway-control-access-iam-permissions-model-for-managing-api">
                        API Gateway Permissions Model for Creating and Managing an API
                     </h2>
                     
                     
                     <p> To allow an API developer to create and manage an API in API Gateway, you must <a href="./IAM/latest/UserGuide/access_policies_create.html" target="_blank">create IAM permissions
                           policies</a> that allow a specified API developer to create, update, deploy,
                        view, or delete required <a href="./apigateway/api-reference/resource/" target="_blank">API entities</a>. You
                        attach the permissions policy to an <a href="./IAM/latest/UserGuide/id_users.html" target="_blank">IAM
                           user</a> representing the developer, to an <a href="./IAM/latest/UserGuide/id_groups.html" target="_blank">IAM group</a> containing the user, or to an
                        <a href="./IAM/latest/UserGuide/id_roles.html" target="_blank">IAM role</a> assumed by the user. 
                     </p>
                     
                     <p>In this IAM policy document, the IAM <code class="literal">Resource</code>
                        element contains a list of API Gateway API entities, including <a href="./apigateway/api-reference/resource/" target="_blank">API Gateway resources</a> and <a href="./apigateway/api-reference/link-relation/" target="_blank">API Gateway link-relations</a>. The IAM <code class="literal">Action</code> element contains the required API Gateway API-managing
                        actions. These actions are declared in the <code class="literal">apigateway:<em class="replaceable"><code>HTTP_VERB</code></em></code> format, where <code class="literal">apigateway</code> designates the underlying API management
                        component of API Gateway, and <code class="literal"><em class="replaceable"><code>HTTP_VERB</code></em></code> represents HTTP verbs supported by
                        API Gateway. 
                     </p>
                     
                     <p>For more information on how to use this permissions model, see <a href="api-gateway-control-access-using-iam-policies-to-create-and-manage-api.html"> Control Access for Managing an API</a>. 
                     </p>
                     
                     
                     <h2 id="api-gateway-control-access-iam-permissions-model-for-calling-api">
                        API Gateway Permissions Model for Invoking an API 
                     </h2>
                     
                     <p>To allow an API caller to invoke the API or refresh its caching, you must create IAM
                        policies that permit a specified API caller to invoke the API method for which the
                        IAM
                        user authentication is enabled. The API developer sets the method&apos;s <code class="literal">authorizationType</code> property to <code class="literal">AWS_IAM</code> to require that the caller submit the IAM user&apos;s access keys to be
                        authenticated. Then, you attach the policy to an IAM user representing the API caller,
                        to an IAM group containing the user, or to an IAM role assumed by the user. 
                     </p>
                     
                     <p>In this IAM permissions policy statement, the IAM <code class="literal">Resource</code> element contains a list of deployed API methods identified by given
                        HTTP verbs and API Gateway <a href="./apigateway/api-reference/resource/" target="_blank">resource paths</a>. The
                        IAM <code class="literal">Action</code> element contains the required API Gateway API
                        executing actions. These actions include <code class="literal">execute-api:Invoke</code> or <code class="literal">execute-api:InvalidateCache</code>, where <code class="literal">execute-api</code> designates the underlying API execution component of API Gateway. 
                     </p>
                     
                     <p>For more information on how to use this permissions model, see <a href="api-gateway-control-access-using-iam-policies-to-invoke-api.html"> Control
                           Access for Invoking an API</a>. 
                     </p>
                     
                     <p> When an API is integrated with an AWS service (for example, AWS Lambda) in the back
                        end, API Gateway must also have permissions to access integrated AWS resources (for
                        example,
                        invoking a Lambda function) on behalf of the API caller. To grant these permissions,
                        create an IAM role of the <b>AWS service for API Gateway</b> type. When you
                        create this role in the IAM Management console, this resulting role contains the
                        following IAM trust policy that declares API Gateway as a trusted entity permitted
                        to assume
                        the role: 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Sid&quot;: &quot;&quot;,
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;Service&quot;: &quot;apigateway.amazonaws.com&quot;
      },
      &quot;Action&quot;: &quot;sts:AssumeRole&quot;
    }
  ]
}</code></pre>
                     <p>If you create the IAM role by calling the <a href="./cli/latest/reference/iam/create-role.html" target="_blank">create-role</a> command of CLI or a
                        corresponding SDK method, you must supply the above trust policy as the input parameter
                        of <code class="code">assume-role-policy-document</code>. Do not attempt to create such a policy
                        directly in the IAM Management console or calling AWS CLI <a href="./cli/latest/reference//iam/create-policy.html" target="_blank">create-policy</a> command or a
                        corresponding SDK method.
                     </p>
                     
                     <p>For API Gateway to call the integrated AWS service, you must also attach to this role
                        appropriate IAM permissions policies for calling integrated AWS services. For
                        example, to call a Lambda function, you must include the following IAM permissions
                        policy in the IAM role: 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: &quot;lambda:InvokeFunction&quot;,
            &quot;Resource&quot;: &quot;*&quot;
        }
    ]
}</code></pre>
                     <p>Note that Lambda supports resource-based access policy, which combines both trust
                        and
                        permissions policies. When integrating an API with a Lambda function using the API
                        Gateway
                        console, you are not asked to set this IAM role explicitly, because the console sets
                        the resource-based permissions on the Lambda function for you, with your consent.
                        
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p> To enact access control to an AWS service, you can use either the caller-based
                           permissions model, where a permissions policy is directly attached to the caller&apos;s
                           IAM user or group, or the role-based permission model, where a permissions policy
                           is attached to an IAM role that API Gateway can assume. The permissions policies may
                           differ in the two models. For example, the caller-based policy blocks the access
                           while the role-based policy allows it. You can take advantage of this to require
                           that an IAM user access an AWS service through an API Gateway API only. 
                        </p>
                     </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="apigateway-resource-policies-aws-condition-keys.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="api-gateway-control-access-using-iam-policies-to-create-and-manage-api.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="
                API Gateway Permissions Model for Creating and Managing an API"><a class="pagetoc" href="#api-gateway-control-access-iam-permissions-model-for-managing-api">
                              API Gateway Permissions Model for Creating and Managing an API</a></li>
                        <li class="pagetoc" name="
                API Gateway Permissions Model for Invoking an API "><a class="pagetoc" href="#api-gateway-control-access-iam-permissions-model-for-calling-api">
                              API Gateway Permissions Model for Invoking an API </a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>