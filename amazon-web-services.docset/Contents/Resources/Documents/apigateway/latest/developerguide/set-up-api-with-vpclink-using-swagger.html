<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Set up API with Private
         Integrations Using Swagger - Amazon API Gateway
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="set-up-private-integration.html" title="Set up API Gateway Private Integrations">
      <link rel="prev" href="set-up-api-with-vpclink-cli.html" title="Set up an API Gateway API with Private
                Integrations Using the AWS CLI">
      <link rel="next" href="how-to-mock-integration.html" title="Set up Mock Integrations in API Gateway">
      <meta name="description" content="The following JSON-formatted API Swagger file shows an example of an API with a VPC link as referenced by a stage variable ( ${stageVariables.vpcLinkId} ):">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-api-with-vpclink-using-swagger.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="how-to-create-api.html">Creating an API in Amazon API Gateway</a> &#xBB; <a href="how-to-integration-settings.html">Set up API Integrations in API Gateway</a> &#xBB; <a href="set-up-private-integration.html">Set up API Gateway Private Integrations</a> &#xBB; <span class="breadcrumb">Set up API with Private
                                    Integrations Using Swagger</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="set-up-api-with-vpclink-using-swagger">Set up API with Private
                        Integrations Using Swagger
                     </h1>
                     <p>You can set up an API with the private integration by importing the API
                        Swagger file. The settings are similar to the Swagger definitions of an API with HTTP
                        integrations, with the following exceptions:  
                     </p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>You must explicitly set <code class="code">connectionType</code> to
                                 <code class="code">VPC_LINK</code>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>You must explicitly set <code class="code">connectionId</code> to the ID of a
                                 <code class="code">VpcLink</code> or to a stage variable referencing the ID of a
                                 <code class="code">VpcLink</code>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>The <code class="code">uri</code> parameter in the private integration points to an
                                 HTTP/HTTPS endpoint in the VPC, but is used instead to set up the integration
                                 request&apos;s <code class="code">Host</code> header.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>The <code class="code">uri</code> parameter in the private integration with an HTTPS
                                 endpoint in the VPC is used to verify the stated domain name against the one in
                                 the certificate installed on the VPC endpoint.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <p> You can use a stage variable to reference the <code class="code">VpcLink</code> ID.
                        Or you can assign the ID value directly to <code class="code">connectionId</code>. 
                     </p>
                     <p>The following JSON-formatted API Swagger file shows an example of an API with a VPC
                        link as referenced by a stage variable
                        (<code class="code">${stageVariables.vpcLinkId}</code>):
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;swagger&quot;: &quot;2.0&quot;,
  &quot;info&quot;: {
    &quot;version&quot;: &quot;2017-11-17T04:40:23Z&quot;,
    &quot;title&quot;: &quot;MyApiWithVpcLink&quot;
  },
  &quot;host&quot;: &quot;p3wocvip9a.execute-api.us-west-2.amazonaws.com&quot;,
  &quot;basePath&quot;: &quot;/test&quot;,
  &quot;schemes&quot;: [
    &quot;https&quot;
  ],
  &quot;paths&quot;: {
    &quot;/&quot;: {
      &quot;get&quot;: {
        &quot;produces&quot;: [
          &quot;application/json&quot;
        ],
        &quot;responses&quot;: {
          &quot;200&quot;: {
            &quot;description&quot;: &quot;200 response&quot;,
            &quot;schema&quot;: {
              &quot;$ref&quot;: &quot;#/definitions/Empty&quot;
            }
          }
        },
        &quot;x-amazon-apigateway-integration&quot;: {
          &quot;responses&quot;: {
            &quot;default&quot;: {
              &quot;statusCode&quot;: &quot;200&quot;
            }
          },
          &quot;uri&quot;: &quot;http://myApi.example.com&quot;,
          &quot;passthroughBehavior&quot;: &quot;when_no_match&quot;,
          &quot;connectionType&quot;: &quot;VPC_LINK&quot;,
          &quot;connectionId&quot;: &quot;${stageVariables.vpcLinkId}&quot;,
          &quot;httpMethod&quot;: &quot;GET&quot;,
          &quot;type&quot;: &quot;http_proxy&quot;
        }
      }
    }
  },
  &quot;definitions&quot;: {
    &quot;Empty&quot;: {
      &quot;type&quot;: &quot;object&quot;,
      &quot;title&quot;: &quot;Empty Schema&quot;
    }
  }
}</code></pre></div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="set-up-api-with-vpclink-cli.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="how-to-mock-integration.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper"></div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>