<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Set up Tags for an API Stage in API Gateway - Amazon API Gateway</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="set-up-stages.html" title="Set up a Stage in API Gateway">
      <link rel="prev" href="aws-api-gateway-stage-variables-reference.html" title="Amazon API Gateway Stage Variables Reference">
      <link rel="next" href="canary-release.html" title="Set up an API Gateway Canary Release
            Deployment">
      <meta name="description" content="Learn how to set up and manage tags in Amazon API Gateway.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-tags.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="how-to-deploy-api.html">Deploying an API in Amazon API Gateway</a> &#xBB; <a href="set-up-stages.html">Set up a Stage in API Gateway</a> &#xBB; <span class="breadcrumb">Set up Tags for an API Stage in API Gateway</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="set-up-tags">Set up Tags for an API Stage in API Gateway</h1>
                     <p>Tags are metadata that you assign to your AWS resources. They are commonly used for
                        tracking resource usage by custom-defined categories, which provides a simple mechanism
                        to
                        separate distinct organizational units within a single AWS account. A tag consists
                        of a
                        key-value pair. For more information on how to use tags, see <a href="https://aws.amazon.com/answers/account-management/aws-tagging-strategies/" target="_blank">AWS
                           Tagging Strategy</a>.
                     </p>
                     <p> In API Gateway, you can assign tags to an API stage for managing cost allocation
                        for
                        request invocation and caching that are associated with the
                        stage. For example, when you add the tag
                        <code class="code">Department:Sales</code> to an API stage, it shows up
                        in
                        AWS Billing and Cost Management as a cost allocation tag. After a tag is activated,
                        you can use it to filter costs
                        and usage by using <a href="./awsaccountbilling/latest/aboutv2/cost-explorer-what-is.html" target="_blank">Cost Explorer</a> in the <a href="./awsaccountbilling/latest/aboutv2/billing-what-is.html" target="_blank">AWS Billing and Cost Management</a> console. 
                     </p>
                     <p>You can add a tag to an API stage, remove the tag from the stage, or view the tag.
                        To do
                        this, you can use the API Gateway console, the AWS CLI/SDK, or the API Gateway REST
                        API.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#set-up-tags-using-console">Set up Tags for an API Stage Using the API Gateway
                                 Console</a></li>
                           <li><a href="#set-up-tags-using-api">Set up Tags for an API Stage Using the API Gateway
                                 REST API</a></li>
                           <li><a href="#api-gateway-tag-restrictions">Tag Restrictions</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="set-up-tags-using-console">Set up Tags for an API Stage Using the API Gateway
                        Console
                     </h2>
                     
                     <p>The following procedure describes how to set up tags for an API stage.</p>
                     
                     <p class="title"><b>To set up tags for an API stage by using the API Gateway console</b></p>
                     <ol>
                        <li>
                           <p>Sign in to the API Gateway console.</p>
                        </li>
                        <li>
                           <p>Choose an existing API, or create a new API that includes resources, methods, and
                              the
                              corresponding integrations.
                           </p>
                        </li>
                        <li>
                           
                           <p>Choose a stage or deploy the API to a new stage.</p>
                           
                        </li>
                        <li>
                           <p>In the <b>Stage Editor</b>, choose the <b>Settings</b> tab. 
                           </p>
                        </li>
                        <li>
                           
                           <p> Under the <b>Tags</b> section, choose <b>Add Stage
                                 Tag</b>. Type a tag key (for example, <code class="code">Department</code>) in the
                              <b>Key</b> column, and type a tag value (for example,
                              <code class="code">Sales</code>) in the <b>Value</b> column. Choose the
                              checkmark icon to save the tag.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> If needed, repeat Step 5 to add more tags to the API stage. The maximum
                              number of tags per stage is 50.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p> To remove an existing tag from the stage, choose the trash bin icon next to
                              the selected tag.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Save Changes</b> to finish setting up the stage
                              tags.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     <h2 id="set-up-tags-using-api">Set up Tags for an API Stage Using the API Gateway
                        REST API
                     </h2>
                     
                     <p>You can set up tags for an API stage using the API Gateway REST API by doing one of
                        the
                        following:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>Call <a href="./apigateway/api-reference/link-relation/tags-tag/" target="_blank"><code class="code">tags:tag</code></a> to tag an
                                 API stage.
                              </p>
                           </li>
                           <li class="listitem">
                              
                              <p> Call <a href="./apigateway/api-reference/link-relation/tags-untag/" target="_blank"><code class="code">tags:untag</code></a> to delete one or more tags from an API
                                 stage.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              <p>Call <code class="code">stage:create</code> to add one or more tags to an API stage.
                              </p>
                           </li>
                        </ul>
                     </div>
                     
                     <p>You can also call <a href="./apigateway/api-reference/link-relation/tags-get/" target="_blank"><code class="code">tags:get</code></a> to describe tags in an API stage.
                     </p>
                     
                     
                     <h3 id="tag-a-stage-using-api">Tag an API Stage</h3>
                     
                     <p>After you deploy an API (<code class="code">m5zr3vnks7</code>) to a stage (<code class="code">test</code>),
                        tag the stage by calling <a href="./apigateway/api-reference/link-relation/tags-tag/" target="_blank"><code class="code">tags:tag</code></a>. The required stage Amazon Resource Name
                        (ARN) (<code class="code">arn:aws:apigateway:us-east-1::/restapis/m5zr3vnks7/stages/test</code>)
                        must be URL encoded
                        (<code class="code">arn%3Aaws%3Aapigateway%3Aus-east-1%3A%3A%2Frestapis%2Fm5zr3vnks7%2Fstages%2Ftest</code>). 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">PUT /tags/arn%3Aaws%3Aapigateway%3Aus-east-1%3A%3A%2Frestapis%2Fm5zr3vnks7%2Fstages%2Ftest

{
  &quot;tags&quot; : {
    &quot;Department&quot; : &quot;Sales&quot;
  }
}</code></pre>
                     <p> You can also use the previous request to update an existing tag to a new value. </p>
                     
                     <p>You can add tags to a stage when calling <a href="./apigateway/api-reference/link-relation/stage-create/" target="_blank"><code class="code">stage:create</code></a> to create the stage:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">POST /restapis/&lt;restapi_id&gt;/stages

{
  &quot;stageName&quot; : &quot;test&quot;,
  &quot;deploymentId&quot; : &quot;adr134&quot;,
  &quot;description&quot; : &quot;test deployment&quot;,
  &quot;cacheClusterEnabled&quot; : &quot;true&quot;,
  &quot;cacheClusterSize&quot; : &quot;500&quot;,
  &quot;variables&quot; : {
    &quot;sv1&quot; : &quot;val1&quot;
  },
  &quot;documentationVersion&quot; : &quot;test&quot;,

  &quot;tags&quot; : {
    &quot;Department&quot; : &quot;Sales&quot;,
    &quot;Division&quot; : &quot;Retail&quot;
  }
}</code></pre>
                     
                     
                     <h3 id="untag-a-stage-using-api">Untag an API Stage</h3>
                     
                     <p> To remove the <code class="code">Department</code> tag from the stage, call <a href="./apigateway/api-reference/link-relation/tags-untag/" target="_blank"><code class="code">tags:untag</code></a>: 
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">DELETE /tags/arn%3Aaws%3Aapigateway%3Aus-east-1%3A%3A%2Frestapis%2Fm5zr3vnks7%2Fstages%2Ftest?tagKeys=Department
Host: apigateway.us-east-1.amazonaws.com
Authorization: ...</code></pre>
                     <p> To remove more than one tag, use a comma-separated list of tag keys in the query
                        expression&#x2014;for example,<code class="code">?tagKeys=Department,Division,&#x2026;</code>. 
                     </p>
                     
                     
                     
                     <h3 id="get-tags-using-api">Describe Tags for an API Stage</h3>
                     
                     <p>To describe existing tags on a given stage, call <a href="./apigateway/api-reference/link-relation/tags-get/" target="_blank"><code class="code">tags:get</code></a>:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">GET /tags/arn%3Aaws%3Aapigateway%3Aus-east-1%3A%3A%2Frestapis%2Fm5zr3vnks7%2Fstages%2Ftags
Host: apigateway.us-east-1.amazonaws.com
Authorization: ...
</code></pre>
                     <p>The successful response is similar to the following:</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">200 OK

{
    &quot;_links&quot;: {
        &quot;curies&quot;: {
            &quot;href&quot;: &quot;http://docs.aws.amazon.com/apigateway/latest/developerguide/restapi-tags-{rel}.html&quot;,
            &quot;name&quot;: &quot;tags&quot;,
            &quot;templated&quot;: true
        },
        &quot;tags:tag&quot;: {
            &quot;href&quot;: &quot;/tags/arn%3Aaws%3Aapigateway%3Aus-east-1%3A%3A%2Frestapis%2Fm5zr3vnks7%2Fstages%2Ftags&quot;
        },
        &quot;tags:untag&quot;: {
            &quot;href&quot;: &quot;/tags/arn%3Aaws%3Aapigateway%3Aus-east-1%3A%3A%2Frestapis%2Fm5zr3vnks7%2Fstages%2Ftags{?tagKeys}&quot;,
            &quot;templated&quot;: true
        }
    },
    &quot;tags&quot;: {
        &quot;Department&quot;: &quot;Sales&quot;
    }
}</code></pre>
                     
                     
                     <h2 id="api-gateway-tag-restrictions">Tag Restrictions</h2>
                     
                     <p>The following restrictions apply to tags for API Gateway resources:</p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>Tags are applicable to the <a href="./apigateway/api-reference/resource/stage/" target="_blank"><code class="code">Stage</code></a> resource only.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>The maximum number of tags per stage is 50.</p>
                           </li>
                           <li class="listitem">
                              <p>The maximum tag key length is 128 Unicode characters in UTF-8.</p>
                           </li>
                           <li class="listitem">
                              <p>The maximum tag value length is 256 Unicode characters in UTF-8.</p>
                           </li>
                           <li class="listitem">
                              <p>Tag keys and values are case sensitive.</p>
                           </li>
                           <li class="listitem">
                              <p>The valid character set is [a-zA-Z+-=._:/] for tag keys and values.</p>
                           </li>
                           <li class="listitem">
                              <p>Tag keys and values can&apos;t start with <code class="code">aws:</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-api-gateway-stage-variables-reference.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="canary-release.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Set up Tags for an API Stage Using the API Gateway
                Console"><a class="pagetoc" href="#set-up-tags-using-console">Set up Tags for an API Stage Using the API Gateway
                              Console</a></li>
                        <li class="pagetoc" name="Set up Tags for an API Stage Using the API Gateway
                REST API"><a class="pagetoc" href="#set-up-tags-using-api">Set up Tags for an API Stage Using the API Gateway
                              REST API</a></li>
                        <li class="pagetoc" name="Tag Restrictions"><a class="pagetoc" href="#api-gateway-tag-restrictions">Tag Restrictions</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>