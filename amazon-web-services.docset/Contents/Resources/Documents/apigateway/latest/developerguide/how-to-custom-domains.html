<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Set up Custom Domain Name for an API in
         API Gateway - Amazon API Gateway
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="how-to-deploy-api.html" title="Deploying an API in Amazon API Gateway">
      <link rel="prev" href="simple-calc-lambda-api-swagger-definition.html" title="Simple Calculator API Swagger Definition">
      <link rel="next" href="how-to-custom-domains-prerequisites.html" title="Get Certificates Ready in
                AWS Certificate Manager">
      <meta name="description" content="Learn how to set up a custom domain name for an API in API Gateway.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon API Gateway">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-custom-domains.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/apigateway">Amazon API Gateway</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="how-to-deploy-api.html">Deploying an API in Amazon API Gateway</a> &#xBB; <span class="breadcrumb">Set up Custom Domain Name for an API in
                                    API Gateway</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="how-to-custom-domains">Set up Custom Domain Name for an API in
                        API Gateway
                     </h1>
                     <p> After deploying your API, you (and your customers) can invoke the API using the default
                        base URL of the following format: 
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="code" copy="true">https://<em class="replaceable"><code>api-id</code></em>.execute-api.<em class="replaceable"><code>region</code></em>.amazonaws.com/<em class="replaceable"><code>stage</code></em></code></code></pre><p>where <code class="code">api-id</code> is generated by API Gateway, <code class="code">region</code> is specified by you
                        when creating the API and <code class="code">stage</code> is specify by you when deploying the
                        API.
                     </p>
                     <p>The host name portion of the URL (i.e.,
                        <code class="code"><em class="replaceable"><code>api-id</code></em>.execute-api.<em class="replaceable"><code>region</code></em>.amazonaws.com</code>)
                        refers to an API endpoint, which can be edge-optimized or regional. The default API
                        endpoint
                        can be difficult to recall and not user-friendly. To provide a simpler and more intuitive
                        URL for your API users, you can set up a custom domain name (e.g.,
                        <code class="code">api.example.com</code>)  as the API&apos;s host name and choose a base path (e.g.,
                        <code class="code">myservice</code>) to map the alternative URL to this API. The more user-friendly
                        API base URL now becomes:
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">https://api.example.com/myservice</code></pre><p> If you do not set any base mapping under a custom domain name, the resulting API&apos;s
                        base
                        URL is the same as the custom domain (e.g., <code class="code">https://api.example.com</code>.) In this
                        case, the custom domain name cannot support more than one API. 
                     </p>
                     <p>When you deploy an edge-optimized API, API Gateway sets up an Amazon CloudFront distribution
                        and a DNS
                        record to map the API domain name to the CloudFront distribution domain name. Requests
                        for the API
                        are then routed to API Gateway through the mapped CloudFront distribution. 
                     </p>
                     <p>When you create a custom domain name for an edge-optimized API, API Gateway sets up
                        a CloudFront
                        distribution. But you must set up a DNS record to map the custom domain name to the
                        CloudFront
                        distribution domain name for API requests bound for the custom domain name to be routed
                        to
                        API Gateway through the mapped CloudFront distribution. You must also provide a certificate
                        for the
                        custom domain name.
                     </p>
                     <p>When you create a custom domain name for a regional API, API Gateway creates a regional
                        domain
                        name for the API. You must set up a DNS record to map the custom domain name to the
                        regional
                        domain name for API requests bound for the custom domain name to be routed to API
                        Gateway through
                        the mapped regional API endpoint. You must also provide a certificate for the custom
                        domain
                        name. 
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p> The CloudFront distribution created by API Gateway is owned by a region-specific
                           account
                           affiliated with API Gateway. When tracing operations to create and update such a CloudFront
                           distribution in CloudWatch logs, you must use this API Gateway account ID. For more
                           information, see
                           <a href="how-to-edge-optimized-custom-domain-name.html#how-to-custom-domain-log-cloudfront-distribution-update-in-cloudtrail">Log Custom Domain Name Creation in CloudTrail</a>. 
                        </p>
                     </div>
                     <p> To set up an edge-optimized custom domain name or to update its certificate, you
                        must
                        have a permission to update CloudFront distributions. You can do so by attaching the
                        following
                        IAM policy statement to an IAM user, group or role in your account: 
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
         {
            &quot;Sid&quot;: &quot;AllowCloudFrontUpdateDistribution&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;cloudfront:updateDistribution&quot;
            ],
            &quot;Resource&quot;: [
                &quot;*&quot;
            ]
        }
    ]
}</code></pre><p> API Gateway supports edge-optimized custom domain names by leveraging Server Name
                        Indication
                        (SNI) on the CloudFront distribution. For more information on using custom domain
                        names on a CloudFront
                        distribution, including the required certificate format and the maximum size of a
                        certificate key length, see <a href="./AmazonCloudFront/latest/DeveloperGuide/SecureConnections.html#CNAMEsAndHTTPS" target="_blank">
                           Using Alternate Domain Names and HTTPS</a> in the
                        <em>Amazon CloudFront Developer Guide</em>. 
                     </p>
                     <p> To set up a custom domain name as your API&apos;s host name, you, as the API owner, must
                        provide an SSL/TLS certificate for the custom domain name. 
                     </p>
                     <p>To provide a certificate for an edge-optimized custom domain name, you can request
                        <a href="./acm/latest/userguide/" target="_blank">AWS Certificate Manager</a> (ACM) to generate a new certificate in ACM or
                        to import into ACM one issued by a third-party certificate authority. 
                     </p>
                     <p>To provide a certificate for a regional custom domain name in a region where ACM is
                        supported, you must request a certificate from ACM. To provide a certificate for a
                        regional custom domain name in a region where ACM is not supported, you must import
                        a
                        certificate to API Gateway in that region. 
                     </p>
                     <p>To import an SSL/TLS certificate, you must provide the PEM-formatted SSL/TLS certificate
                        body, its private key, and the certificate chain for the custom domain name. Each
                        certificate stored in ACM is identified by its ARN. To use an AWS-managed certificate
                        for a domain name, you simply reference its ARN. 
                     </p>
                     <p> ACM makes it straightforward to set up and use a custom domain name for an API: create
                        in or import into ACM a certificate for the given domain name, set up the domain name
                        in
                        API Gateway with the ARN of the certificate provided by ACM, and map a base path under
                        the
                        custom domain name to a deployed stage of the API. With certificates issued by ACM,
                        you do
                        not have to worry about exposing any sensitive certificate details, such as the private
                        key.
                     </p>
                     <p>You must have a registered Internet domain name in order to set up custom domain names
                        for
                        your APIs. If needed, you can register an Internet domain using <a href="./Route53/latest/DeveloperGuide/" target="_blank">Amazon Route&#xA0;53</a> or using a third-party domain registrar of your choice. An API&apos;s
                        custom domain name can be the name of a subdomain or the root domain (aka, zone apex)
                        of a
                        registered Internet domain. 
                     </p>
                     <p>After a custom domain name is created in API Gateway, you must create or update your
                        domain name
                        service (DNS) provider&apos;s resource record to map the edge-optimized custom domain name
                        to its
                        CloudFront distribution domain name or to map the regional custom domain name to its
                        regional API
                        endpoint. Without such a mapping, API requests bound for the custom domain name cannot
                        reach
                        API Gateway.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p> An edge-optimized custom domain name is created in a specific region and owned by
                           a
                           specific AWS account. Moving such a custom domain name between regions or AWS accounts
                           involves deleting the existing CloudFront distribution and creating a new one. The
                           process may
                           take approximately 30 minutes before the new custom domain name becomes available.
                           For
                           more information, see <a href="./AmazonCloudFront/latest/DeveloperGuide/HowToUpdateDistribution.html" target="_blank">Updating
                              CloudFront Distributions</a>. 
                        </p>
                     </div>
                     <p>This section describes how to use ACM to create an SSL/TLS certificate for a custom
                        domain name, to set up the custom domain name for an API, to associate a specific
                        API with a
                        base path under the custom domain name, and to renew (aka rotate) an expiring certificate
                        that was imported into ACM for the custom domain name. 
                     </p>
                     <div class="highlights">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="how-to-custom-domains-prerequisites.html">Get Certificates Ready in
                                 AWS Certificate Manager</a></li>
                           <li><a href="how-to-edge-optimized-custom-domain-name.html">How to Create an
                                 Edge-Optimized Custom Domain Name</a></li>
                           <li><a href="apigateway-regional-api-custom-domain-create.html">Set up a Custom Domain Name
                                 for a Regional API in API Gateway</a></li>
                           <li><a href="apigateway-regional-api-custom-domain-migrate.html">Migrate a Custom Domain Name
                                 to a Different API Endpoint</a></li>
                        </ul>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="simple-calc-lambda-api-swagger-definition.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="how-to-custom-domains-prerequisites.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper"></div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon API Gateway';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>