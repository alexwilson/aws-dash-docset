<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Walkthrough 1: Configure Cross-Region Replication Where Source and
         Destination Buckets Are Owned by the Same AWS Account - Amazon Simple Storage Service
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="crr-example-walkthroughs.html" title="Cross-Region Replication Examples">
      <link rel="prev" href="crr-example-walkthroughs.html" title="Cross-Region Replication Examples">
      <link rel="next" href="crr-walkthrough-2.html" title="Walkthrough 2: Configure Cross-Region Replication Where Source
      and Destination Buckets Are Owned by Different AWS Accounts">
      <meta name="description" content="The first walkthrough for Amazon S3 cross-region replication: Establishing cross-region replication on destination buckets owned by the AWS account.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Simple Storage Service">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/crr-walkthrough1.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/s3">Amazon Simple Storage Service (S3)</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="crr.html">Cross-Region Replication (CRR)</a> &#xBB; <a href="crr-example-walkthroughs.html">Cross-Region Replication Examples</a> &#xBB; <span class="breadcrumb">Walkthrough 1: Configure Cross-Region Replication Where Source and
                                    Destination Buckets Are Owned by the Same AWS Account</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="crr-walkthrough1">Walkthrough 1: Configure Cross-Region Replication Where Source and
                        Destination Buckets Are Owned by the Same AWS Account
                     </h1>
                     <p>In this section, you create two buckets (source and destination) in different AWS
                        Regions, enable versioning on both the buckets, and then configure cross-region replication
                        on the source bucket.
                     </p>
                     <ol>
                        <li>
                           
                           <p>Create two buckets.</p>
                           
                           <ol>
                              <li>
                                 
                                 
                                 <p>Create a <em>source</em> bucket in an AWS Region. For example,
                                    US West (Oregon) (us-west-2). For instructions, see <a href="./AmazonS3/latest/user-guide/create-bucket.html" target="_blank">How Do I Create an S3 Bucket?</a> in the
                                    <em>Amazon Simple Storage Service Console User Guide</em>.
                                 </p>
                                 
                                 
                              </li>
                              <li>
                                 
                                 <p>Create a <em>destination</em> bucket in another AWS Region. For
                                    example, US East (N. Virginia) (us-east-1).
                                 </p>
                                 
                              </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>Enable versioning on both buckets. For instructions, see <a href="./AmazonS3/latest/user-guide/enable-versioning.html" target="_blank">How Do I Enable or Suspend Versioning for an S3 Bucket?</a> in the <em>Amazon Simple Storage Service Console User Guide</em>.
                              
                              
                              
                           </p>
                           
                           
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>If you have an object expiration lifecycle policy in your non-versioned bucket 
                                 and you want to maintain the same permanent delete behavior when you enable versioning,
                                 you
                                 must add a noncurrent expiration policy. The noncurrent expiration lifecycle policy
                                 will 
                                 manage the deletes of the noncurrent object versions in the version-enabled bucket.
                                 
                                 (A version-enabled bucket maintains one current and zero or more noncurrent object
                                 versions.)
                                 For more information, see
                                 <a href="./AmazonS3/latest/user-guide/create-lifecycle.html" target="_blank">
                                    How Do I Create a Lifecycle Policy for an S3 Bucket?</a> in the
                                 <em>Amazon Simple Storage Service Console User Guide</em>. 
                              </p>
                           </div> 
                           
                        </li>
                        <li>
                           
                           <p>Enable cross-region replication on the source bucket. You
                              decide if you want to replicate all objects or only objects with a specific prefix
                              (when
                              using the console, think of this as deciding if you want to replicate only objects
                              from a specific folder). For instructions, see <a href="./AmazonS3/latest/user-guide/enable-crr.html" target="_blank">How Do I Enable and Configure Cross-Region Replication for an S3 Bucket?</a> in the
                              <em>Amazon Simple Storage Service Console User Guide</em>.
                           </p>
                           
                           
                        </li>
                        <li>
                           
                           <p>Test the setup as follows:</p>
                           
                           <ol>
                              <li>
                                 
                                 <p>Create objects in the source bucket and verify that Amazon S3 replicated the
                                    objects in the destination bucket. The amount of time it takes for Amazon S3 to replicate
                                    an
                                    object depends on the object size. For information about finding replication status,
                                    see <a href="crr-status.html">Finding the Cross-Region Replication Status </a>.  
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Update the object&apos;s access control list (ACL) in the source bucket, and verify
                                    that changes appear in the destination bucket. For instructions, see <a href="./AmazonS3/latest/user-guide/set-permissions.html" target="_blank">Setting Bucket and Object Access
                                       Permissions</a> in the <em>Amazon Simple Storage Service Console User Guide</em>.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Update the object&apos;s metadata and verify that the changes appear in the destination
                                    bucket. For instructions, see <a href="./AmazonS3/latest/user-guide/add-object-metadata.html" target="_blank">How Do I Add Metadata to an S3 Object?</a>
                                    in the <em>Amazon Simple Storage Service Console User Guide</em>.
                                 </p>
                                 
                              </li>
                           </ol>
                           
                           <p>Remember that the replicas are exact copies of the objects in the source bucket.</p>
                           
                        </li>
                     </ol>
                     
                     <h2 id="crr-wt1-related-topics">Related Topics</h2>
                     
                     <p><a href="crr.html">Cross-Region Replication (CRR)</a></p>
                     
                     
                     <p><a href="crr-walkthrough-2.html">Walkthrough 2: Configure Cross-Region Replication Where Source
                           and Destination Buckets Are Owned by Different AWS Accounts</a></p>
                     
                     <p><a href="crr-what-is-isnot-replicated.html">What Is and Is Not Replicated</a></p>
                     
                     <p><a href="crr-status.html">Finding the Cross-Region Replication Status </a></p>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="crr-example-walkthroughs.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="crr-walkthrough-2.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Related Topics"><a class="pagetoc" href="#crr-wt1-related-topics">Related Topics</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Simple Storage Service';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>