<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Amazon S3 Transfer Acceleration Examples - Amazon Simple Storage Service</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="transfer-acceleration.html" title="Amazon S3 Transfer Acceleration">
      <link rel="prev" href="transfer-acceleration.html" title="Amazon S3 Transfer Acceleration">
      <link rel="next" href="RequesterPaysBuckets.html" title="Requester Pays Buckets">
      <meta name="description" content="Contains Amazon S3 Transfer Acceleration examples.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Simple Storage Service">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/transfer-acceleration-examples.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/s3">Amazon Simple Storage Service (S3)</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="UsingBucket.html">Working with Amazon S3 Buckets</a> &#xBB; <a href="transfer-acceleration.html">Amazon S3 Transfer Acceleration</a> &#xBB; <span class="breadcrumb">Amazon S3 Transfer Acceleration Examples</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="transfer-acceleration-examples">Amazon S3 Transfer Acceleration Examples</h1>
                     <p>This section provides examples of how to enable Amazon S3 Transfer Acceleration on
                        a bucket 
                        and use the acceleration endpoint for the enabled bucket. 
                        Some of the AWS SDK supported languages (for example, Java and .NET) use an accelerate
                        endpoint client configuration flag 
                        so you don&apos;t need to explicitly set the endpoint for Transfer Acceleration to <em class="replaceable"><code>bucketname</code></em>.s3-accelerate.amazonaws.com.
                        For more information about Transfer Acceleration,
                        see <a href="transfer-acceleration.html">Amazon S3 Transfer Acceleration</a>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#transfer-acceleration-examples-console">Using the Amazon S3 Console</a></li>
                           <li><a href="#transfer-acceleration-examples-aws-cli">Using Transfer Acceleration from the AWS Command Line Interface (AWS CLI) </a></li>
                           <li><a href="#transfer-acceleration-examples-java">Using Transfer Acceleration with the
                                 AWS SDK for Java</a></li>
                           <li><a href="#transfer-acceleration-examples-dotnet">Using Transfer Acceleration from the AWS SDK
                                 for .NET</a></li>
                           <li><a href="#transfer-acceleration-examples-javascript">Using Transfer Acceleration from the AWS SDK for JavaScript</a></li>
                           <li><a href="#transfer-acceleration-examples-python">Using Transfer Acceleration from the AWS SDK for Python (Boto)</a></li>
                           <li><a href="#transfer-acceleration-examples-sdks">Using Other AWS SDKs</a></li>
                        </ul>
                     </div>
                     <h2 id="transfer-acceleration-examples-console">Using the Amazon S3 Console</h2>
                     
                     
                     <p>For information about enabling Transfer Acceleration on a bucket using the Amazon
                        S3 console,
                        see <a href="./AmazonS3/latest/user-guide/enable-transfer-acceleration.html" target="_blank">Enabling Transfer Acceleration</a> 
                        in the <em>Amazon Simple Storage Service Console User Guide</em>.
                     </p>
                     
                     <h2 id="transfer-acceleration-examples-aws-cli">Using Transfer Acceleration from the AWS Command Line Interface (AWS CLI) </h2>
                     
                     
                     <p>This section provides examples of AWS CLI commands used for Transfer Acceleration.
                        
                        For instructions on setting up the AWS CLI, see <a href="setup-aws-cli.html">Setting Up the AWS CLI</a>.
                     </p>
                     
                     
                     <h3 id="transfer-acceleration-examples-aws-cli-1">Enabling Transfer Acceleration on a Bucket Using the AWS CLI</h3>
                     
                     
                     <p>Use the AWS CLI <a href="./cli/latest/reference/s3api/put-bucket-accelerate-configuration.html" target="_blank"> put-bucket-accelerate-configuration</a> command to enable or suspend
                        Transfer Acceleration on a bucket. The following example sets <code class="code">Status=Enabled</code> to
                        enable Transfer Acceleration on a bucket. You use <code class="code">Status=Suspended</code> to suspend
                        Transfer Acceleration.
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">$ aws s3api put-bucket-accelerate-configuration --bucket <em class="replaceable"><code>bucketname</code></em> --accelerate-configuration Status=Enabled</code></pre></div>
                     </div>
                     
                     
                     
                     <h3 id="transfer-acceleration-examples-aws-cli-2">Using the Transfer Acceleration from
                        the AWS CLI 
                     </h3>
                     
                     
                     <p>Setting the configuration value <code class="code">use_accelerate_endpoint</code> to
                        <code class="code">true</code> in a profile in your AWS Config File will direct all Amazon S3 requests
                        made by s3 and s3api AWS CLI commands to the accelerate endpoint:
                        <code class="code">s3-accelerate.amazonaws.com</code>. Transfer Acceleration must be enabled on your bucket
                        to use the accelerate endpoint. 
                     </p>
                     
                     <p>All request are sent using the virtual style of bucket addressing:&#xA0;
                        <code class="code">my-bucket.s3-accelerate.amazonaws.com</code>.&#xA0;Any <code class="code">ListBuckets</code>,
                        <code class="code">CreateBucket</code>, and <code class="code">DeleteBucket</code> requests will not be sent to
                        the accelerate endpoint as the endpoint does not support those operations. For more
                        information about <code class="code">use_accelerate_endpoint</code>, see <a href="./cli/latest/topic/s3-config.html" target="_blank">AWS CLI S3 Configuration</a>. 
                     </p>
                     
                     <p>The following example sets <code class="code">use_accelerate_endpoint</code> to <code class="code">true</code> in the default profile.
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">$ aws configure set default.s3.use_accelerate_endpoint true</code></pre></div>
                     </div>
                     
                     
                     <p>If you want to use the accelerate endpoint for some AWS CLI commands but not others,
                        you can use either one of the following two methods: 
                     </p>
                     
                     <div class="itemizedlist">
                        
                         
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>You can use the accelerate endpoint per command by setting the <code class="code">--endpoint-url</code>
                                 parameter to <code class="code">https://s3-accelerate.amazonaws.com</code> or
                                 <code class="code">http://s3-accelerate.amazonaws.com</code> for any s3 or s3api command.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              <p>You can setup separate profiles in your AWS Config File. For example, 
                                 create one profile that sets <code class="code">use_accelerate_endpoint</code> to <code class="code">true</code> and a profile that does not set <code class="code">use_accelerate_endpoint</code>.
                                 When you execute a command specify which profile you want to use, depending upon whether
                                 or not you want to use the accelerate endpoint. 
                                 
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     
                     <h3 id="transfer-acceleration-examples-aws-cli-3">AWS CLI Examples of Uploading an
                        Object to a Bucket Enabled for Transfer Acceleration
                     </h3>
                     
                     
                     <p>The following example uploads a file to a bucket enabled for Transfer Acceleration
                        by using the
                        default profile that has been configured to use the accelerate endpoint.
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">$ aws s3 cp <em class="replaceable"><code>file.txt</code></em> s3://<em class="replaceable"><code>bucketname/keyname</code></em> --region <em class="replaceable"><code>region</code></em></code></pre></div>
                     </div>
                     
                     <p>The following example uploads a file to a bucket enabled for Transfer Acceleration
                        by using the
                        <code class="code">--endpoint-url</code> parameter to specify the accelerate endpoint.
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">$ aws configure set s3.addressing_style virtual
$ aws s3 cp <em class="replaceable"><code>file.txt</code></em> s3://<em class="replaceable"><code>bucketname/keyname</code></em> --region <em class="replaceable"><code>region</code></em> --endpoint-url http://s3-accelerate.amazonaws.com</code></pre></div>
                     </div>
                     
                     
                     
                     <h2 id="transfer-acceleration-examples-java">Using Transfer Acceleration with the
                        AWS SDK for Java
                     </h2>
                     
                     
                     <div class="example">
                        <div class="example-contents">
                           <p>The following example shows how to use an accelerate endpoint to upload an object
                              to
                              Amazon S3. The example does the following:
                           </p>
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p>Creates an <code class="code">AmazonS3Client</code> that is configured to use accelerate
                                       endpoints. All buckets that the client accesses must have transfer acceleration
                                       enabled.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>Enables transfer acceleration on a specified bucket. This step is necessary only
                                       if the bucket you specify doesn&apos;t already have transfer acceleration enabled.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>Verifies that transfer acceleration is enabled for the specified bucket.</p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>Uploads a new object to the specified bucket using the bucket&apos;s accelerate
                                       endpoint.
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           <p>For more information about using Transfer Acceleration, see <a href="transfer-acceleration.html#transfer-acceleration-getting-started">Getting Started with
                                 Amazon S3 Transfer Acceleration</a>. For instructions on creating
                              and testing a working sample, see <a href="UsingTheMPJavaAPI.html#TestingJavaSamples">Testing the Amazon S3 Java Code Examples</a>.
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="java ">import com.amazonaws.AmazonServiceException;
import com.amazonaws.SdkClientException;
import com.amazonaws.auth.profile.ProfileCredentialsProvider;
import com.amazonaws.services.s3.AmazonS3;
import com.amazonaws.services.s3.AmazonS3ClientBuilder;
import com.amazonaws.services.s3.model.BucketAccelerateConfiguration;
import com.amazonaws.services.s3.model.BucketAccelerateStatus;
import com.amazonaws.services.s3.model.GetBucketAccelerateConfigurationRequest;
import com.amazonaws.services.s3.model.SetBucketAccelerateConfigurationRequest;

public class TransferAcceleration {
    public static void main(String[] args) {
        String clientRegion = &quot;*** Client region ***&quot;;
        String bucketName = &quot;*** Bucket name ***&quot;;
        String keyName = &quot;*** Key name ***&quot;;
        
        try {
            // Create an Amazon S3 client that is configured to use the accelerate endpoint.
            AmazonS3 s3Client = AmazonS3ClientBuilder.standard()
                    .withRegion(clientRegion)
                    .withCredentials(new ProfileCredentialsProvider())
                    .enableAccelerateMode()
                    .build();

            // Enable Transfer Acceleration for the specified bucket.
            s3Client.setBucketAccelerateConfiguration(
                    new SetBucketAccelerateConfigurationRequest(bucketName,
                                                                new BucketAccelerateConfiguration(
                                                                        BucketAccelerateStatus.Enabled)));
    
            // Verify that transfer acceleration is enabled for the bucket.
            String accelerateStatus = s3Client.getBucketAccelerateConfiguration(
                                                    new GetBucketAccelerateConfigurationRequest(bucketName))
                                              .getStatus();
            System.out.println(&quot;Bucket accelerate status: &quot; + accelerateStatus);
            
            // Upload a new object using the accelerate endpoint.
            s3Client.putObject(bucketName, keyName, &quot;Test object for transfer acceleration&quot;);
            System.out.println(&quot;Object \&quot;&quot; + keyName + &quot;\&quot; uploaded with transfer acceleration.&quot;);
        }
        catch(AmazonServiceException e) {
            // The call was transmitted successfully, but Amazon S3 couldn&apos;t process 
            // it, so it returned an error response.
            e.printStackTrace();
        }
        catch(SdkClientException e) {
            // Amazon S3 couldn&apos;t be contacted for a response, or the client
            // couldn&apos;t parse the response from Amazon S3.
            e.printStackTrace();
        }
    }
}
</code></pre></div>
                     </div>
                     
                     
                     <h2 id="transfer-acceleration-examples-dotnet">Using Transfer Acceleration from the AWS SDK
                        for .NET
                     </h2>
                     
                     
                     
                     
                     <p>The following example shows how to use the AWS SDK for .NET to enable Transfer Acceleration
                        on a
                        bucket. For instructions on how to create and test a working sample, see <a href="UsingTheMPDotNetAPI.html#TestingDotNetApiSamples">Running the Amazon S3 .NET Code Examples</a>.
                     </p>
                     
                     <div class="example">
                        <div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="cs ">using Amazon.S3;
using Amazon.S3.Model;
using System;
using System.Threading.Tasks;

namespace Amazon.DocSamples.S3
{
    class TransferAccelerationTest
    {
        private const string bucketName = &quot;*** bucket name ***&quot;;
        // Specify your bucket region (an example region is shown).
        private static readonly RegionEndpoint bucketRegion = RegionEndpoint.USWest2;
        private static IAmazonS3 s3Client;
        public static void Main()
        {
            s3Client = new AmazonS3Client(bucketRegion);
            EnableAccelerationAsync().Wait();
        }

        static async Task EnableAccelerationAsync()
        {
                try
                {
                    var putRequest = new PutBucketAccelerateConfigurationRequest
                    {
                        BucketName = bucketName,
                        AccelerateConfiguration = new AccelerateConfiguration
                        {
                            Status = BucketAccelerateStatus.Enabled
                        }
                    };
                    await s3Client.PutBucketAccelerateConfigurationAsync(putRequest);

                    var getRequest = new GetBucketAccelerateConfigurationRequest
                    {
                        BucketName = bucketName
                    };
                    var response = await s3Client.GetBucketAccelerateConfigurationAsync(getRequest);

                    Console.WriteLine(&quot;Acceleration state = &apos;{0}&apos; &quot;, response.Status);
                }
                catch (AmazonS3Exception amazonS3Exception)
                {
                    Console.WriteLine(
                        &quot;Error occurred. Message:&apos;{0}&apos; when setting transfer acceleration&quot;,
                        amazonS3Exception.Message);
                }
        }
    }
}</code></pre></div>
                     </div>
                     
                     <p>When uploading an object to a bucket that has Transfer Acceleration enabled, you specify
                        using
                        acceleration endpoint at the time of creating a client as shown:
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">var client = new AmazonS3Client(new AmazonS3Config
            {
                RegionEndpoint = TestRegionEndpoint,
                UseAccelerateEndpoint = true
            }</code></pre>
                     
                     
                     
                     <h2 id="transfer-acceleration-examples-javascript">Using Transfer Acceleration from the AWS SDK for JavaScript</h2>
                     
                     
                     <p>For an example of enabling Transfer Acceleration by using the AWS SDK for JavaScript,
                        see <a href="./AWSJavaScriptSDK/latest/AWS/S3.html#putBucketAccelerateConfiguration-property" target="_blank">Calling the putBucketAccelerateConfiguration operation</a> in the <em>AWS SDK
                           for JavaScript API Reference</em>.
                     </p>
                     
                     <h2 id="transfer-acceleration-examples-python">Using Transfer Acceleration from the AWS SDK for Python (Boto)</h2>
                     
                     
                     <p>For an example of enabling Transfer Acceleration by using the SDK for Python, see
                        <a href="http://boto3.readthedocs.org/en/latest/reference/services/s3.html#S3.Client.put_bucket_accelerate_configuration" target="_blank">
                           put_bucket_accelerate_configuration</a> in the <em>AWS SDK for Python (Boto 3) API Reference</em>.
                     </p>
                     
                     <h2 id="transfer-acceleration-examples-sdks">Using Other AWS SDKs</h2>
                     
                     
                     <p>For information about using other AWS SDKs, see <a href="https://aws.amazon.com/code/" target="_blank">Sample Code and Libraries</a>. 
                     </p>
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="transfer-acceleration.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="RequesterPaysBuckets.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Using the Amazon S3 Console"><a class="pagetoc" href="#transfer-acceleration-examples-console">Using the Amazon S3 Console</a></li>
                        <li class="pagetoc" name="Using Transfer Acceleration from the AWS Command Line Interface (AWS CLI) "><a class="pagetoc" href="#transfer-acceleration-examples-aws-cli">Using Transfer Acceleration from the AWS Command Line Interface (AWS CLI) </a></li>
                        <li class="pagetoc" name="Using Transfer Acceleration with the
          AWS SDK for Java"><a class="pagetoc" href="#transfer-acceleration-examples-java">Using Transfer Acceleration with the
                              AWS SDK for Java</a></li>
                        <li class="pagetoc" name="Using Transfer Acceleration from the AWS SDK
        for .NET"><a class="pagetoc" href="#transfer-acceleration-examples-dotnet">Using Transfer Acceleration from the AWS SDK
                              for .NET</a></li>
                        <li class="pagetoc" name="Using Transfer Acceleration from the AWS SDK for JavaScript"><a class="pagetoc" href="#transfer-acceleration-examples-javascript">Using Transfer Acceleration from the AWS SDK for JavaScript</a></li>
                        <li class="pagetoc" name="Using Transfer Acceleration from the AWS SDK for Python (Boto)"><a class="pagetoc" href="#transfer-acceleration-examples-python">Using Transfer Acceleration from the AWS SDK for Python (Boto)</a></li>
                        <li class="pagetoc" name="Using Other AWS SDKs"><a class="pagetoc" href="#transfer-acceleration-examples-sdks">Using Other AWS SDKs</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Simple Storage Service';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>