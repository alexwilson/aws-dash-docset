<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Step 2.1: Create a Lambda Function
         Deployment Package - AWS Lambda
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="with-sns-example-create-test-function.html" title="Step 2: Create a
                Lambda Function ">
      <link rel="prev" href="with-sns-example-create-test-function.html" title="Step 2: Create a
                Lambda Function ">
      <link rel="next" href="with-sns-example-create-iam-role.html" title="Step 2.2: Create the Execution
            Role (IAM Role)">
      <meta name="description" content="From the Filter View list, choose the language you want to use for your Lambda function. The appropriate section appears with code and specific instructions for creating a deployment package.">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS Lambda">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/with-sns-create-package.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/lambda">AWS Lambda</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="use-cases.html">Examples of How to Use AWS Lambda</a> &#xBB; <a href="with-sns.html">Using AWS Lambda with Amazon SNS from Different Accounts</a> &#xBB; <a href="with-sns-example.html">Tutorial: Using AWS Lambda with Amazon SNS</a> &#xBB; <a href="with-sns-example-create-test-function.html">Step 2: Create a
                                    Lambda Function </a> &#xBB; <span class="breadcrumb">Step 2.1: Create a Lambda Function
                                    Deployment Package</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="Node.js" selected>Node.js</option>
                              <option value="Java" selected>Java</option>
                              <option value="Go" selected>Go</option>
                              <option value="Python" selected>Python</option></select></form>
                     </div>
                     <h1 class="topictitle" id="with-sns-create-package">Step 2.1: Create a Lambda Function
                        Deployment Package
                     </h1>
                     <p>From the <b>Filter View</b> list, choose the language you want to use for your Lambda
                        function. The appropriate section appears with code and specific
                        instructions for creating a deployment package.
                     </p>
                     <div id="Node.js" name="Node.js" class="section langfilter">
                        <h2 id="with-sns-example-deployment-pkg-nodejs">Node.js</h2>
                        
                        
                        
                        <ol>
                           <li>
                              
                              <p>Open a text editor, and then copy the following code. </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">console.log(&apos;Loading function&apos;);
 
exports.handler = function(event, context, callback) {
// console.log(&apos;Received event:&apos;, JSON.stringify(event, null, 4));
 
    var message = event.Records[0].Sns.Message;
    console.log(&apos;Message received from SNS:&apos;, message); 
    callback(null, &quot;Success&quot;);
};</code></pre><div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>The code sample is compliant with the Node.js runtimes v6.10 or v8.10. For more information,
                                    see <a href="programming-model.html">Programming Model(Node.js)</a></p>
                              </div>
                              
                           </li>
                           <li>
                              
                              <p>Save the file as <code>
                                    index.js</code>.
                              </p>
                              
                           </li>
                           <li>
                              
                              <p>Zip the <code> index.js</code> file as
                                 <code> LambdaWithSNS.zip</code>. 
                              </p>
                              
                           </li>
                        </ol>
                        
                        <h3 id="sns-create-deployment-pkg-nodejs-next-step">Next Step</h3>
                        
                        
                        <p>
                           <a href="with-sns-example-create-iam-role.html">Step 2.2: Create the Execution
                              Role (IAM Role)</a>
                           
                        </p>
                        
                        
                     </div>
                     <div id="Java" name="Java" class="section langfilter">
                        <h2 id="with-sns-example-deployment-pkg-java">Java</h2>
                        
                        
                        <p>Open a text editor, and then copy the following code. </p>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">package example;
 
import java.text.SimpleDateFormat;
import java.util.Calendar;
 
import com.amazonaws.services.lambda.runtime.RequestHandler;
import com.amazonaws.services.lambda.runtime.Context;
import com.amazonaws.services.lambda.runtime.events.SNSEvent;
 
public class LogEvent implements RequestHandler&lt;SNSEvent, Object&gt; {
    public Object handleRequest(SNSEvent request, Context context){
    String timeStamp = new SimpleDateFormat(&quot;yyyy-MM-dd_HH:mm:ss&quot;).format(Calendar.getInstance().getTime());
    context.getLogger().log(&quot;Invocation started: &quot; + timeStamp);
 
         context.getLogger().log(request.getRecords().get(0).getSNS().getMessage());
   
    timeStamp = new SimpleDateFormat(&quot;yyyy-MM-dd_HH:mm:ss&quot;).format(Calendar.getInstance().getTime());
    context.getLogger().log(&quot;Invocation completed: &quot; + timeStamp);
           return null;
     }
}
 </code></pre>
                        
                        <p>Using the preceding code (in a file named <code>LambdaWithSNS.java</code>),
                           create a deployment package. Make sure that you add the following dependencies: 
                        </p>
                        
                        <div class="itemizedlist">
                           
                           
                           
                           
                           <ul class="itemizedlist" type="disc">
                              <li class="listitem">
                                 
                                 <p><code class="code">aws-lambda-java-core</code></p>
                                 
                              </li>
                              <li class="listitem">
                                 
                                 <p><code class="code">aws-lambda-java-events</code> 
                                 </p>
                                 
                              </li>
                           </ul>
                        </div>
                        
                        
                        <p>For more information, see <a href="java-programming-model.html">Programming Model for Authoring Lambda Functions in Java</a>.
                        </p>
                        
                        <p>Your deployment package can be a .zip file or a standalone .jar. You can
                           use any build and packaging tool you are familiar with to create a
                           deployment package. For examples of how to use
                           the Maven build tool to create a standalone .jar, see <a href="java-create-jar-pkg-maven-no-ide.html">Creating a .jar Deployment Package Using Maven without any
                              IDE (Java)</a> and <a href="java-create-jar-pkg-maven-and-eclipse.html">Creating a .jar Deployment Package Using Maven and Eclipse IDE (Java)</a>. For an example of how to use the Gradle build
                           tool to create a .zip file, see <a href="create-deployment-pkg-zip-java.html">Creating a .zip Deployment Package (Java)</a>.
                        </p>
                        
                        <p>After you verify that your deployment package is created, go to the next step 
                           to create an IAM role (execution role). You specify this role at the
                           time you create your Lambda function. 
                        </p>
                        
                        
                        <h3 id="sns-create-deployment-pkg-java-next-step">Next Step</h3>
                        
                        
                        <p>
                           <a href="with-sns-example-create-iam-role.html">Step 2.2: Create the Execution
                              Role (IAM Role)</a>
                           
                        </p>
                        
                        
                     </div>
                     <div id="Go" name="Go" class="section langfilter">
                        <h2 id="with-sns-example-deployment-pkg-go">Go</h2>
                        
                        
                        
                        <ol>
                           <li>
                              
                              <p>Open a text editor, and then copy the following code. </p>
                              
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">import (
    &quot;strings&quot;
    &quot;github.com/aws/aws-lambda-go/events&#x201D;
)

func handler(ctx context.Context, snsEvent events.SNSEvent) {
    for _, record := range snsEvent.Records {
        snsRecord := record.SNS

        fmt.Printf(&quot;[%s %s] Message = %s \n&quot;, record.EventSource, snsRecord.Timestamp, snsRecord.Message) 
    }
}</code></pre>
                              </li>
                           <li>
                              
                              <p>Save the file as <code>
                                    lambda_handler.go</code>.
                              </p>
                              
                           </li>
                           <li>
                              
                              <p>Zip the <code> lambda_handler.go</code> file as
                                 <code> LambdaWithSNS.zip</code>. 
                              </p>
                              
                           </li>
                        </ol>
                        
                        <h3 id="sns-create-deployment-pkg-python-next-step">Next Step</h3>
                        
                        
                        <p>
                           <a href="with-sns-example-create-iam-role.html">Step 2.2: Create the Execution
                              Role (IAM Role)</a>
                           
                        </p>
                        
                        
                     </div>
                     <div id="Python" name="Python" class="section langfilter">
                        <h2 id="with-sns-example-deployment-pkg-python">Python</h2>
                        
                        
                        
                        <ol>
                           <li>
                              
                              <p>Open a text editor, and then copy the following code. </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>The <code class="code">from __future__</code> statement
                                    enables you to write code that is compatible with Python 2 or 3. If you are using
                                    runtime version 3.6, it is not necessary to include it.
                                 </p>
                              </div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">from __future__ import print_function
import json
print(&apos;Loading function&apos;)

def lambda_handler(event, context):
    #print(&quot;Received event: &quot; + json.dumps(event, indent=2))
    message = event[&apos;Records&apos;][0][&apos;Sns&apos;][&apos;Message&apos;]
    print(&quot;From SNS: &quot; + message)
    return message
</code></pre>
                              </li>
                           <li>
                              
                              <p>Save the file as <code>
                                    lambda_handler.py</code>.
                              </p>
                              
                           </li>
                           <li>
                              
                              <p>Zip the <code> lambda_handler.py</code> file as
                                 <code> LambdaWithSNS.zip</code>. 
                              </p>
                              
                           </li>
                        </ol>
                        
                        <h3 id="sns-create-deployment-pkg-python-next-step">Next Step</h3>
                        
                        
                        <p>
                           <a href="with-sns-example-create-iam-role.html">Step 2.2: Create the Execution
                              Role (IAM Role)</a>
                           
                        </p>
                        
                        
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="with-sns-example-create-test-function.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="with-sns-example-create-iam-role.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Node.js"><a class="pagetoc" href="#with-sns-example-deployment-pkg-nodejs">Node.js</a></li>
                        <li class="pagetoc" name="Java"><a class="pagetoc" href="#with-sns-example-deployment-pkg-java">Java</a></li>
                        <li class="pagetoc" name="Go"><a class="pagetoc" href="#with-sns-example-deployment-pkg-go">Go</a></li>
                        <li class="pagetoc" name="Python"><a class="pagetoc" href="#with-sns-example-deployment-pkg-python">Python</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS Lambda';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>