<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Test Your Serverless Applications Locally Using SAM Local (Public Beta) - AWS Lambda</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="lambda-app.html" title="Building Lambda Functions">
      <link rel="prev" href="lambda-python-how-to-create-deployment-package.html" title="Creating a Deployment Package
			(Python)">
      <link rel="next" href="code-editor.html" title="Creating Functions Using the AWS Lambda Console Editor">
      <meta name="description" content="AWS SAM is a fast and easy way of deploying your serverless applications, allowing you to write simple templates to describe your functions and their event sources (Amazon API Gateway, Amazon S3, Kinesis, and so on).">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS Lambda">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/test-sam-local.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/lambda">AWS Lambda</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="lambda-introduction-function.html">Lambda Functions</a> &#xBB; <a href="lambda-app.html">Building Lambda Functions</a> &#xBB; <span class="breadcrumb">Test Your Serverless Applications Locally Using SAM Local (Public Beta)</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="test-sam-local">Test Your Serverless Applications Locally Using SAM Local (Public Beta)</h1>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>This feature is available as part of a public beta and is subject to change at any
                           time.
                        </p>
                     </div>
                     <p><a href="./lambda/latest/dg/deploying-lambda-apps.html#Using the AWS Serverless Application Model (AWS SAM)" target="_blank">AWS SAM</a> is a fast and easy way of deploying your serverless applications,
                        allowing you to write simple templates to describe your functions and their event
                        sources (Amazon API Gateway, Amazon S3, Kinesis, and so on). 
                     </p>
                     <p>Based on AWS SAM, SAM Local is an AWS CLI tool
                        that provides an environment for you to develop, test, and analyze your serverless
                        applications locally before uploading them to the Lambda runtime. Whether you&apos;re
                        developing on Linux, Mac, or Microsoft Windows, you can use SAM Local to create a
                        local
                        testing environment that simulates the AWS runtime environment. Doing so helps you
                        address issues such as performance. Working with SAM Local also allows faster, iterative
                        development of your Lambda function code because there is no need to redeploy your
                        application package to the AWS Lambda runtime. For more information, see <a href="test-sam-local.html#sam-cli-simple-app">Building a Simple Application Using SAM Local</a>.
                     </p>
                     <p>SAM Local works with <a href="./lambda/latest/dg/deploying-lambda-apps.html#Using the AWS Serverless Application Model (AWS SAM)" target="_blank">AWS SAM</a>, allowing you to invoke functions defined in SAM templates, whether
                        directly or through API Gateway endpoints. By using SAM Local features, you can analyze
                        your
                        serverless application&apos;s performance in your own testing environment and update
                        accordingly. The following examples outline additional advantages of using SAM Local
                        with sample operation code. For instance, you can do the following: 
                     </p>
                     <div class="itemizedlist">  
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>Generate sample function payloads (for example, an Amazon S3 event).</p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">$ sam local generate-event s3 --bucket <em class="replaceable"><code>bucket-name </code></em> --key <em class="replaceable"><code>key-name</code></em>
                &gt; <em class="replaceable"><code>event_file.json</code></em></code></pre></li>
                           <li class="listitem">
                              <p>Test a sample function payload locally with your Lambda functions.</p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">$ sam local invoke <em class="replaceable"><code>function-name</code></em> -e<em class="replaceable"><code> event_file.json</code></em></code></pre></li>
                           <li class="listitem">
                              <p>Spawn a local API Gateway to test HTTP request and response functionality. By using
                                 the hot
                                 reloading feature, you can test and iterate your functions without having to
                                 restart or reload them to the AWS runtime.
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">$ sam local start-api<em class="replaceable"><code></code></em></code></pre>
                              
                              
                              <p>
                                 SAM Local will automatically find any functions within your SAM template that have
                                 API event sources defined, and mount them at the defined HTTP paths.
                                 In the example below, the <code class="code">Ratings</code> function would mount <code class="code">ratings.py:handler() </code>at <code class="code">/ratings</code> for <code class="code">GET</code> requests.
                                 
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Ratings:
    Type: AWS::Serverless::Function
       Properties:
           Handler: ratings.handler
                Runtime: python3.6
                Events:
                Api:
                Type: Api
                Properties:
                Path: /ratings
                Method: get
 </code></pre>               
                              
                              <p>By default, SAM Local uses <a href="./apigateway/latest/developerguide/api-gateway-create-api-as-simple-proxy-for-lambda.html" target="_blank">
                                    
                                    Proxy Integration</a> and expects the response from your Lambda function to include one or more
                                 of the following: <code class="code">statusCode</code>, <code class="code">headers</code> and/or <code class="code">body</code>. For example:
                                 
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">// Example of a Proxy Integration response
exports.handler = (event, context, callback) =&gt; {
    callback(null, {
        statusCode: 200,
        headers: { &quot;x-custom-header&quot; : &quot;my custom header value&quot; },
        body: &quot;hello world&quot;
    });
}</code></pre>
                              <p>If your Lambda function does not return a valid <a href="./apigateway/latest/developerguide/api-gateway-create-api-as-simple-proxy-for-lambda.html" target="_blank">
                                    
                                    Proxy Integration</a> response, you will receive an <code class="code">HTTP 500 (Internal Server Error)</code> response when accessing your function. SAM Local will also print
                                 the following error log message to help you diagnose the problem:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">ERROR: Function ExampleFunction returned an invalid response (must include one of: body, headers
                    or statusCode in the response object)</code></pre>
                              
                              </li>
                           <li class="listitem">
                              <p>Validate that any runtime constraints, such as maximum memory use or timeout limits
                                 of your
                                 Lambda function invocations, are honored.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>Inspect AWS Lambda runtime logs, and also any customized logging output specified
                                 in your Lambda
                                 function code (for example, <code class="code">console.log</code>). SAM Local automatically
                                 displays this output. The following shows an example.
                              </p>
                              
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">START RequestId: 2137da9a-c79c-1d43-5716-406b4e6b5c0a Version: $LATEST
                2017-05-18T13:18:57.852Z        2137da9a-c79c-1d43-5716-406b4e6b5c0a
                Error: <em class="replaceable"><code>any error information</code></em>
                END RequestId: 2137da9a-c79c-1d43-5716-406b4e6b5c0a
                REPORT RequestId: 2137da9a-c79c-1d43-5716-406b4e6b5c0a 
                Duration: 12.78 ms      <b>Billed Duration: 100 ms</b> <b>Memory Size: 128 MB
                Max Memory Used: 29 MB</b></code></pre>
                              
                              
                              </li>
                           <li class="listitem">
                              <p>Honor security credentials that you&apos;ve established by using the AWS CLI. Doing so
                                 means your
                                 Lambda function can make remote calls to the AWS services that make up your
                                 serverless application. If you have not installed the AWS CLI, see <a href="./cli/latest/userguide/" target="_blank">Installing the AWS Command Line Interface</a>.
                              </p>
                              
                              <p>As with the AWS CLI and SDKs, SAM Local looks for credentials in the following
                                 order:
                              </p>
                              
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p>Environment variables (<em class="replaceable"><code>AWS_ACCESS_KEY_ID</code></em>,
                                          <em class="replaceable"><code>AWS_SECRET_ACCESS_KEY</code></em>)
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>The AWS credentials file, located at <code class="code">~/.aws/credentials</code> on Linux, MacOS, or Unix,
                                          or at <code class="code">C:\Users\USERNAME \.aws\credentials</code> on
                                          Windows)
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>Instance profile credentials, if running on an Amazon EC2 instance with an assigned
                                          instance
                                          role
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              
                              
                           </li>
                        </ul>
                     </div>
                     <h2 id="test-sam-cli-supported-runtimes">Supported Runtimes</h2>
                     
                     
                     
                     <p>SAM Local supports the following AWS runtimes:</p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>node.js 4.3</p>
                           </li>
                           <li class="listitem">
                              <p>node.js 6.10</p>
                           </li>
                           <li class="listitem">
                              <p>python 2.7</p>
                           </li>
                           <li class="listitem">
                              <p>python 3.6</p>
                           </li>
                           <li class="listitem">
                              <p>java8</p>
                           </li>
                           <li class="listitem">
                              <p>go 1.x</p>
                           </li>
                        </ul>
                     </div>
                     
                     <p>If you have not already installed SAM Local, see <a href="sam-cli-requirements.html">Install SAM Local</a>.
                     </p>
                     <h2 id="sam-cli-what-is">Getting Started Using SAM Local</h2>
                     
                     
                     <p>SAM Local consists of the following CLI operations:</p>
                     
                     <div class="itemizedlist"> 
                        
                        
                        
                              
                                          
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p><b>start-api</b>: Creates a local HTTP server hosting all of your
                                 Lambda functions. When accessed by using a browser or the CLI, this operation
                                 launches a Docker container locally to invoke your function. It reads the
                                 <code class="code">CodeUri</code> property of the
                                 <code class="code">AWS::Serverless::Function</code> resource to find the path in your
                                 file system containing the Lambda function code. This path can be the
                                 project&apos;s root directory for interpreted languages like Node.js or Python, a
                                 build directory that stores your compiled artifacts, or for Java, a
                                 <code class="code">.jar</code> file.
                              </p> 
                              <p>If you use an interpreted language, local changes are made available within the same
                                 Docker
                                 container. This approach means you can reinvoke your Lambda function with no
                                 need for redeployment. For compiled languages or projects requiring complex
                                 packing support, we recommend that you run your own build solution and point
                                 AWS SAM to the directory that contains the build dependency files needed. 
                              </p>
                           </li>
                           <li class="listitem">
                              <p><b>invoke</b>: Invokes a local Lambda function once and terminates after invocation completes.
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"># Invoking function with event file
$ sam local invoke &quot;Ratings&quot; -e event.json

# Invoking function with event via stdin
$ echo &apos;{&quot;message&quot;: &quot;Hey, are you there?&quot; }&apos; | sam local invoke &quot;Ratings&quot;

# For more options
$ sam local invoke --help</code></pre>
                              </li>
                           <li class="listitem">
                              <p><b>generate-event</b>: Generates mock serverless events. Using
                                 these, you can develop and test locally on functions that respond to
                                 asynchronous events such as those from Amazon S3, Kinesis, and DynamoDB. The following
                                 displays the command options available to the <code class="code">generate-event</code>
                                 operation.
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">sam local generate-event
NAME:
   sam local generate-event - Generates Lambda events (e.g. for S3/Kinesis etc) that can be piped to &apos;sam local invoke&apos;

USAGE:
   sam local generate-event command [command options] [arguments...]

COMMANDS:
     s3        Generates a sample Amazon S3 event
     sns       Generates a sample Amazon SNS event
     kinesis   Generates a sample Amazon Kinesis event
     dynamodb  Generates a sample Amazon DynamoDB event
     api       Generates a sample Amazon API Gateway event
     schedule  Generates a sample scheduled event

OPTIONS:
   --help, -h  show help</code></pre></li>
                           <li class="listitem">
                              <p><b>validate:</b> Validates your template against the official <a href="https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md" target="_blank">AWS Serverless Application Model specification</a>. The following
                                 is an example. 
                              </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">$ sam validate
ERROR: Resource &quot;HelloWorld&quot;, property &quot;Runtime&quot;: Invalid value node. 
Valid values are &quot;nodejs4.3&quot;, &quot;nodejs6.10&quot;, &quot;nodejs8.10&quot;, &quot;java8&quot;, &quot;python2.7&quot;,
&quot;python3.6&quot;(line: 11; col: 6)

# Let&apos;s fix that error...
$ sed -i &apos;s/node/nodejs6.10/g&apos; template.yaml

$ sam validate
Valid!</code></pre></li>
                           <li class="listitem">
                              <p><b>package</b> and <b>deploy</b>:
                                 <code class="code">sam package</code> and <code class="code">sam deploy</code> implicitly call
                                 AWS CloudFormation&apos;s <a href="./cli/latest/reference/cloudformation/package.html" target="_blank">package</a> and <a href="./cli/latest/reference/cloudformation/deploy.html" target="_blank">deploy</a> commands. For more information on packaging and
                                 deployment of SAM applications, see <a href="serverless-deploy-wt.html#serverless-deploy">Packaging and Deployment</a>.
                              </p>
                              
                              <p>The following demonstrates how to use the <code class="code">package</code> and <code class="code">deploy</code>
                                 commands in SAM Local.
                              </p>
                              
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"># Package SAM template
$ sam package --template-file sam.yaml --s3-bucket mybucket --output-template-file packaged.yaml

# Deploy packaged SAM template
$ sam deploy --template-file ./packaged.yaml --stack-name mystack --capabilities CAPABILITY_IAM</code></pre>
                              
                              
                              </li>
                        </ul>
                     </div>
                     
                     <h3 id="sam-cli-simple-app">Building a Simple Application Using SAM Local</h3>
                     
                     
                     
                     <p>Suppose you want to build a simple RESTful API operation that creates, reads,
                        updates, and deletes a list of products. You begin by creating the following
                        directory structure:
                     </p>
                     
                     <p><em class="replaceable"><code>dir</code></em>/products.js
                     </p>
                     
                     <p><em class="replaceable"><code>dir</code></em>/template.yaml
                     </p>
                     
                     <p>The <em>template.yaml</em> file is the AWS SAM template that describes a single Lambda function that handles
                        all the API requests. 
                     </p>
                     
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>By default, the <code class="code">start-api</code> and <code class="code">invoke</code> commands search your working
                           directory for the <em>template.yaml</em> file. If you reference
                           a <em>template.yaml</em> file that is in a different directory,
                           add the <code class="code">-t</code> or <code class="code">--template</code> parameter to these
                           operations and pass an absolute or relative path to that file.
                        </p>
                     </div>
                     
                     
                     <p>      Copy and paste the following
                        into the <em>template.yaml</em> file.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">AWSTemplateFormatVersion : &apos;2010-09-09&apos;
Transform: AWS::Serverless-2016-10-31
Description: My first serverless application.

Resources:

  Products:
    Type: AWS::Serverless::Function
    Properties:
      Handler: products.handler
      Runtime: nodejs6.10
      Events:
        ListProducts:
          Type: Api
          Properties:
            Path: /products
            Method: get
        CreateProduct:
          Type: Api
          Properties:
            Path: /products
            Method: post
        Product:
          Type: Api
          Properties:
            Path: /products/{product}
            Method: any</code></pre>
                     <p>The preceding example configures the following RESTful API endpoints:</p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>Create a new product with a <code class="code">PUT</code> request to /products.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>List all products with a <code class="code">GET</code> request to /products.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>Read, update, or delete a product with <code class="code">GET</code>, <code class="code">PUT</code> or
                                 <code class="code">DELETE</code> request to /products/{product}.
                              </p>
                           </li>
                        </ul>
                     </div>
                     
                     <p>Next, copy and paste the following code into the <em>products.js</em> file.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&apos;use strict&apos;;

exports.handler = (event, context, callback) =&gt; {

    let id =  (event.pathParameters || {}).product || false;
    switch(event.httpMethod){

        case &quot;GET&quot;:

            if(id) {
                callback(null, {body: &quot;This is a READ operation on product ID &quot; + id});
                return;  
            } 

            callback(null, {body: &quot;This is a LIST operation, return all products&quot;});
            break;

        case &quot;POST&quot;:            
            callback(null, {body: &quot;This is a CREATE operation&quot;}); 
            break;

        case &quot;PUT&quot;: 
            callback(null, {body: &quot;This is an UPDATE operation on product ID &quot; + id});
            break;

        case &quot;DELETE&quot;: 
            callback(null, {body:&quot;This is a DELETE operation on product ID &quot; + id});
            break;

        default:
            // Send HTTP 501: Not Implemented
            console.log(&quot;Error: unsupported HTTP method (&quot; + event.httpMethod + &quot;)&quot;);
            callback(null, { statusCode: 501 })

    }

}</code></pre>
                     <p>Start a local copy of your API operations by calling the <code class="code">start-api</code>
                        command.
                     </p>
                     
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">$ sam local start-api

2017/05/18 14:03:01 Successfully parsed template.yaml (AWS::Serverless-2016-10-31)
2017/05/18 14:03:01 Found 1 AWS::Serverless::Function
2017/05/18 14:03:01 Mounting products.handler (nodejs6.10) at /products [POST]
2017/05/18 14:03:01 Mounting products.handler (nodejs6.10) at /products/{product} [OPTIONS GET HEAD POST PUT DELETE TRACE CONNECT]
2017/05/18 14:03:01 Mounting products.handler (nodejs6.10) at /products [GET]
2017/05/18 14:03:01 Listening on http://localhost:3000

You can now browse to the above endpoints to invoke your functions.
You do not need to restart/reload while working on your functions,
changes will be reflected instantly/automatically. You only need to restart
if you update your AWS SAM template.</code></pre>
                     
                     <p>You can then test your API endpoint locally using either a browser or the CLI.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">$ curl http://localhost:3000/products 
&quot;This is a LIST operation, return all products&quot;

$ curl -XDELETE http://localhost:3000/products/1
&quot;This is a DELETE operation on product ID 1&quot;</code></pre>
                     
                     
                     <p>To see more samples, see <a href="https://github.com/awslabs/aws-sam-local/tree/master/samples" target="_blank">aws sam
                           local/samples</a>.
                     </p>   
                     
                     
                     
                     <h4 id="sam-cli-local-logging">Local Logging</h4>             
                     
                     <p>Using the <code class="code">invoke</code> and <code class="code">start-api</code> commands, you can
                        pipe logs from your Lambda function&apos;s invocation into a file. This approach
                        is useful if you run automated tests against SAM Local and want to capture
                        logs for analysis. The following is an example.
                     </p> 
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">$ sam local invoke --log-file ./output.log</code></pre>
                     
                     
                     
                     
                     <h4 id="sam-cli-env_vars_file">Using an Environment Variables File</h4>
                     
                     <p>If your Lambda function uses <a href="env_variables.html">Environment Variables</a>, SAM Local provides an
                        <code class="code">--env-vars</code> argument for both the <code class="code">invoke</code> and
                        <code class="code">start-api</code> commands. With this argument, you can use a JSON
                        file that contains values for environment variables defined in your
                        function. The JSON file&apos;s structure should be similar to the
                        following.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  &quot;MyFunction1&quot;: {
    &quot;TABLE_NAME&quot;: &quot;localtable&quot;,
    &quot;BUCKET_NAME&quot;: &quot;testBucket&quot;
  },
  &quot;MyFunction2&quot;: {
    &quot;TABLE_NAME&quot;: &quot;localtable&quot;,
    &quot;STAGE&quot;: &quot;dev&quot;
  },
}</code></pre>
                     
                     <p>You then access the JSON file using the following command:</p>        
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">$ sam local start-api --env-vars env.json</code></pre>
                     
                     
                     
                     
                     
                     
                     <h4 id="sam-cli-shell">Using a Shell Environment</h4>
                     
                     <p>Variables defined in your shell environment are passed to the Docker
                        container if they map to a variable in your Lambda function. Shell variables
                        are globally accessible to functions. For example, suppose you have two
                        functions, <em>MyFunction1</em> and
                        <em>MyFunction2</em>, which have a variable called
                        <em>TABLE_NAME.</em> In this case, the value for
                        <em>TABLE_NAME</em> provided through your shell&apos;s
                        environment is available to both functions.
                     </p>
                     
                     
                     <p>The following command sets the value of <em>TABLE_NAME</em> to
                        <em>myTable</em> for both functions.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">
$ TABLE_NAME=mytable sam local start-api
                    </code></pre>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>For greater flexibility, you can use a combination of shell variables and an external
                           JSON
                           file that holds environment variables. If a variable is defined in both
                           places, the one from the external file override the shell version.
                           Following is the order of priority, highest to lowest: 
                        </p>
                        <div class="itemizedlist">
                           
                           
                           
                           
                           
                           
                           
                           
                           <ul class="itemizedlist" type="disc">
                              <li class="listitem">
                                 <p>Environment variable file</p>
                              </li>
                              <li class="listitem">
                                 <p>Shell environment</p>
                              </li>
                              <li class="listitem">
                                 <p>Hard-coded values contained in the SAM template</p>
                              </li>
                           </ul>
                        </div>
                     </div>                   
                     
                     
                     
                     
                     
                     
                     
                     
                     
                     
                     
                     <h3 id="sam-cli-debugging">Debugging With SAM Local</h3>
                     
                     <p>Both <code class="code">sam local invoke</code> and <code class="code">sam local start-api</code>
                        support local debugging of your functions. To run SAM Local with debugging
                        support enabled, specify <code class="code">--debug-port</code> or <code class="code">-d</code> on the
                        command line.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"># Invoke a function locally in debug mode on port 5858 
$ sam local invoke -d 5858 <em class="replaceable"><code>function logical id</code></em>

# Start local API Gateway in debug mode on port 5858
$ sam local start-api -d 5858</code></pre>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>If you use <code class="code">sam local start-api</code>, the local API Gateway exposes all of your Lambda
                           functions. But because you can specify only one debug port, you can only
                           debug one function at a time.
                        </p>
                     </div>   
                     
                     <h4 id="sam-cli-debugging-python">Debugging Functions Written in Python</h4>
                     
                     
                     <p>Unlike Node.js or Java, Python requires you to enable remote debugging in
                        your Lambda function code. If you enable debugging (using the
                        <code class="code">--debug-port</code> or <code class="code">-d</code> options mentioned above)
                        for a function that uses one of the Python runtimes (2.7 or 3.6), SAM Local
                        maps through that port from your host machine to the Lambda container. To
                        enable remote debugging, use a Python package such as <a href="https://pypi.python.org/pypi/remote-pdb" target="_blank">remote-pdb</a>. 
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>When configuring the host, the debugger listens in on your code,
                           so make sure to use <code class="code">0.0.0.0</code> and not
                           <code class="code">127.0.0.1</code>.
                        </p>
                     </div>
                     
                     
                     
                     
                     
                     
                     
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="lambda-python-how-to-create-deployment-package.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="code-editor.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Supported Runtimes"><a class="pagetoc" href="#test-sam-cli-supported-runtimes">Supported Runtimes</a></li>
                        <li class="pagetoc" name="Getting Started Using SAM Local"><a class="pagetoc" href="#sam-cli-what-is">Getting Started Using SAM Local</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS Lambda';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>