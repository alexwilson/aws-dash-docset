<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Logging AWS Lambda API Calls By Using AWS CloudTrail - AWS Lambda</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="admin-lambda-apps.html" title="Administering Lambda-based Applications">
      <link rel="prev" href="tagging.html" title="Tagging Lambda Functions">
      <link rel="next" href="lambda-auth-and-access-control.html" title="Authentication and Access Control for
    AWS Lambda">
      <meta name="description" content="AWS Lambda is integrated with AWS CloudTrail, a service that captures API calls made by or on behalf of AWS Lambda in your AWS account and delivers the log files to an Amazon S3 bucket that you specify. CloudTrail captures API calls made from the AWS Lambda console or from the AWS Lambda API. Using the information collected by CloudTrail, you can determine what request was made to AWS Lambda, the source IP address from which the request was made, who made the request, when it was made, and so on. To learn more about CloudTrail, including how to configure and enable it, see the">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS Lambda">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/logging-using-cloudtrail.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/lambda">AWS Lambda</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="admin-lambda-apps.html">Administering Lambda-based Applications</a> &#xBB; <span class="breadcrumb">Logging AWS Lambda API Calls By Using AWS CloudTrail</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="logging-using-cloudtrail">Logging AWS Lambda API Calls By Using AWS CloudTrail</h1>
                     <p>AWS Lambda is integrated with AWS CloudTrail, a service that captures API calls made
                        by or on behalf of AWS Lambda
                        in your AWS account and delivers the log files to an Amazon S3 bucket that you specify.
                        CloudTrail captures API calls made from the
                        AWS Lambda console or from the AWS Lambda API. Using the information collected by
                        CloudTrail, you can
                        determine what request was made to AWS Lambda, the source IP address from which the
                        request was made, who made
                        the request, when it was made, and so on. To learn more about CloudTrail, including
                        how to configure and enable it, see
                        the <a href="./awscloudtrail/latest/userguide/" target="_blank"><em>AWS CloudTrail User Guide</em></a>.
                     </p>
                     <h2 id="service-name-info-in-cloudtrail">AWS Lambda Information in CloudTrail</h2>
                     
                     
                     
                     <p>When CloudTrail logging is enabled in your AWS account, API calls made to AWS Lambda
                        actions are tracked in log files. AWS Lambda
                        records are written together with other AWS service records in a log file. CloudTrail
                        determines when to create and
                        write to a new file based on a time period and file size.
                     </p>
                     
                     
                     <p>The following actions are supported:</p>
                     
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="API_AddPermission.html">AddPermission</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_CreateEventSourceMapping.html">CreateEventSourceMapping</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_CreateFunction.html">CreateFunction</a></p>
                              
                              <p>(The <code class="code">ZipFile</code> parameter is omitted from the CloudTrail logs for <code class="code">CreateFunction</code>.)
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_DeleteEventSourceMapping.html">DeleteEventSourceMapping</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_DeleteFunction.html">DeleteFunction</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_GetEventSourceMapping.html">GetEventSourceMapping</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_GetFunction.html">GetFunction</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_GetFunctionConfiguration.html">GetFunctionConfiguration</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_GetPolicy.html">GetPolicy</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_ListEventSourceMappings.html">ListEventSourceMappings</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_ListFunctions.html">ListFunctions</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_RemovePermission.html">RemovePermission</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_UpdateEventSourceMapping.html">UpdateEventSourceMapping</a></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_UpdateFunctionCode.html">UpdateFunctionCode</a></p>
                              
                              <p>(The <code class="code">ZipFile</code> parameter is omitted from the CloudTrail logs for <code class="code">UpdateFunctionCode</code>.)
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><a href="API_UpdateFunctionConfiguration.html">UpdateFunctionConfiguration</a></p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <p>Every log entry contains information about who generated the request. The user identity
                        information in the log
                        helps you determine whether the request was made with root or IAM user credentials,
                        with temporary security
                        credentials for a role or federated user, or by another AWS service. For more information,
                        see the
                        <b>userIdentity</b> field in the <a href="./awscloudtrail/latest/userguide/cloudtrail-event-reference.html" target="_blank">CloudTrail Event
                           Reference</a>.
                     </p>
                     
                     
                     <p>You can store your log files in your bucket for as long as you want, but you can also
                        define Amazon S3 lifecycle
                        rules to archive or delete log files automatically. By default, your log files are
                        encrypted by using Amazon S3
                        server-side encryption (SSE).
                     </p>
                     
                     
                     <p>You can choose to have CloudTrail publish Amazon SNS notifications when new log files
                        are delivered if you want to take
                        quick action upon log file delivery. For more information, see <a href="./awscloudtrail/latest/userguide/configure-sns-notifications-for-cloudtrail.html" target="_blank">Configuring Amazon SNS Notifications for CloudTrail</a>.
                     </p>
                     
                     
                     <p>You can also aggregate AWS Lambda log files from multiple AWS regions and multiple
                        AWS
                        accounts into a single S3 bucket. For more information, see <a href="./awscloudtrail/latest/userguide/cloudtrail-working-with-log-files.html" target="_blank">Working with CloudTrail Log Files</a>.
                     </p>
                     
                     <h2 id="understanding-service-name-entries">Understanding AWS Lambda Log File Entries</h2>
                     
                     
                     
                     <p>CloudTrail log files contain one or more log entries where each entry is made up of
                        multiple
                        JSON-formatted events. A log entry represents a single request from any source and
                        includes
                        information about the requested action, any parameters, the date and time of the action,
                        and
                        so on. The log entries are not guaranteed to be in any particular order. That is,
                        they are not
                        an ordered stack trace of the public API calls.
                     </p>
                     
                     
                     <p>The following example shows CloudTrail log entries for the <code class="code">GetFunction</code> and <code class="code">DeleteFunction</code>
                        actions.
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
  &quot;Records&quot;: [
    {
      &quot;eventVersion&quot;: &quot;1.03&quot;,
      &quot;userIdentity&quot;: {
        &quot;type&quot;: &quot;IAMUser&quot;,
        &quot;principalId&quot;: &quot;A1B2C3D4E5F6G7EXAMPLE&quot;,
        &quot;arn&quot;: &quot;arn:aws:iam::999999999999:user/myUserName&quot;,
        &quot;accountId&quot;: &quot;999999999999&quot;,
        &quot;accessKeyId&quot;: &quot;AKIAIOSFODNN7EXAMPLE&quot;,
        &quot;userName&quot;: &quot;myUserName&quot;
      },
      &quot;eventTime&quot;: &quot;2015-03-18T19:03:36Z&quot;,
      &quot;eventSource&quot;: &quot;lambda.amazonaws.com&quot;,
      &quot;eventName&quot;: &quot;GetFunction&quot;,
      &quot;awsRegion&quot;: &quot;us-east-1&quot;,
      &quot;sourceIPAddress&quot;: &quot;127.0.0.1&quot;,
      &quot;userAgent&quot;: &quot;Python-httplib2/0.8 (gzip)&quot;,
      &quot;errorCode&quot;: &quot;AccessDenied&quot;,
      &quot;errorMessage&quot;: &quot;User: arn:aws:iam::999999999999:user/myUserName&quot; is not authorized to perform: lambda:GetFunction on resource: arn:aws:lambda:us-west-2:999999999999:function:other-acct-function&quot;,
      &quot;requestParameters&quot;: null,
      &quot;responseElements&quot;: null,
      &quot;requestID&quot;: &quot;7aebcd0f-cda1-11e4-aaa2-e356da31e4ff&quot;,
      &quot;eventID&quot;: &quot;e92a3e85-8ecd-4d23-8074-843aabfe89bf&quot;,
      &quot;eventType&quot;: &quot;AwsApiCall&quot;,
      &quot;recipientAccountId&quot;: &quot;999999999999&quot;
    },
    {
      &quot;eventVersion&quot;: &quot;1.03&quot;,
      &quot;userIdentity&quot;: {
        &quot;type&quot;: &quot;IAMUser&quot;,
        &quot;principalId&quot;: &quot;A1B2C3D4E5F6G7EXAMPLE&quot;,
        &quot;arn&quot;: &quot;arn:aws:iam::999999999999:user/myUserName&quot;,
        &quot;accountId&quot;: &quot;999999999999&quot;,
        &quot;accessKeyId&quot;: &quot;AKIAIOSFODNN7EXAMPLE&quot;,
        &quot;userName&quot;: &quot;myUserName&quot;
      },
      &quot;eventTime&quot;: &quot;2015-03-18T19:04:42Z&quot;,
      &quot;eventSource&quot;: &quot;lambda.amazonaws.com&quot;,
      &quot;eventName&quot;: &quot;DeleteFunction&quot;,
      &quot;awsRegion&quot;: &quot;us-east-1&quot;,
      &quot;sourceIPAddress&quot;: &quot;127.0.0.1&quot;,
      &quot;userAgent&quot;: &quot;Python-httplib2/0.8 (gzip)&quot;,
      &quot;requestParameters&quot;: {
        &quot;functionName&quot;: &quot;basic-node-task&quot;
      },
      &quot;responseElements&quot;: null,
      &quot;requestID&quot;: &quot;a2198ecc-cda1-11e4-aaa2-e356da31e4ff&quot;,
      &quot;eventID&quot;: &quot;20b84ce5-730f-482e-b2b2-e8fcc87ceb22&quot;,
      &quot;eventType&quot;: &quot;AwsApiCall&quot;,
      &quot;recipientAccountId&quot;: &quot;999999999999&quot;
    }
  ]
}</code></pre>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>The <code class="code">eventName</code> may include date and version information, such as <code class="code">&quot;GetFunction20150331&quot;</code>, but it is still referring to the same public API.
                        </p>
                     </div>
                     
                     <h2 id="tracking-function-invocations">Using CloudTrail to Track Function Invocations</h2>
                     
                     <p>CloudTrail also logs data events. You can turn on data event logging so that you log
                        an event every time Lambda functions are invoked. This helps you understand what identities
                        are invoking the functions and the frequency of their invocations. This feature is
                        not enabled by default and incurs additional charges if enabled. You can do this using
                        the AWS CloudTrail console or
                        <a href="API_Invoke.html">Invoke</a> CLI operation. For more information on this option, see <a href="./awscloudtrail/latest/userguide/logging-management-and-data-events-with-cloudtrail.html" target="_blank">
                           Logging Data and Management Events for Trails</a>.
                     </p>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="tagging.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="lambda-auth-and-access-control.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="AWS Lambda Information in CloudTrail"><a class="pagetoc" href="#service-name-info-in-cloudtrail">AWS Lambda Information in CloudTrail</a></li>
                        <li class="pagetoc" name="Understanding AWS Lambda Log File Entries"><a class="pagetoc" href="#understanding-service-name-entries">Understanding AWS Lambda Log File Entries</a></li>
                        <li class="pagetoc" name="Using CloudTrail to Track Function Invocations"><a class="pagetoc" href="#tracking-function-invocations">Using CloudTrail to Track Function Invocations</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS Lambda';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>