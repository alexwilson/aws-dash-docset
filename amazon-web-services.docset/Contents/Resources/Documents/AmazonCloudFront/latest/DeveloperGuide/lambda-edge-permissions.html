<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Setting IAM Permissions and Roles for Lambda@Edge - Amazon CloudFront</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="lambda-at-the-edge.html" title="Using CloudFront with Lambda@Edge">
      <link rel="prev" href="lambda-edge-how-it-works.html" title="Overview of Creating and Using 
		Lambda@Edge Functions">
      <link rel="next" href="lambda-edge-create-function.html" title="Writing and Creating a Lambda@Edge Function">
      <meta name="description" content="To configure Lambda@Edge, you need IAM permissions and an IAM execution role:">
      <meta name="keywords" content="Amazon CloudFront,CloudFront,cache,distribution,edge,geo,HTTP,HTTPS,media,origin,RTMP,streaming">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon CloudFront">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/lambda-edge-permissions.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudfront">Amazon CloudFront</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="lambda-at-the-edge.html">Using CloudFront with Lambda@Edge</a> &#xBB; <span class="breadcrumb">Setting IAM Permissions and Roles for Lambda@Edge</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="lambda-edge-permissions">Setting IAM Permissions and Roles for Lambda@Edge</h1>
                     <p>To configure Lambda@Edge, you need IAM permissions and an IAM execution role:</p>
                     <div class="variablelist">
                        			
                        			
                        			
                        		
                        <dl>
                           				
                           <dt><b><span class="term">IAM Permissions Required to Associate Lambda Functions with CloudFront Distributions</span></b></dt>
                           				
                           <dd>
                              <p>In addition to the IAM permissions that you need to use AWS Lambda, the IAM user needs
                                 the following IAM permissions to 
                                 					associate Lambda functions with CloudFront distributions.
                              </p>
                              					
                              <div class="itemizedlist">
                                 						
                                 						
                                 						
                                 						
                                 					
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p><code class="code">lambda:GetFunction</code></p>
                                       							
                                       <p>For the resource, specify the ARN of the function version that you want to execute
                                          when a CloudFront event occurs, 
                                          								as shown in the following example:
                                       </p>
                                       							
                                       <p><code class="code">arn:aws:lambda:us-east-1:123456789012:function:TestFunction:2</code></p>
                                       						
                                    </li>
                                    <li class="listitem">
                                       <p><code class="code">lambda:EnableReplication*</code></p>
                                       							
                                       <p>For the resource, specify the ARN of the function version that you want to execute
                                          when a CloudFront event occurs, 
                                          								as shown in the following example:
                                       </p>
                                       							
                                       <p><code class="code">arn:aws:lambda:us-east-1:123456789012:function:TestFunction:2</code></p>
                                       						
                                    </li>
                                    <li class="listitem">
                                       <p><code class="code">iam:CreateServiceLinkedRole</code></p>
                                       							
                                       <p>Used to create a service linked role used by Lambda@Edge to replicate Lambda functions
                                          in CloudFront. After this role 
                                          								has been created by the first distribution you use with Lambda@Edge, you do
                                          not need
                                          								to add permission to other distributions you use with Lambda@Edge. 
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p><code class="code">cloudfront:UpdateDistribution</code> or <code class="code">cloudfront:CreateDistribution</code></p>
                                       							
                                       <p>Choose <code class="code">cloudfront:UpdateDistribution</code> to update a distribution or 
                                          								<code class="code">cloudfront:CreateDistribution</code> to create a distribution.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              					
                              <p>For more information, see the following documentation:</p>
                              					
                              <div class="itemizedlist">
                                 						
                                 						
                                 					
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p><a href="auth-and-access-control.html">Authentication and Access Control for CloudFront</a> in this guide.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p><a href="./lambda/latest/dg/auth-and-access-control.html" target="_blank">Authentication and Access Control for AWS Lambda</a> in the 
                                          							<em>AWS Lambda Developer Guide</em></p>
                                    </li>
                                 </ul>
                              </div>
                              				
                           </dd>
                           			
                           				
                           <dt><b><span class="term">Execution Role</span></b></dt>
                           				
                           <dd>
                              <p>You must create an IAM role that can be assumed by the service principals <code class="code">lambda.amazonaws.com</code> and 
                                 					<code class="code">edgelambda.amazonaws.com</code>. This role is assumed by the service principals when they execute your function.
                                 
                                 					For more information, see 
                                 					<a href="./IAM/latest/UserGuide/access_policies_job-functions.html#access_policies_job-functions_create-policies" target="_blank">Creating the Roles and 
                                    						Attaching the Policies (Console)</a> in the topic &quot;AWS Managed Policies for Job Functions&quot; in the 
                                 					<em>IAM User Guide</em>.
                              </p>
                              					
                              <p>You add this role under the <b>Trust Relationship</b> tab in IAM (do not add it under the 
                                 						<b>Permissions</b> tab).
                              </p>
                              					
                              <p>Here&apos;s an example role trust policy:</p>
                              					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
   &quot;Version&quot;: &quot;2012-10-17&quot;,
   &quot;Statement&quot;: [
      {
         &quot;Effect&quot;: &quot;Allow&quot;,
         &quot;Principal&quot;: {
            &quot;Service&quot;: [
               &quot;lambda.amazonaws.com&quot;,
               &quot;edgelambda.amazonaws.com&quot;
            ]
         },
         &quot;Action&quot;: &quot;sts:AssumeRole&quot;
      }
   ]
}</code></pre>
                              					
                              					<p>For information about the permissions that you need to grant to the execution role,
                                 see 
                                 						<a href="./lambda/latest/dg/intro-permission-model.html#lambda-intro-execution-role" target="_blank">Manage Permissions: Using an IAM Role (Execution Role)</a> 
                                 						in the <em>AWS Lambda Developer Guide</em>. Note the following:
                              </p>
                              					
                              <div class="itemizedlist">
                                 						
                                 						
                                 					
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p>By default, whenever a CloudFront event triggers a Lambda function, data is written
                                          to CloudWatch Logs. If you want to 
                                          							use these logs, the execution role needs permission to write data to CloudWatch
                                          Logs. You can use the predefined 
                                          							AWSLambdaBasicExecutionRole to grant permission to the execution role.
                                       </p>
                                       							
                                       <p>For more information about CloudWatch Logs, see 
                                          								<a href="lambda-cloudwatch-metrics-logging.html">CloudWatch Metrics and CloudWatch Logs for Lambda Functions</a>.
                                          								
                                       </p>
                                       						
                                    </li>
                                    <li class="listitem">
                                       <p>If your Lambda function code accesses other AWS resources, such as reading an object
                                          from an S3 bucket, 
                                          							the execution role needs permission to perform that operation. 
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              				
                           </dd>
                           			
                           				
                           <dt><b><span class="term">AWSServiceRoleForLambdaReplicator Role</span></b></dt>
                           				
                           <dd>
                              					
                              <p>When you first create a trigger, a role named AWSServiceRoleForLambdaReplicator is
                                 automatically created to allow Lambda 
                                 						to replicate Lambda@Edge functions to AWS Regions. This role is required to
                                 use Lambda@Edge. The ARN for the AWSServiceRoleForLambdaReplicator 
                                 						role looks like this:
                              </p>
                              					
                              <p><code class="code">arn:aws:iam::123456789012:role/aws-service-role/replicator.lambda.amazonaws.com/AWSServiceRoleForLambdaReplicator</code></p>
                              				
                           </dd>
                           			
                        </dl>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="lambda-edge-how-it-works.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="lambda-edge-create-function.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper"></div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon CloudFront';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>