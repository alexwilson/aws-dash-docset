<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Using an Origin Access Identity to Restrict Access to Your Amazon S3 Content - Amazon CloudFront</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="PrivateContent.html" title="Serving Private Content through CloudFront">
      <link rel="prev" href="private-content-task-list.html" title="Task List: Serving Private Content">
      <link rel="next" href="private-content-trusted-signers.html" title="Specifying the AWS Accounts That Can Create Signed URLs and Signed Cookies (Trusted Signers)">
      <meta name="description" content="Restrict access to your Amazon S3 content by creating and using an origin access identity.">
      <meta name="keywords" content="Amazon CloudFront,CloudFront,cache,distribution,edge,geo,HTTP,HTTPS,media,origin,RTMP,streaming">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon CloudFront">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-restricting-access-to-s3.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudfront">Amazon CloudFront</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="PrivateContent.html">Serving Private Content through CloudFront</a> &#xBB; <span class="breadcrumb">Using an Origin Access Identity to Restrict Access to Your Amazon S3 Content</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="private-content-restricting-access-to-s3">Using an Origin Access Identity to Restrict Access to Your Amazon S3 Content</h1>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#private-content-creating-oai">Creating a CloudFront Origin Access Identity and Adding it to Your Distribution</a></li>
                           <li><a href="#private-content-granting-permissions-to-oai">Granting the 
                                 			Origin Access Identity Permission to Read Objects in Your Amazon S3 Bucket</a></li>
                           <li><a href="#private-content-origin-access-identity-signature-version-4">Using an Origin Access Identity in Amazon S3 Regions that 
                                 					Support Only Signature Version 4 Authentication</a></li>
                        </ul>
                     </div>
                     <p>Typically, if you&apos;re using an Amazon S3 bucket as the origin for a CloudFront distribution,
                        you grant everyone permission to read the objects 
                        			in your bucket. This allows anyone to access your objects either through CloudFront
                        or using the Amazon S3 URL. CloudFront doesn&apos;t expose Amazon S3 URLs, but your 
                        			users might have those URLs if your application serves any objects directly from
                        Amazon S3 or if anyone gives out direct links to 
                        			specific objects in Amazon S3.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>You can also restrict access to content on a custom origin by using custom headers.
                           For more information, see 
                           				<a href="forward-custom-headers.html#forward-custom-headers-restrict-access">Using Custom Headers to Restrict Access to Your Content on a Custom Origin</a>.
                        </p>
                     </div>
                     <p>If you want to use CloudFront signed URLs or signed cookies to provide access to objects
                        in your Amazon S3 bucket, you probably also want to 
                        			prevent users from accessing your Amazon S3 objects using Amazon S3 URLs. If users
                        access your objects directly in Amazon S3, they bypass the controls 
                        			provided by CloudFront signed URLs or signed cookies, for example, control over
                        the date and time that a user can no longer access your content 
                        			and control over which IP addresses can be used to access content. In addition,
                        if users access objects both through CloudFront and directly by using Amazon S3
                        			URLs, CloudFront access logs are less useful because they&apos;re incomplete.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>To create origin access identities, you must use the CloudFront console or CloudFront
                           API version 2009-09-09 or later.
                        </p>
                     </div>
                     <p>To ensure that your users access your objects using only CloudFront URLs, regardless
                        of whether the URLs are signed, perform the following tasks:
                     </p>
                     <ol>
                        <li>
                           				
                           <p>Create an origin access identity, which is a special CloudFront user, and associate
                              the origin access identity with your distribution. 
                              					(For web distributions, you associate the origin access identity with origins,
                              so you can secure all or just some of your Amazon S3 
                              					content.) You can also create an origin access identity and add it to your distribution
                              when you create the distribution. For more information, 
                              					see <a href="private-content-restricting-access-to-s3.html#private-content-creating-oai">Creating a CloudFront Origin Access Identity and Adding it to Your Distribution</a>.
                           </p>
                           			
                        </li>
                        <li>
                           				
                           <p>Change the permissions either on your Amazon S3 bucket or on the objects in your bucket
                              so only the origin access identity has read permission 
                              					(or read and download permission). When your users access your Amazon S3 objects
                              through CloudFront, the CloudFront origin access identity gets the objects 
                              					on behalf of your users. If your users request objects directly by using Amazon
                              S3 URLs, they&apos;re denied access. The origin access identity 
                              					has permission to access objects in your Amazon S3 bucket, but users don&apos;t. For
                              more information, see 
                              					<a href="private-content-restricting-access-to-s3.html#private-content-granting-permissions-to-oai">Granting the 
                                 			Origin Access Identity Permission to Read Objects in Your Amazon S3 Bucket</a>.
                           </p>
                           			
                        </li>
                     </ol>
                     <p>For detailed information about setting up a private Amazon S3 bucket to use with CloudFront,
                        see <a href="http://improve.dk/how-to-set-up-and-serve-private-content-using-s3/" target="_blank">
                           			How to Set Up and Serve Private Content Using S3 and Amazon CloudFront</a>.
                     </p>
                     <h2 id="private-content-creating-oai">Creating a CloudFront Origin Access Identity and Adding it to Your Distribution</h2>
                     			
                     			
                     <p>An AWS account can have up to 100 CloudFront origin access identities. However, you
                        can add an origin access identity to as many distributions 
                        				as you want, so one origin access identity is usually sufficient. 
                     </p>
                     			
                     <p>If you didn&apos;t create an origin access identity and add it to your distribution when
                        you created the distribution, you can create and 
                        				add one now using either the CloudFront console or the CloudFront API:
                     </p>
                     			
                     <div class="itemizedlist">
                        				
                        				
                        			
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              					
                              <p><b>If you&apos;re using the CloudFront console</b> &#x2013; You can create an origin access identity and 
                                 						add it to your distribution at the same time. For more information, see 
                                 						<a href="private-content-restricting-access-to-s3.html#private-content-creating-oai-console">Creating an Origin Access Identity and Adding it to Your Distribution 
                                    					Using the CloudFront Console</a>.
                              </p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p><b>If you&apos;re using the CloudFront API</b> &#x2013; You create an origin access identity and then you add it to 
                                 						your distribution. Perform the procedure in each of the following topics:
                              </p>
                              					
                              <div class="itemizedlist">
                                 						
                                 						
                                 					
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       							
                                       <p><a href="private-content-restricting-access-to-s3.html#private-content-creating-oai-api">Creating an Origin Access Identity Using the CloudFront API</a></p>
                                       						
                                    </li>
                                    <li class="listitem">
                                       							
                                       <p><a href="private-content-restricting-access-to-s3.html#private-content-adding-oai-api">Adding an Origin Access Identity to Your Distribution Using the CloudFront API</a></p>
                                       						
                                    </li>
                                 </ul>
                              </div>
                              				
                           </li>
                        </ul>
                     </div>
                     
                     			
                     <h3 id="private-content-creating-oai-console">Creating an Origin Access Identity and Adding it to Your Distribution 
                        					Using the CloudFront Console
                     </h3>
                     				
                     				
                     <p>If you didn&apos;t create an origin access identity when you created your distribution,
                        perform the following procedure. 
                     </p>
                     				<a id="private-content-creating-oai-console-procedure"></a><p class="title"><b>To create a CloudFront origin access identity using the CloudFront console</b></p>
                     <ol>
                        <li>
                           <p>Sign in to the AWS Management Console and open the CloudFront console at
                              <a href="https://console.aws.amazon.com/cloudfront/" target="_blank">https://console.aws.amazon.com/cloudfront/</a>.
                           </p>
                        </li>
                        <li>
                           						
                           <p>Click the ID of the distribution that you want to add an origin access identity to.</p>
                           					
                        </li>
                        <li>
                           						
                           <p>Change to edit mode:</p>
                           						
                           <div class="itemizedlist">
                              							
                              							
                              						
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    								
                                    <p><b>Web distributions</b> &#x2013; Click the <b>Origins</b> tab, select the origin 
                                       									that you want to edit, and click <b>Edit</b>. You can only create an origin access identity for origins for which 
                                       									<b>Origin Type</b> is <b>S3 Origin</b>.
                                    </p>
                                    							
                                 </li>
                                 <li class="listitem">
                                    								
                                    <p><b>RTMP distributions</b> &#x2013; Click <b>Edit</b>.
                                    </p>
                                    							
                                 </li>
                              </ul>
                           </div>
                           					
                        </li>
                        <li>
                           						
                           <p>For <b>Restrict Bucket Access</b>, click <b>Yes</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>If you already have an origin access identity that you want to use, click <b>Use an Existing Identity</b>. 
                              							Then select the identity in the <b>Your Identities</b> list.
                           </p>
                           						
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>If you already have an origin access identity, we recommend that you reuse it to simplify
                                 maintenance. 
                              </p>
                           </div>
                           						
                           <p>If you want to create an identity, click <b>Create a New Identity</b>. Then enter a description 
                              							for the identity in the <b>Comment</b> field.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>If you want CloudFront to automatically give the origin access identity permission
                              to read the objects in the Amazon S3 bucket 
                              							specified in <b>Origin Domain Name</b>, click <b>Yes, Update Bucket Policy</b>.
                           </p>
                           						
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>If you click <b>Yes, Update Bucket Policy</b>, CloudFront updates bucket permissions to grant the specified 
                                 								origin access identity the permission to read objects in your bucket. However,
                                 CloudFront does not remove existing permissions. 
                                 								If users currently have permission to access the objects in your bucket using
                                 Amazon S3 URLs, they will still have that permission 
                                 								after CloudFront updates your bucket permissions. To view or remove existing
                                 bucket permissions, use a method provided by Amazon S3. 
                                 								For more information, see 
                                 								<a href="private-content-restricting-access-to-s3.html#private-content-granting-permissions-to-oai">Granting the 
                                    			Origin Access Identity Permission to Read Objects in Your Amazon S3 Bucket</a>.
                              </p>
                           </div>
                           						
                           <p>If you want to manually update permissions on your Amazon S3 bucket, click <b>No, I Will Update Permissions</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>Click <b>Yes, Edit</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>If you&apos;re adding an origin access identity to a web distribution and you have more
                              than one origin, repeat 
                              							step 3 through step 7 as applicable.
                           </p>
                           					
                        </li>
                     </ol>
                     			
                     
                     			
                     <h3 id="private-content-creating-oai-api">Creating an Origin Access Identity Using the CloudFront API</h3>
                     				
                     				
                     <p>If you already have an origin access identity and you want to reuse it instead of
                        creating another one, skip to 
                        					<a href="private-content-restricting-access-to-s3.html#private-content-adding-oai-api">Adding an Origin Access Identity to Your Distribution Using the CloudFront API</a>.
                     </p>
                     				
                     <p>To create a CloudFront origin access identity using the CloudFront API, use the <code class="code">POST Origin Access Identity</code> API action. 
                        					The response includes an <code class="code">Id</code> and an <code class="code">S3CanonicalUserId</code> for the new origin access identity. 
                        					Make note of these values because you will use them later in the process:
                     </p>
                     				
                     <div class="itemizedlist">
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p><b>Id element</b> &#x2013; You use the value of the <code class="code">Id</code> element to associate 
                                 							an origin access ID with your distribution.
                              </p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p><b>S3CanonicalUserId element</b> &#x2013; You use the value of the <code class="code">S3CanonicalUserId</code> 
                                 							element when you give CloudFront access to your Amazon S3 bucket or objects.
                                 
                              </p>
                              					
                           </li>
                        </ul>
                     </div>
                     				
                     <p>For more information about the <code class="code">POST Origin Access Identity API</code> action, go to 
                        					<a href="./cloudfront/latest/APIReference/CreateOAI.html" target="_blank">POST Origin Access Identity</a> in the <em>Amazon CloudFront API Reference</em>. 
                        					For a list of other actions that you can perform on origin access identities,
                        go to 
                        					<a href="./cloudfront/latest/APIReference/Actions_OAI.html" target="_blank">Actions on Origin Access Identities</a>, also in the <em>Amazon CloudFront API Reference</em>.
                     </p>
                     			
                     
                     			
                     <h3 id="private-content-adding-oai-api">Adding an Origin Access Identity to Your Distribution Using the CloudFront API</h3>
                     				
                     				
                     <p>You can use the CloudFront API to add a CloudFront origin access identity to an existing
                        distribution or to create a new distribution 
                        					that includes an origin access identity. In either case, include an <code class="code">OriginAccessIdentity</code> element. This element contains 
                        					the value of the <code class="code">Id</code> element that the <code class="code">POST Origin Access Identity</code> API action returned when you created the 
                        					origin access identity. For web distributions, add the <code class="code">OriginAccessIdentity</code> element to one or more origins. 
                        					For RTMP distributions, add the <code class="code">OriginAccessIdentity</code> element to the distribution.
                     </p>
                     				
                     <p>See the applicable topic in the <em>Amazon CloudFront API Reference</em>:
                     </p> 
                     				
                     <div class="itemizedlist">
                        					
                        					
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p><b>Create a new web distribution</b> &#x2013; 
                                 							<a href="./cloudfront/latest/APIReference/CreateDistribution.html" target="_blank">POST Distribution</a></p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p><b>Update an existing web distribution</b> &#x2013; 
                                 							<a href="./cloudfront/latest/APIReference/PutConfig.html" target="_blank">PUT Distribution Config</a></p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p><b>Create a new RTMP distribution</b> &#x2013; 
                                 							<a href="./cloudfront/latest/APIReference/CreateStreamingDistribution.html" target="_blank">POST Streaming Distribution</a></p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p><b>Update an existing RTMP distribution</b> &#x2013; 
                                 							<a href="./cloudfront/latest/APIReference/PutStreamingDistConfig.html" target="_blank">PUT Streaming Distribution Config</a></p>
                              					
                           </li>
                        </ul>
                     </div>
                     			
                     		
                     <h2 id="private-content-granting-permissions-to-oai">Granting the 
                        			Origin Access Identity Permission to Read Objects in Your Amazon S3 Bucket
                     </h2>
                     			
                     
                     			
                     <p>When you create or update a distribution, you can add an origin access identity and
                        automatically update the bucket policy 
                        				to give the origin access identity permission to access your bucket. Alternatively,
                        you can choose to manually change the 
                        				bucket policy or change ACLs, which control permissions on individual objects
                        in your bucket.
                     </p>
                     			
                     <p>Whichever method you use, you should still review the bucket policy for your bucket
                        and review the permissions on your objects 
                        				to ensure that:
                     </p>
                     			
                     <div class="itemizedlist">
                        				
                        				
                        			
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>CloudFront can access objects in the bucket on behalf of users who are requesting
                                 your objects through CloudFront.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>Users can&apos;t use Amazon S3 URLs to access your objects.</p>
                           </li>
                        </ul>
                     </div>
                     
                     			
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>If you configure CloudFront to accept and forward to Amazon S3 all of the HTTP methods
                           that CloudFront supports, create a CloudFront 
                           					origin access identity to restrict access to your Amazon S3 content, and grant
                           the origin access identity the applicable permissions. 
                           					For example, if you configure CloudFront to accept and forward these methods
                           because you want to use the <code class="code">PUT</code> method, 
                           					you must configure Amazon S3 bucket policies or ACLs to handle <code class="code">DELETE</code> requests appropriately so users can&apos;t delete resources 
                           					that you don&apos;t want them to. 
                        </p>
                     </div>
                     
                     			
                     <p>Note the following:</p>
                     			
                     <div class="itemizedlist">
                        				
                        				
                        				
                        				
                        			
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              					
                              <p>You might find it easier to update Amazon S3 bucket policies than ACLs because you
                                 can add objects to the bucket without 
                                 						updating permissions. However, ACLs give you more fine-grained control because
                                 you&apos;re granting permissions on each object.
                              </p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p>By default, your Amazon S3 bucket and all of the objects in it are private&#x2014;only the
                                 AWS account that created the bucket 
                                 						has permission to read or write the objects in it.
                              </p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p>If you&apos;re adding an origin access identity to an existing distribution, modify the
                                 bucket policy or any object ACLs 
                                 						as appropriate to ensure that the objects are not publicly available.
                              </p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p>Grant additional permissions to one or more secure administrator accounts so you can
                                 continue to update the contents 
                                 						of the Amazon S3 bucket.
                              </p>
                              				
                           </li>
                        </ul>
                     </div>
                     			
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>There might be a brief delay between when you save your changes to Amazon S3 permissions
                           and when the changes take effect. 
                           					Until the changes take effect, you can get permission-denied errors when you
                           try to access objects in your bucket.
                        </p>
                     </div>
                     
                     			
                     <h3 id="private-content-updating-s3-bucket-policies">Updating Amazon S3 
                        				Bucket Policies
                     </h3>
                     				
                     				
                     <p>You can update the Amazon S3 bucket policy using either the AWS Management Console
                        or the Amazon S3 API:
                     </p>
                     				
                     <div class="itemizedlist">
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p>Grant the CloudFront origin access identity the applicable permissions on the bucket.</p>
                              						
                              <p>To specify an origin access identity, use the value of <b>Amazon S3 Canonical User ID</b> on the 
                                 							<b>Origin Access Identity</b> page in the CloudFront console. If you&apos;re using the CloudFront API, use the value
                                 of the 
                                 							<code class="code">S3CanonicalUserId</code> element that was returned when you created the origin access identity.
                              </p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p>Deny access to anyone that you don&apos;t want to have access using Amazon S3 URLs.</p>
                              					
                           </li>
                        </ul>
                     </div>
                     				
                     <p>For more information, go to <a href="./AmazonS3/latest/dev/UsingBucketPolicies.html" target="_blank">Using Bucket Policies and User Policies</a> 
                        					in the <em>Amazon Simple Storage Service Developer Guide</em>.
                     </p>
                     				
                     <p>For an example, see &quot;Granting Permission to an Amazon CloudFront Origin Identity&quot;
                        in the topic 
                        						<a href="./AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html" target="_blank">Bucket Policy Examples</a>, also in the 
                        					<em>Amazon Simple Storage Service Developer Guide</em>.
                     </p>
                     			
                     
                     			
                     				
                     <h3 id="private-content-updating-s3-acls">Updating Amazon S3 ACLs</h3>
                     				
                     				
                     <p>Using either the AWS Management Console or the Amazon S3 API, change the Amazon S3
                        ACL:
                     </p>
                     				
                     <div class="itemizedlist">
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p>Grant the CloudFront origin access identity the applicable permissions on each object
                                 that the CloudFront distribution serves.
                              </p>
                              						
                              <p>To specify an origin access identity, use the value of <b>Amazon S3 Canonical User ID</b> on the 
                                 							<b>Origin Access Identity</b> page in the CloudFront console. If you&apos;re using the CloudFront API, use the value
                                 of the 
                                 							<code class="code">S3CanonicalUserId</code> element that was returned when you created the origin access identity.
                              </p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p>Deny access to anyone that you don&apos;t want to have access using Amazon S3 URLs.</p>
                              					
                           </li>
                        </ul>
                     </div>
                     				
                     <p>If another AWS account uploads objects to your bucket, that account is the owner of
                        those objects. Bucket policies only apply to 
                        					objects that the bucket owner owns. This means that if another account uploads
                        objects to your bucket, the bucket policy that you 
                        					created for your OAI will not be evaluated for those objects.
                     </p>
                     				
                     <p>For more information, see <a href="./AmazonS3/latest/dev/S3_ACLs_UsingACLs.html" target="_blank">Managing Access with ACLs</a> in the 
                        					<em>Amazon Simple Storage Service Developer Guide</em>.
                     </p>
                     				
                     <p>You can also change the ACLs programmatically by using one of the AWS SDKs. For an
                        example, see
                        					the downloadable sample code in <a href="CreateSignatureInCSharp.html">Create a URL Signature Using C# and the .NET Framework</a>.
                     </p>
                     			
                     
                     		
                     			
                     <h2 id="private-content-origin-access-identity-signature-version-4">Using an Origin Access Identity in Amazon S3 Regions that 
                        					Support Only Signature Version 4 Authentication
                     </h2>
                     			
                     			
                     <p>Newer Amazon S3 regions require that you use signature version 4 for authenticated
                        requests. (For the versions of signature supported 
                        				in each Amazon S3 region, see <a href="./general/latest/gr/rande.html#s3_region" target="_blank">Amazon Simple Storage Service (S3)</a> in the topic 
                        				<a href="./general/latest/gr/rande.html" target="_blank">Regions and Endpoints</a> in the <em>Amazon Web Services General Reference</em>.) 
                        				However, when you create an origin access identity and add it to a CloudFront
                        distribution, CloudFront typically uses signature version 2 for 
                        				authentication when it requests objects in your Amazon S3 bucket. If you&apos;re using
                        an origin access identity and if your bucket is in 
                        				one of the regions that requires signature version 4 for authentication, note
                        the following:
                     </p>
                     			
                     <div class="itemizedlist">
                        				
                        				
                        				
                        			
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              					
                              <p><code class="code">DELETE</code>, <code class="code">GET</code>, <code class="code">HEAD</code>, <code class="code">OPTIONS</code>, and
                                 						<code class="code">PATCH</code> requests are supported without qualifications.
                              </p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p>If you want to submit <code class="code">PUT</code> requests to CloudFront to upload objects to your Amazon S3 bucket, you must add an
                                 
                                 						<code class="code">x-amz-content-sha256</code> header to the request, and the header value must contain a SHA256 hash of the 
                                 						body of the request. For more information, see the documentation about the <code class="code">x-amz-content-sha256</code> header on 
                                 						the <a href="./AmazonS3/latest/API/RESTCommonRequestHeaders.html" target="_blank">Common Request Headers</a> page in the 
                                 						<em>Amazon Simple Storage Service API Reference</em>.
                              </p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p><code class="code">POST</code> requests are not supported.
                              </p>
                              				
                           </li>
                        </ul>
                     </div>
                     		
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="private-content-task-list.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="private-content-trusted-signers.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Creating a CloudFront Origin Access Identity and Adding it to Your Distribution"><a class="pagetoc" href="#private-content-creating-oai">Creating a CloudFront Origin Access Identity and Adding it to Your Distribution</a></li>
                        <li class="pagetoc" name="Granting the 
			Origin Access Identity Permission to Read Objects in Your Amazon S3 Bucket"><a class="pagetoc" href="#private-content-granting-permissions-to-oai">Granting the 
                              			Origin Access Identity Permission to Read Objects in Your Amazon S3 Bucket</a></li>
                        <li class="pagetoc" name="Using an Origin Access Identity in Amazon S3 Regions that 
					Support Only Signature Version 4 Authentication"><a class="pagetoc" href="#private-content-origin-access-identity-signature-version-4">Using an Origin Access Identity in Amazon S3 Regions that 
                              					Support Only Signature Version 4 Authentication</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon CloudFront';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>