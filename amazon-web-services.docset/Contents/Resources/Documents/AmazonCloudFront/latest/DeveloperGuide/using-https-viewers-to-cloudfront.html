<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>
         		Requiring HTTPS for Communication Between Viewers and CloudFront - Amazon CloudFront
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="using-https.html" title="Using HTTPS with CloudFront">
      <link rel="prev" href="using-https.html" title="Using HTTPS with CloudFront">
      <link rel="next" href="using-https-cloudfront-to-custom-origin.html" title="Requiring HTTPS for Communication Between CloudFront and Your Custom Origin">
      <meta name="description" content="You can configure one or more cache behaviors in your CloudFront distribution to require HTTPS for communication between viewers and CloudFront. You also can configure one or more cache behaviors to allow both HTTP and HTTPS, so that CloudFront requires HTTPS for some objects but not for others. The configuration steps depend on which domain name you&apos;re using in object URLs:">
      <meta name="keywords" content="Amazon CloudFront,CloudFront,cache,distribution,edge,geo,HTTP,HTTPS,media,origin,RTMP,streaming">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon CloudFront">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/using-https-viewers-to-cloudfront.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="http://aws.amazon.com/documentation">AWS Documentation</a> &#xBB; <a href="http://aws.amazon.com/documentation/cloudfront">Amazon CloudFront</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="using-https.html">Using HTTPS with CloudFront</a> &#xBB; <span class="breadcrumb">
                                    		Requiring HTTPS for Communication Between Viewers and CloudFront</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div></div>
                     <h1 class="topictitle" id="using-https-viewers-to-cloudfront">
                        		Requiring HTTPS for Communication Between Viewers and CloudFront
                     </h1>
                     <p>You can configure one or more cache behaviors in your CloudFront distribution to require
                        HTTPS for communication between viewers and CloudFront. 
                        			You also can configure one or more cache behaviors to allow both HTTP and HTTPS,
                        so that CloudFront requires HTTPS for some objects but not for others. 
                        			The configuration steps depend on which domain name you&apos;re using in object URLs:
                     </p>
                     <div class="itemizedlist">
                        			
                        			
                        		
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              				
                              <p>If you&apos;re using the domain name that CloudFront assigned to your distribution, such
                                 as d111111abcdef8.cloudfront.net, you change the 
                                 					<b>Viewer Protocol Policy</b> setting for one or more cache behaviors to require HTTPS communication. In that configuration,
                                 
                                 					CloudFront provides the SSL/TLS certificate. 
                              </p>
                              				
                              <p>To change the value of <b>Viewer Protocol Policy</b> by using the CloudFront console, see the procedure later in this section.
                              </p>
                              				
                              <p>For information about how to use the CloudFront API to change the value of the <code class="code">ViewerProtocolPolicy</code> element, see 
                                 					<a href="./cloudfront/latest/APIReference/PutConfig.html" target="_blank">PUT Distribution Config</a> in the <em>Amazon CloudFront API Reference</em>.
                              </p>
                              			
                           </li>
                           <li class="listitem">
                              				
                              <p>If you&apos;re using your own domain name, such as example.com, you need to change several
                                 CloudFront settings. You also need to use an 
                                 					SSL/TLS certificate provided by AWS Certificate Manager (ACM), import a certificate
                                 from a third-party certificate authority into ACM or the IAM 
                                 					certificate store, or create and import a self-signed certificate. For more information,
                                 
                                 					see <a href="using-https-alternate-domain-names.html">Using Alternate Domain Names and HTTPS</a>.
                              </p>
                              			
                           </li>
                        </ul>
                     </div>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>If you want to ensure that the objects that viewers get from CloudFront were encrypted
                           when CloudFront got them from your origin, always use 
                           				HTTPS between CloudFront and your origin. If you recently changed from HTTP to
                           HTTPS between CloudFront and your origin, we recommend that you 
                           				invalidate objects in CloudFront edge locations. CloudFront will return an object
                           to a viewer regardless of whether the protocol used by the viewer 
                           				(HTTP or HTTPS) matches the protocol that CloudFront used to get the object. For
                           more information about removing or replacing objects in a 
                           				distribution, see <a href="AddRemoveReplaceObjects.html">Adding, Removing, or Replacing Objects in a Distribution</a>.
                        </p>
                     </div>
                     <p>To require HTTPS between viewers and CloudFront for one or more cache behaviors, perform
                        the following procedure.
                     </p><a id="using-https-viewers-to-cloudfront-procedure"></a><p class="title"><b>To configure CloudFront to require HTTPS between viewers and CloudFront</b></p>
                     <ol>
                        <li>
                           <p>Sign in to the AWS Management Console and open the CloudFront console at
                              <a href="https://console.aws.amazon.com/cloudfront/" target="_blank">https://console.aws.amazon.com/cloudfront/</a>.
                           </p>
                        </li>
                        <li>
                           				
                           <p>In the top pane of the CloudFront console, choose the ID for the distribution that
                              you want to update.
                           </p>
                           			
                        </li>
                        <li>
                           				
                           <p>On the <b>Behaviors</b> tab, choose the cache behavior that you want to update, and then choose <b>Edit</b>.
                           </p>
                           			
                        </li>
                        <li> 
                           				
                           <p>Specify one of the following values for <b>Viewer Protocol Policy</b>:
                           </p> 
                           				
                           <div class="variablelist"> 
                              					 
                              					 
                              				
                              <dl> 
                                 						
                                 <dt><b><span class="term">Redirect HTTP to HTTPS</span></b></dt> 
                                 						
                                 <dd> 
                                    							
                                    <p>Viewers can use both protocols. HTTP <code class="code">GET</code> and <code class="code">HEAD</code> 
                                       								requests are automatically redirected to HTTPS requests. CloudFront returns
                                       HTTP status 
                                       								code 301 (Moved Permanently) along with the new HTTPS URL. The viewer then
                                       resubmits 
                                       								the request to CloudFront using the HTTPS URL.
                                    </p> 
                                    							
                                    <div class="aws-note">
                                       <p class="aws-note">Important</p>
                                       <p>If you send <code class="code">POST</code>, <code class="code">PUT</code>, <code class="code">DELETE</code>, 
                                          										<code class="code">OPTIONS</code>, or <code class="code">PATCH</code> over HTTP with an HTTP to HTTPS 
                                          									cache behavior and a request protocol version of HTTP 1.1 or above, CloudFront
                                          redirects 
                                          									the request to a HTTPS location with a HTTP status code 307 (Temporary Redirect).
                                          
                                          									This guarantees that the request is sent again to the new location using
                                          the same 
                                          									method and body payload.
                                       </p>
                                       <p>If you send <code class="code">POST</code>, <code class="code">PUT</code>, <code class="code">DELETE</code>, 
                                          										<code class="code">OPTIONS</code>, or <code class="code">PATCH</code> requests over HTTP to HTTPS cache 
                                          									behavior with a request protocol version below HTTP 1.1, CloudFront returns
                                          a HTTP 
                                          									status code 403 (Forbidden).
                                       </p>
                                    </div> 
                                    							
                                    <p>When a viewer makes an HTTP request that is redirected to an HTTPS request, CloudFront
                                       
                                       								charges for both requests. For the HTTP request, the charge is only for the
                                       request 
                                       								and for the headers that CloudFront returns to the viewer. For the HTTPS request,
                                       the 
                                       								charge is for the request, and for the headers and the object that are returned
                                       by 
                                       								your origin.
                                    </p> 
                                    						
                                 </dd> 
                                 					 
                                 						
                                 <dt><b><span class="term">HTTPS Only</span></b></dt> 
                                 						
                                 <dd> 
                                    							
                                    <p>Viewers can access your content only if they&apos;re using HTTPS. If a viewer sends 
                                       								an HTTP request instead of an HTTPS request, CloudFront returns HTTP status
                                       code 403 
                                       								(Forbidden) and does not return the object.
                                    </p> 
                                    						
                                 </dd> 
                                 					
                              </dl>
                           </div> 
                           			
                        </li>
                        <li> 
                           				
                           <p>Choose <b>Yes, Edit</b>.
                           </p> 
                           			
                        </li>
                        <li> 
                           				
                           <p>Repeat steps 3 through 5 for each additional cache behavior that you want to require
                              
                              					HTTPS for between viewers and CloudFront.
                           </p> 
                           			
                        </li>
                        <li> 
                           				
                           <p>Confirm the following before you use the updated configuration in a production 
                              					environment:
                           </p> 
                           				
                           <div class="itemizedlist"> 
                              					 
                              					 
                              					 
                              				
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem"> 
                                    						
                                    <p>The path pattern in each cache behavior applies only to the requests that you want
                                       
                                       							viewers to use HTTPS for.
                                    </p> 
                                    					
                                 </li>
                                 <li class="listitem"> 
                                    						
                                    <p>The cache behaviors are listed in the order that you want CloudFront to evaluate them
                                       
                                       							in. For more information, see <a href="distribution-web-values-specify.html#DownloadDistValuesPathPattern">Path Pattern</a>.
                                    </p> 
                                    					
                                 </li>
                                 <li class="listitem"> 
                                    						
                                    <p>The cache behaviors are routing requests to the correct origins. </p> 
                                    					
                                 </li>
                              </ul>
                           </div> 
                           			
                        </li>
                     </ol>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="using-https.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="using-https-cloudfront-to-custom-origin.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper"></div>
            </div>
         </div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon CloudFront';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>